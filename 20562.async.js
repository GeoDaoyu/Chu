"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[20562],{49945:function(e,t,n){n.d(t,{R:function(){return w},b:function(){return R},r:function(){return E}});var i=n(41044),r=n(27349),o=n(68647),s=n(11005),a=n(55075),l=n(87263),c=n(28262),u=n(7086),d=n(13743),h=n(96541),f=n(37124),p=n(23027),m=n(2013),g=n(13663),v=n(85119),T=n(48857),_=n(18489),S=n(52061),O=n(26723),b=n(75047),A=n(55138),y=n(15150),x=n(64801);const E=1;function R(e){const t=new y.kG,{attributes:n,varyings:R,vertex:w,fragment:C}=t,{applyMarkerOffset:D,draped:I,output:L,capType:P,stippleEnabled:N,falloffEnabled:M,roundJoins:U,wireframe:z,innerColorEnabled:j}=e;C.include(c.e),t.include(s.U,e),t.include(a.q,e),t.include(o.R,e),t.include(u.H,e);const F=D&&!I;F&&(w.uniforms.add(new v.p("markerScale",(e=>e.markerScale))),t.include(l.Q,{space:O.I9.World})),(0,h.Sv)(w,e),w.uniforms.add(new _.C("inverseProjectionMatrix",(e=>e.camera.inverseProjectionMatrix)),new f.$("nearFar",(e=>e.camera.nearFar)),new v.p("miterLimit",(e=>"miter"!==e.join?0:e.miterLimit)),new p.$("viewport",(e=>e.camera.fullViewport))),w.constants.add("LARGE_HALF_FLOAT","float",65500),n.add(S.T.POSITION,"vec3"),n.add(S.T.PREVIOUSDELTA,"vec4"),n.add(S.T.NEXTDELTA,"vec4"),n.add(S.T.LINEPARAMETERS,"vec2"),n.add(S.T.U0,"float"),R.add("vColor","vec4"),R.add("vpos","vec3",{invariant:!0}),R.add("vLineDistance","float"),R.add("vLineWidth","float");const H=N;H&&R.add("vLineSizeInv","float");const B=P===A.R.ROUND,W=N&&B,V=M||W;V&&R.add("vLineDistanceNorm","float"),B&&(R.add("vSegmentSDF","float"),R.add("vReverseSegmentSDF","float")),w.code.add(T.H`vec2 perpendicular(vec2 v) {
return vec2(v.y, -v.x);
}
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),w.code.add(T.H`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),w.code.add(T.H`void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
float vnp = nearFar[0] * 0.99;
if(pos.z > -nearFar[0]) {
if (!isStartVertex) {
if(prev.z < -nearFar[0]) {
pos = mix(prev, pos, interp(vnp, prev, pos));
next = pos;
} else {
pos = vec4(0.0, 0.0, 0.0, 1.0);
}
} else {
if(next.z < -nearFar[0]) {
pos = mix(pos, next, interp(vnp, pos, next));
prev = pos;
} else {
pos = vec4(0.0, 0.0, 0.0, 1.0);
}
}
} else {
if (prev.z > -nearFar[0]) {
prev = mix(pos, prev, interp(vnp, pos, prev));
}
if (next.z > -nearFar[0]) {
next = mix(next, pos, interp(vnp, next, pos));
}
}
forwardViewPosDepth(pos.xyz);
pos = projectAndScale(pos);
next = projectAndScale(next);
prev = projectAndScale(prev);
}`),(0,h.ZI)(w),w.constants.add("aaWidth","float",N?0:1).main.add(T.H`
    // unpack values from vertex type
    bool isStartVertex = abs(abs(lineParameters.y)-3.0) == 1.0;
    vec3 prevPosition = position + previousDelta.xyz * previousDelta.w;
    vec3 nextPosition = position + nextDelta.xyz * nextDelta.w;

    float coverage = 1.0;

    // Check for special value of lineParameters.y which is used by the Renderer when graphics are removed before the
    // VBO is recompacted. If this is the case, then we just project outside of clip space.
    if (lineParameters.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(lineParameters.y) < 3.0;
      float lineSize = getSize();

      if (lineSize < 1.0) {
        coverage = lineSize; // convert sub-pixel coverage to alpha
        lineSize = 1.0;
      }
      lineSize += aaWidth;

      float lineWidth = lineSize * pixelRatio;
      vLineWidth = lineWidth;
      ${H?T.H`vLineSizeInv = 1.0 / lineSize;`:""}

      vec4 pos  = view * vec4(position, 1.0);
      vec4 prev = view * vec4(prevPosition, 1.0);
      vec4 next = view * vec4(nextPosition, 1.0);
  `),F&&w.main.add(T.H`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`),w.main.add(T.H`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`),(N||B)&&w.main.add(T.H`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${B?T.H`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),w.main.add(T.H`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * lineParameters.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = perpendicular(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
float subdivisionFactor = lineParameters.x;
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),U?w.main.add(T.H`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = perpendicular(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = perpendicular(endDir);

        float factor = ${N?T.H`min(1.0, subdivisionFactor * ${T.H.float((E+2)/(E+1))})`:T.H`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(lineParameters.y) * factor * rotationAngle);
      `):w.main.add(T.H`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = perpendicular(joinDisplacementDir);`);const k=P!==A.R.BUTT;return w.main.add(T.H`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = perpendicular(joinDisplacementDir);

      ${k?T.H`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),w.main.add(T.H`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(lineParameters.y) * displacementLen + capDisplacementDir * displacementLen;
    float lineDistNorm = sign(lineParameters.y) * pos.w;

    vLineDistance =  lineWidth * lineDistNorm;
    ${V?T.H`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),B&&w.main.add(T.H`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),N&&(I?w.uniforms.add(new g.z("worldToScreenRatio",(e=>1/e.screenToPCSRatio))):w.main.add(T.H`vec3 segmentCenter = mix((nextPosition + position) * 0.5, (position + prevPosition) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),w.main.add(T.H`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(nextPosition - position, position - prevPosition, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),I?w.main.add(T.H`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = u0 * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):w.main.add(T.H`float startPseudoScreen = mix(u0, u0 - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),w.uniforms.add(new v.p("stipplePatternPixelSize",(e=>(0,a.C)(e)))),w.main.add(T.H`float patternLength = lineSize * stipplePatternPixelSize;
vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);
vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);
if (segmentLengthScreenDouble >= 0.001) {
vec2 stippleDisplacement = pos.xy - segmentOrigin;
float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);
vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
}
vStippleDistanceLimits *= pos.w;
vStippleDistance *= pos.w;
vStippleDistanceLimits = isJoin ?
vStippleDistanceLimits :
isStartVertex ?
vec2(-1e34, vStippleDistanceLimits.y) :
vec2(vStippleDistanceLimits.x, 1e34);`)),w.main.add(T.H`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${z&&!I?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }`),t.fragment.include(r.f5,e),t.include(b.j,e),C.include(d.Y),C.main.add(T.H`discardBySlice(vpos);
discardByTerrainDepth();`),z?C.main.add(T.H`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(B&&C.main.add(T.H`
        float sdf = min(vSegmentSDF, vReverseSegmentSDF);
        vec2 fragmentPosition = vec2(
          min(sdf, 0.0),
          vLineDistance
        ) * gl_FragCoord.w;

        float fragmentRadius = length(fragmentPosition);
        float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
        float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

        if (capCoverage < ${T.H.float(x.e)}) {
          discard;
        }
      `),W?C.main.add(T.H`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${T.H.float(x.e)}, stippleCoverage);
      `):C.main.add(T.H`float stippleAlpha = getStippleAlpha();`),L!==i.H_.ObjectAndLayerIdColor&&C.main.add(T.H`discardByStippleAlpha(stippleAlpha, ${T.H.float(x.e)});`),C.uniforms.add(new m.N("intrinsicColor",(e=>e.color))),C.main.add(T.H`vec4 color = intrinsicColor * vColor;`),j&&(C.uniforms.add(new m.N("innerColor",(e=>e.innerColor??e.color)),new v.p("innerWidth",((e,t)=>e.innerWidth*t.camera.pixelRatio))),C.main.add(T.H`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),C.main.add(T.H`vec4 finalColor = blendStipple(color, stippleAlpha);`),M&&(C.uniforms.add(new v.p("falloff",(e=>e.falloff))),C.main.add(T.H`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`)),N||C.main.add(T.H`float featherStartDistance = max(vLineWidth - 2.0, 0.0);
float value = abs(vLineDistance) * gl_FragCoord.w;
float feather = (value - featherStartDistance) / (vLineWidth - featherStartDistance);
finalColor.a *= 1.0 - clamp(feather, 0.0, 1.0);`)),C.main.add(T.H`outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),t}const w=Object.freeze(Object.defineProperty({__proto__:null,build:R,ribbonlineNumRoundJoinSubdivisions:E},Symbol.toStringTag,{value:"Module"}))},86875:function(e,t,n){function i(){return new Float32Array(3)}function r(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function o(e,t,n){const i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=n,i}function s(){return i()}function a(){return o(1,1,1)}function l(){return o(1,0,0)}function c(){return o(0,1,0)}function u(){return o(0,0,1)}n.d(t,{Ue:function(){return i},al:function(){return o},d9:function(){return r}});const d=s(),h=a(),f=l(),p=c(),m=u();Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:f,UNIT_Y:p,UNIT_Z:m,ZEROS:d,clone:r,create:i,fromValues:o,ones:a,unitX:l,unitY:c,unitZ:u,zeros:s},Symbol.toStringTag,{value:"Module"}))},94290:function(e,t,n){n.d(t,{o:function(){return o}});var i=n(46368),r=n(15592);class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,i.Z7)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(e){this._meterUnitOffset=e,this._renderUnitOffset=0}set offsetElevationInfoUnits(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(e){this._renderUnitOffset+=e}geometryZWithOffset(e,t){const n=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?n:e+n}calculateOffsetRenderUnits(e){let t=this._meterUnitOffset;const n=this.featureExpressionInfoContext;return null!=n&&(t+=(0,r.ht)(n)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}setFromElevationInfo(e){this.mode=e.mode,this.unit=(0,i.lt)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=e.offset??0}updateFeatureExpressionInfoContext(e,t,n){if(null==e)return void(this._featureExpressionInfoContext=null);const i=e?.arcade;i&&null!=t&&null!=n?(this._featureExpressionInfoContext=(0,r.d9)(e),(0,r.aO)(this._featureExpressionInfoContext,(0,r.Tz)(i.modules,t,n))):this._featureExpressionInfoContext=e}static fromElevationInfo(e){const t=new o;return null!=e&&t.setFromElevationInfo(e),t}}},90210:function(e,t,n){n.d(t,{B5:function(){return T},GC:function(){return g},Lm:function(){return O},Xf:function(){return v},bD:function(){return _},lO:function(){return i},qZ:function(){return p},rR:function(){return f},ub:function(){return S},w7:function(){return m}});var i,r,o=n(31865),s=n(10934),a=n(82846),l=n(74238),c=n(30146),u=n(27936),d=n(90494),h=n(52061);function f(e,t,n,i,r,o,s,a,l,u,d){const h=b[d.mode];let f,p,m=0;if((0,c.projectBuffer)(e,t,n,i,l.spatialReference,r,a))return h?.requiresAlignment(d)?(m=h.applyElevationAlignmentBuffer(i,r,o,s,a,l,u,d),f=o,p=s):(f=i,p=r),(0,c.projectBuffer)(f,l.spatialReference,p,o,u.spatialReference,s,a)?m:void 0}function p(e,t,n,i,r){const o=((0,u.f)(e)?e.z:(0,d.Fb)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,d.KO)(t,e,"ground")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case"relative-to-ground":{const s=(0,d.KO)(t,e,"ground")??0,a=n.geometryZWithOffset(o,i);return r.verticalDistanceToGround=a,r.sampledElevation=s,void(r.z=a+s)}case"relative-to-scene":{const s=(0,d.KO)(t,e,"scene")??0,a=n.geometryZWithOffset(o,i);return r.verticalDistanceToGround=a,r.sampledElevation=s,void(r.z=a+s)}case"absolute-height":{const s=n.geometryZWithOffset(o,i),a=(0,d.KO)(t,e,"ground")??0;return r.verticalDistanceToGround=s-a,r.sampledElevation=a,void(r.z=s)}default:return void(r.z=0)}}function m(e,t,n,i){return p(e,t,n,i,y),y.z}function g(e,t,n){return"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?null==t||null==n?e.definedChanged:i.UPDATE:e.onTheGroundChanged}function v(e){return"relative-to-ground"===e||"relative-to-scene"===e}function T(e){return"absolute-height"!==e}function _(e,t,n,i,r){p(t,n,r,i,y),S(e,y.verticalDistanceToGround);const s=y.sampledElevation,a=(0,o.JG)(A,e.transformation);return x[0]=t.x,x[1]=t.y,x[2]=y.z,(0,l.B)(t.spatialReference,x,a,i.spatialReference)?e.transformation=a:console.warn("Could not locate symbol object properly, it might be misplaced"),s}function S(e,t){for(let n=0;n<e.geometries.length;++n){const i=e.geometries[n].getMutableAttribute(h.T.CENTEROFFSETANDDISTANCE);i&&i.data[3]!==t&&(i.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],h.T.CENTEROFFSETANDDISTANCE))}}class O{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}(r=i||(i={}))[r.NONE=0]="NONE",r[r.UPDATE=1]="UPDATE",r[r.RECREATE=2]="RECREATE";const b={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,i,r,o,s,a){const l=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext;t*=3,i*=3;for(let o=0;o<r;++o){const r=e[t],o=e[t+1],s=e[t+2];n[i]=r,n[i+1]=o,n[i+2]=null==c?s+l:l,t+=3,i+=3}return 0},requiresAlignment:function(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,i,r,o){let s=0;const a=o.spatialReference;t*=3,i*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],c=e[t+2],u=o.getElevation(r,l,c,a,"ground")??0;s+=u,n[i]=r,n[i+1]=l,n[i+2]=u,t+=3,i+=3}return s/r},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,i,r,o,s,a){let l=0;const c=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext,d=o.spatialReference;t*=3,i*=3;for(let s=0;s<r;++s){const r=e[t],s=e[t+1],a=e[t+2],h=o.getElevation(r,s,a,d,"ground")??0;l+=h,n[i]=r,n[i+1]=s,n[i+2]=null==u?a+h+c:h+c,t+=3,i+=3}return l/r},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,i,r,o,s,a){let l=0;const c=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext,d=o.spatialReference;t*=3,i*=3;for(let s=0;s<r;++s){const r=e[t],s=e[t+1],a=e[t+2],h=o.getElevation(r,s,a,d,"scene")??0;l+=h,n[i]=r,n[i+1]=s,n[i+2]=null==u?a+h+c:h+c,t+=3,i+=3}return l/r},requiresAlignment:()=>!0}},A=(0,s.Ue)(),y=new O,x=(0,a.Ue)()},15592:function(e,t,n){n.d(t,{O$:function(){return p},Tz:function(){return u},WI:function(){return f},aO:function(){return d},bw:function(){return l},d9:function(){return a},ht:function(){return h},kr:function(){return c}});var i=n(96711),r=n(93568),o=n(74774),s=n(3411);function a(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function l(e){const t=e?.expression;if("string"==typeof t){const e=g(t);if(null!=e)return{cachedResult:e}}return null}async function c(e,t,n,i){const o=e?.expression;if("string"!=typeof o)return null;const a=g(o);if(null!=a)return{cachedResult:a};const l=await(0,s.L)();(0,r.k_)(n);const c=l.arcadeUtils,u=c.createSyntaxTree(o);return c.dependsOnView(u)?(null!=i&&i.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:c.createFunction(u),context:c.createExecContext(null,{sr:t}),modules:l}}}function u(e,t,n){return e.arcadeUtils.createFeature(t.attributes,t.geometry,n)}function d(e,t){if(null!=e&&!m(e)){if(!t||!e.arcade)return void i.Z.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils").errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,o.kB)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function h(e){if(null!=e){if(m(e))return e.cachedResult;const t=e.arcade;let n=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof n&&(e.cachedResult=0,n=0),n}return 0}function f(e,t=!1){let n=e?.featureExpressionInfo;const i=n?.expression;return t||"0"===i||(n=null),n??null}const p={cachedResult:0};function m(e){return null!=e.cachedResult}function g(e){return"0"===e?0:null}},94808:function(e,t,n){var i,r,o;n.d(t,{Lw:function(){return i},al:function(){return o},eZ:function(){return r}}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(i||(i={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(r||(r={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(o||(o={}))},35567:function(e,t,n){n.d(t,{LM:function(){return h},M_:function(){return u},OJ:function(){return a},qO:function(){return l},zA:function(){return d}});var i=n(78560),r=n(65650),o=n(8158),s=n(35928);const a=64,l=a/2,c=l/5,u=a/c,d=.25;function h(e,t){const n=(0,i.aJ)(e,a,l,c),u=new s.X;return u.internalFormat=r.VI.RGBA,u.width=a,u.height=a,u.wrapMode=r.e8.CLAMP_TO_EDGE,new o.x(t,u,n)}},78560:function(e,t,n){n.d(t,{Dn:function(){return h},ER:function(){return c},Rg:function(){return u},aJ:function(){return f},cU:function(){return d},hy:function(){return l},wm:function(){return a}});n(61432);var i=n(64497),r=n(27583),o=n(28751),s=n(65650);const a=128,l=.5,c=(0,r.vV)(l/2,l/2,1-l/2,1-l/2);function u(e){return"cross"===e||"x"===e}function d(e,t=a,n=t*l,i=0){const{data:r,parameters:s}=h(e,t,n,i);return new o.x(r,s)}function h(e,t=a,n=t*l,i=0){return{data:f(e,t,n,i),parameters:{mipmap:!1,wrap:{s:s.e8.CLAMP_TO_EDGE,t:s.e8.CLAMP_TO_EDGE},width:t,height:t,components:4,noUnpackFlip:!0,reloadable:!0}}}function f(e,t=a,n=t*l,i=0){switch(e){case"circle":default:return function(e,t){const n=e/2-.5;return T(e,g(n,n,t/2))}(t,n);case"square":return function(e,t){return p(e,t,!1)}(t,n);case"cross":return function(e,t,n=0){return m(e,t,!1,n)}(t,n,i);case"x":return function(e,t,n=0){return m(e,t,!0,n)}(t,n,i);case"kite":return function(e,t){return p(e,t,!0)}(t,n);case"triangle":return function(e,t){return T(e,v(e/2,t,t/2))}(t,n);case"arrow":return function(e,t){const n=t,i=t/2,r=e/2,o=.8*n,s=g(r,(e-t)/2-o,Math.sqrt(o*o+i*i)),a=v(r,n,i);return T(e,((e,t)=>Math.max(a(e,t),-s(e,t))))}(t,n)}}function p(e,t,n){return n&&(t/=Math.SQRT2),T(e,((i,r)=>{let o=i-.5*e+.25,s=.5*e-r-.75;if(n){const e=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=e}return Math.max(Math.abs(o),Math.abs(s))-.5*t}))}function m(e,t,n,i=0){t-=i,n&&(t*=Math.SQRT2);const r=.5*t;return T(e,((t,o)=>{let s,a=t-.5*e,l=.5*e-o-1;if(n){const e=(a+l)/Math.SQRT2;l=(l-a)/Math.SQRT2,a=e}return a=Math.abs(a),l=Math.abs(l),s=a>l?a>r?Math.sqrt((a-r)*(a-r)+l*l):l:l>r?Math.sqrt(a*a+(l-r)*(l-r)):a,s-=i/2,s}))}function g(e,t,n){return(i,r)=>{const o=i-e,s=r-t;return Math.sqrt(o*o+s*s)-n}}function v(e,t,n){const i=Math.sqrt(t*t+n*n);return(r,o)=>{const s=Math.abs(r-e)-n,a=o-e+t/2+.75,l=(t*s+n*a)/i,c=-a;return Math.max(l,c)}}function T(e,t){const n=new Uint8Array(4*e*e);for(let r=0;r<e;r++)for(let o=0;o<e;o++){const s=o+e*r;let a=t(o,r);a=a/e+.5,(0,i.I)(a,n,4*s)}return n}},11005:function(e,t,n){n.d(t,{U:function(){return c}});var i=n(88489),r=n(9535),o=n(85119),s=n(39163),a=n(48857),l=n(52061);function c(e,t){const{vertex:n,attributes:c}=e;n.uniforms.add(new o.p("intrinsicWidth",(e=>e.width))),t.vvSize?(c.add(l.T.SIZEFEATUREATTRIBUTE,"float"),n.uniforms.add(new r.J("vvSizeMinSize",(e=>e.vvSize.minSize)),new r.J("vvSizeMaxSize",(e=>e.vvSize.maxSize)),new r.J("vvSizeOffset",(e=>e.vvSize.offset)),new r.J("vvSizeFactor",(e=>e.vvSize.factor)),new r.J("vvSizeFallback",(e=>e.vvSize.fallback))),n.code.add(a.H`float getSize() {
if (isnan(sizeFeatureAttribute)) {
return vvSizeFallback.x;
}
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(c.add(l.T.SIZE,"float"),n.code.add(a.H`float getSize(){
return intrinsicWidth * size;
}`)),t.vvOpacity?(c.add(l.T.OPACITYFEATUREATTRIBUTE,"float"),n.constants.add("vvOpacityNumber","int",8),n.uniforms.add(new s.O("vvOpacityValues",(e=>e.vvOpacity.values),8),new s.O("vvOpacityOpacities",(e=>e.vvOpacity.opacityValues),8),new o.p("vvOpacityFallback",(e=>e.vvOpacity.fallback))),n.code.add(a.H`float interpolateOpacity(float value){
if (isnan(value)) {
return vvOpacityFallback;
}
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):n.code.add(a.H`vec4 applyOpacity( vec4 color ){
return color;
}`),t.vvColor?(e.include(i.k,t),c.add(l.T.COLORFEATUREATTRIBUTE,"float"),n.code.add(a.H`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(c.add(l.T.COLOR,"vec4"),n.code.add(a.H`vec4 getColor(){
return applyOpacity(color);
}`))}},29158:function(e,t,n){var i;n.d(t,{U:function(){return i}}),function(e){e[e.Occluded=0]="Occluded",e[e.NotOccluded=1]="NotOccluded",e[e.Both=2]="Both",e[e.COUNT=3]="COUNT"}(i||(i={}))},55075:function(e,t,n){n.d(t,{q:function(){return p},C:function(){return m}});var i=n(45701),r=n(96541),o=n(2013),s=n(13663),a=n(85119),l=n(48857),c=n(34709),u=n(41830),d=n(73749),h=n(27583);const f=(0,h.Ue)();function p(e,t){if(!t.stippleEnabled)return void e.fragment.code.add(l.H`float getStippleAlpha() { return 1.0; }
void discardByStippleAlpha(float stippleAlpha, float threshold) {}
vec4 blendStipple(vec4 color, float stippleAlpha) { return color; }`);const n=!(t.draped&&t.stipplePreferContinuous),{vertex:p,fragment:v}=e;v.include(i.n),t.draped||((0,r.hY)(p,t),p.uniforms.add(new s.z("worldToScreenPerDistanceRatio",(({camera:e})=>1/e.perScreenPixelRatio))).code.add(l.H`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),e.varyings.add("vStippleDistance","float"),e.varyings.add("vStippleDistanceLimits","vec2"),e.varyings.add("vStipplePatternStretch","float"),p.code.add(l.H`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${l.H.float(g)};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),p.code.add(l.H`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),p.code.add(l.H`
    if (segmentLengthPseudoScreen >= ${n?"patternLength":"1e4"}) {
  `),(0,r.ZI)(p),p.code.add(l.H`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
float segmentLengthScreenRounded = flooredRepetitions * patternLength;
float stretch = repetitions / flooredRepetitions;
vStipplePatternStretch = max(0.75, stretch);
return vec2(0.0, segmentLengthScreenRounded);
}
return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
}`),v.uniforms.add(new c.A("stipplePatternTexture",(e=>e.stippleTexture)),new a.p("stipplePatternSDFNormalizer",(e=>function(e){return e?(Math.floor(.5*((0,u.kj)(e)-1))+.5)/e.pixelRatio:1}(e.stipplePattern))),new a.p("stipplePatternPixelSizeInv",(e=>1/m(e)))),t.stippleOffColorEnabled&&v.uniforms.add(new o.N("stippleOffColor",(e=>{return null==(t=e.stippleOffColor)?h.AG:4===t.length?t:(0,d.s)(f,t[0],t[1],t[2],1);var t}))),v.code.add(l.H`float getStippleSDF(out bool isClamped) {
float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;
float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;
u = fract(u);
float encodedSDF = rgbaTofloat(texture(stipplePatternTexture, vec2(u, 0.5)));
float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;
return (sdf - 0.5) * vStipplePatternStretch + 0.5;
}
float getStippleSDF() {
bool ignored;
return getStippleSDF(ignored);
}
float getStippleAlpha() {
bool isClamped;
float stippleSDF = getStippleSDF(isClamped);
float antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);
return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
}`),v.code.add(l.H`
    void discardByStippleAlpha(float stippleAlpha, float threshold) {
     ${(0,l.If)(!t.stippleOffColorEnabled,"if (stippleAlpha < threshold) { discard; }")}
    }

    vec4 blendStipple(vec4 color, float stippleAlpha) {
      return ${t.stippleOffColorEnabled?"mix(color, stippleOffColor, stippleAlpha)":"vec4(color.rgb, color.a * stippleAlpha)"};
    }
  `)}function m(e){const t=e.stipplePattern;return t?(0,u.$A)(e.stipplePattern)/t.pixelRatio:1}const g=.4},87263:function(e,t,n){n.d(t,{Q:function(){return l}});var i=n(35567),r=n(96541),o=n(13663),s=n(48857),a=n(26723);function l(e,t){const n=e.vertex;(0,r.ZI)(n),null==n.uniforms.get("markerScale")&&n.constants.add("markerScale","float",1),n.constants.add("markerSizePerLineWidth","float",i.M_).code.add(s.H`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`),t.space===a.I9.World&&(n.constants.add("maxSegmentLengthFraction","float",.45),n.uniforms.add(new o.z("perRenderPixelRatio",(e=>e.camera.perRenderPixelRatio))),n.code.add(s.H`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))}},86026:function(e,t,n){n.d(t,{Cr:function(){return re},IG:function(){return y},QL:function(){return X},ns:function(){return Y},nb:function(){return Q},B2:function(){return C},DA:function(){return ne},x2:function(){return ee},dV:function(){return Z},xu:function(){return G},mj:function(){return J},rh:function(){return te},PI:function(){return k},g7:function(){return $},AW:function(){return V},PD:function(){return K},Ay:function(){return se},mx:function(){return ie}});var i,r=n(24910),o=n(86875),s=n(82846),a=n(60199),l=n(39909),c=n(38766),u=n(77773),d=n(12659),h=n(81749);!function(e){e.length=function(e,t){const n=e[t],i=e[t+1],r=e[t+2];return Math.sqrt(n*n+i*i+r*r)},e.normalize=function(e,t){const n=e[t],i=e[t+1],r=e[t+2],o=1/Math.sqrt(n*n+i*i+r*r);e[t]*=o,e[t+1]*=o,e[t+2]*=o},e.scale=function(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n},e.add=function(e,t,n,i,r,o=t){(r=r||e)[o]=e[t]+n[i],r[o+1]=e[t+1]+n[i+1],r[o+2]=e[t+2]+n[i+2]},e.subtract=function(e,t,n,i,r,o=t){(r=r||e)[o]=e[t]-n[i],r[o+1]=e[t+1]-n[i+1],r[o+2]=e[t+2]-n[i+2]}}(i||(i={}));var f=n(25952),p=n(61719),m=n(52061),g=n(52964);const v=i,T=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],_=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],S=[0,0,1,0,1,1,0,1],O=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],b=new Array(36);for(let e=0;e<6;e++)for(let t=0;t<6;t++)b[6*e+t]=e;const A=new Array(36);for(let e=0;e<6;e++)A[6*e]=0,A[6*e+1]=1,A[6*e+2]=2,A[6*e+3]=2,A[6*e+4]=3,A[6*e+5]=0;function y(e,t){Array.isArray(t)||(t=[t,t,t]);const n=new Array(24);for(let e=0;e<8;e++)n[3*e]=T[e][0]*t[0],n[3*e+1]=T[e][1]*t[1],n[3*e+2]=T[e][2]*t[2];return new f.Z(e,[[m.T.POSITION,new h.a(n,O,3,!0)],[m.T.NORMAL,new h.a(_,b,3)],[m.T.UV0,new h.a(S,A,2)]])}const x=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],E=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],R=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],w=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function C(e,t){Array.isArray(t)||(t=[t,t,t]);const n=new Array(18);for(let e=0;e<6;e++)n[3*e]=x[e][0]*t[0],n[3*e+1]=x[e][1]*t[1],n[3*e+2]=x[e][2]*t[2];return new f.Z(e,[[m.T.POSITION,new h.a(n,R,3,!0)],[m.T.NORMAL,new h.a(E,w,3)]])}const D=(0,o.al)(-.5,0,-.5),I=(0,o.al)(.5,0,-.5),L=(0,o.al)(0,0,.5),P=(0,o.al)(0,.5,0),N=(0,o.Ue)(),M=(0,o.Ue)(),U=(0,o.Ue)(),z=(0,o.Ue)(),j=(0,o.Ue)();(0,r.d)(N,D,P),(0,r.d)(M,D,I),(0,r.h)(U,N,M),(0,r.n)(U,U),(0,r.d)(N,I,P),(0,r.d)(M,I,L),(0,r.h)(z,N,M),(0,r.n)(z,z),(0,r.d)(N,L,P),(0,r.d)(M,L,D),(0,r.h)(j,N,M),(0,r.n)(j,j);const F=[D,I,L,P],H=[0,-1,0,U[0],U[1],U[2],z[0],z[1],z[2],j[0],j[1],j[2]],B=[0,1,2,3,1,0,3,2,1,3,0,2],W=[0,0,0,1,1,1,2,2,2,3,3,3];function V(e,t){Array.isArray(t)||(t=[t,t,t]);const n=new Array(12);for(let e=0;e<4;e++)n[3*e]=F[e][0]*t[0],n[3*e+1]=F[e][1]*t[1],n[3*e+2]=F[e][2]*t[2];return new f.Z(e,[[m.T.POSITION,new h.a(n,B,3,!0)],[m.T.NORMAL,new h.a(H,W,3)]])}function k(e,t,n,i,r={uv:!0}){const o=-Math.PI,s=2*Math.PI,a=-Math.PI/2,u=Math.PI,d=Math.max(3,Math.floor(n)),p=Math.max(2,Math.floor(i)),g=(d+1)*(p+1),v=(0,l.xx)(3*g),T=(0,l.xx)(3*g),_=(0,l.xx)(2*g),S=[];let O=0;for(let e=0;e<=p;e++){const n=[],i=e/p,r=a+i*u,l=Math.cos(r);for(let e=0;e<=d;e++){const a=e/d,c=o+a*s,u=Math.cos(c)*l,h=Math.sin(r),f=-Math.sin(c)*l;v[3*O]=u*t,v[3*O+1]=h*t,v[3*O+2]=f*t,T[3*O]=u,T[3*O+1]=h,T[3*O+2]=f,_[2*O]=a,_[2*O+1]=i,n.push(O),++O}S.push(n)}const b=new Array;for(let e=0;e<p;e++)for(let t=0;t<d;t++){const n=S[e][t],i=S[e][t+1],r=S[e+1][t+1],o=S[e+1][t];0===e?(b.push(n),b.push(r),b.push(o)):e===p-1?(b.push(n),b.push(i),b.push(r)):(b.push(n),b.push(i),b.push(r),b.push(r),b.push(o),b.push(n))}const A=[[m.T.POSITION,new h.a(v,b,3,!0)],[m.T.NORMAL,new h.a(T,b,3,!0)]];return r.uv&&A.push([m.T.UV0,new h.a(_,b,2,!0)]),r.offset&&(A[0][0]=m.T.OFFSET,A.push([m.T.POSITION,new h.a(Float64Array.from(r.offset),(0,c.LE)(b.length),3,!0)])),new f.Z(e,A)}function J(e,t,n,i){const r=G(t,n,i);return new f.Z(e,r)}function G(e,t,n){const i=e;let r,o;if(n)r=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],o=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const e=i*(1+Math.sqrt(5))/2;r=[-i,e,0,i,e,0,-i,-e,0,i,-e,0,0,-i,e,0,i,e,0,-i,-e,0,i,-e,e,0,-i,e,0,i,-e,0,-i,-e,0,i],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let t=0;t<r.length;t+=3)v.scale(r,t,e/v.length(r,t));let s={};function a(t,n){t>n&&([t,n]=[n,t]);const i=t.toString()+"."+n.toString();if(s[i])return s[i];let o=r.length;return r.length+=3,v.add(r,3*t,r,3*n,r,o),v.scale(r,o,e/v.length(r,o)),o/=3,s[i]=o,o}for(let e=0;e<t;e++){const e=o.length,t=new Array(4*e);for(let n=0;n<e;n+=3){const e=o[n],i=o[n+1],r=o[n+2],s=a(e,i),l=a(i,r),c=a(r,e),u=4*n;t[u]=e,t[u+1]=s,t[u+2]=c,t[u+3]=i,t[u+4]=l,t[u+5]=s,t[u+6]=r,t[u+7]=c,t[u+8]=l,t[u+9]=s,t[u+10]=l,t[u+11]=c}o=t,s={}}const c=(0,l.XO)(r);for(let e=0;e<c.length;e+=3)v.normalize(c,e);return[[m.T.POSITION,new h.a((0,l.XO)(r),o,3,!0)],[m.T.NORMAL,new h.a(c,o,3,!0)]]}function Z(e,{normal:t,position:n,color:i,rotation:r,size:o,centerOffsetAndDistance:a,uvi:l,featureAttribute:u,objectAndLayerIdColor:d=null}={}){const p=n?(0,s.d9)(n):(0,s.Ue)(),v=t?(0,s.d9)(t):(0,s.al)(0,0,1),T=i?[255*i[0],255*i[1],255*i[2],i.length>3?255*i[3]:255]:[255,255,255,255],_=null!=o&&2===o.length?o:[1,1],S=null!=r?[r]:[0],O=(0,c.LE)(1),b=[[m.T.POSITION,new h.a(p,O,3,!0)],[m.T.NORMAL,new h.a(v,O,3,!0)],[m.T.COLOR,new h.a(T,O,4,!0)],[m.T.SIZE,new h.a(_,O,2)],[m.T.ROTATION,new h.a(S,O,1,!0)]];if(l&&b.push([m.T.UVI,new h.a(l,O,l.length)]),null!=a){const e=[a[0],a[1],a[2],a[3]];b.push([m.T.CENTEROFFSETANDDISTANCE,new h.a(e,O,4)])}if(u){const e=[u[0],u[1],u[2],u[3]];b.push([m.T.FEATUREATTRIBUTE,new h.a(e,O,4)])}return new f.Z(e,b,null,g.V.Point,d)}const q=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function $(e,t=q){const n=new Array(12);for(let e=0;e<4;e++)for(let i=0;i<3;i++)n[3*e+i]=t[e][i];const i=[0,1,2,2,3,0],r=[0,0,0,0,0,0],o=[[m.T.POSITION,new h.a(n,i,3,!0)],[m.T.NORMAL,new h.a([0,0,1],r,3,!0)],[m.T.UV0,new h.a([0,0,1,0,1,1,0,1],i,2,!0)],[m.T.COLOR,new h.a([255,255,255,255],r,4,!0)]];return new f.Z(e,o)}function Y(e,t,n,i,r=!0,s=!0){let a=0;const c=t,u=e;let d=(0,o.al)(0,a,0),f=(0,o.al)(0,a+u,0),p=(0,o.al)(0,-1,0),g=(0,o.al)(0,1,0);i&&(a=u,f=(0,o.al)(0,0,0),d=(0,o.al)(0,a,0),p=(0,o.al)(0,1,0),g=(0,o.al)(0,-1,0));const v=[f,d],T=[p,g],_=n+2,S=Math.sqrt(u*u+c*c);if(i)for(let e=n-1;e>=0;e--){const t=e*(2*Math.PI/n),i=(0,o.al)(Math.cos(t)*c,a,Math.sin(t)*c);v.push(i);const r=(0,o.al)(u*Math.cos(t)/S,-c/S,u*Math.sin(t)/S);T.push(r)}else for(let e=0;e<n;e++){const t=e*(2*Math.PI/n),i=(0,o.al)(Math.cos(t)*c,a,Math.sin(t)*c);v.push(i);const r=(0,o.al)(u*Math.cos(t)/S,c/S,u*Math.sin(t)/S);T.push(r)}const O=new Array,b=new Array;if(r){for(let e=3;e<v.length;e++)O.push(1),O.push(e-1),O.push(e),b.push(0),b.push(0),b.push(0);O.push(v.length-1),O.push(2),O.push(1),b.push(0),b.push(0),b.push(0)}if(s){for(let e=3;e<v.length;e++)O.push(e),O.push(e-1),O.push(0),b.push(e),b.push(e-1),b.push(1);O.push(0),O.push(2),O.push(v.length-1),b.push(1),b.push(2),b.push(T.length-1)}const A=(0,l.xx)(3*_);for(let e=0;e<_;e++)A[3*e]=v[e][0],A[3*e+1]=v[e][1],A[3*e+2]=v[e][2];const y=(0,l.xx)(3*_);for(let e=0;e<_;e++)y[3*e]=T[e][0],y[3*e+1]=T[e][1],y[3*e+2]=T[e][2];return[[m.T.POSITION,new h.a(A,O,3,!0)],[m.T.NORMAL,new h.a(y,b,3,!0)]]}function X(e,t,n,i,r,o=!0,s=!0){return new f.Z(e,Y(t,n,i,r,o,s))}function Q(e,t,n,i,s,a,c){const u=s?(0,o.d9)(s):(0,o.al)(1,0,0),d=a?(0,o.d9)(a):(0,o.al)(0,0,0);c??=!0;const p=(0,o.Ue)();(0,r.n)(p,u);const g=(0,o.Ue)();(0,r.g)(g,p,Math.abs(t));const v=(0,o.Ue)();(0,r.g)(v,g,-.5),(0,r.f)(v,v,d);const T=(0,o.al)(0,1,0);Math.abs(1-(0,r.e)(p,T))<.2&&(0,r.i)(T,0,0,1);const _=(0,o.Ue)();(0,r.h)(_,p,T),(0,r.n)(_,_),(0,r.h)(T,_,p);const S=2*i+(c?2:0),O=i+(c?2:0),b=(0,l.xx)(3*S),A=(0,l.xx)(3*O),y=(0,l.xx)(2*S),x=new Array(3*i*(c?4:2)),E=new Array(3*i*(c?4:2));c&&(b[3*(S-2)]=v[0],b[3*(S-2)+1]=v[1],b[3*(S-2)+2]=v[2],y[2*(S-2)]=0,y[2*(S-2)+1]=0,b[3*(S-1)]=b[3*(S-2)]+g[0],b[3*(S-1)+1]=b[3*(S-2)+1]+g[1],b[3*(S-1)+2]=b[3*(S-2)+2]+g[2],y[2*(S-1)]=1,y[2*(S-1)+1]=1,A[3*(O-2)]=-p[0],A[3*(O-2)+1]=-p[1],A[3*(O-2)+2]=-p[2],A[3*(O-1)]=p[0],A[3*(O-1)+1]=p[1],A[3*(O-1)+2]=p[2]);const R=(e,t,n)=>{x[e]=t,E[e]=n};let w=0;const C=(0,o.Ue)(),D=(0,o.Ue)();for(let e=0;e<i;e++){const t=e*(2*Math.PI/i);(0,r.g)(C,T,Math.sin(t)),(0,r.g)(D,_,Math.cos(t)),(0,r.f)(C,C,D),A[3*e]=C[0],A[3*e+1]=C[1],A[3*e+2]=C[2],(0,r.g)(C,C,n),(0,r.f)(C,C,v),b[3*e]=C[0],b[3*e+1]=C[1],b[3*e+2]=C[2],y[2*e]=e/i,y[2*e+1]=0,b[3*(e+i)]=b[3*e]+g[0],b[3*(e+i)+1]=b[3*e+1]+g[1],b[3*(e+i)+2]=b[3*e+2]+g[2],y[2*(e+i)]=e/i,y[2*e+1]=1;const o=(e+1)%i;R(w++,e,e),R(w++,e+i,e),R(w++,o,o),R(w++,o,o),R(w++,e+i,e),R(w++,o+i,o)}if(c){for(let e=0;e<i;e++){const t=(e+1)%i;R(w++,S-2,O-2),R(w++,e,O-2),R(w++,t,O-2)}for(let e=0;e<i;e++){const t=(e+1)%i;R(w++,e+i,O-1),R(w++,S-1,O-1),R(w++,t+i,O-1)}}const I=[[m.T.POSITION,new h.a(b,x,3,!0)],[m.T.NORMAL,new h.a(A,E,3,!0)],[m.T.UV0,new h.a(y,x,2,!0)]];return new f.Z(e,I)}function K(e,t,n,i,r,o){i=i||10,r=null==r||r,(0,p.hu)(t.length>1);const s=[],a=[];for(let e=0;e<i;e++){s.push([0,-e-1,-(e+1)%i-1]);const t=e/i*2*Math.PI;a.push([Math.cos(t)*n,Math.sin(t)*n])}return ee(e,a,t,[[0,0,0]],s,r,o)}function ee(e,t,n,i,a,c,p=(0,o.al)(0,0,0)){const g=t.length,v=(0,l.xx)(n.length*g*3+(6*i.length||0)),T=(0,l.xx)(n.length*g*3+(i?6:0)),_=new Array,S=new Array;let O=0,b=0;const A=(0,s.Ue)(),y=(0,s.Ue)(),x=(0,s.Ue)(),E=(0,s.Ue)(),R=(0,s.Ue)(),w=(0,s.Ue)(),C=(0,s.Ue)(),D=(0,s.Ue)(),I=(0,s.Ue)(),L=(0,s.Ue)(),P=(0,s.Ue)(),N=(0,s.Ue)(),M=(0,s.Ue)(),U=(0,u.Ue)();(0,r.i)(I,0,1,0),(0,r.d)(y,n[1],n[0]),(0,r.n)(y,y),c?((0,r.f)(D,n[0],p),(0,r.n)(x,D)):(0,r.i)(x,0,0,1),se(y,x,I,I,R,x,ae),(0,r.c)(E,x),(0,r.c)(N,R);for(let e=0;e<i.length;e++)(0,r.g)(w,R,i[e][0]),(0,r.g)(D,x,i[e][2]),(0,r.f)(w,w,D),(0,r.f)(w,w,n[0]),v[O++]=w[0],v[O++]=w[1],v[O++]=w[2];T[b++]=-y[0],T[b++]=-y[1],T[b++]=-y[2];for(let e=0;e<a.length;e++)_.push(a[e][0]>0?a[e][0]:-a[e][0]-1+i.length),_.push(a[e][1]>0?a[e][1]:-a[e][1]-1+i.length),_.push(a[e][2]>0?a[e][2]:-a[e][2]-1+i.length),S.push(0),S.push(0),S.push(0);let z=i.length;const j=i.length-1;for(let e=0;e<n.length;e++){let i=!1;e>0&&((0,r.c)(A,y),e<n.length-1?((0,r.d)(y,n[e+1],n[e]),(0,r.n)(y,y)):i=!0,(0,r.f)(L,A,y),(0,r.n)(L,L),(0,r.f)(P,n[e-1],E),(0,u.Yq)(n[e],L,U),(0,u.BR)(U,(0,d.re)(P,A),D)?((0,r.d)(D,D,n[e]),(0,r.n)(x,D),(0,r.h)(R,L,x),(0,r.n)(R,R)):se(L,E,N,I,R,x,ae),(0,r.c)(E,x),(0,r.c)(N,R)),c&&((0,r.f)(D,n[e],p),(0,r.n)(M,D));for(let o=0;o<g;o++)if((0,r.g)(w,R,t[o][0]),(0,r.g)(D,x,t[o][1]),(0,r.f)(w,w,D),(0,r.n)(C,w),T[b++]=C[0],T[b++]=C[1],T[b++]=C[2],(0,r.f)(w,w,n[e]),v[O++]=w[0],v[O++]=w[1],v[O++]=w[2],!i){const e=(o+1)%g;_.push(z+o),_.push(z+g+o),_.push(z+e),_.push(z+e),_.push(z+g+o),_.push(z+g+e);for(let e=0;e<6;e++){const t=_.length-6;S.push(_[t+e]-j)}}z+=g}const F=n[n.length-1];for(let e=0;e<i.length;e++)(0,r.g)(w,R,i[e][0]),(0,r.g)(D,x,i[e][1]),(0,r.f)(w,w,D),(0,r.f)(w,w,F),v[O++]=w[0],v[O++]=w[1],v[O++]=w[2];const H=b/3;T[b++]=y[0],T[b++]=y[1],T[b++]=y[2];const B=z-g;for(let e=0;e<a.length;e++)_.push(a[e][0]>=0?z+a[e][0]:-a[e][0]-1+B),_.push(a[e][2]>=0?z+a[e][2]:-a[e][2]-1+B),_.push(a[e][1]>=0?z+a[e][1]:-a[e][1]-1+B),S.push(H),S.push(H),S.push(H);const W=[[m.T.POSITION,new h.a(v,_,3,!0)],[m.T.NORMAL,new h.a(T,S,3,!0)]];return new f.Z(e,W)}function te(e,t,n,i){(0,p.hu)(t.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),(0,p.hu)(3===t[0].length,"createPolylineGeometry(): malformed vertex"),(0,p.hu)(null==n||n.length===t.length,"createPolylineGeometry: need same number of points and normals"),(0,p.hu)(null==n||3===n[0].length,"createPolylineGeometry(): malformed normal");const r=(0,a.bg)(3*t.length),o=new Array(2*(t.length-1));let s=0,u=0;for(let e=0;e<t.length;e++){for(let n=0;n<3;n++)r[s++]=t[e][n];e>0&&(o[u++]=e-1,o[u++]=e)}const d=[[m.T.POSITION,new h.a(r,o,3,!0)]];if(n){const e=(0,l.xx)(3*n.length);let i=0;for(let r=0;r<t.length;r++)for(let t=0;t<3;t++)e[i++]=n[r][t];d.push([m.T.NORMAL,new h.a(e,o,3,!0)])}return i&&d.push([m.T.COLOR,new h.a(i,(0,c.KF)(i.length/4),4)]),new f.Z(e,d,null,g.V.Line)}function ne(e,t,n,i,r,o=0){const s=new Array(18),a=[[-n,o,r/2],[i,o,r/2],[0,t+o,r/2],[-n,o,-r/2],[i,o,-r/2],[0,t+o,-r/2]];for(let e=0;e<6;e++)s[3*e]=a[e][0],s[3*e+1]=a[e][1],s[3*e+2]=a[e][2];return new f.Z(e,[[m.T.POSITION,new h.a(s,[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5],3,!0)]])}function ie(e,t){const n=e.getMutableAttribute(m.T.POSITION).data;for(let e=0;e<n.length;e+=3){const i=n[e],o=n[e+1],s=n[e+2];(0,r.i)(le,i,o,s),(0,r.t)(le,le,t),n[e]=le[0],n[e+1]=le[1],n[e+2]=le[2]}}function re(e,t=e){const n=e.attributes,i=n.get(m.T.POSITION).data,r=n.get(m.T.NORMAL).data;if(r){const e=t.getMutableAttribute(m.T.NORMAL).data;for(let t=0;t<r.length;t+=3){const n=r[t+1];e[t+1]=-r[t+2],e[t+2]=n}}if(i){const e=t.getMutableAttribute(m.T.POSITION).data;for(let t=0;t<i.length;t+=3){const n=i[t+1];e[t+1]=-i[t+2],e[t+2]=n}}}function oe(e,t,n,i,o){return!(Math.abs((0,r.e)(t,e))>o||((0,r.h)(n,e,t),(0,r.n)(n,n),(0,r.h)(i,n,e),(0,r.n)(i,i),0))}function se(e,t,n,i,r,o,s){return oe(e,t,r,o,s)||oe(e,n,r,o,s)||oe(e,i,r,o,s)}const ae=.99619469809,le=(0,s.Ue)()},3648:function(e,t,n){n.d(t,{C:function(){return v}});n(61432);var i=n(67908),r=n(24910),o=n(82846),s=n(27583),a=n(30146),l=n(81749),c=n(25952),u=n(25909),d=n(26475),h=n(21243),f=n(52061),p=n(65759),m=n(19843),g=n(52964);class v{constructor(e){this._originSR=e,this._rootOriginId="root/"+(0,i.D)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(e){const t=this._origins.get(this._rootOriginId);if(null==t){const t=h.p.rootOrigin;if(null!=t)return this._origins.set(this._rootOriginId,(0,u.a)(t[0],t[1],t[2],this._rootOriginId)),this.getOrigin(e);const n=(0,u.a)(e[0]+Math.random()-.5,e[1]+Math.random()-.5,e[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,n),n}const n=this._gridSize,i=Math.round(e[0]/n),o=Math.round(e[1]/n),s=Math.round(e[2]/n),a=`${i}/${o}/${s}`;let l=this._origins.get(a);const c=.5*n;if((0,r.d)(T,e,t.vec3),T[0]=Math.abs(T[0]),T[1]=Math.abs(T[1]),T[2]=Math.abs(T[2]),T[0]<c&&T[1]<c&&T[2]<c){if(l){const t=Math.max(...T);if((0,r.d)(T,e,l.vec3),T[0]=Math.abs(T[0]),T[1]=Math.abs(T[1]),T[2]=Math.abs(T[2]),Math.max(...T)<t)return l}return t}return l||(l=(0,u.a)(i*n,o*n,s*n,a),this._origins.set(a,l)),l}_drawOriginBox(e,t=(0,s.al)(1,1,0,1)){const n=window.view,i=n.stage,r=t.toString();if(!this._objects.has(r)){this._material=new m.U({width:2,color:t});const e=new p.F(i,{pickable:!1}),n=new d.T({castShadow:!1});e.add(n),this._objects.set(r,n)}const o=this._objects.get(r),u=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],h=u.length,v=new Array(3*h),T=new Array,_=.5*this._gridSize;for(let t=0;t<h;t++)v[3*t]=e[0]+(1&u[t]?_:-_),v[3*t+1]=e[1]+(2&u[t]?_:-_),v[3*t+2]=e[2]+(4&u[t]?_:-_),t>0&&T.push(t-1,t);(0,a.projectBuffer)(v,this._originSR,0,v,n.renderSpatialReference,0,h);const S=new c.Z(this._material,[[f.T.POSITION,new l.a(v,T,3,!0)]],null,g.V.Line);o.addGeometry(S)}get test(){}}const T=(0,o.Ue)()},25909:function(e,t,n){n.d(t,{a:function(){return o}});var i=n(82846);class r{constructor(e,t){this.vec3=e,this.id=t}}function o(e,t,n,o){return new r((0,i.al)(e,t,n),o)}},26475:function(e,t,n){n.d(t,{N:function(){return v},T:function(){return m}});n(61432);var i=n(67908),r=n(31865),o=n(10934),s=n(24910),a=n(82846),l=n(69055),c=n(22365),u=n(32420),d=n(31097),h=n(61719),f=n(52061),p=n(18906);class m{constructor(e={}){this.id=(0,i.D)(),this._highlightIds=new Set,this._shaderTransformation=null,this._visible=!0,this.castShadow=e.castShadow??!0,this.usesVerticalDistanceToGround=e.usesVerticalDistanceToGround??!1,this.graphicUid=e.graphicUid,this.layerViewUid=e.layerViewUid,e.isElevationSource&&(this.lastValidElevationBB=new g),this._geometries=e.geometries?Array.from(e.geometries):new Array}dispose(){this._geometries.length=0}get layer(){return this._layer}set layer(e){(0,h.hu)(null==this._layer||null==e,"Object3D can only be added to a single Layer"),this._layer=e}addGeometry(e){e.visible=this._visible,this._geometries.push(e);for(const t of this._highlightIds)e.addHighlight(t);this._emit("geometryAdded",{object:this,geometry:e}),this._highlightIds.size&&this._emit("highlightChanged",this),this._invalidateBoundingVolume()}removeGeometry(e){const t=this._geometries.splice(e,1)[0];if(t){for(const e of this._highlightIds)t.removeHighlight(e);this._emit("geometryRemoved",{object:this,geometry:t}),this._highlightIds.size&&this._emit("highlightChanged",this),this._invalidateBoundingVolume()}}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(e,t,n=!1){this._emit("attributesChanged",{object:this,geometry:e,attribute:t,sync:n}),(0,f.j)(t)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(e){if(this._visible!==e){this._visible=e;for(const e of this._geometries)e.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const e=new d.Y;for(const t of this._geometries)t.occludees=(0,p.lr)(t.occludees,e);return this._emit("occlusionChanged",this),e}removeOcclude(e){for(const t of this._geometries)t.occludees=(0,p.U_)(t.occludees,e);this._emit("occlusionChanged",this)}highlight(e){const t=new d.j(e);for(const e of this._geometries)e.addHighlight(t);return this._emit("highlightChanged",this),this._highlightIds.add(t),t}removeHighlight(e){this._highlightIds.delete(e);for(const t of this._geometries)t.removeHighlight(e);this._emit("highlightChanged",this)}removeStateID(e){e.channel===u.V_.Highlight?this.removeHighlight(e):this.removeOcclude(e)}getCombinedStaticTransformation(e,t){return(0,r.Jp)(t,this.transformation,e.transformation)}getCombinedShaderTransformation(e,t=(0,o.Ue)()){return(0,r.Jp)(t,this.effectiveTransformation,e.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new v,this._validateBoundingVolume(this._bvWorldSpace,A.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new v,this._validateBoundingVolume(this._bvObjectSpace,A.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(e,t){const n=t===A.ObjectSpace;for(const t of this._geometries){const i=t.boundingInfo;i&&T(i,e,n?t.transformation:this.getCombinedShaderTransformation(t))}(0,s.m)((0,l.a)(e.bounds),e.min,e.max,.5);for(const t of this._geometries){const i=t.boundingInfo;if(null==i)continue;const r=n?t.transformation:this.getCombinedShaderTransformation(t),o=(0,c.u1)(r);(0,s.t)(b,i.center,r);const a=(0,s.j)(b,(0,l.a)(e.bounds)),u=i.radius*o;e.bounds[3]=Math.max(e.bounds[3],a+u)}}_invalidateBoundingVolume(){const e=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this.layer&&e&&this.layer.notifyObjectBBChanged(this,e)}_emit(e,t){this.layer?.events.emit(e,t)}get geometries(){return this._geometries}get transformation(){return this._transformation??o.Wd}set transformation(e){this._transformation=(0,r.JG)(this._transformation??(0,o.Ue)(),e),this._invalidateBoundingVolume(),this._emit("transformationChanged",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(e){this._shaderTransformation=e?(0,r.JG)(this._shaderTransformation??(0,o.Ue)(),e):null,this._invalidateBoundingVolume(),this._emit("shaderTransformationChanged",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}get test(){}}class g{constructor(){this.min=(0,a.al)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,a.al)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class v extends g{constructor(){super(...arguments),this.bounds=(0,l.c)()}}function T(e,t,n){const i=e.bbMin,o=e.bbMax;if((0,r.lv)(n)){const e=(0,s.i)(_,n[12],n[13],n[14]);(0,s.f)(S,i,e),(0,s.f)(O,o,e);for(let e=0;e<3;++e)t.min[e]=Math.min(t.min[e],S[e]),t.max[e]=Math.max(t.max[e],O[e])}else if((0,s.t)(S,i,n),(0,s.q)(i,o))for(let e=0;e<3;++e)t.min[e]=Math.min(t.min[e],S[e]),t.max[e]=Math.max(t.max[e],S[e]);else{(0,s.t)(O,o,n);for(let e=0;e<3;++e)t.min[e]=Math.min(t.min[e],S[e],O[e]),t.max[e]=Math.max(t.max[e],S[e],O[e]);for(let e=0;e<3;++e){(0,s.c)(S,i),(0,s.c)(O,o),S[e]=o[e],O[e]=i[e],(0,s.t)(S,S,n),(0,s.t)(O,O,n);for(let e=0;e<3;++e)t.min[e]=Math.min(t.min[e],S[e],O[e]),t.max[e]=Math.max(t.max[e],S[e],O[e])}}}const _=(0,a.Ue)(),S=(0,a.Ue)(),O=(0,a.Ue)(),b=(0,a.Ue)();var A,y;(y=A||(A={}))[y.WorldSpace=0]="WorldSpace",y[y.ObjectSpace=1]="ObjectSpace"},33641:function(e,t,n){n.d(t,{Z:function(){return f}});var i,r,o=n(77450),s=n(63974),a=n(24910),l=n(82846),c=n(33869),u=n(12659),d=n(69055),h=n(61719);class f{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new p,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),p.clearPool(),D[0]=null,M.prune(),B.prune()}add(e){const t=Array.from(e);this._grow(t);const n=p.acquire();for(const e of t)++this._objectCount,this._isDegenerate(e)?this._degenerateObjects.add(e):(n.init(this._root),this._add(e,n));p.release(n)}remove(e,t=null){this._objectCount-=e.length;const n=p.acquire();for(const i of e){const e=t??(0,d.e)(this.objectToBoundingSphere(i),U);E(e[3])?(n.init(this._root),v(i,e,n)):this._degenerateObjects.delete(i)}p.release(n),this._shrink()}update(e,t){if(!E(t[3])&&this._isDegenerate(e))return;const n=function(e){return D[0]=e,D}(e);this.remove(n,t),this.add(n)}forEachAlongRay(e,t,n){const i=(0,u.re)(e,t);m(this._root,(e=>{if(!function(e,t){return b((0,d.a)(t.bounds),2*-t.halfSize,P),b((0,d.a)(t.bounds),2*t.halfSize,N),(0,h.yK)(e.origin,e.direction,P,N)}(i,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(i,e)&&n(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,n,i){const r=(0,u.re)(e,t);m(this._root,(e=>{if(!function(e,t,n){return b((0,d.a)(t.bounds),2*-t.halfSize,P),b((0,d.a)(t.bounds),2*t.halfSize,N),n.applyToMinMax(P,N),(0,h.yK)(e.origin,e.direction,P,N)}(r,e,i))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(r,e,i)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(r,e,i)&&n(e)})),!0}))}forEach(e){m(this._root,(t=>{const n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,n,i=(()=>!0),r=1/0){let o=1/0,s=1/0,l=null;const u=y(e,t),h=a=>{if(--r,!i(a))return;const u=this.objectToBoundingSphere(a);if(!(0,c.hr)(n,u))return;const h=x(e,t,(0,d.a)(u)),f=h-u[3],p=h+u[3];f<o&&(o=f,s=p,l=a)};return g(this._root,(i=>{if(r<=0||!(0,c.hr)(n,i.bounds))return!1;if((0,a.g)(L,u,i.halfSize),(0,a.f)(L,L,(0,d.a)(i.bounds)),x(e,t,L)>s)return!1;const o=i.node;return o.terminals.forAll((e=>h(e))),null!==o.residents&&o.residents.forAll((e=>h(e))),!0}),e,t),l}forEachInDepthRange(e,t,n,i,r,o,s){let l=-1/0,u=1/0;const h={setRange:e=>{n===f.DepthOrder.FRONT_TO_BACK?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};h.setRange(i);const p=x(t,n,e),m=y(t,n),v=y(t,-n),T=e=>{if(!s(e))return;const i=this.objectToBoundingSphere(e),a=(0,d.a)(i),f=x(t,n,a)-p,m=f-i[3],g=f+i[3];m>u||g<l||!(0,c.hr)(o,i)||r(e,h)};g(this._root,(e=>{if(!(0,c.hr)(o,e.bounds))return!1;if((0,a.g)(L,m,e.halfSize),(0,a.f)(L,L,(0,d.a)(e.bounds)),x(t,n,L)-p>u)return!1;if((0,a.g)(L,v,e.halfSize),(0,a.f)(L,L,(0,d.a)(e.bounds)),x(t,n,L)-p<l)return!1;const i=e.node;return i.terminals.forAll((e=>T(e))),null!==i.residents&&i.residents.forAll((e=>T(e))),!0}),t,n)}forEachNode(e){m(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const n=(0,d.g)(t),i=(0,d.a)(t),r=t=>{const r=this.objectToBoundingSphere(t),o=(0,d.g)(r),s=n+o;return!((0,a.s)((0,d.a)(r),i)-s*s<=0)||e(t)};let o=!0;const s=e=>{o&&(o=r(e))};m(this._root,(e=>{const t=(0,d.g)(e.bounds),r=n+t;if((0,a.s)((0,d.a)(e.bounds),i)-r*r>0)return!1;const l=e.node;return l.terminals.forAll(s),o&&null!==l.residents&&l.residents.forAll(s),o})),o&&this.forEachDegenerateObject(s)}_intersectsObject(e,t){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,d.k)(n,e)}_intersectsObjectWithOffset(e,t,n){const i=this.objectToBoundingSphere(t);return!(i[3]>0)||(0,d.k)(n.applyToBoundingSphere(i),e)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let n=0;n<t.length;n++){const i=p.acquire().init(e);this._add(t.at(n),i),p.release(i)}}_grow(e){if(A(e,(e=>this.objectToBoundingSphere(e)),z),E(z[3])&&!this._fitsInsideTree(z))if(_(this._root.node))(0,d.e)(z,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(z);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(z,e):this._growRootAsSubNode(e),p.release(e)}}_rebuildTree(e,t){(0,a.c)((0,d.a)(j),(0,d.a)(t.bounds)),j[3]=t.halfSize,A([e,j],(e=>e),F);const n=p.acquire().init(this._root);this._root.initFrom(null,F,F[3]),this._root.increaseHalfSize(1.25),m(n,(e=>(this.add(e.node.terminals.data),null!==e.node.residents&&this.add(e.node.residents.data),!0))),p.release(n)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return m(this._root,(e=>(n=Math.max(n,e.depth),n+t<=this._maximumDepth))),n+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],n=e;let i=-1/0;const r=this._root.bounds,o=this._root.halfSize;for(let e=0;e<3;e++){const s=r[e]-o-(n[e]-t),a=n[e]+t-(r[e]+o),l=Math.max(0,Math.ceil(s/(2*o))),c=Math.max(0,Math.ceil(a/(2*o)))+1,u=2**Math.ceil(Math.log(l+c)*Math.LOG2E);i=Math.max(i,u),H[e].min=l,H[e].max=c}for(let e=0;e<3;e++){let t=H[e].min,n=H[e].max;const s=(i-(t+n))/2;t+=Math.ceil(s),n+=Math.floor(s);const a=r[e]-o-t*o*2;I[e]=a+(n+t)*o}const s=i*o;return I[3]=s*C,p.acquire().initFrom(null,I,s,0)}_growRootAsSubNode(e){const t=this._root.node;(0,a.c)((0,d.a)(z),(0,d.a)(this._root.bounds)),z[3]=this._root.halfSize,this._root.init(e),e.advanceTo(z,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let n=0,i=0;for(;i<t.length&&null==e;)n=i++,e=t[n];for(;i<t.length;)if(t[i++])return-1;return n}_isDegenerate(e){return!E(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:n}=this,i=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:n,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:i}}}_nodeToJSON(e){const t=e.children.map((e=>e?this._nodeToJSON(e):null)),n=e.residents?.map((e=>this.objectToBoundingSphere(e))),i=e.terminals?.map((e=>this.objectToBoundingSphere(e)));return{children:t,residents:n,terminals:i}}static fromJSON(e){const t=new f((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}}class p{constructor(){this.bounds=(0,d.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,n,i=this.depth){return this.node=null!=e?e:p.createEmptyNode(),t&&(0,d.e)(t,this.bounds),this.halfSize=n,this.depth=i,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*C}advance(e){let t=this.node.children[e];t||(t=p.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const n=R[e];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,n=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}const i=this._childIndex(e);t&&t(this,i),this.advance(i)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new s.Z({shrink:!0}),residents:new s.Z({shrink:!0})}}static{this._pool=new o.Z(p)}static acquire(){return p._pool.acquire()}static release(e){p._pool.release(e)}static clearPool(){p._pool.prune()}}function m(e,t){let n=p.acquire().init(e);const i=[n];for(;0!==i.length;){if(n=i.pop(),t(n)&&!n.isLeaf())for(let e=0;e<n.node.children.length;e++)n.node.children[e]&&i.push(p.acquire().init(n).advance(e));p.release(n)}}function g(e,t,n,i=f.DepthOrder.FRONT_TO_BACK){let r=p.acquire().init(e);const o=[r];for(function(e,t,n){if(!B.length)for(let e=0;e<8;++e)B.push({index:0,distance:0});for(let n=0;n<8;++n){const i=R[n];B.data[n].index=n,B.data[n].distance=x(e,t,i)}B.sort(((e,t)=>e.distance-t.distance));for(let e=0;e<8;++e)n[e]=B.data[e].index}(n,i,W);0!==o.length;){if(r=o.pop(),t(r)&&!r.isLeaf())for(let e=7;e>=0;--e){const t=W[e];r.node.children[t]&&o.push(p.acquire().init(r).advance(t))}p.release(r)}}function v(e,t,n){M.clear();const i=n.advanceTo(t,((e,t)=>{M.push(e.node),M.push(t)}))?n.node.terminals:n.node.residents;if(i.removeUnordered(e),0===i.length)for(let e=M.length-2;e>=0&&T(M.data[e],M.data[e+1]);e-=2);}function T(e,t){return t>=0&&(e.children[t]=null),!!_(e)&&(null===e.residents&&(e.residents=new s.Z({shrink:!0})),!0)}function _(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}function S(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function O(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function b(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function A(e,t,n){P[0]=1/0,P[1]=1/0,P[2]=1/0,N[0]=-1/0,N[1]=-1/0,N[2]=-1/0;for(const n of e){const e=t(n);E(e[3])&&(S(P,e),O(N,e))}(0,a.m)((0,d.a)(n),P,N,.5),n[3]=Math.max(N[0]-P[0],N[1]-P[1],N[2]-P[2])/2}function y(e,t){let n,i=1/0;for(let r=0;r<8;++r){const o=x(e,t,w[r]);o<i&&(i=o,n=w[r])}return n}function x(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function E(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}i=f||(f={}),(r=i.DepthOrder||(i.DepthOrder={}))[r.FRONT_TO_BACK=1]="FRONT_TO_BACK",r[r.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const R=[(0,l.al)(-1,-1,-1),(0,l.al)(1,-1,-1),(0,l.al)(-1,1,-1),(0,l.al)(1,1,-1),(0,l.al)(-1,-1,1),(0,l.al)(1,-1,1),(0,l.al)(-1,1,1),(0,l.al)(1,1,1)],w=[(0,l.al)(-1,-1,-1),(0,l.al)(-1,-1,1),(0,l.al)(-1,1,-1),(0,l.al)(-1,1,1),(0,l.al)(1,-1,-1),(0,l.al)(1,-1,1),(0,l.al)(1,1,-1),(0,l.al)(1,1,1)],C=Math.sqrt(3),D=[null];const I=(0,d.c)(),L=(0,l.Ue)(),P=(0,l.Ue)(),N=(0,l.Ue)(),M=new s.Z,U=(0,d.c)(),z=(0,d.c)(),j=(0,d.c)(),F=(0,d.c)(),H=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],B=new s.Z,W=[0,0,0,0,0,0,0,0]},94125:function(e,t,n){var i;n.d(t,{j:function(){return i}}),function(e){e[e.ASYNC=0]="ASYNC",e[e.SYNC=1]="SYNC"}(i||(i={}))},65759:function(e,t,n){n.d(t,{F:function(){return h}});var i=n(3480),r=n(79487),o=n(87833),s=n(12818),a=(n(61432),n(61100)),l=n(67908);const c=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","transformationChanged","shaderTransformationChanged","visibilityChanged","occlusionChanged","highlightChanged","geometryAdded","geometryRemoved","attributesChanged"];var u=n(33641),d=n(94125);class h{constructor(e,t,n=""){this.stage=e,this.apiLayerViewUid=n,this.id=(0,l.D)(),this.events=new o.Z,this.visible=!0,this.sliceable=!1,this._objectsAdded=new Array,this._handles=new s.Z,this._objects=new Map,this._pickable=!0,this.visible=t?.visible??!0,this._pickable=t?.pickable??!0,this.updatePolicy=t?.updatePolicy??d.j.ASYNC,e.addLayer(this);for(const t of c)this._handles.add(this.events.on(t,(n=>e.handleEvent(t,n))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.removeLayer(this),this.invalidateSpatialQueryAccelerator())}get objects(){return this._objects}getObject(e){return(0,r.CY)(this._objects.get(e))}set pickable(e){this._pickable=e}get pickable(){return this._pickable&&this.visible}add(e){this._objects.set(e.id,e),e.layer=this,this.events.emit("layerObjectAdded",e),null!=this._octree&&this._objectsAdded.push(e)}remove(e){this._objects.delete(e.id)&&(this.events.emit("layerObjectRemoved",e),e.layer=null,null!=this._octree&&((0,i.e$)(this._objectsAdded,e)||this._octree.remove([e])))}addMany(e){for(const t of e)this._objects.set(t.id,t),t.layer=this;this.events.emit("layerObjectsAdded",e),null!=this._octree&&this._objectsAdded.push(...e)}removeMany(e){const t=new Array;for(const n of e)this._objects.delete(n.id)&&t.push(n);if(0!==t.length&&(this.events.emit("layerObjectsRemoved",t),t.forEach((e=>e.layer=null)),null!=this._octree)){for(let e=0;e<t.length;)(0,i.e$)(this._objectsAdded,t[e])?(t[e]=t[t.length-1],t.length-=1):++e;this._octree.remove(t)}}sync(){this.updatePolicy!==d.j.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.size>50?(this._octree=new u.Z((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.values())):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded),this._objectsAdded.length=0),this._octree}invalidateSpatialQueryAccelerator(){this._octree=(0,a.SC)(this._octree),this._objectsAdded.length=0}get test(){}}},21243:function(e,t,n){n.d(t,{p:function(){return r},y:function(){return i}});const i={stableRendering:!1},r={rootOrigin:null}},42131:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(67908);class r{constructor(e,t,n){this._createTexture=e,this._parametersKey=t,this._repository=new Map,this._orphanCache=n.newCache(`procedural-texture-repository:${(0,i.D)()}`,(e=>e.dispose()))}destroy(){for(const{texture:e}of this._repository.values())e.dispose();this._repository.clear(),this._orphanCache.destroy()}swap(e,t=null){const n=this._acquire(e);return this.release(t),n}release(e){if(null==e)return;const t=this._parametersKey(e),n=this._repository.get(t);if(n&&(n.refCount--,0===n.refCount)){this._repository.delete(t);const{texture:e}=n;this._orphanCache.put(t,e)}}_acquire(e){if(null==e)return null;const t=this._parametersKey(e),n=this._repository.get(t);if(n)return n.refCount++,n.texture;const i=this._orphanCache.pop(t)??this._createTexture(e),r=new o(i);return this._repository.set(t,r),i}}class o{constructor(e){this.texture=e,this.refCount=1}}},19843:function(e,t,n){n.d(t,{U:function(){return H}});var i=n(96711),r=n(99574),o=n(96094),s=n(26821),a=n(24910),l=n(82846),c=n(27583),u=n(57192),d=n(33869),h=n(88970),f=n(77773),p=n(52890),m=n(41044),g=n(95285),v=n(59797),T=n(19596),_=n(948),S=n(61719),O=n(52061),b=n(70218),A=n(92991),y=n(26723),x=n(49945),E=(n(61432),n(58257)),R=n(29107),w=n(33610),C=n(61536),D=n(26041),I=n(65650),L=n(51135);class P extends R.A{constructor(e,t){super(e,t,new E.J(x.R,(()=>n.e(48933).then(n.bind(n,48933)))),M),this.primitiveType=t.wireframe?I.MX.LINES:I.MX.TRIANGLE_STRIP}_makePipelineState(e,t){const{oitPass:n,output:i,hasOccludees:r,hasPolygonOffset:o}=e,s=n===w.M.NONE,a=n===w.M.FrontFace;return(0,L.sm)({blending:(0,m.c1)(i)?(0,C.Wo)(n):null,depthTest:{func:(0,C.Bh)(n)},depthWrite:(0,C.W$)(e),drawBuffers:(0,R.E)(i,(0,C.u_)(n,i)),colorWrite:L.gf,stencilWrite:r?D.s3:null,stencilTest:r?t?D.eD:D.RY:null,polygonOffset:s||a?o?N:null:C.E0})}initializePipeline(e){if(e.occluder){const t=e.hasPolygonOffset?N:null,{output:n,hasOccludees:i}=e;this._occluderPipelineTransparent=(0,L.sm)({blending:L.vf,polygonOffset:t,depthTest:D.zV,depthWrite:null,colorWrite:L.gf,stencilWrite:null,stencilTest:i?D.YD:null,drawBuffers:(0,R.E)(n)}),this._occluderPipelineOpaque=(0,L.sm)({blending:L.vf,polygonOffset:t,depthTest:i?D.zV:D.JN,depthWrite:null,colorWrite:L.gf,stencilWrite:i?D.P7:null,stencilTest:i?D.ii:null,drawBuffers:(0,R.E)(n)}),this._occluderPipelineMaskWrite=(0,L.sm)({blending:null,polygonOffset:t,depthTest:D.JN,depthWrite:null,colorWrite:null,stencilWrite:i?D.s3:null,stencilTest:i?D.eD:null,drawBuffers:(0,R.E)(n)})}return this._occludeePipeline=this._makePipelineState(e,!0),this._makePipelineState(e,!1)}getPipeline(e,t){if(e)return this._occludeePipeline;switch(t){case _.r.TRANSPARENT_OCCLUDER_MATERIAL:return this._occluderPipelineTransparent??super.getPipeline();case _.r.OCCLUDER_MATERIAL:return this._occluderPipelineOpaque??super.getPipeline();default:return this._occluderPipelineMaskWrite??super.getPipeline()}}}const N={factor:0,units:-4},M=new Map([[O.T.POSITION,0],[O.T.PREVIOUSDELTA,1],[O.T.NEXTDELTA,2],[O.T.U0,3],[O.T.LINEPARAMETERS,4],[O.T.COLOR,5],[O.T.COLORFEATUREATTRIBUTE,5],[O.T.SIZE,6],[O.T.SIZEFEATUREATTRIBUTE,6],[O.T.OPACITYFEATUREATTRIBUTE,7],[O.T.OLIDCOLOR,8]]);var U,z,j=n(55138),F=n(64801);(z=U||(U={}))[z.LEFT_JOIN_START=-2]="LEFT_JOIN_START",z[z.LEFT_JOIN_END=-1]="LEFT_JOIN_END",z[z.LEFT_CAP_START=-4]="LEFT_CAP_START",z[z.LEFT_CAP_END=-5]="LEFT_CAP_END",z[z.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",z[z.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",z[z.RIGHT_CAP_START=4]="RIGHT_CAP_START",z[z.RIGHT_CAP_END=5]="RIGHT_CAP_END";class H extends T.F5{constructor(e){super(e,W),this._configuration=new j.G,this.vertexAttributeLocations=M,this.produces=new Map([[_.r.OPAQUE_MATERIAL,e=>(0,m.Gy)(e)||(0,m.c1)(e)&&this.parameters.renderOccluded===T.yD.OccludeAndTransparentStencil],[_.r.OPAQUE_MATERIAL_WITHOUT_NORMALS,e=>(0,m.BX)(e)],[_.r.OCCLUDER_MATERIAL,e=>(0,m.f_)(e)&&this.parameters.renderOccluded===T.yD.OccludeAndTransparentStencil],[_.r.TRANSPARENT_OCCLUDER_MATERIAL,e=>(0,m.f_)(e)&&this.parameters.renderOccluded===T.yD.OccludeAndTransparentStencil],[_.r.TRANSPARENT_MATERIAL,e=>(0,m.c1)(e)&&this.parameters.writeDepth&&this.parameters.renderOccluded!==T.yD.OccludeAndTransparentStencil],[_.r.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,m.c1)(e)&&!this.parameters.writeDepth&&this.parameters.renderOccluded!==T.yD.OccludeAndTransparentStencil],[_.r.DRAPED_MATERIAL,e=>(0,m.xs)(e)]])}getConfiguration(e,t){super.getConfiguration(e,t,this._configuration),this._configuration.oitPass=t.oitPass,this._configuration.draped=t.slot===_.r.DRAPED_MATERIAL;const n=null!=this.parameters.stipplePattern&&e!==m.H_.Highlight;return this._configuration.stippleEnabled=n,this._configuration.stippleOffColorEnabled=n&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=n&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.roundJoins="round"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&function(e){return e.anchor===y.i5.Tip&&e.hideOnShortSegments&&"begin-end"===e.placement&&e.worldSpace}(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.hasOccludees=t.hasOccludees,this._configuration.occluder=this.parameters.renderOccluded===T.yD.OccludeAndTransparentStencil,this._configuration.terrainDepthTest=t.terrainDepthTest&&(0,m.c1)(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.wireframe=this.parameters.wireframe,this._configuration}get visible(){return this.parameters.color[3]>=F.e||null!=this.parameters.stipplePattern&&(this.parameters.stippleOffColor?.[3]??0)>F.e}intersectDraped({attributes:e,screenToWorldRatio:t},n,i,o,s){if(!n.options.selectionMode)return;const a=e.get(O.T.SIZE);let l=this.parameters.width;if(this.parameters.vvSize){const t=e.get(O.T.SIZEFEATUREATTRIBUTE).data[0];Number.isNaN(t)?l*=this.parameters.vvSize.fallback[0]:l*=(0,r.uZ)(this.parameters.vvSize.offset[0]+t*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else a&&(l*=a.data[0]);const c=i[0],u=i[1],d=(l/2+4)*t;let h=Number.MAX_VALUE,f=0;const p=e.get(O.T.POSITION).data,m=J(this.parameters,e)?p.length-2:p.length-5;for(let e=0;e<m;e+=3){const t=p[e],n=p[e+1],i=(e+3)%p.length,o=c-t,s=u-n,a=p[i]-t,l=p[i+1]-n,d=(0,r.uZ)((a*o+l*s)/(a*a+l*l),0,1),m=a*d-o,g=l*d-s,v=m*m+g*g;v<h&&(h=v,f=e/3)}h<d*d&&o(s.distance,s.normal,f)}intersect(e,t,n,o,l,c){const{options:u,camera:p,rayBegin:m,rayEnd:g}=n;if(!u.selectionMode||!e.visible||!p)return;if(!(0,S.kG)(t))return void i.Z.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix");const v=e.attributes,T=v.get(O.T.POSITION).data;let _=this.parameters.width;if(this.parameters.vvSize){const e=v.get(O.T.SIZEFEATUREATTRIBUTE).data[0];Number.isNaN(e)||(_*=(0,r.uZ)(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0]))}else v.has(O.T.SIZE)&&(_*=v.get(O.T.SIZE).data[0]);const b=Y;(0,s.JG)(b,n.point);const A=_*p.pixelRatio/2+4*p.pixelRatio;(0,a.i)(se[0],b[0]-A,b[1]+A,0),(0,a.i)(se[1],b[0]+A,b[1]+A,0),(0,a.i)(se[2],b[0]+A,b[1]-A,0),(0,a.i)(se[3],b[0]-A,b[1]-A,0);for(let e=0;e<4;e++)if(!p.unprojectFromRenderScreen(se[e],ae[e]))return;(0,f.zk)(p.eye,ae[0],ae[1],le),(0,f.zk)(p.eye,ae[1],ae[2],ce),(0,f.zk)(p.eye,ae[2],ae[3],ue),(0,f.zk)(p.eye,ae[3],ae[0],de);let y=Number.MAX_VALUE,x=0;const E=J(this.parameters,v)?T.length-2:T.length-5;for(let e=0;e<E;e+=3){G[0]=T[e]+t[12],G[1]=T[e+1]+t[13],G[2]=T[e+2]+t[14];const n=(e+3)%T.length;if(Z[0]=T[n]+t[12],Z[1]=T[n+1]+t[13],Z[2]=T[n+2]+t[14],(0,f.jH)(le,G)<0&&(0,f.jH)(le,Z)<0||(0,f.jH)(ce,G)<0&&(0,f.jH)(ce,Z)<0||(0,f.jH)(ue,G)<0&&(0,f.jH)(ue,Z)<0||(0,f.jH)(de,G)<0&&(0,f.jH)(de,Z)<0)continue;if(p.projectToRenderScreen(G,X),p.projectToRenderScreen(Z,Q),X[2]<0&&Q[2]>0){(0,a.d)(q,G,Z);const e=p.frustum,t=-(0,f.jH)(e[d.Nu.NEAR],G)/(0,a.e)(q,(0,f.st)(e[d.Nu.NEAR]));(0,a.g)(q,q,t),(0,a.f)(G,G,q),p.projectToRenderScreen(G,X)}else if(X[2]>0&&Q[2]<0){(0,a.d)(q,Z,G);const e=p.frustum,t=-(0,f.jH)(e[d.Nu.NEAR],Z)/(0,a.e)(q,(0,f.st)(e[d.Nu.NEAR]));(0,a.g)(q,q,t),(0,a.f)(Z,Z,q),p.projectToRenderScreen(Z,Q)}else if(X[2]<0&&Q[2]<0)continue;X[2]=0,Q[2]=0;const i=(0,h.Jk)((0,h.zk)(X,Q,te),b);i<y&&(y=i,(0,a.c)(K,G),(0,a.c)(ee,Z),x=e/3)}if(y<A*A){let e=Number.MAX_VALUE;if((0,h.AR)((0,h.zk)(K,ee,te),(0,h.zk)(m,g,ne),$)){(0,a.d)($,$,m);const t=(0,a.l)($);(0,a.g)($,$,1/t),e=t/(0,a.j)(m,g)}c(e,$,x)}}get _layout(){const e=(0,p.U$)().vec3f(O.T.POSITION).vec4f16(O.T.PREVIOUSDELTA).vec4f16(O.T.NEXTDELTA).f32(O.T.U0).vec2f16(O.T.LINEPARAMETERS);return this.parameters.vvColor?e.f32(O.T.COLORFEATUREATTRIBUTE):e.vec4u8(O.T.COLOR,{glNormalized:!0}),this.parameters.vvSize?e.f32(O.T.SIZEFEATUREATTRIBUTE):e.f32(O.T.SIZE),this.parameters.vvOpacity&&e.f32(O.T.OPACITYFEATUREATTRIBUTE),(0,g.B)()&&e.vec4u8(O.T.OLIDCOLOR),e}createBufferWriter(){return new V(this._layout,this.parameters)}createGLMaterial(e){return new B(e)}validateParameters(e){"miter"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class B extends v.Z{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextures.release(this._stipplePattern),this._stipplePattern=null}beginSlot(e){const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextures.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.getTechnique(P,e)}}class W extends b.n{constructor(){super(...arguments),this.width=0,this.color=c.hq,this.join="miter",this.cap=j.R.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.wireframe=!1}get transparent(){return this.color[3]<1||null!=this.stipplePattern&&(this.stippleOffColor?.[3]??0)<1}}class V{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t;const n=t.stipplePattern?1:0;switch(this._parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=n;break;case"round":this.numJoinSubdivisions=x.r+n}}_isClosed(e){return J(this._parameters,e)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=e.get(O.T.POSITION).indices.length/2+1,n=this._isClosed(e);let i=n?2:4;return i+=((n?t:t-1)-(n?0:1))*(2*this.numJoinSubdivisions+4),i+=2,this._parameters.wireframe&&(i=2+4*(i-2)),i}write(e,t,n,i,r,o){const s=n.get(O.T.POSITION),l=s.indices,c=s.data.length/3,d=n.get(O.T.DISTANCETOSTART)?.data;l&&l.length!==2*(c-1)&&console.warn("RibbonLineMaterial does not support indices");const h=(this.vertexBufferLayout.fields.has(O.T.SIZEFEATUREATTRIBUTE)?n.get(O.T.SIZEFEATUREATTRIBUTE)?.data[0]:n.get(O.T.SIZE)?.data[0])??1;let f=[1,1,1,1],p=0;const m=this.vertexBufferLayout.fields.has(O.T.COLORFEATUREATTRIBUTE);m?p=n.get(O.T.COLORFEATUREATTRIBUTE).data[0]:n.has(O.T.COLOR)&&(f=n.get(O.T.COLOR).data);const v=this.vertexBufferLayout.fields.has(O.T.OPACITYFEATUREATTRIBUTE),T=v?n.get(O.T.OPACITYFEATUREATTRIBUTE).data[0]:0,_=new Float32Array(r.buffer),S=(0,u.TQ)(r.buffer),b=new Uint8Array(r.buffer),y=this.vertexBufferLayout.stride/4;let x=o*y;const E=x;let R=0;const w=d?(e,t,n)=>R=d[n]:(e,t,n)=>R+=(0,a.j)(e,t),C=_.BYTES_PER_ELEMENT/S.BYTES_PER_ELEMENT,D=4/C,I=(e,t,n,r,o,s,a)=>{_[x++]=t[0],_[x++]=t[1],_[x++]=t[2],(0,A.DO)(e,t,S,x*C),x+=D,(0,A.DO)(n,t,S,x*C),x+=D,_[x++]=a;let l=x*C;if(S[l++]=r,S[l++]=o,x=Math.ceil(l/C),m)_[x]=p;else{const e=Math.min(4*s,f.length-4),t=4*x;b[t]=255*f[e],b[t+1]=255*f[e+1],b[t+2]=255*f[e+2],b[t+3]=255*f[e+3]}if(x++,_[x++]=h,v&&(_[x++]=T),(0,g.B)()){let e=4*x;i?(b[e++]=i[0],b[e++]=i[1],b[e++]=i[2],b[e++]=i[3]):(b[e++]=0,b[e++]=0,b[e++]=0,b[e++]=0),x=Math.ceil(.25*e)}};x+=y,(0,a.i)(re,s.data[0],s.data[1],s.data[2]),e&&(0,a.t)(re,re,e);const L=this._isClosed(n);if(L){const t=s.data.length-3;(0,a.i)(ie,s.data[t],s.data[t+1],s.data[t+2]),e&&(0,a.t)(ie,ie,e)}else(0,a.i)(oe,s.data[3],s.data[4],s.data[5]),e&&(0,a.t)(oe,oe,e),I(re,re,oe,1,U.LEFT_CAP_START,0,0),I(re,re,oe,1,U.RIGHT_CAP_START,0,0),(0,a.c)(ie,re),(0,a.c)(re,oe);const P=L?0:1,N=L?c:c-1;for(let t=P;t<N;t++){const n=(t+1)%c*3;(0,a.i)(oe,s.data[n],s.data[n+1],s.data[n+2]),e&&(0,a.t)(oe,oe,e),w(ie,re,t),I(ie,re,oe,0,U.LEFT_JOIN_END,t,R),I(ie,re,oe,0,U.RIGHT_JOIN_END,t,R);const i=this.numJoinSubdivisions;for(let e=0;e<i;++e){const n=(e+1)/(i+1);I(ie,re,oe,n,U.LEFT_JOIN_END,t,R),I(ie,re,oe,n,U.RIGHT_JOIN_END,t,R)}I(ie,re,oe,1,U.LEFT_JOIN_START,t,R),I(ie,re,oe,1,U.RIGHT_JOIN_START,t,R),(0,a.c)(ie,re),(0,a.c)(re,oe)}return L?((0,a.i)(oe,s.data[3],s.data[4],s.data[5]),e&&(0,a.t)(oe,oe,e),R=w(ie,re,N),I(ie,re,oe,0,U.LEFT_JOIN_END,P,R),I(ie,re,oe,0,U.RIGHT_JOIN_END,P,R)):(R=w(ie,re,N),I(ie,re,re,0,U.LEFT_CAP_END,N,R),I(ie,re,re,0,U.RIGHT_CAP_END,N,R)),k(_,E+y,_,E,y),x=k(_,x-y,_,x,y),this._parameters.wireframe&&this._addWireframeVertices(r,E,x,y),null}_addWireframeVertices(e,t,n,i){const r=new Float32Array(e.buffer,n*Float32Array.BYTES_PER_ELEMENT),o=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,n-t);let s=0;const a=e=>s=k(o,e,r,s,i);for(let e=0;e<o.length-1;e+=2*i)a(e),a(e+2*i),a(e+1*i),a(e+2*i),a(e+1*i),a(e+3*i)}}function k(e,t,n,i,r){for(let o=0;o<r;o++)n[i++]=e[t++];return i}function J(e,t){return!!e.isClosed&&t.get(O.T.POSITION).indices.length>2}const G=(0,l.Ue)(),Z=(0,l.Ue)(),q=(0,l.Ue)(),$=(0,l.Ue)(),Y=(0,l.Ue)(),X=(0,o.J$)(),Q=(0,o.J$)(),K=(0,l.Ue)(),ee=(0,l.Ue)(),te=(0,h.Ue)(),ne=(0,h.Ue)(),ie=(0,l.Ue)(),re=(0,l.Ue)(),oe=(0,l.Ue)(),se=[(0,o.J$)(),(0,o.J$)(),(0,o.J$)(),(0,o.J$)()],ae=[(0,l.Ue)(),(0,l.Ue)(),(0,l.Ue)(),(0,l.Ue)()],le=(0,f.Ue)(),ce=(0,f.Ue)(),ue=(0,f.Ue)(),de=(0,f.Ue)()},18906:function(e,t,n){n.d(t,{EE:function(){return a},U_:function(){return s},lr:function(){return o}});var i=n(82846),r=n(82969);function o(e,t){return null==e&&(e=[]),e.push(t),e}function s(e,t){if(null==e)return null;const n=e.filter((e=>e!==t));return 0===n.length?null:n}function a(e,t,n,i,o){l[0]=e.get(t,0),l[1]=e.get(t,1),l[2]=e.get(t,2),(0,r.LF)(l,c,3),n.set(o,0,c[0]),i.set(o,0,c[1]),n.set(o,1,c[2]),i.set(o,1,c[3]),n.set(o,2,c[4]),i.set(o,2,c[5])}const l=(0,i.Ue)(),c=new Float32Array(6)},41830:function(e,t,n){n.d(t,{$A:function(){return d},kW:function(){return l},kj:function(){return h}});var i=n(64497),r=n(42131),o=n(65650),s=n(8158),a=n(35928);function l(e,t){return new r.t((t=>{const{encodedData:n,textureSize:i}=c(t),r=new a.X;return r.internalFormat=o.VI.RGBA,r.width=i,r.height=1,r.wrapMode=o.e8.REPEAT,new s.x(e,r,n)}),(e=>`${e.pattern.join(",")}-r${e.pixelRatio}`),t)}function c(e){const t=u(e),n=1/e.pixelRatio,r=d(e),o=h(e),s=(Math.floor(.5*(o-1))+.5)*n,a=[];let l=1;for(const e of t){for(let t=0;t<e;t++){const i=l*(Math.min(t,e-1-t)+.5)*n/s*.5+.5;a.push(i)}l=-l}const c=Math.round(t[0]/2),f=[...a.slice(c),...a.slice(0,c)],p=new Uint8Array(4*r);let m=0;for(const e of f)(0,i.I)(e,p,m),m+=4;return{encodedData:p,textureSize:r}}function u(e){return e.pattern.map((t=>Math.round(t*e.pixelRatio)))}function d(e){if(null==e)return 1;const t=u(e);return Math.floor(t.reduce(((e,t)=>e+t)))}function h(e){return u(e).reduce(((e,t)=>Math.max(e,t)))}},26723:function(e,t,n){n.d(t,{I9:function(){return i},PI:function(){return d},i5:function(){return r}});var i,r,o,s=n(73440),a=n(31839),l=n(34479),c=n(83046),u=n(91041);(o=i||(i={}))[o.Draped=0]="Draped",o[o.Screen=1]="Screen",o[o.World=2]="World",o[o.COUNT=3]="COUNT",function(e){e[e.Center=0]="Center",e[e.Tip=1]="Tip",e[e.COUNT=2]="COUNT"}(r||(r={}));class d extends u.W{constructor(){super(...arguments),this.space=i.Screen,this.anchor=r.Center,this.occluder=!1,this.writeDepth=!1,this.hideOnShortSegments=!1,this.hasCap=!1,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=a.I.None,this.emissionSource=l.jo.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.objectAndLayerIdColorInstanced=!1,this.overlayEnabled=!1,this.snowCover=!1}get draped(){return this.space===i.Draped}}(0,s._)([(0,c.o)({count:i.COUNT})],d.prototype,"space",void 0),(0,s._)([(0,c.o)({count:r.COUNT})],d.prototype,"anchor",void 0),(0,s._)([(0,c.o)()],d.prototype,"occluder",void 0),(0,s._)([(0,c.o)()],d.prototype,"writeDepth",void 0),(0,s._)([(0,c.o)()],d.prototype,"hideOnShortSegments",void 0),(0,s._)([(0,c.o)()],d.prototype,"hasCap",void 0),(0,s._)([(0,c.o)()],d.prototype,"hasTip",void 0),(0,s._)([(0,c.o)()],d.prototype,"vvSize",void 0),(0,s._)([(0,c.o)()],d.prototype,"vvColor",void 0),(0,s._)([(0,c.o)()],d.prototype,"vvOpacity",void 0),(0,s._)([(0,c.o)()],d.prototype,"hasOccludees",void 0),(0,s._)([(0,c.o)()],d.prototype,"terrainDepthTest",void 0),(0,s._)([(0,c.o)()],d.prototype,"cullAboveTerrain",void 0)},55138:function(e,t,n){n.d(t,{G:function(){return u},R:function(){return i}});var i,r,o=n(73440),s=n(31839),a=n(34479),l=n(83046),c=n(91041);(r=i||(i={}))[r.BUTT=0]="BUTT",r[r.SQUARE=1]="SQUARE",r[r.ROUND=2]="ROUND",r[r.COUNT=3]="COUNT";class u extends c.W{constructor(){super(...arguments),this.capType=i.BUTT,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.occluder=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.wireframe=!1,this.discardInvisibleFragments=!1,this.objectAndLayerIdColorInstanced=!1,this.textureCoordinateType=s.I.None,this.emissionSource=a.jo.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.overlayEnabled=!1,this.snowCover=!1}}(0,o._)([(0,l.o)({count:i.COUNT})],u.prototype,"capType",void 0),(0,o._)([(0,l.o)()],u.prototype,"hasPolygonOffset",void 0),(0,o._)([(0,l.o)()],u.prototype,"writeDepth",void 0),(0,o._)([(0,l.o)()],u.prototype,"draped",void 0),(0,o._)([(0,l.o)()],u.prototype,"stippleEnabled",void 0),(0,o._)([(0,l.o)()],u.prototype,"stippleOffColorEnabled",void 0),(0,o._)([(0,l.o)()],u.prototype,"stipplePreferContinuous",void 0),(0,o._)([(0,l.o)()],u.prototype,"roundJoins",void 0),(0,o._)([(0,l.o)()],u.prototype,"applyMarkerOffset",void 0),(0,o._)([(0,l.o)()],u.prototype,"vvSize",void 0),(0,o._)([(0,l.o)()],u.prototype,"vvColor",void 0),(0,o._)([(0,l.o)()],u.prototype,"vvOpacity",void 0),(0,o._)([(0,l.o)()],u.prototype,"falloffEnabled",void 0),(0,o._)([(0,l.o)()],u.prototype,"innerColorEnabled",void 0),(0,o._)([(0,l.o)()],u.prototype,"hasOccludees",void 0),(0,o._)([(0,l.o)()],u.prototype,"occluder",void 0),(0,o._)([(0,l.o)()],u.prototype,"terrainDepthTest",void 0),(0,o._)([(0,l.o)()],u.prototype,"cullAboveTerrain",void 0),(0,o._)([(0,l.o)()],u.prototype,"wireframe",void 0),(0,o._)([(0,l.o)()],u.prototype,"discardInvisibleFragments",void 0),(0,o._)([(0,l.o)()],u.prototype,"objectAndLayerIdColorInstanced",void 0)}}]);