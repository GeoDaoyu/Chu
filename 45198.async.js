"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[45198],{69071:function(e,t,i){i.d(t,{Jv:function(){return r},M4:function(){return n},WJ:function(){return u},Xq:function(){return o},lN:function(){return s}});const n=-3,r=n-1;var s;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(s||(s={}));class o{constructor(e,t,i,n=0){this.name=e,this._storage=t,this.removeFunc=i,this._defaultPriority=n,this.id=`${c++}${a}`,this.size=0,this._hit=0,this._miss=0,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}set maxSize(e){this._storage.setMaxSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,i=this._defaultPriority){this._storage.put(this,e,t,t.cachedMemory,i)}pop(e){const t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){const t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t){this._storage.updateSize(this,e,t,t.cachedMemory)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}*[Symbol.iterator](){yield*this._storage.values(this)}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class u{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){return this._db.get(e.id+t)?.size??0}put(e,t,i,o,u){t=e.id+t;const c=this._db.get(t);if(c&&(this._size-=c.size,e.size-=c.size,this._db.delete(t),c.entry!==i&&this._notifyRemove(t,c.entry,c.size,s.ALL)),o>this._maxSize)return void this._notifyRemove(t,i,o,s.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!o||o<0)return console.warn(`Refusing to cache entry with size ${o} for key ${t}`),void this._notifyRemove(t,i,0,s.ALL);const a=1+Math.max(u,r)-n;this._db.set(t,new l(i,o,a)),this._size+=o,e.size+=o,this._checkSize()}updateSize(e,t,i,n){t=e.id+t;const r=this._db.get(t);if(r&&r.entry===i){for(this._size-=r.size,e.size-=r.size;n>this._maxSize;){const e=this._notifyRemove(t,i,n,s.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);n=e}r.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,t){t=e.id+t;const i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;const i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){const i=this._db.get(e.id+t);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,n)=>{const r=e.lifetime;i[r]=(i[r]||0)+e.size,this._users.forEach((i=>{const{id:r,name:s}=i;if(n.startsWith(r)){const i=t[s]||0;t[s]=i+e.size}}))}));const r={};this._users.forEach((e=>{const i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,r[i]=Math.round(100*e.hitRate)+"%"}else r[i]="0%"}));const s=Object.keys(t);s.sort(((e,i)=>t[i]-t[e])),s.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+r[i]));for(let t=i.length-1;t>=0;--t){const r=i[t];r&&(e["Priority "+(t+n-1)]=Math.round(r/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,s.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,s.ALL))),this._users.forEach((e=>e.size=0)),this._size=0,this._db.clear()}*values(e){for(const[t,i]of this._db)t.startsWith(e.id)&&(yield i.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,n){const r=this._users.get(e.split(a)[0])?.removeFunc,s=r?.(t,n,i);return"number"==typeof s?s:null}_checkSize(){this._sizeLimits.forEach(((e,t)=>this._checkSizeLimits(e,t))),this._checkSizeLimits(this.maxSize)}setMaxSize(e,t){null==t||t<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,t)}_checkSizeLimits(e,t){const i=t??this;if(i.size<=e)return;const n=t?.id;let r=!0;for(;r;){r=!1;for(const[s,o]of this._db)if(0===o.lifetime&&(!n||s.startsWith(n))){const n=t??this._users.get(s.split(a)[0]);if(this._purgeItem(s,o,n),i.size<=.9*e)return;r||=this._db.has(s)}}for(const[r,s]of this._db)if(!n||r.startsWith(n)){const n=t??this._users.get(r.split(a)[0]);if(this._purgeItem(r,s,n),i.size<=.9*e)return}}_purgeItem(e,t,i){if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);const n=this._notifyRemove(e,t.entry,t.size,s.SOME);null!=n&&n>0&&(this._size+=n,i&&(i.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let c=0;class l{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}const a=":"},70243:function(e,t,i){function n(e){return null!=u(e)||null!=o(e)}function r(e){return c.test(e)}function s(e){return u(e)??o(e)}function o(e){const t=new Date(e);return function(e,t){if(Number.isNaN(e.getTime()))return!1;let i=!0;if(a&&/\d+\W*$/.test(t)){const e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,n=0;for(;!t&&n<=e.length;)t=!l.test(e[n]),n++;i=!t}}return i}(t,e)?Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset():null}function u(e){const t=c.exec(e);if(!t?.groups)return null;const i=t.groups,n=+i.year,r=+i.month-1,s=+i.day,o=+(i.hours??"0"),u=+(i.minutes??"0"),l=+(i.seconds??"0");if(o>23)return null;if(u>59)return null;if(l>59)return null;const a=i.ms??"0",f=a?+a.padEnd(3,"0").slice(0,3):0;let h;if(i.isUTC||!i.offsetSign)h=Date.UTC(n,r,s,o,u,l,f);else{const e=+i.offsetHours,t=+i.offsetMinutes;h=6e4*("+"===i.offsetSign?-1:1)*(60*e+t)+Date.UTC(n,r,s,o,u,l,f)}return Number.isNaN(h)?null:h}i.d(t,{mu:function(){return r},of:function(){return n},sG:function(){return s}});const c=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;const l=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,a=!Number.isNaN(new Date("technology 10").getTime())},28960:function(e,t,i){i.d(t,{A4:function(){return s},L9:function(){return o},yV:function(){return r}});var n=i(87599);class r{static{this.instance=new n.vF("Etc/UTC")}}function s(e){return e instanceof n.ld?e===r.instance:"unknown"===e?.toString().toLowerCase()}function o(e){return s(e)?r.instance:e}},60199:function(e,t,i){i.d(t,{QZ:function(){return s},Rq:function(){return o},bg:function(){return r}});var n=i(59384);function r(e,t=!1){return e<=n.c8?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function s(e){return((0,n.fU)(e)?e.byteLength/8:e.length)<=n.c8?Array.from(e):new Float64Array(e)}function o(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}},16447:function(e,t,i){i.d(t,{BD:function(){return w},Cb:function(){return z},FY:function(){return c},G1:function(){return g},G_:function(){return B},HH:function(){return f},I7:function(){return v},JR:function(){return q},KE:function(){return Z},TC:function(){return d},Tn:function(){return O},Ue:function(){return o},VK:function(){return m},Wi:function(){return _},Ye:function(){return b},Zp:function(){return I},al:function(){return u},bA:function(){return R},bM:function(){return H},bZ:function(){return D},be:function(){return S},bf:function(){return F},cS:function(){return E},cv:function(){return L},dp:function(){return T},eZ:function(){return a},fS:function(){return C},gy:function(){return $},is:function(){return j},kK:function(){return x},nX:function(){return h},op:function(){return k},pp:function(){return y},r3:function(){return N},re:function(){return J},sU:function(){return p},t8:function(){return A},wp:function(){return G},wq:function(){return l},wz:function(){return M},y8:function(){return P}});var n=i(71354),r=i(47566),s=i(60199);function o(e=H){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function u(e,t,i,n,r,s,u=o()){return u[0]=e,u[1]=t,u[2]=i,u[3]=n,u[4]=r,u[5]=s,u}function c(e,t=o()){return l(e,0,e.length/3,t)}function l(e,t,i,n=o()){return A(n,B),g(n,e,t,i),n}function a(e,t=(0,s.bg)(24)){const[i,n,r,o,u,c]=e;return t[0]=i,t[1]=n,t[2]=r,t[3]=i,t[4]=n,t[5]=c,t[6]=i,t[7]=u,t[8]=r,t[9]=i,t[10]=u,t[11]=c,t[12]=o,t[13]=n,t[14]=r,t[15]=o,t[16]=n,t[17]=c,t[18]=o,t[19]=u,t[20]=r,t[21]=o,t[22]=u,t[23]=c,t}function f(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new n.Z(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function h(e,t,i=o()){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=t[0],i[4]=t[1],i[5]=t[2],i}function d(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function m(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function y(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function g(e,t,i=0,n=t.length/3){let r=e[0],s=e[1],o=e[2],u=e[3],c=e[4],l=e[5];for(let e=0;e<n;e++)r=Math.min(r,t[i+3*e]),s=Math.min(s,t[i+3*e+1]),o=Math.min(o,t[i+3*e+2]),u=Math.max(u,t[i+3*e]),c=Math.max(c,t[i+3*e+1]),l=Math.max(l,t[i+3*e+2]);e[0]=r,e[1]=s,e[2]=o,e[3]=u,e[4]=c,e[5]=l}function _(e,t,i){const n=t.length;let r=e[0],s=e[1],o=e[2],u=e[3],c=e[4],l=e[5];if(i)for(let e=0;e<n;e++){const i=t[e];r=Math.min(r,i[0]),s=Math.min(s,i[1]),o=Math.min(o,i[2]),u=Math.max(u,i[0]),c=Math.max(c,i[1]),l=Math.max(l,i[2])}else for(let e=0;e<n;e++){const i=t[e];r=Math.min(r,i[0]),s=Math.min(s,i[1]),u=Math.max(u,i[0]),c=Math.max(c,i[1])}e[0]=r,e[1]=s,e[2]=o,e[3]=u,e[4]=c,e[5]=l}function p(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function F(e){return e[0]>=e[3]?0:e[3]-e[0]}function b(e){return e[1]>=e[4]?0:e[4]-e[1]}function z(e){return e[2]>=e[5]?0:e[5]-e[2]}function M(e){const t=F(e),i=z(e),n=b(e);return Math.sqrt(t*t+i*i+n*n)}function S(e,t=[0,0,0]){return t[0]=e[0]+F(e)/2,t[1]=e[1]+b(e)/2,t[2]=e[2]+z(e)/2,t}function T(e,t=[0,0,0]){return t[0]=F(e),t[1]=b(e),t[2]=z(e),t}function w(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function N(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]}function x(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function I(e,t){return null==t||x(e,t)}function v(e,t,i){let n=0,r=1;for(let s=0;s<3;++s){const o=e[s],u=e[s+3],c=t[s],l=i[s],a=l<c,f=a?l:c,h=a?c:l,d=Math.max(o,f),m=Math.min(u,h);if(d>m)return!1;if(h===f)break;const y=h-f,g=(d-f)/y,_=(m-f)/y;if(n=Math.max(n,a?1-_:g),r=Math.min(r,a?1-g:_),n>r)return!1}return!0}function L(e,t,i,n,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+n,r[3]=e[3]+t,r[4]=e[4]+i,r[5]=e[5]+n,r}function R(e,t,i=e){const n=e[0]+F(e)/2,r=e[1]+b(e)/2,s=e[2]+z(e)/2;return i[0]=n+(e[0]-n)*t,i[1]=r+(e[1]-r)*t,i[2]=s+(e[2]-s)*t,i[3]=n+(e[3]-n)*t,i[4]=r+(e[4]-r)*t,i[5]=s+(e[5]-s)*t,i}function Z(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function k(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function O(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function A(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function E(e){return e?A(e,B):o(B)}function P(e,t){return t||(t=(0,r.Ue)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function q(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function D(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=n,e[4]=r,e[5]=Number.POSITIVE_INFINITY,e}function j(e){return 6===e.length}function G(e){return 0===F(e)&&0===b(e)&&0===z(e)}function C(e,t,i){if(null==e||null==t)return e===t;if(!j(e)||!j(t))return!1;if(i){for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function J(e,t,i,n,r,s){return u(e,t,i,n,r,s,U)}const $=[-1/0,-1/0,-1/0,1/0,1/0,1/0],B=[1/0,1/0,1/0,-1/0,-1/0,-1/0],H=[0,0,0,0,0,0],U=o()},15083:function(e,t,i){function n(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const i=[];for(const n of t.fieldNames)i.push(e.attributes[n]??null);return JSON.stringify(i)}}}function r(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const i=t.uniqueIdFields.map((t=>e.attributes?.[t]));return JSON.stringify(i)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}i.d(t,{C:function(){return n},v:function(){return r}})},18763:function(e,t,i){i.d(t,{O3:function(){return S},lG:function(){return w},my:function(){return T},q9:function(){return a}});var n=i(70243),r=i(88194),s=i(8554),o=i(24564),u=i(20722),c=i(76554);const l={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function a(e){return l[e]}function*f(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*h(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function d(e){for(const t of e)if(t.length>2)return!0;return!1}function m(e){let t=0;for(let i=0;i<e.length;i++){const n=e[i],r=e[(i+1)%e.length];t+=n[0]*r[1]-r[0]*n[1]}return t<=0}function y(e){const t=e[0],i=e[e.length-1];return t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]||e.push(t),e}function g(e,t,i){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,i){return F(e,t.coordinates,i),e}(e,t,i);case"MultiLineString":return function(e,t,i){for(const n of t.coordinates)F(e,n,i);return e}(e,t,i);case"MultiPolygon":return function(e,t,i){for(const n of t.coordinates){_(e,n[0],i);for(let t=1;t<n.length;t++)p(e,n[t],i)}return e}(e,t,i);case"Point":return function(e,t,i){return z(e,t.coordinates,i),e}(e,t,i);case"Polygon":return function(e,t,i){const n=t.coordinates;_(e,n[0],i);for(let t=1;t<n.length;t++)p(e,n[t],i);return e}(e,t,i)}}function _(e,t,i){const n=y(t);!function(e){return!m(e)}(n)?F(e,n,i):b(e,n,i)}function p(e,t,i){const n=y(t);!function(e){return m(e)}(n)?F(e,n,i):b(e,n,i)}function F(e,t,i){for(const n of t)z(e,n,i);e.lengths.push(t.length)}function b(e,t,i){for(let n=t.length-1;n>=0;n--)z(e,t[n],i);e.lengths.push(t.length)}function z(e,t,i){const[n,r,s]=t;e.coords.push(n,r),i.hasZ&&e.coords.push(s||0)}function M(e){switch(typeof e){case"string":return(0,n.mu)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function S(e,t=4326){if(!e)throw new r.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new r.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:i}=e;if(!i)return;const n="string"==typeof i?i:"name"===i.type?i.properties.name:"EPSG"===i.type?i.properties.code:null,o=(0,s.oR)({wkid:t})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${t})$`,"i");if(!n||!o.test(n))throw new r.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:i})}function T(e,t={}){const i=[],n=new Set,r=new Set;let s,o=!1,u=null,l=!1,{geometryType:m=null}=t;for(const t of f(e)){const{geometry:e,properties:f,id:y}=t;if((!e||(m||(m=a(e.type)),a(e.type)===m))&&(o||(o=d(h(e))),l||(l=null!=y,l&&(s=typeof y,f&&(u=Object.keys(f).filter((e=>f[e]===y))))),f&&u&&l&&null!=y&&(u.length>1?u=u.filter((e=>f[e]===y)):1===u.length&&(u=f[u[0]]===y?u:[])),f))for(const e in f){if(n.has(e))continue;const t=M(f[e]);if("unknown"===t){r.add(e);continue}r.delete(e),n.add(e);const s=(0,c.q6)(e);s&&i.push({name:s,alias:e,type:t})}}const y=(0,c.q6)(1===u?.length&&u[0]||null)??void 0;if(y)for(const e of i)if(e.name===y&&(0,c.H7)(e)){e.type="esriFieldTypeOID";break}return{fields:i,geometryType:m,hasZ:o,objectIdFieldName:y,objectIdFieldType:s,unknownFields:Array.from(r)}}function w(e,t){return Array.from(function*(e,t={}){const{geometryType:i,objectIdField:n}=t;for(const r of e){const{geometry:e,properties:s,id:c}=r;if(e&&a(e.type)!==i)continue;const l=s||{};let f;n&&(f=l[n],null==c||f||(l[n]=f=c));const h=new o.u_(e?g(new u.Z,e,t):null,l,null,f);yield h}}(f(e),t))}},299:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(88194),r=i(96711),s=i(79577),o=i(28960),u=i(69306),c=i(76554),l=i(41801),a=i(88097),f=i(87599);const h=new Map;class d{static fromJSON(e){return new d(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new d(e.fields??[],_(e))}static fromLayerJSON(e){return new d(e.fields??[],_(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const i=[];for(const e of this.fields){const t=e?.name,n=y(t);if(t&&n){const r=m(t);this._fieldsMap.set(t,e),this._fieldsMap.set(r,e),this._normalizedFieldsMap.set(n,e),i.push(`${r}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,c.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,c.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,c.Dl)(e)||(0,c.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,c.Dl)(e)||(0,c.Se)(e)||e.nullable||void 0!==(0,c.os)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(m(e))??this._normalizedFieldsMap.get(y(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(r.Z.getLogger("esri.layers.support.FieldsIndex").errorOnce(new n.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),l.pt):g.has(t.type)?l._4:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===l._4?o.yV.instance:t===l.pt?f.Qf.utcInstance:(0,s.s1)(h,t,(()=>f.vF.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,c.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,u.A)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function m(e){return e.trim().toLowerCase()}function y(e){return(0,c.q6)(e)?.toLowerCase()??""}const g=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function _(e){const t=new Map;if(!e.fields)return t;const i=!0===e.datesInUnknownTimezone,{timeInfo:n,editFieldsInfo:r}=e,s=(n?"startField"in n?n.startField:n.startTimeField:"")??"",o=(n?"endField"in n?n.endField:n.endTimeField:"")??"",u=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,a.Jv)(e.dateFieldsTimeReference):null,c=r?function(e){return"timeZone"in e}(r)?r.timeZone??u:r.dateFieldsTimeReference?(0,a.Jv)(r.dateFieldsTimeReference):u??l.pt:null,f=n?function(e){return"timeZone"in e}(n)?n.timeZone??u:n.timeReference?(0,a.Jv)(n.timeReference):u:null,h=new Map([[m(r?.creationDateField??""),c],[m(r?.editDateField??""),c],[m(s),f],[m(o),f]]);for(const{name:n,type:r}of e.fields)if(g.has(r))t.set(n,l._4);else if("date"!==r&&"esriFieldTypeDate"!==r)t.set(n,null);else if(i)t.set(n,l._4);else{const e=h.get(m(n??""))??u;t.set(n,e)}return t}},72396:function(e,t,i){i.d(t,{v:function(){return n}});const n=new(i(41773).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})}}]);