"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[85360],{93191:function(e,t,i){i.d(t,{I:function(){return w},a:function(){return v},b:function(){return _}});var r=i(41044),n=i(27349),s=i(2679),a=i(68647),o=i(7086),l=i(13743),u=i(96541),d=i(85119),h=i(48857),c=i(34709),p=i(52061),g=i(75047),f=i(74826),y=i(15150);class v extends f.K{}function _(e){const t=new y.kG,{vertex:i,fragment:f,varyings:v}=t,{output:_,perspectiveInterpolation:w}=e;return(0,u.Sv)(i,e),t.include(s.w,e),t.include(o.H,e),t.fragment.include(n.f5,e),t.include(a.R,e),t.include(g.j,e),t.attributes.add(p.T.POSITION,"vec3"),t.attributes.add(p.T.UV0,"vec2"),w&&t.attributes.add(p.T.PERSPECTIVEDIVIDE,"float"),i.main.add(h.H`
    vpos = position;
    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${(0,h.If)(w,"gl_Position *= perspectiveDivide;")}`),v.add("vpos","vec3",{invariant:!0}),v.add("vTexCoord","vec2"),f.include(l.Y),f.uniforms.add(new d.p("opacity",(e=>e.opacity)),new c.A("tex",(e=>e.glTexture))).main.add(h.H`
    discardBySlice(vpos);
    discardByTerrainDepth();
    ${(0,h.If)(_===r.H_.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;")}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),t}const w=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:v,build:_},Symbol.toStringTag,{value:"Module"}))},84513:function(e,t,i){i.d(t,{Z:function(){return M}});var r=i(73440),n=i(29292),s=i(50702),a=i(96711),o=i(61100),l=i(93568),u=i(90403),d=i(17155),h=(i(61432),i(83850),i(48023)),c=i(71354),p=i(47566),g=i(94808),f=i(92086),y=i(60199),v=i(39909),_=i(81749),w=i(25952),m=i(86026),b=i(52061);function x(e,t){return(0,m.g7)(e,[[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function T(e,t,i){if(!(0,p.kK)(t,i))return x(e,i);const r=[t[1]-i[1],Math.min(t[3],i[3])-Math.max(t[1],i[1]),i[3]-t[3],123456],n=[t[0]-i[0],Math.min(t[2],i[2])-Math.max(t[0],i[0]),i[2]-t[2],123456],s=i[2]-i[0],a=i[3]-i[1],o=n[0]>0&&n[2]>0?3:2,l=r[0]>0&&r[2]>0?3:2,u=(l+1)*(o+1),d=(0,y.bg)(3*u),h=(0,v.xx)(2*u),c=new Array(6*(l*o-1));let g=0,f=0,m=0,T=0,C=0;for(let e=0;e<4;e++){const t=r[e];if(t<=0)continue;let l=0;for(let t=0;t<4;t++){const r=n[t];r<=0||(d[f++]=i[0]+l,d[f++]=i[1]+g,d[f++]=-1,h[m++]=l/s,h[m++]=g/a,t<3&&e<3&&(1!==t||1!==e)&&(c[C++]=T,c[C++]=T+1,c[C++]=T+o+1,c[C++]=T+1,c[C++]=T+o+2,c[C++]=T+o+1),T++,l+=r)}g+=t}const E=new Array(c.length);return new w.Z(e,[[b.T.POSITION,new _.a(d,c,3,!0)],[b.T.NORMAL,new _.a(I,E,3,!0)],[b.T.UV0,new _.a(h,c,2,!0)]])}const I=[0,0,1];var C=i(27762),E=i(85216),S=i(89341),R=i(14357),O=i(28751),P=i(94125),D=i(3113),A=i(65650);let M=class extends f.Z{constructor(e){super(e),this.drapeSourceType=g.Lw.RasterImage,this.updatePolicy=P.j.SYNC,this.type="draped",this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this._drapeSourceRenderer=null}initialize(){this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.addHandles((0,s.kB)((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this))))}setDrapingExtent(e,t){this._spatialReference=t,e.forEach(((e,t)=>{this._overlays[t]=e,this._updateImageExtent(e,t)}))}destroy(){this.clear()}get spatialReference(){return this._spatialReference}_updateImageExtent(e,t){const i=this._clippedExtent(e.extent,V);if(null==i)return;const r=function(e,t,i){const r=(0,p.d_)(e)/(0,p.Cb)(e),n={width:i,height:i};return r>1.0001?n.height=i/r:r<.9999&&(n.width=i*r),n.width=Math.round(n.width/((0,p.d_)(e)/(0,p.d_)(t))),n.height=Math.round(n.height/((0,p.Cb)(e)/(0,p.Cb)(t))),n}(e.extent,i,e.resolution);let n=e.pixelRatio*this.view.state.pixelRatio;const{layer:s}=this;if("imageMaxWidth"in s&&null!=s.imageMaxWidth||"imageMaxHeight"in s&&null!=s.imageMaxHeight){const e=s.imageMaxWidth,t=s.imageMaxHeight;if(r.width>e){const t=e/r.width;r.height=Math.floor(r.height*t),r.width=e,n*=t}if(r.height>t){const e=t/r.height;r.width=Math.floor(r.width*e),r.height=t,n*=e}}const o=this._extents[t];o&&(0,p.fS)(o.extent,i)&&this._imageSizeEquals(i,o.imageSize,r)||(this._extents[t]={extent:(0,p.Ue)(i),imageSize:r,pixelRatio:n},this.suspended||this._fetch(t).catch((e=>{(0,l.D_)(e)||a.Z.getLogger(this).error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(e){const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await Promise.allSettled(t)}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new c.Z(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return t}return null}async redraw(e,t){await(0,n.Ed)(this._images,(async(i,r)=>{i&&(await e(i,t),await this._createStageObjects(r,i.image,t))}))}_imageSizeEquals(e,t,i){if(!this.maximumDataResolution)return!1;const r=(0,p.d_)(e)/this.maximumDataResolution.x,n=(0,p.Cb)(e)/this.maximumDataResolution.y,s=r/t.width,a=n/t.height,o=r/i.width,l=n/i.height,u=Math.abs(s-o),d=Math.abs(a-l),h=C.h.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return u<=h&&d<=h}async _fetch(e,t){if(this.suspended)return;const i=this._extents[e],r=i.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,p.Ue)(r)});const n=this._images[e];n.loadingAbortController=(0,o.IM)(n.loadingAbortController);const s=new c.Z(r[0],r[1],r[2],r[3],this._spatialReference);if(0===s.width||0===s.height)return void this._clearImage(e);const u=new AbortController;n.loadingAbortController=u,(0,l.fu)(t,(()=>u.abort()));const d=u.signal,h=this._waitFetchReady(d).then((async()=>{(0,l.k_)(d);const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.layerView.getFetchOptions(),signal:d},{height:r,width:n}=i.imageSize;return this.layer?"imagery"===this.layer.type?this.layer.internalFetchImage(s,n,r,t):this.layer.fetchImage(s,n,r,t):null})).then((e=>{if((0,l.Hc)(d))throw a.Z.getLogger(this).warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,l.zE)();return this.processResult(n,e)})).then((()=>{(0,p.JG)(n.renderExtent,r)}));n.loadingPromise=h,await this.updatingHandles.addPromise(h.then((async()=>{(0,l.k_)(d),await this._createStageObjects(e,n.image,d)})).catch((e=>{throw e&&!(0,l.D_)(e)&&a.Z.getLogger(this).error(e),e})).finally((()=>{h===n.loadingPromise&&(n.loadingPromise=null,n.loadingAbortController=null)})))}_clearImage(e){const t=this._images[e];if(t){null!=t.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],S.T.UPDATE),t.renderGeometry=null);const e=this.view.stage,i=t.texture;i?.unload(),e.removeTexture(i),t.texture=null,t.material=null,t.loadingAbortController=(0,o.IM)(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,i){const r=this.view.stage,s=this._images[e],a=()=>{s.texture?.unload(),r.removeTexture(s.texture),s.texture=null,s.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([s.renderGeometry],S.T.UPDATE),s.renderGeometry=null)};if(t){const o=new O.x(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:A.e8.CLAMP_TO_EDGE,t:A.e8.CLAMP_TO_EDGE}});if(await(0,n.q6)(this._images[e===E.fu.INNER?E.fu.OUTER:E.fu.INNER].loadingPromise),(0,l.k_)(i),a(),await r.schedule((()=>o.load(r.renderView.renderingContext)),i),!o.loaded)return void a();let u;if(r.addTexture(o),s.texture=o,s.material??=new D.j({draped:!0,texture:o}),s.material.setParameters({texture:o}),e===E.fu.INNER)u=x(s.material,s.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void a();u=T(s.material,e,s.renderExtent)}s.renderGeometry=new R.z(u),s.renderGeometry.localOrigin=this._overlays[e].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([s.renderGeometry],S.T.UPDATE)}else a(),s.material=null}_clippedExtent(e,t){if("local"!==this.view.viewingMode)return(0,p.JG)(t,e);const i=this.view.basemapTerrain;return i.ready?(0,p.jV)(e,i.extent,t):(0,p.JG)(t,e)}async _waitFetchReady(e){await(0,u.N1)((()=>this.view.stationary),e),(0,l.k_)(e)}};(0,r._)([(0,d.Cb)()],M.prototype,"type",void 0),M=(0,r._)([(0,h.j)("esri.views.3d.layers.DrapedSubView3D")],M);const V=(0,p.Ue)()},85360:function(e,t,i){i.d(t,{Z:function(){return f}});var r=i(73440),n=(i(61432),i(96711)),s=i(61100),a=i(93568),o=i(17155),l=(i(83850),i(48023)),u=i(84513),d=i(24381),h=i(5527),c=i(69937),p=i(27546),g=i(92105);let f=class extends((0,c.Z)((0,d.A)(h.Z))){constructor(){super(...arguments),this.fullExtentInLocalViewSpatialReference=null,this.refreshDebounced=(0,a.Ds)((async e=>{this.destroyed||await this._doRefresh(e).catch((e=>{(0,a.D_)(e)||n.Z.getLogger(this).error(e)}))}),2e3)}get visibleAtCurrentScale(){const e=this.layer,t="effectiveScaleRange"in e?e.effectiveScaleRange:null;return(0,p.GB)(t,this.view.scale)}isUpdating(){return super.isUpdating()||this.subView?.updating}initialize(){this._initSubView(),"local"===this.view.viewingMode&&this.addResolvingPromise((async()=>this.fullExtentInLocalViewSpatialReference=await(0,g.i)(this.layer.fullExtent,this.view.spatialReference))()),this._updatingHandles.add((()=>this.suspended),(()=>this._suspendedChangeHandler()))}destroy(){this.subView=(0,s.SC)(this.subView)}_initSubView(){this.subView=new u.Z({layerView:this})}async doRefresh(){return this._doRefresh()}async _doRefresh(e){this.suspended||await this.subView.doRefresh(e)}getFetchOptions(){}_suspendedChangeHandler(){this.suspended?this.subView.clear():this.refreshDebounced()}get test(){}};(0,r._)([(0,o.Cb)()],f.prototype,"layer",void 0),(0,r._)([(0,o.Cb)()],f.prototype,"suspended",void 0),(0,r._)([(0,o.Cb)()],f.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,r._)([(0,o.Cb)({readOnly:!0})],f.prototype,"visibleAtCurrentScale",null),(0,r._)([(0,o.Cb)()],f.prototype,"updating",void 0),(0,r._)([(0,o.Cb)()],f.prototype,"subView",void 0),f=(0,r._)([(0,l.j)("esri.views.3d.layers.DynamicLayerView3D")],f)},24381:function(e,t,i){i.d(t,{A:function(){return d}});var r=i(73440),n=i(50702),s=i(93568),a=i(90403),o=i(17155),l=(i(61432),i(96711),i(83850),i(48023)),u=i(73584);const d=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,u.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,n.kB)((()=>e.abort()))),await(0,a.N1)((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),(0,s.k_)(t);const i=(0,u.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return(0,r._)([(0,o.Cb)()],t.prototype,"view",void 0),(0,r._)([(0,o.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,r._)([(0,l.j)("esri.views.3d.layers.LayerView3D")],t),t}},92086:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(73440),n=i(70880),s=i(17155),a=(i(61432),i(96711),i(83850),i(48023)),o=i(60147);let l=class extends n.Z{constructor(e){super(e),this.updatingHandles=new o.R}destroy(){this.updatingHandles.destroy()}get updating(){return this.updatingHandles.updating}get layer(){return this.layerView.layer}get view(){return this.layerView.view}get suspended(){return this.layerView.suspended}get fullOpacity(){return this.layerView.fullOpacity}};(0,r._)([(0,s.Cb)({constructOnly:!0})],l.prototype,"layerView",void 0),(0,r._)([(0,s.Cb)({readOnly:!0})],l.prototype,"updatingHandles",void 0),(0,r._)([(0,s.Cb)()],l.prototype,"updating",null),(0,r._)([(0,s.Cb)()],l.prototype,"layer",null),(0,r._)([(0,s.Cb)()],l.prototype,"view",null),(0,r._)([(0,s.Cb)()],l.prototype,"suspended",null),(0,r._)([(0,s.Cb)()],l.prototype,"fullOpacity",null),l=(0,r._)([(0,a.j)("esri.views.3d.layers.SubView3D")],l)},36121:function(e,t,i){i.d(t,{IM:function(){return o},VD:function(){return u},qj:function(){return a},tl:function(){return l},wp:function(){return s}});var r=i(52890),n=i(52061);const s=(0,r.U$)().vec3f(n.T.POSITION),a=(0,r.U$)().vec3f(n.T.POSITION).vec2f16(n.T.UV0),o=(0,r.U$)().vec3f(n.T.POSITION).vec4u8(n.T.COLOR),l=((0,r.U$)().vec3f(n.T.POSITION).vec2f16(n.T.UV0).vec4u8(n.T.OLIDCOLOR),(0,r.U$)().vec3f(n.T.POSITION).vec2f(n.T.UV0)),u=(0,r.U$)().vec3f(n.T.POSITION).vec2f(n.T.UV0).vec4u8(n.T.OLIDCOLOR)},3113:function(e,t,i){i.d(t,{j:function(){return D}});var r=i(81342),n=i(41044),s=i(32420),a=i(59797),o=i(71356),l=i(19596),u=i(61536),d=i(948),h=i(61719),c=i(52061),p=i(29296),g=i(36121),f=i(42266),y=i(92991),v=i(58257),_=i(29107),w=i(33610),m=i(26041),b=i(93191),x=i(51135);class T extends _.A{constructor(e,t){super(e,t,new v.J(b.I,(()=>i.e(67160).then(i.bind(i,67160)))),I)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:s,cullFace:a}=e,o=i===w.M.NONE;return(0,x.sm)({blending:(0,n.c1)(r)?o?x.Zo:(0,u.j7)(i):null,culling:(0,x.zp)(a),depthTest:{func:(0,u.Bh)(i)},depthWrite:(0,u.W$)(e),drawBuffers:(0,u.u_)(i,r),colorWrite:x.gf,stencilWrite:s?m.s3:null,stencilTest:s?t?m.eD:m.RY:null,polygonOffset:(0,u.eZ)(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const I=new Map([[c.T.POSITION,0],[c.T.UV0,2],[c.T.PERSPECTIVEDIVIDE,3]]);var C=i(73440),E=i(31839),S=i(34479),R=i(83046),O=i(91041);class P extends O.W{constructor(e){super(),this.draped=e,this.cullFace=s.Vr.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=E.I.None,this.emissionSource=S.jo.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1,this.snowCover=!1}}(0,C._)([(0,R.o)({count:s.Vr.COUNT})],P.prototype,"cullFace",void 0),(0,C._)([(0,R.o)()],P.prototype,"enableOffset",void 0),(0,C._)([(0,R.o)()],P.prototype,"writeDepth",void 0),(0,C._)([(0,R.o)()],P.prototype,"hasOccludees",void 0),(0,C._)([(0,R.o)()],P.prototype,"terrainDepthTest",void 0),(0,C._)([(0,R.o)()],P.prototype,"cullAboveTerrain",void 0),(0,C._)([(0,R.o)()],P.prototype,"perspectiveInterpolation",void 0);class D extends f.c{constructor(e){super(e,V),this.vertexAttributeLocations=I,this.supportsEdges=!0,this.produces=new Map([[d.r.OPAQUE_MATERIAL,e=>(0,n.Gy)(e)],[d.r.TRANSPARENT_MATERIAL,e=>(0,n.D5)(e)&&this.parameters.writeDepth],[d.r.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,n.D5)(e)&&!this.parameters.writeDepth],[d.r.DRAPED_MATERIAL,e=>(0,n.D5)(e)||(0,n.Gy)(e)]]),this._configuration=new P(e.draped)}dispose(){this.setParameters({texture:void 0})}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<u.ve,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new A(e)}createBufferWriter(){let e=g.qj;return this.parameters.perspectiveInterpolation&&(e=e.clone().f32(c.T.PERSPECTIVEDIVIDE)),new M(e)}}class A extends a.Z{constructor(e){super({...e,...e.material.parameters}),this.parameters=e;const t=this._material.parameters.texture;(0,o.f)(t)&&e.textures.updater.add(t)}dispose(){this.parameters.textures.updater.remove(this._material.parameters.texture)}beginSlot(e){return this.getTechnique(T,e)}}class M extends p.G{write(e,t,i,n,s,a){for(const n of this.vertexBufferLayout.fields.keys()){const o=i.get(n);if(o)if(n===c.T.PERSPECTIVEDIVIDE){(0,h.hu)(1===o.size);const e=s.getField(n,r.ly);e&&(0,y.XW)(o,e,a)}else(0,y.i9)(n,o,e,t,s,a)}return null}}class V extends l.Mt{constructor(e,t){super(),this.texture=e,this.draped=t,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=s.Vr.None,this.opacity=1,this.perspectiveInterpolation=!1}get glTexture(){return this.texture.glTexture}}},42266:function(e,t,i){i.d(t,{c:function(){return a}});var r=i(82846),n=i(19596),s=i(87807);class a extends n.F5{constructor(){super(...arguments),this._pp0=(0,r.al)(0,0,1),this._pp1=(0,r.al)(0,0,0)}intersect(e,t,i,r,n,a){return(0,s.Bw)(e,i,r,n,void 0,a)}intersectDraped(e,t,i,r){return this._pp0[0]=this._pp1[0]=i[0],this._pp0[1]=this._pp1[1]=i[1],(0,s.Bw)(e,t,this._pp0,this._pp1,void 0,r)}}},5527:function(e,t,i){i.d(t,{Z:function(){return g}});var r=i(73440),n=i(70880),s=i(87833),a=i(15894),o=i(96711),l=i(61100),u=i(76329),d=i(17155),h=(i(61432),i(83850),i(48023)),c=i(60147),p=i(27546);let g=class extends(a.Z.IdentifiableMixin(u.Z.EsriPromiseMixin(s.Z.EventedMixin(n.Z)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new c.R,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer?.title||"no title";o.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,l.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&(0,p.Cy)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,p.Cy)(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"spatialReferenceSupported",null),(0,r._)([(0,d.Cb)()],g.prototype,"view",void 0),(0,r._)([(0,d.Cb)()],g.prototype,"fullOpacity",null),(0,r._)([(0,d.Cb)()],g.prototype,"layer",void 0),(0,r._)([(0,d.Cb)()],g.prototype,"parent",void 0),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"suspended",null),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,r._)([(0,d.Cb)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,r._)([(0,d.Cb)()],g.prototype,"updateSuspended",null),(0,r._)([(0,d.Cb)()],g.prototype,"visible",null),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"visibleAtCurrentScale",null),(0,r._)([(0,d.Cb)({readOnly:!0})],g.prototype,"visibleAtCurrentTimeExtent",null),g=(0,r._)([(0,h.j)("esri.views.layers.LayerView")],g)},69937:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(73440),n=i(96711),s=i(93568),a=i(90403),o=(i(61432),i(83850),i(88194),i(48023));const l=e=>{let t=class extends e{initialize(){this.addHandles((0,a.on)((()=>this.layer),"refresh",(e=>{this.doRefresh(e.dataChanged).catch((e=>{(0,s.D_)(e)||n.Z.getLogger(this).error(e)}))})),"RefreshableLayerView")}};return t=(0,r._)([(0,o.j)("esri.views.layers.RefreshableLayerView")],t),t}}}]);