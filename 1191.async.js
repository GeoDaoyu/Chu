"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1191,34042,92403],{12853:function(e,t,n){n.d(t,{z:function(){return i}});var r=n(69071);class i{constructor(e,t){this.removeFunc=t,this._storage=new r.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,n=1){this._storage.put(this,e,t,n,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58426:function(e,t,n){n.d(t,{$c:function(){return h},Hg:function(){return y},jW:function(){return p},xb:function(){return m}});var r=n(70880),i=n(43254),o=n(22018);const l=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function s(e){return e instanceof r.Z}function a(e){return e instanceof i.Z?Object.keys(e.items):s(e)?(0,o.vw)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof i.Z?e.items[t]:e[t]}function u(e){return e?e.declaredClass:null}function f(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const r=a(e),i=a(t);if(0===r.length&&0===i.length)return;if(!r.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=i.filter((e=>!r.includes(e))),p=r.filter((e=>!i.includes(e))),h=r.filter((n=>i.includes(n)&&c(e,n)!==c(t,n))).concat(o,p).sort(),y=u(e);if(y&&l.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let m;const d=s(e)&&s(t);for(const r of h){const i=c(e,r),o=c(t,r);let l;if((d||"function"!=typeof i&&"function"!=typeof o)&&i!==o&&(null!=i||null!=o)){if(n&&n[r]&&"function"==typeof n[r])l=n[r]?.(i,o);else if(i instanceof Date&&o instanceof Date){if(i.getTime()===o.getTime())continue;l={type:"complete",oldValue:i,newValue:o}}else l="object"==typeof i&&"object"==typeof o&&u(i)===u(o)?f(i,o):{type:"complete",oldValue:i,newValue:o};null!=l&&(null!=m?m.diff[r]=l:m={type:"partial",diff:{[r]:l}})}}return m}function p(e,t){return function(e,t){if(null==e)return!1;const n=t.split(".");let r=e;for(const e of n){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}(e,t)}function h(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},34042:function(e,t,n){n.d(t,{it:function(){return _},aX:function(){return w},hR:function(){return v}});var r=n(81001),i=n(88194),o=n(96711),l=n(67764),s=n(62197),a=n(76264),c=n(8554),u=n(97290),f=n(78619),p=n(90756),h=n(56545);var y=n(95490),m=n(93333);const d=()=>o.Z.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function b(e){return"polyline"===e[0].type}function v(e,t){if(!(e instanceof s.Z||e instanceof l.Z)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw d().error(e),new i.Z("internal:geometry",e)}const n=(0,a.x3)(e),r=[];for(const e of n){const n=[];r.push(n),n.push([e[0][0],e[0][1]]);for(let r=0;r<e.length-1;r++){const i=e[r][0],o=e[r][1],l=e[r+1][0],s=e[r+1][1],a=Math.sqrt((l-i)*(l-i)+(s-o)*(s-o)),c=(s-o)/a,u=(l-i)/a,f=a/t;if(f>1){for(let e=1;e<=f-1;e++){const r=e*t,l=u*r+i,s=c*r+o;n.push([l,s])}const e=(a+Math.floor(f-1)*t)/2,r=u*e+i,l=c*e+o;n.push([r,l])}n.push([l,s])}}return function(e){return"polygon"===e.type}(e)?new l.Z({rings:r,spatialReference:e.spatialReference}):new s.Z({paths:r,spatialReference:e.spatialReference})}function S(e,t,n){if(t){const t=v(e,1e6);e=(0,u.Sx)(t,!0)}return n&&(e=(0,a.Sy)(e,n)),e}function M(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,a.XZ)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,a.XZ)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,a.XZ)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=(0,a.XZ)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function C(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const i=t.cutIndexes[r],o=t.geometries[r],l=(0,a.x3)(o);for(let e=0;e<l.length;e++){const t=l[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,a.XZ)(n,180);for(let n=0;n<t.length;n++){const t=o.getPoint(e,n);o.setPoint(e,n,t.clone().offset(r,0))}return!0}}))}if(i===n){if(g(e))for(const t of(0,a.x3)(o))e[i]=e[i].addRing(t);else if(b(e))for(const t of(0,a.x3)(o))e[i]=e[i].addPath(t)}else n=i,e[i]=o}return e}async function w(e,t,n){if(!Array.isArray(e))return w([e],t);t&&"string"!=typeof t&&d().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i="string"==typeof t?t:t?.url??r.default.geometryServiceUrl;let o,g,b,v,_,I,x,T,L=0;const O=[],P=[];for(const t of e)if(null!=t)if(o||(o=t.spatialReference,g=(0,c.C5)(o),b=o.isWebMercator,I=b?102100:4326,v=a.UZ[I].maxX,_=a.UZ[I].minX,x=a.UZ[I].plus180Line,T=a.UZ[I].minus180Line),g)if("mesh"===t.type)P.push(t);else if("point"===t.type)P.push(M(t.clone(),v,_));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>M(e,v,_))),P.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,g);P.push(e.rings?new l.Z(e):e)}else if(t.extent){const e=t.extent,n=(0,a.XZ)(e.xmin,_)*(2*v);let r=0===n?t.clone():(0,a.Sy)(t.clone(),n);e.offset(n,0);let{xmin:i,xmax:o}=e;i=Number(i.toFixed(9)),o=Number(o.toFixed(9)),e.intersects(x)&&o!==v?(L=o>L?o:L,r=S(r,b),O.push(r),P.push("cut")):e.intersects(T)&&i!==_?(L=o*(2*v)>L?o*(2*v):L,r=S(r,b,360),O.push(r),P.push("cut")):P.push(r)}else P.push(t.clone());else P.push(t);else P.push(t);let k=(0,a.XZ)(L,v),Z=-90;const A=k,R=new s.Z;for(;k>0;){const e=360*k-180;R.addPath([[e,Z],[e,-1*Z]]),Z*=-1,k--}if(O.length>0&&A>0){const t=C(O,await async function(e,t,n,r){const i=(0,h.en)(e),o=t[0].spatialReference,l={...r,responseType:"json",query:{...i.query,f:"json",sr:(0,c.B9)(o),target:JSON.stringify({geometryType:(0,p.Ji)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},s=await(0,f.Z)(i.path+"/cut",l),{cutIndexes:a,geometries:u=[]}=s.data;return{cutIndexes:a,geometries:u.map((e=>{const t=(0,p.im)(e);return t.spatialReference=o,t}))}}(i,O,R,n)),r=[],o=[];for(let n=0;n<P.length;n++){const i=P[n];if("cut"!==i)o.push(i);else{const i=t.shift(),l=e[n];null!=l&&"polygon"===l.type&&l.rings&&l.rings.length>1&&i.rings.length>=l.rings.length?(r.push(i),o.push("simplify")):o.push(b?(0,u.$)(i):i)}}if(!r.length)return o;const l=await async function(e,t,n){const r="string"==typeof e?(0,y.mN)(e):e,i=t[0].spatialReference,o=(0,p.Ji)(t[0]),l={...n,query:{...r.query,f:"json",sr:(0,c.B9)(i),geometries:JSON.stringify((0,m.F)(t))}},{data:s}=await(0,f.Z)(r.path+"/simplify",l);return(0,m.o)(s.geometries,o,i)}(i,r,n),s=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?s.push(t):s.push(b?(0,u.$)(l.shift()):l.shift())}return s}const z=[];for(let e=0;e<P.length;e++){const t=P[e];if("cut"!==t)z.push(t);else{const e=O.shift();z.push(!0===b?(0,u.$)(e):e)}}return z}function _(e,t,n){const r=(0,c.C5)(n);if(null==r)return e;const[i,o]=r.valid,l=2*o;let s=0,a=0;t>o?s=Math.ceil(Math.abs(t-o)/l):t<i&&(s=-Math.ceil(Math.abs(t-i)/l)),e>o?a=Math.ceil(Math.abs(e-o)/l):e<i&&(a=-Math.ceil(Math.abs(e-i)/l));let u=e+(s-a)*l;const f=u-t;return f>o?u-=l:f<i&&(u+=l),u}},76264:function(e,t,n){n.d(t,{Sy:function(){return a},UZ:function(){return l},XZ:function(){return s},x3:function(){return c}});var r=n(62197),i=n(45213),o=n(90756);const l={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator}),minus180Line:new r.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.Z({paths:[[[180,-180],[180,180]]],spatialReference:i.Z.WGS84}),minus180Line:new r.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:i.Z.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function a(e,t){const n=c(e);for(const e of n)for(const n of e)n[0]+=t;return e}function c(e){return(0,o.oU)(e)?e.rings:e.paths}},59259:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r,i=n(73440),o=n(78619),l=n(88194),s=n(332),a=n(84060),c=n(93568),u=n(95490),f=n(17155),p=n(90775),h=(n(61432),n(83850),n(1194)),y=n(48023),m=n(29884),d=n(45213),g=n(38209),b=n(38448),v=n(39272),S=n(34085),M=n(58560),C=n(83263),w=n(55591),_=n(85330),I=n(27202),x=n(19306),T=n(3752),L=n(70937),O=n(66619),P=n(93295),k=n(97349),Z=n(38120),A=n(13689);const R=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let z=r=class extends((0,C.h7)((0,T.M)((0,L.x)((0,v.Z)((0,S.O)((0,_.q)((0,I.I)((0,M.Y)((0,a.R)((0,x.Q)((0,b.V)((0,w.N)(g.Z))))))))))))){constructor(...e){super(...e),this.listMode="show",this.elevationInfo=new A.Z({mode:"on-the-ground"}),this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(c.r9).then((()=>this._fetchService(t)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,t){return(e=e||t.tileInfo?.spatialReference)&&d.Z.fromJSON(e)}writeSublayers(e,t,n,r){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],l={writeSublayerStructure:!1,...r};i.forEach((e=>{const t=e.write({},l);o.push(t)})),o.some((e=>Object.keys(e).length>1))&&(t.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>(0,u.mN)(e).path)):null}fetchTile(e,t,n,r={}){const{signal:i}=r,l=this.getTileUrl(e,t,n),s={responseType:"image",signal:i,query:{...this.refreshParameters}};return(0,o.Z)(l,s).then((e=>e.data))}async fetchImageBitmapTile(e,t,n,i={}){const{signal:l}=i;if(this.fetchTile!==r.prototype.fetchTile){const r=await this.fetchTile(e,t,n,i);return(0,k.V)(r,e,t,n,l)}const s=this.getTileUrl(e,t,n),a={responseType:"blob",signal:l,query:{...this.refreshParameters}},{data:c}=await(0,o.Z)(s,a);return(0,k.V)(c,e,t,n,l)}getTileUrl(e,t,n){const r=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,i=(0,u.B7)({...this.parsedUrl?.query,blankTile:!r&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[t%o.length]:this.parsedUrl?.path}/tile/${e}/${t}/${n}${i?"?"+i:""}`}loadAll(){return(0,s.G)(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((t,n)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new l.Z("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new l.Z("tile-layer:undefined-url","layer's url is not defined");const r=(0,O.Qc)(this.parsedUrl.path);if(null!=r&&"ImageServer"===r.serverType)throw new l.Z("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");(0,o.Z)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t,n)})).then((t=>{let n=this.url;if(t.ssl&&(n=this.url=n.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),10.1===this.version&&!(0,O.M8)(n))return this._fetchServerVersion(n,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,t){if(!(0,O.B5)(e))return Promise.reject();const n=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return(0,o.Z)(n,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then((e=>{if(e.data?.currentVersion)return e.data.currentVersion;throw new l.Z("tile-layer:version-not-available","Server did not provide a version")}))}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/mapserver/i);return t?t[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let t;e=e.toLowerCase();for(let n=0,r=R.length;n<r;n++)if(t=R[n],t.toLowerCase().includes(e))return(0,u.hF)("//static.arcgis.com/attribution/"+t);return null}_getDefaultTileServers(e){if(null==e)return[];const t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),n=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||n?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[D]}};(0,i._)([(0,f.Cb)({readOnly:!0})],z.prototype,"attributionDataUrl",null),(0,i._)([(0,f.Cb)({type:["show","hide","hide-children"]})],z.prototype,"listMode",void 0),(0,i._)([(0,f.Cb)({json:{read:!0,write:!0}})],z.prototype,"blendMode",void 0),(0,i._)([(0,f.Cb)()],z.prototype,"elevationInfo",void 0),(0,i._)([(0,f.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],z.prototype,"isReference",void 0),(0,i._)([(0,f.Cb)({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],z.prototype,"operationalLayerType",void 0),(0,i._)([(0,f.Cb)({type:Boolean})],z.prototype,"resampling",void 0),(0,i._)([(0,f.Cb)()],z.prototype,"sourceJSON",void 0),(0,i._)([(0,f.Cb)({type:d.Z})],z.prototype,"spatialReference",void 0),(0,i._)([(0,h.r)("spatialReference",["spatialReference","tileInfo"])],z.prototype,"readSpatialReference",null),(0,i._)([(0,f.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],z.prototype,"path",void 0),(0,i._)([(0,f.Cb)({readOnly:!0})],z.prototype,"sublayers",void 0),(0,i._)([(0,m.c)("sublayers",{layers:{type:[Z.Z]}})],z.prototype,"writeSublayers",null),(0,i._)([(0,f.Cb)({json:{read:!1,write:!1}})],z.prototype,"popupEnabled",void 0),(0,i._)([(0,f.Cb)()],z.prototype,"tileServers",null),(0,i._)([(0,p.p)("tileServers")],z.prototype,"castTileServers",null),(0,i._)([(0,f.Cb)({readOnly:!0,json:{read:!1}})],z.prototype,"type",void 0),(0,i._)([(0,f.Cb)(P.HQ)],z.prototype,"url",void 0),z=r=(0,i._)([(0,y.j)("esri.layers.TileLayer")],z);const D=Symbol("default-fetch-tile");z.prototype.fetchTile[D]=!0;const G=z},39272:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(73440),i=n(17155),o=(n(61432),n(96711),n(83850),n(1194)),l=n(48023),s=n(45213),a=n(97550),c=n(94219),u=n(8682);const f=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t,n){const r=t.capabilities?.includes("Tilemap");let{minLOD:i,maxLOD:o,minScale:l,maxScale:s}=t;if(null==i&&null==o&&(0!==l||0!==s)){const e=e=>Math.round(1e4*e)/1e4;l=e(l||t.tileInfo.lods[0].scale),s=e(s||t.tileInfo.lods[t.tileInfo.lods.length-1].scale);for(const n of t.tileInfo.lods){const t=e(n.scale);i=t>=l?n.level:i,o=t>=s?n.level:o}}if(r)return new u.y({layer:this,minLOD:i,maxLOD:o});if(t.tileInfo){const e=new a.Z;return e.read(t.tileInfo,n),new c.Z(e,i,o)}return null}};return(0,r._)([(0,i.Cb)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,r._)([(0,i.Cb)()],t.prototype,"minScale",void 0),(0,r._)([(0,o.r)("service","minScale")],t.prototype,"readMinScale",null),(0,r._)([(0,i.Cb)()],t.prototype,"maxScale",void 0),(0,r._)([(0,o.r)("service","maxScale")],t.prototype,"readMaxScale",null),(0,r._)([(0,i.Cb)({type:s.Z})],t.prototype,"spatialReference",void 0),(0,r._)([(0,i.Cb)({readOnly:!0})],t.prototype,"supportsBlankTile",null),(0,r._)([(0,i.Cb)({type:a.Z})],t.prototype,"tileInfo",void 0),(0,r._)([(0,i.Cb)()],t.prototype,"tilemapCache",void 0),(0,r._)([(0,o.r)("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),(0,r._)([(0,i.Cb)()],t.prototype,"version",void 0),t=(0,r._)([(0,l.j)("esri.layers.mixins.ArcGISCachedService")],t),t}},94219:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(88194),i=n(93568);class o{constructor(e,t=0,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.minLOD=t,this.maxLOD=n,e.lodAt(t)||(this.minLOD=e.lods[0].level),e.lodAt(n)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,t,n){const r=this.tileInfo?.lodAt(e);return!r||e<this.minLOD||e>this.maxLOD?"unavailable":r.cols&&r.rows?n>=r.cols[0]&&n<=r.cols[1]&&t>=r.rows[0]&&t<=r.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,t,n,o){await(0,i.Yn)(o);const l=this.getAvailability(e,t,n);if("unavailable"===l)throw new r.Z("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n});return l}async fetchAvailabilityUpsample(e,t,n,r,o){await(0,i.Yn)(o),r.level=e,r.row=t,r.col=n;const l=this.tileInfo;return l.updateTileInfo(r),this.fetchAvailability(e,t,n,o).catch((e=>{if((0,i.D_)(e))throw e;if(l.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,o);throw e}))}}},8682:function(e,t,n){n.d(t,{y:function(){return I}});var r,i=n(73440),o=n(78619),l=n(70880),s=n(46965),a=n(88194),c=n(50702),u=(n(61432),n(12853)),f=n(63974),p=n(93568),h=n(90403),y=n(99153),m=n(95490),d=n(17155),g=(n(96711),n(83850),n(48023)),b=n(31743),v=n(28947),S=n(85881),M=n(59384);class C{constructor(e){!function(e){if(!e?.location)throw new a.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new a.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new a.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new a.Z("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new a.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}(e);const{location:t,data:n}=e;this.location=Object.freeze((0,v.d9)(t));const r=this.location.width,i=this.location.height;let o=!0,l=!0;const s=function(e,t=!1){return e<=M.c8?t?new Array(e).fill(0):new Array(e):new Uint32Array(e)}(Math.ceil(r*i/32));let c=0;for(let e=0;e<n.length;e++){const t=e%32;n[e]?(l=!1,s[c]|=1<<t):o=!1,31===t&&++c}l?(this._availability="unavailable",this.byteSize=40):o?(this._availability="available",this.byteSize=40):(this._availability=s,this.byteSize=40+(0,S.G7)(s))}getAvailability(e,t){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const n=(e-this.location.top)*this.location.width+(t-this.location.left),r=n%32,i=n>>5,o=this._availability;return i<0||i>o.length?"unknown":o[i]&1<<r?"available":"unavailable"}static fromDefinition(e,t){const n=e.service.request||o.Z,{row:r,col:i,width:l,height:s}=e,c={query:{f:"json"}};return t=t?{...c,...t}:c,n(function(e){let t;if(e.service.tileServers?.length){const n=e.service.tileServers;t=`${n&&n.length?n[e.row%n.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}else t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;const n=e.service.query;return n&&(t=`${t}?${n}`),t}(e),t).then((e=>e.data)).catch((e=>{if(422===e?.details?.httpStatus)return{location:{top:r,left:i,width:l,height:s},valid:!0,data:new Array(l*s).fill(0)};throw e})).then((e=>{if(e.location&&(e.location.top!==r||e.location.left!==i||e.location.width!==l||e.location.height!==s))throw new a.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:r,left:i,width:l,height:s}});return C.fromJSON(e)}))}static fromJSON(e){return Object.freeze(new C(e))}}function w(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function _(e,t,n){return new a.Z("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n})}let I=class extends l.Z{static{r=this}constructor(e){super(e),this._pendingTilemapRequests={},this.request=o.Z,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new u.z(2*s.Y.MEGABYTES),this.addHandles((0,h.YP)((()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]}),(()=>this._initializeTilemapDefinition()),h.nn))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,t,n){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const r=this._tilemapFromCache(e,t,n,this._tmpTilemapDefinition);return r?r.getAvailability(t,n):"unknown"}fetchAvailability(e,t,n,r){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(_(e,t,n)):this._fetchTilemap(e,t,n,r).catch((e=>e)).then((r=>{if(r instanceof C){const i=r.getAvailability(t,n);if("unavailable"===i)throw _(e,t,n);return i}if((0,p.D_)(r))throw r;return"unknown"}))}fetchAvailabilityUpsample(e,t,n,r,i){r.level=e,r.row=t,r.col=n;const o=this.layer.tileInfo;o.updateTileInfo(r);const l=this.fetchAvailability(e,t,n,i).catch((e=>{if((0,p.D_)(e))throw e;if(o.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,i);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,n,i,l),l}async _fetchAvailabilityUpsamplePrefetch(e,t,n,i,o,l){if(!this._prefetchingEnabled||null==e)return;const s=`prefetch-${e}`;if(this.hasHandles(s))return;const a=new AbortController;l.then((()=>a.abort()),(()=>a.abort()));let u=!1;const f=(0,c.kB)((()=>{u||(u=!0,a.abort())}));if(this.addHandles(f,s),await(0,y.MU)(10,a.signal).catch((()=>{})),u||(u=!0,this.removeHandles(s)),(0,p.Hc)(a))return;const h=new b.f(e,t,n,i),m={...o,signal:a.signal},d=this.layer.tileInfo;for(let e=0;r._prefetches.length<r._maxPrefetch&&d.upsampleTile(h);++e){const e=this.fetchAvailability(h.level,h.row,h.col,m);r._prefetches.push(e);const t=()=>{r._prefetches.removeUnordered(e)};e.then(t,t)}}static{this._maxPrefetch=4}static{this._prefetches=new f.Z({initialSize:r._maxPrefetch})}_fetchTilemap(e,t,n,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new a.Z("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const i=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,n,i);if(o)return Promise.resolve(o);const l=r?.signal;return r={...r,signal:null},new Promise(((e,t)=>{(0,p.fu)(l,(()=>t((0,p.zE)())));const n=w(i);let o=this._pendingTilemapRequests[n];if(!o){o=C.fromDefinition(i,r).then((e=>(this._tilemapCache.put(n,e,e.byteSize),e)));const e=()=>{delete this._pendingTilemapRequests[n]};this._pendingTilemapRequests[n]=o,o.then(e,e)}o.then(e,t)}))}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:n}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:(0,m.B7)({...e.query,...n,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,n,r){r.level=e,r.row=t-t%this.size,r.col=n-n%this.size;const i=w(r);return this._tilemapCache.get(i)}get test(){}};(0,i._)([(0,d.Cb)({constructOnly:!0})],I.prototype,"layer",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],I.prototype,"minLOD",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],I.prototype,"maxLOD",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],I.prototype,"request",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],I.prototype,"size",void 0),I=r=(0,i._)([(0,g.j)("esri.layers.support.TilemapCache")],I)},13878:function(e,t,n){n.d(t,{Z:function(){return b}});var r,i=n(73440),o=n(46451),l=n(41773),s=n(63255),a=n(28947),c=n(17155),u=(n(61432),n(96711),n(1194)),f=n(48023),p=n(29884),h=n(45213),y=n(90756),m=n(98842),d=n(49651);const g=new l.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let b=r=class extends s.Z{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,o.Z)}writeGeometryType(e,t,n,r){if(e)return void g.write(e,t,n,r);const{features:i}=this;if(i)for(const e of i)if(null!=e?.geometry)return void g.write(e.geometry.type,t,n,r)}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,r=(0,y.im)(e);return r&&!n&&t.spatialReference&&(r.spatialReference=h.Z.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n)for(const e of n)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new r(this.cloneProperties())}cloneProperties(){return(0,a.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const r=t.features[n];if(r.geometry){const t=e?.[n];r.geometry=t?.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,n],translate:[r,i]}=e,o=this.features,l=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-r)/t)),(e=>Math.round((i-e)/n)));for(let e=0,t=o.length;e<t;e++)l?.(o[e].geometry)||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[r,i],scale:[o,l]}=n;let s=null,a=null;if(this.hasZ&&null!=n?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=n;s=n=>n*t+e}if(this.hasM&&null!=n?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=n;a=n=>null==n?n:n*t+e}const c=this._getHydrationFunction(e,(e=>e*o+r),(e=>i-e*l),s,a);for(const{geometry:e}of t)null!=e&&c&&c(e);return this.transform=null,this}readFeaturesWithClass(e,t,n){const r=h.Z.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){const o=e[t],l=n.fromJSON(o),s=o.geometry?.spatialReference;null==l.geometry||s||(l.geometry.spatialReference=r);const a=o.aggregateGeometries,c=l.aggregateGeometries;if(a&&null!=c)for(const e in c){const t=c[e],n=a[e]?.spatialReference;null==t||n||(t.spatialReference=r)}i.push(l)}return i}_quantizePoints(e,t,n){let r,i;const o=[];for(let l=0,s=e.length;l<s;l++){const s=e[l];if(l>0){const e=t(s[0]),l=n(s[1]);e===r&&l===i||(o.push([e-r,l-i]),r=e,i=l)}else r=t(s[0]),i=n(s[1]),o.push([r,i])}return o.length>0?o:null}_getQuantizationFunction(e,t,n){return"point"===e?e=>(e.x=t(e.x),e.y=n(e.y),e):"polyline"===e||"polygon"===e?e=>{const r=(0,y.oU)(e)?e.rings:e.paths,i=[];for(let e=0,o=r.length;e<o;e++){const o=r[e],l=this._quantizePoints(o,t,n);l&&i.push(l)}return i.length>0?((0,y.oU)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const r=this._quantizePoints(e.points,t,n);return r&&r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,n,r,i){return"point"===e?e=>{e.x=t(e.x),e.y=n(e.y),r&&(e.z=r(e.z))}:"polyline"===e||"polygon"===e?e=>{const o=(0,y.oU)(e)?e.rings:e.paths;let l,s;for(let e=0,r=o.length;e<r;e++){const r=o[e];for(let e=0,i=r.length;e<i;e++){const i=r[e];e>0?(l+=i[0],s+=i[1]):(l=i[0],s=i[1]),i[0]=t(l),i[1]=n(s)}}if(r&&i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2]),n[3]=i(n[3])}}else if(r)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2])}}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=i(n[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),r&&null!=e.zmax&&null!=e.zmin&&(e.zmax=r(e.zmax),e.zmin=r(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const o=e.points;let l,s;for(let e=0,r=o.length;e<r;e++){const r=o[e];e>0?(l+=r[0],s+=r[1]):(l=r[0],s=r[1]),r[0]=t(l),r[1]=n(s)}if(r&&i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=r(t[2]),t[3]=i(t[3])}else if(r)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=r(t[2])}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2])}}:null}};(0,i._)([(0,c.Cb)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,i._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,c.Cb)({type:[o.Z],json:{write:!0}})],b.prototype,"features",void 0),(0,i._)([(0,u.r)("features")],b.prototype,"readFeatures",null),(0,i._)([(0,c.Cb)({type:[d.Z],json:{write:!0}})],b.prototype,"fields",void 0),(0,i._)([(0,c.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],b.prototype,"geometryType",void 0),(0,i._)([(0,p.c)("geometryType")],b.prototype,"writeGeometryType",null),(0,i._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasM",void 0),(0,i._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasZ",void 0),(0,i._)([(0,c.Cb)({types:m.qM,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,i._)([(0,u.r)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,i._)([(0,c.Cb)({type:h.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,i._)([(0,p.c)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,i._)([(0,c.Cb)({json:{write:!0}})],b.prototype,"transform",void 0),b=r=(0,i._)([(0,f.j)("esri.rest.support.FeatureSet")],b),b.prototype.toJSON.isDefaultToJSON=!0},6298:function(e,t,n){n.d(t,{E:function(){return i}});var r=n(44252);const i={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:r.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:r.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:r.of.Loop,repeatdelay:0,easing:r.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,n){n.d(t,{$Z:function(){return w},BX:function(){return M},Cc:function(){return d},E_:function(){return s},F:function(){return _},FG:function(){return x},H1:function(){return o},J0:function(){return m},JW:function(){return O},Lb:function(){return q},Le:function(){return P},Ml:function(){return G},On:function(){return v},Qf:function(){return T},RI:function(){return g},TB:function(){return L},Ul:function(){return D},W7:function(){return C},X_:function(){return I},be:function(){return u},e0:function(){return R},gJ:function(){return y},hU:function(){return A},hf:function(){return r},k5:function(){return h},oY:function(){return c},pJ:function(){return b},qQ:function(){return l},wi:function(){return S},yL:function(){return p},yl:function(){return k},zL:function(){return f}});n(6298);function r(e,t,n,r){return function(e){return"function"==typeof e}(e)?e(t,n,r):e}function i(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function o(e,t){const n=[];let r=0,o=-1;do{if(o=e.indexOf("[",r),o>=r){if(o>r){const t=e.slice(r,o);n.push([t,null,i(t)])}if(r=o+1,o=e.indexOf("]",r),o>=r){if(o>r){const i=t[e.slice(r,o)];i&&n.push([null,i,!1])}r=o+1}}}while(-1!==o);if(r<e.length){const t=e.slice(r);n.push([t,null,i(t)])}return n}function l(e,t,n){let r="",i=null;for(const n of t){const[t,o,l]=n;if(null!=t&&""!==t)l?i=t:(null!=i&&(r+=i,i=null),r+=t);else{const t=e.readAttribute(o);null!=t&&""!==t&&(null!==i&&(r+=i,i=null),r+=t)}}return a(r,n)}function s(e,t,n,r){let i="",o=null;for(const r of t){const[t,l,s]=r;if(null!=t&&""!==t)s?o=t:(null!=o&&(i+=o,o=null),i+=t);else{let t=l;null!=n&&(t=z(l,n));const r=e.attributes[t];null!=r&&""!==r&&(null!=o&&(i+=o,o=null),i+=r)}}return a(i,r)}function a(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function c(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function u(e){return e.data?.symbol??null}function f(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function p(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function h(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const m=(e,t=0)=>null==e||isNaN(e)?t:e,d=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([n.e(27093),n.e(13323)]).then(n.bind(n,69339))}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function v(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function M(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function C(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=C(t);if(null!=e)return e}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidFill":return e.color}return null}function w(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=w(e);if(null!=t)return t}break}case"CIMTextSymbol":return w(e.symbol);case"CIMSolidStroke":return e.color}}function _(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=_(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return _(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function I(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function x(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function T(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const L=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function P(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function k(e,t,n,r,i,o,l=!0){const{infos:s}=o;let a=1,c=0,u=0,f=0,p=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:n,rotation:r,size:i,frameHeight:o,rotateClockWise:h,scaleSymbolsProportionally:y}of s)p=e?1:a,u=j(t,n,c,p,u),f=N(t,n,c,p,f),o&&(y||l)&&(a*=i/o),c=F(r,h,c);const h=j(r,i,c,p,u),y=N(r,i,c,p,f);return{size:e*a,rotation:F(t,n,c),offsetX:h,offsetY:y}}function Z(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function A(e){return e?.dashTemplate&&(e.dashTemplate=Z(e.dashTemplate)),e}function R(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return R(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return R(e.symbol)}}return"Normal"}function z(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function D(e){return e.map((e=>({...e,propertyName:P(e.propertyName)})))}function G(e){const t={};for(const n in e){const r=e[n];t[P(n)]=r}return t}function N(e,t,n,r,i){const o=n*Math.PI/180;if(o){const n=Math.cos(o);return(Math.sin(o)*e+n*t)*r+i}return t*r+i}function j(e,t,n,r,i){const o=n*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*r+i:e*r+i}function F(e,t,n){return t?n-e:n+e}function q(e,t){return Math.max(Math.min((e??t)/100,1),0)}},9350:function(e,t,n){n.d(t,{CJ:function(){return c},Rz:function(){return f},js:function(){return p},xA:function(){return a},z3:function(){return u}});n(61432);var r=n(89636),i=n(38096),o=n(19886),l=n(45433),s=n(54914);const a=o.Z.fromJSON(s.I4),c=i.Z.fromJSON(s.ET),u=r.Z.fromJSON(s.lF),f=l.Z.fromJSON(s.qP);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return c;case"polygon":case"extent":return u}return null}o.Z.fromJSON(s.eG),i.Z.fromJSON(s.wW),r.Z.fromJSON(s.lj)},54914:function(e,t,n){n.d(t,{ET:function(){return l},I4:function(){return o},SQ:function(){return r},X1:function(){return i},eG:function(){return c},lF:function(){return s},lj:function(){return f},qP:function(){return a},wW:function(){return u}});const r=[252,146,31,255],i=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},l={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},f={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);