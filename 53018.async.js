"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[53018],{53018:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r,a=n(73440),o=n(78619),i=n(85168),s=n(88194),l=n(41773),u=n(96711),c=n(84060),f=n(17155),p=(n(61432),n(83850),n(48023)),h=n(60508),g=n(45213),d=n(71354),m=n(47566),y=n(38209),b=n(83263),v=n(19306),w=n(3752),x=n(97349),Z=n(97550);const C=new(n(31743).f)("0/0/0",0,0,0,void 0);let S=r=class extends((0,b.h7)((0,w.M)((0,v.Q)(y.Z)))){constructor(){super(...arguments),this.tileInfo=Z.Z.create({spatialReference:g.Z.WebMercator,size:256}),this.type="base-tile",this.fullExtent=new d.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,g.Z.WebMercator),this.spatialReference=g.Z.WebMercator}addResolvingPromise(e){super.addResolvingPromise(e)}getTileBounds(e,t,n,r){const a=r||(0,m.Ue)();return C.level=e,C.row=t,C.col=n,C.extent=a,this.tileInfo.updateTileInfo(C),C.extent=void 0,a}fetchTile(e,t,n,r={}){const{signal:a}=r,i=this.getTileUrl(e,t,n),s={responseType:"image",signal:a,query:{...this.refreshParameters}};return(0,o.Z)(i??"",s).then((e=>e.data))}async fetchImageBitmapTile(e,t,n,a={}){const{signal:i}=a;if(this.fetchTile!==r.prototype.fetchTile){const r=await this.fetchTile(e,t,n,a);return(0,x.V)(r,e,t,n,i)}const s=this.getTileUrl(e,t,n)??"",l={responseType:"blob",signal:i,query:{...this.refreshParameters}},{data:u}=await(0,o.Z)(s,l);return(0,x.V)(u,e,t,n,i)}getTileUrl(){throw new s.Z("basetilelayer:gettileurl-not-implemented","getTileUrl() is not implemented")}};(0,a._)([(0,f.Cb)({type:Z.Z})],S.prototype,"tileInfo",void 0),(0,a._)([(0,f.Cb)({type:["show","hide"]})],S.prototype,"listMode",void 0),(0,a._)([(0,f.Cb)({readOnly:!0,value:"base-tile"})],S.prototype,"type",void 0),(0,a._)([(0,f.Cb)({nonNullable:!0})],S.prototype,"fullExtent",void 0),(0,a._)([(0,f.Cb)()],S.prototype,"spatialReference",void 0),S=r=(0,a._)([(0,p.j)("esri.layers.BaseTileLayer")],S);var M=n(85330),A=n(45107);const _=new l.X({BingMapsAerial:"aerial",BingMapsRoad:"road",BingMapsHybrid:"hybrid"});(0,i.K)(u.Z.getLogger("esri.layers.BingMapsLayer"),"esri.layers.BingMapsLayer",{version:"4.33",warnOnce:!0});let $=class extends((0,b.h7)((0,M.q)((0,c.R)(S)))){constructor(e){super(e),this.type="bing-maps",this.tileInfo=new Z.Z({size:[256,256],dpi:96,origin:new h.Z({x:-20037508.342787,y:20037508.342787,spatialReference:g.Z.WebMercator}),spatialReference:g.Z.WebMercator,lods:[new A.Z({level:1,resolution:78271.5169639999,scale:295828763.795777}),new A.Z({level:2,resolution:39135.7584820001,scale:147914381.897889}),new A.Z({level:3,resolution:19567.8792409999,scale:73957190.948944}),new A.Z({level:4,resolution:9783.93962049996,scale:36978595.474472}),new A.Z({level:5,resolution:4891.96981024998,scale:18489297.737236}),new A.Z({level:6,resolution:2445.98490512499,scale:9244648.868618}),new A.Z({level:7,resolution:1222.99245256249,scale:4622324.434309}),new A.Z({level:8,resolution:611.49622628138,scale:2311162.217155}),new A.Z({level:9,resolution:305.748113140558,scale:1155581.108577}),new A.Z({level:10,resolution:152.874056570411,scale:577790.554289}),new A.Z({level:11,resolution:76.4370282850732,scale:288895.277144}),new A.Z({level:12,resolution:38.2185141425366,scale:144447.638572}),new A.Z({level:13,resolution:19.1092570712683,scale:72223.819286}),new A.Z({level:14,resolution:9.55462853563415,scale:36111.909643}),new A.Z({level:15,resolution:4.77731426794937,scale:18055.954822}),new A.Z({level:16,resolution:2.38865713397468,scale:9027.977411}),new A.Z({level:17,resolution:1.19432856685505,scale:4513.988705}),new A.Z({level:18,resolution:.597164283559817,scale:2256.994353}),new A.Z({level:19,resolution:.298582141647617,scale:1128.497176}),new A.Z({level:20,resolution:.1492910708238085,scale:564.248588})]}),this.key=null,this.style="road",this.culture="en-US",this.region=null,this.portalUrl=null,this.hasAttributionData=!0}get bingMetadata(){return this._get("bingMetadata")}set bingMetadata(e){this._set("bingMetadata",e)}get copyright(){return null!=this.bingMetadata?this.bingMetadata.copyright:null}get operationalLayerType(){return _.toJSON(this.style)}get bingLogo(){return null!=this.bingMetadata?this.bingMetadata.brandLogoUri:null}load(e){return this.key?this.addResolvingPromise(this._getMetadata()):this.portalUrl?this.addResolvingPromise(this._getPortalBingKey().then((()=>this._getMetadata()))):this.addResolvingPromise(Promise.reject(new s.Z("bingmapslayer:load","Bing layer must have bing key."))),Promise.resolve(this)}getTileUrl(e,t,n){if(!this.loaded||null==this.bingMetadata)return null;const r=this.bingMetadata.resourceSets[0].resources[0],a=r.imageUrlSubdomains[t%r.imageUrlSubdomains.length],o=this._getQuadKey(e,t,n);return r.imageUrl.replace("{subdomain}",a).replace("{quadkey}",o)}async fetchAttributionData(){return this.load().then((()=>null==this.bingMetadata?null:{contributors:this.bingMetadata.resourceSets[0].resources[0].imageryProviders.map((e=>({attribution:e.attribution,coverageAreas:e.coverageAreas.map((e=>({zoomMin:e.zoomMin,zoomMax:e.zoomMax,score:1,bbox:[e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]]})))})))}))}_getMetadata(){const e={road:"roadOnDemand",aerial:"aerial",hybrid:"aerialWithLabelsOnDemand"}[this.style];return(0,o.Z)(`https://dev.virtualearth.net/REST/v1/Imagery/Metadata/${e}`,{responseType:"json",query:{include:"ImageryProviders",uriScheme:"https",key:this.key,suppressStatus:!0,output:"json",culture:this.culture,userRegion:this.region}}).then((e=>{const t=e.data;if(200!==t.statusCode)throw new s.Z("bingmapslayer:getmetadata",t.statusDescription);if(this.bingMetadata=t,0===this.bingMetadata.resourceSets.length)throw new s.Z("bingmapslayer:getmetadata","no bing resourcesets");if(0===this.bingMetadata.resourceSets[0].resources.length)throw new s.Z("bingmapslayer:getmetadata","no bing resources")})).catch((e=>{throw new s.Z("bingmapslayer:getmetadata",e.message)}))}_getPortalBingKey(){return(0,o.Z)(this.portalUrl??"",{responseType:"json",authMode:"no-prompt",query:{f:"json"}}).then((e=>{if(!e.data.bingKey)throw new s.Z("bingmapslayer:getportalbingkey","The referenced Portal does not contain a valid bing key");this.key=e.data.bingKey})).catch((e=>{throw new s.Z("bingmapslayer:getportalbingkey",e.message)}))}_getQuadKey(e,t,n){let r="";for(let a=e;a>0;a--){let e=0;const o=1<<a-1;0!=(n&o)&&(e+=1),0!=(t&o)&&(e+=2),r+=e.toString()}return r}};(0,a._)([(0,f.Cb)({json:{read:!1,write:!1},value:null})],$.prototype,"bingMetadata",null),(0,a._)([(0,f.Cb)({json:{read:!1,write:!1},value:"bing-maps",readOnly:!0})],$.prototype,"type",void 0),(0,a._)([(0,f.Cb)({type:Z.Z})],$.prototype,"tileInfo",void 0),(0,a._)([(0,f.Cb)({type:String,readOnly:!0,json:{read:!1,write:!1}})],$.prototype,"copyright",null),(0,a._)([(0,f.Cb)({type:String,json:{write:!1,read:!1}})],$.prototype,"key",void 0),(0,a._)([(0,f.Cb)({type:_.apiValues,nonNullable:!0,json:{read:{source:"layerType",reader:_.read}}})],$.prototype,"style",void 0),(0,a._)([(0,f.Cb)({type:["BingMapsAerial","BingMapsHybrid","BingMapsRoad"]})],$.prototype,"operationalLayerType",null),(0,a._)([(0,f.Cb)({type:String,json:{write:!1,read:!1}})],$.prototype,"culture",void 0),(0,a._)([(0,f.Cb)({type:String,json:{write:!1,read:!1}})],$.prototype,"region",void 0),(0,a._)([(0,f.Cb)({type:String,json:{write:!0,read:!0}})],$.prototype,"portalUrl",void 0),(0,a._)([(0,f.Cb)({type:Boolean,json:{write:!1,read:!1}})],$.prototype,"hasAttributionData",void 0),(0,a._)([(0,f.Cb)({type:String,readOnly:!0})],$.prototype,"bingLogo",null),$=(0,a._)([(0,p.j)("esri.layers.BingMapsLayer")],$);const j=$},615:function(e,t,n){n.d(t,{cW:function(){return l},ij:function(){return s},rM:function(){return u}});var r=n(88194),a=n(60123),o=n(13928),i=n(8971);function s(e,t,n){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:u(n.value)});return t}return u(e)}(e)}catch(e){n?.messages?.push(e)}return null}function l(e,t,n,r){try{const r=function(e){const t=(0,o.Q)(e);return t?(0,i.Cb)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);(0,a.RB)(n,r,t)}catch(e){r.messages&&r.messages.push(e)}}function u(e){if(!e?.length)return"";const t=[];for(const n of e){let e=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(n,"amount")];break;case"blur":e=[c(n,"radius","pt")];break;case"hue-rotate":e=[c(n,"angle","deg")];break;case"drop-shadow":e=[c(n,"xoffset","pt"),c(n,"yoffset","pt"),c(n,"blurRadius","pt"),f(n,"color")];break;case"bloom":e=[c(n,"strength"),c(n,"radius","pt"),c(n,"threshold")]}const r=`${n.type}(${e.filter(Boolean).join(" ")})`;(0,o.Q)(r),t.push(r)}return t.join(" ")}function c(e,t,n){if(null==e[t])throw new r.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function f(e,t){if(null==e[t])throw new r.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},13928:function(e,t,n){n.d(t,{Q:function(){return u}});var r=n(38461),a=n(88194),o=n(71480),i=n(8971);class s extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let n=null;const r=e.find((e=>e.source===this.location.source));r&&(n=r.text.split(/\r\n|\n|\r/g));const a=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,i=this.location.source+":"+o.line+":"+o.column;if(n){const e=this.location.end,r="".padEnd(o.line.toString().length," "),s=n[a.line-1],l=(a.line===e.line?e.column:s.length+1)-a.column||1;t+="\n --\x3e "+i+"\n"+r+" |\n"+o.line+" | "+s+"\n"+r+" | "+"".padEnd(a.column-1," ")+"".padEnd(l,"^")}else t+="\n at "+i}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function a(e){return r?e.replace(r,(e=>"\\u{"+n(e)+"}")):e}function o(e){return a(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}function i(e){return a(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}const s={literal:e=>'"'+o(e.text)+'"',class(e){const t=e.parts.map((e=>Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function l(e){return s[e.type](e)}return"Expected "+function(e){const t=e.map(l);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."}}function l(e,t){const n={},r=(t=void 0!==t?t:{}).grammarSource,a={start:le};let o=le;const i="none",l=",",u="grad",c="turn",f=/^[ \t\n\r]/,p=/^[a-z\-]/,h=/^[0-9a-fA-F]/,g=/^[+\-]/,d=/^[0-9]/,m=ae("none"),y=ne("none",!1),b=ne(")",!1),v=ne(",",!1),w=re([" ","\t","\n","\r"],!1,!1,!1),x=ae("function"),Z=ne("(",!1),C=ae("identifier"),S=re([["a","z"],"-"],!1,!1,!1),M=ae("percentage"),A=ne("%",!1),_=ae("length"),$=ne("px",!1),j=ne("cm",!1),T=ne("mm",!1),R=ne("in",!1),k=ne("pt",!1),I=ne("pc",!1),E=ae("angle"),P=ne("deg",!1),F=ne("rad",!1),B=ne("grad",!1),U=ne("turn",!1),L=ae("number"),O=ae("color"),N=ne("#",!1),q=re([["0","9"],["a","f"],["A","F"]],!1,!1,!1),D=re(["+","-"],!1,!1,!1),z=re([["0","9"]],!1,!1,!1),W=ne(".",!1),K=ne("e",!1);function Q(e,t){return t.length>0?function(e,t,n){return[e].concat(function(e,t){return e.map((function(e){return e[t]}))}(t,n))}(e,t,3):[e]}let H=0|t.peg$currPos,V=H;const J=[{line:1,column:1}];let G,X=H,Y=t.peg$maxFailExpected||[],ee=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=a[t.startRule]}function te(){return e.substring(V,H)}function ne(e,t){return{type:"literal",text:e,ignoreCase:t}}function re(e,t,n,r){return{type:"class",parts:e,inverted:t,ignoreCase:n,unicode:r}}function ae(e){return{type:"other",description:e}}function oe(t){let n,r=J[t];if(r)return r;if(t>=J.length)n=J.length-1;else for(n=t;!J[--n];);for(r=J[n],r={line:r.line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return J[t]=r,r}function ie(e,t,n){const a=oe(e),o=oe(t);return{source:r,start:{offset:e,line:a.line,column:a.column},end:{offset:t,line:o.line,column:o.column}}}function se(e){H<X||(H>X&&(X=H,Y=[]),Y.push(e))}function le(){let e;return e=ue(),e===n&&(e=function(){let e,t;if(e=[],t=ce(),t!==n)for(;t!==n;)e.push(t),t=ce();else e=n;return e}()),e}function ue(){let t,r;return ee++,t=H,pe(),e.substr(H,4)===i?(r=i,H+=4):(r=n,0===ee&&se(y)),r!==n?(pe(),V=t,t=[]):(H=t,t=n),ee--,t===n&&0===ee&&se(m),t}function ce(){let t,r,a,o;return t=H,pe(),r=function(){let t,r,a;return ee++,t=H,r=he(),r!==n?(40===e.charCodeAt(H)?(a="(",H++):(a=n,0===ee&&se(Z)),a!==n?(V=t,t=r):(H=t,t=n)):(H=t,t=n),ee--,t===n&&(r=n,0===ee&&se(x)),t}(),r!==n?(pe(),a=function(){let t,r,a,o,i,s,u,c;if(t=H,r=fe(),r!==n){for(a=[],o=H,i=pe(),44===e.charCodeAt(H)?(s=l,H++):(s=n,0===ee&&se(v)),s===n&&(s=null),u=pe(),c=fe(),c!==n?(i=[i,s,u,c],o=i):(H=o,o=n);o!==n;)a.push(o),o=H,i=pe(),44===e.charCodeAt(H)?(s=l,H++):(s=n,0===ee&&se(v)),s===n&&(s=null),u=pe(),c=fe(),c!==n?(i=[i,s,u,c],o=i):(H=o,o=n);V=t,t=Q(r,a)}else H=t,t=n;return t}(),a===n&&(a=null),pe(),41===e.charCodeAt(H)?(o=")",H++):(o=n,0===ee&&se(b)),o!==n?(pe(),V=t,t=function(e,t){return{type:"function",name:e,parameters:t||[]}}(r,a)):(H=t,t=n)):(H=t,t=n),t}function fe(){let e,t;return e=H,t=ge(),t===n&&(t=de(),t===n&&(t=me(),t===n&&(t=function(){let e,t;return ee++,e=H,pe(),t=be(),t!==n?(V=e,e=function(e){return{value:e,unit:null}}(t)):(H=e,e=n),ee--,e===n&&0===ee&&se(L),e}()))),t!==n&&(V=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),e=t,e===n&&(e=H,t=ye(),t!==n&&(V=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function pe(){let t,r;for(ee++,t=[],r=e.charAt(H),f.test(r)?H++:(r=n,0===ee&&se(w));r!==n;)t.push(r),r=e.charAt(H),f.test(r)?H++:(r=n,0===ee&&se(w));return ee--,t}function he(){let t,r,a;if(ee++,t=H,r=[],a=e.charAt(H),p.test(a)?H++:(a=n,0===ee&&se(S)),a!==n)for(;a!==n;)r.push(a),a=e.charAt(H),p.test(a)?H++:(a=n,0===ee&&se(S));else r=n;return r!==n&&(V=t,r=te()),t=r,ee--,t===n&&(r=n,0===ee&&se(C)),t}function ge(){let t,r,a;return ee++,t=H,pe(),r=be(),r!==n?(37===e.charCodeAt(H)?(a="%",H++):(a=n,0===ee&&se(A)),a!==n?(V=t,t=function(e){return{value:e,unit:"%"}}(r)):(H=t,t=n)):(H=t,t=n),ee--,t===n&&0===ee&&se(M),t}function de(){let t,r,a;return ee++,t=H,pe(),r=be(),r!==n?("px"===e.substr(H,2)?(a="px",H+=2):(a=n,0===ee&&se($)),a!==n?(V=t,t=function(e){return{value:e,unit:"px"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,pe(),r=be(),r!==n?("cm"===e.substr(H,2)?(a="cm",H+=2):(a=n,0===ee&&se(j)),a!==n?(V=t,t=function(e){return{value:e,unit:"cm"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,pe(),r=be(),r!==n?("mm"===e.substr(H,2)?(a="mm",H+=2):(a=n,0===ee&&se(T)),a!==n?(V=t,t=function(e){return{value:e,unit:"mm"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,pe(),r=be(),r!==n?("in"===e.substr(H,2)?(a="in",H+=2):(a=n,0===ee&&se(R)),a!==n?(V=t,t=function(e){return{value:e,unit:"in"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,pe(),r=be(),r!==n?("pt"===e.substr(H,2)?(a="pt",H+=2):(a=n,0===ee&&se(k)),a!==n?(V=t,t=function(e){return{value:e,unit:"pt"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,pe(),r=be(),r!==n?("pc"===e.substr(H,2)?(a="pc",H+=2):(a=n,0===ee&&se(I)),a!==n?(V=t,t=function(e){return{value:e,unit:"pc"}}(r)):(H=t,t=n)):(H=t,t=n)))))),ee--,t===n&&0===ee&&se(_),t}function me(){let t,r,a;return ee++,t=H,r=be(),r!==n?("deg"===e.substr(H,3)?(a="deg",H+=3):(a=n,0===ee&&se(P)),a!==n?(V=t,t=function(e){return{value:e,unit:"deg"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,r=be(),r!==n?("rad"===e.substr(H,3)?(a="rad",H+=3):(a=n,0===ee&&se(F)),a!==n?(V=t,t=function(e){return{value:e,unit:"rad"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,r=be(),r!==n?(e.substr(H,4)===u?(a=u,H+=4):(a=n,0===ee&&se(B)),a!==n?(V=t,t=function(e){return{value:e,unit:"grad"}}(r)):(H=t,t=n)):(H=t,t=n),t===n&&(t=H,r=be(),r!==n?(e.substr(H,4)===c?(a=c,H+=4):(a=n,0===ee&&se(U)),a!==n?(V=t,t=function(e){return{value:e,unit:"turn"}}(r)):(H=t,t=n)):(H=t,t=n)))),ee--,t===n&&(r=n,0===ee&&se(E)),t}function ye(){let t,r,a,o;if(ee++,t=H,35===e.charCodeAt(H)?(r="#",H++):(r=n,0===ee&&se(N)),r!==n){if(a=[],o=e.charAt(H),h.test(o)?H++:(o=n,0===ee&&se(q)),o!==n)for(;o!==n;)a.push(o),o=e.charAt(H),h.test(o)?H++:(o=n,0===ee&&se(q));else a=n;a!==n?(V=t,t={type:"hex",value:te()}):(H=t,t=n)}else H=t,t=n;return t===n&&(t=H,r=ce(),r!==n&&(V=t,r=function(e){return{type:"function",value:e}}(r)),t=r,t===n&&(t=H,r=he(),r!==n&&(V=t,r={type:"named",value:te()}),t=r)),ee--,t===n&&(r=n,0===ee&&se(O)),t}function be(){let t,r,a,o,i,s,l,u;for(t=H,r=e.charAt(H),g.test(r)?H++:(r=n,0===ee&&se(D)),r===n&&(r=null),a=H,o=[],i=e.charAt(H),d.test(i)?H++:(i=n,0===ee&&se(z));i!==n;)o.push(i),i=e.charAt(H),d.test(i)?H++:(i=n,0===ee&&se(z));if(46===e.charCodeAt(H)?(i=".",H++):(i=n,0===ee&&se(W)),i!==n){if(s=[],l=e.charAt(H),d.test(l)?H++:(l=n,0===ee&&se(z)),l!==n)for(;l!==n;)s.push(l),l=e.charAt(H),d.test(l)?H++:(l=n,0===ee&&se(z));else s=n;s!==n?(o=[o,i,s],a=o):(H=a,a=n)}else H=a,a=n;if(a===n)if(a=[],o=e.charAt(H),d.test(o)?H++:(o=n,0===ee&&se(z)),o!==n)for(;o!==n;)a.push(o),o=e.charAt(H),d.test(o)?H++:(o=n,0===ee&&se(z));else a=n;if(a!==n){if(o=H,101===e.charCodeAt(H)?(i="e",H++):(i=n,0===ee&&se(K)),i!==n){if(s=e.charAt(H),g.test(s)?H++:(s=n,0===ee&&se(D)),s===n&&(s=null),l=[],u=e.charAt(H),d.test(u)?H++:(u=n,0===ee&&se(z)),u!==n)for(;u!==n;)l.push(u),u=e.charAt(H),d.test(u)?H++:(u=n,0===ee&&se(z));else l=n;l!==n?(i=[i,s,l],o=i):(H=o,o=n)}else H=o,o=n;o===n&&(o=null),V=t,t=parseFloat(te())}else H=t,t=n;return t}G=o();const ve=G!==n&&H===e.length;function we(){throw G!==n&&H<e.length&&se({type:"end"}),function(e,t,n){return new s(s.buildMessage(e,t),e,t,n)}(Y,X<e.length?function(t=H){const n=e.codePointAt(t);return void 0===n?"":String.fromCodePoint(n)}(X):null,X<e.length?ie(X,X+1):ie(X,X))}return t.peg$library?{peg$result:G,peg$currPos:H,peg$FAILED:n,peg$maxFailExpected:Y,peg$maxFailPos:X,peg$success:ve,peg$throw:ve?void 0:we}:ve?G:void we()}function u(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=c(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new a.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:c(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!(0,i.AS)(t[e].effects,t[e+1].effects))throw new a.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,i.uF)(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function c(e){let t;if(!e)return[];try{t=l(e)}catch(t){throw new a.Z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=m(e.parameters[0])),new o.GI(e.name,t)}(e);case"opacity":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=m(e.parameters[0])),new o.Zx(t)}(e);case"hue-rotate":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=g[e.unit]))throw new a.Z("effect:type-error",`Expected <angle>, Actual: ${p(e)}`,{term:e})}(e),e.value*g[e.unit]||0}(e.parameters[0])),new o.Tq(t)}(e);case"blur":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=b(e.parameters[0]),h(t,e.parameters[0])),new o.Tj(t)}(e);case"drop-shadow":return function(e){const t=[];let n=null;for(const r of e.parameters)if("color"===r.type){if(t.length&&Object.freeze(t),n)throw new a.Z("effect:type-error","Accepts only one color",{});n=v(r)}else{const e=b(r);if(Object.isFrozen(t))throw new a.Z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&h(e,r)}if(t.length<2||t.length>3)throw new a.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new o.CE(t[0],t[1],t[2]||0,n||w("black"))}(e);case"bloom":return function(e){let t=1,n=0,r=0;return f(e.parameters,3),e.parameters[0]&&(t=m(e.parameters[0])),e.parameters[1]&&(n=b(e.parameters[1]),h(n,e.parameters[1])),e.parameters[2]&&(r=m(e.parameters[2])),new o.rk(t,n,r)}(e)}}catch(t){throw t.details.filter=e,t}throw new a.Z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function f(e,t){if(e.length>t)throw new a.Z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function p(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in d)return"<length>";if(e.unit in g)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function h(e,t){if(e<0)throw new a.Z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const g={deg:1,grad:.9,rad:180/Math.PI,turn:360};const d={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function m(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new a.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${p(e)}`,{term:e})}(e);const t=e.value;return h(t,e),"%"===e.unit?.01*t:t}function y(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new a.Z("effect:type-error",`Expected <double>, Actual: ${p(e)}`,{term:e})}(e),h(e.value,e),e.value}function b(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=d[e.unit]))throw new a.Z("effect:type-error",`Expected <length>, Actual: ${p(e)}`,{term:e})}(e),e.value*d[e.unit]||0}function v(e){switch(e.colorType){case"hex":return(0,r.a7)(e.value);case"named":return w(e.value);case"function":return function(e){if(f(e.parameters,4),x.test(e.name))return[m(e.parameters[0]),m(e.parameters[1]),m(e.parameters[2]),e.parameters[3]?m(e.parameters[3]):1];if(Z.test(e.name))return(0,r.Y6)(y(e.parameters[0]),m(e.parameters[1]),m(e.parameters[2]),e.parameters[3]?m(e.parameters[3]):1);throw new a.Z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function w(e){if(!(0,r.St)(e))throw new a.Z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,r.VL)(e)}const x=/^rgba?/i,Z=/^hsla?/i},83263:function(e,t,n){n.d(t,{h7:function(){return f},nE:function(){return l},qu:function(){return c}});var r=n(73440),a=n(17155),o=(n(61432),n(96711),n(83850),n(48023)),i=n(71840),s=n(615);const l={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:i.C}},"portal-item":{read:!0,write:{layerContainerTypes:i.C}}}}},u={read:{reader:s.ij},write:{allowNull:!0,writer:s.cW,layerContainerTypes:i.C}},c={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},f=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r._)([(0,a.Cb)(l)],t.prototype,"blendMode",void 0),(0,r._)([(0,a.Cb)(c)],t.prototype,"effect",void 0),t=(0,r._)([(0,o.j)("esri.layers.mixins.BlendLayer")],t),t}},19306:function(e,t,n){n.d(t,{Q:function(){return x},d:function(){return w}});var r=n(73440),a=(n(61432),n(96711)),o=n(93568),i=n(17155),s=n(90775),l=(n(83850),n(48023)),u=n(71840),c=n(43254),f=n(90403),p=n(21260);const h=new c.Z,g=new WeakMap;function d(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function m(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:m(t,e%t):0}let y=0,b=0;function v(){const e=Date.now();let t=!1;for(const n of h){const r=n.deref();r?r.refreshInterval&&e-(g.get(r)??0)+5>=6e4*r.refreshInterval&&(g.set(r,e),r.refresh(e)):t=!0}if(t)for(let e=h.length-1;e>=0;e--)h.at(e).deref()||h.removeAt(e)}(0,p.EH)((()=>{const e=Date.now();let t=0;for(const n of h){const r=n.deref();r&&(t=m(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?g.get(r)||g.set(r,e):g.delete(r))}if(t!==b){if(b=t,clearInterval(y),0===b)return void(y=0);y=setInterval(v,b)}}),f.Z_);function w(e){return null!=e&&"object"==typeof e&&"refreshTimestamp"in e&&"refresh"in e}const x=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.Ds)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){d(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,o.R8)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{a.Z.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,r._)([(0,i.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"refreshInterval",void 0),(0,r._)([(0,s.p)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,r._)([(0,i.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,r._)([(0,i.Cb)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,r._)([(0,l.j)("esri.layers.mixins.RefreshableLayer")],t),t}},3752:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(73440),a=n(17155),o=(n(61432),n(96711),n(83850),n(48023));const i=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}};return(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,r._)([(0,o.j)("esri.layers.mixins.ScaleRangeLayer")],t),t}},97349:function(e,t,n){n.d(t,{V:function(){return i},g:function(){return o}});var r=n(88194),a=n(93568);async function o(e,t,n){let o;try{o=await createImageBitmap(e)}catch(e){throw new r.Z("request:server",`Unable to load ${t}`,{url:t,error:e})}return(0,a.k_)(n),o}async function i(e,t,n,o,i){let s;try{s=await createImageBitmap(e)}catch(e){throw new r.Z("request:server",`Unable to load tile ${t}/${n}/${o}`,{error:e,level:t,row:n,col:o})}return(0,a.k_)(i),s}}}]);