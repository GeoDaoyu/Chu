"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[18530],{12019:function(t,e,i){i.d(e,{n:function(){return r}});var s=i(81001);const r=()=>s.default.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},18156:function(t,e,i){i.d(e,{Bh:function(){return l},I6:function(){return E},Jp:function(){return p},Kx:function(){return g},Su:function(){return y},U_:function(){return d},b0:function(){return H},t8:function(){return v},yY:function(){return c}});var s=i(30748),r=i(21117),n=i(82846),o=i(66130),a=i(24910),h=i(73749);function c(t,e,i){i*=.5;const s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t}function l(t,e){const i=2*Math.acos(e[3]),s=Math.sin(i/2);return s>(0,o.bn)()?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),i}function p(t,e,i){const s=e[0],r=e[1],n=e[2],o=e[3],a=i[0],h=i[1],c=i[2],l=i[3];return t[0]=s*l+o*a+r*c-n*h,t[1]=r*l+o*h+n*a-s*c,t[2]=n*l+o*c+s*h-r*a,t[3]=o*l-s*a-r*h-n*c,t}function u(t,e,i,s){const r=e[0],n=e[1],a=e[2],h=e[3];let c,l,p,u,d,g=i[0],f=i[1],y=i[2],_=i[3];return l=r*g+n*f+a*y+h*_,l<0&&(l=-l,g=-g,f=-f,y=-y,_=-_),1-l>(0,o.bn)()?(c=Math.acos(l),p=Math.sin(c),u=Math.sin((1-s)*c)/p,d=Math.sin(s*c)/p):(u=1-s,d=s),t[0]=u*r+d*g,t[1]=u*n+d*f,t[2]=u*a+d*y,t[3]=u*h+d*_,t}function d(t,e){const i=e[0],s=e[1],r=e[2],n=e[3],o=i*i+s*s+r*r+n*n,a=o?1/o:0;return t[0]=-i*a,t[1]=-s*a,t[2]=-r*a,t[3]=n*a,t}function g(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function f(t,e){const i=e[0]+e[4]+e[8];let s;if(i>0)s=Math.sqrt(i+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);const r=(i+1)%3,n=(i+2)%3;s=Math.sqrt(e[3*i+i]-e[3*r+r]-e[3*n+n]+1),t[i]=.5*s,s=.5/s,t[3]=(e[3*r+n]-e[3*n+r])*s,t[r]=(e[3*r+i]+e[3*i+r])*s,t[n]=(e[3*n+i]+e[3*i+n])*s}return t}function y(t,e,i,s){const r=.5*Math.PI/180;e*=r,i*=r,s*=r;const n=Math.sin(e),o=Math.cos(e),a=Math.sin(i),h=Math.cos(i),c=Math.sin(s),l=Math.cos(s);return t[0]=n*h*l-o*a*c,t[1]=o*a*l+n*h*c,t[2]=o*h*c-n*a*l,t[3]=o*h*l+n*a*c,t}const _=h.c,v=h.s,m=h.g,b=p,x=h.d,G=h.h,w=h.l,M=h.j,k=M,C=h.b,S=C,O=h.n,E=h.a,Z=h.e;function H(t,e,i){const s=(0,a.e)(e,i);return s<-.999999?((0,a.h)(I,R,e),(0,a.H)(I)<1e-6&&(0,a.h)(I,T,e),(0,a.n)(I,I),c(t,I,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,a.h)(I,e,i),t[0]=I[0],t[1]=I[1],t[2]=I[2],t[3]=1+s,O(t,t))}const I=(0,n.Ue)(),R=(0,n.al)(1,0,0),T=(0,n.al)(0,1,0);const P=(0,r.Ue)(),D=(0,r.Ue)();const L=(0,s.Ue)();Object.freeze(Object.defineProperty({__proto__:null,add:m,calculateW:function(t,e){const i=e[0],s=e[1],r=e[2];return t[0]=i,t[1]=s,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-r*r)),t},conjugate:g,copy:_,dot:G,equals:Z,exactEquals:E,fromEuler:y,fromMat3:f,getAxisAngle:l,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:d,len:k,length:M,lerp:w,mul:b,multiply:p,normalize:O,random:function(t){const e=o.FD,i=e(),s=e(),r=e(),n=Math.sqrt(1-i),a=Math.sqrt(i);return t[0]=n*Math.sin(2*Math.PI*s),t[1]=n*Math.cos(2*Math.PI*s),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t},rotateX:function(t,e,i){i*=.5;const s=e[0],r=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=s*h+o*a,t[1]=r*h+n*a,t[2]=n*h-r*a,t[3]=o*h-s*a,t},rotateY:function(t,e,i){i*=.5;const s=e[0],r=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=s*h-n*a,t[1]=r*h+o*a,t[2]=n*h+s*a,t[3]=o*h-r*a,t},rotateZ:function(t,e,i){i*=.5;const s=e[0],r=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=s*h+r*a,t[1]=r*h-s*a,t[2]=n*h+o*a,t[3]=o*h-n*a,t},rotationTo:H,scale:x,set:v,setAxes:function(t,e,i,s){const r=L;return r[0]=i[0],r[3]=i[1],r[6]=i[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],O(t,f(t,r))},setAxisAngle:c,slerp:u,sqlerp:function(t,e,i,s,r,n){return u(P,e,r,n),u(D,i,s,n),u(t,P,D,2*n*(1-n)),t},sqrLen:S,squaredLength:C,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},51067:function(t,e,i){i.d(e,{L4:function(){return w},LO:function(){return u},Qv:function(){return l},Rd:function(){return d},Ud:function(){return _},VG:function(){return p},Wv:function(){return f},Zv:function(){return m},aC:function(){return b},h9:function(){return y},ld:function(){return x},mg:function(){return g},q6:function(){return v},sS:function(){return S},yc:function(){return G}});var s=i(46965),r=i(95437),n=i(99574),o=i(1925),a=i(29138),h=i(26636),c=i(40030);function l(t,e,i){return t.units[e][i]}function p(t,e,i,s=2,r="abbr"){return`${(0,c.uf)(e,{minimumFractionDigits:s,maximumFractionDigits:s,signDisplay:e>0?"never":"exceptZero"})} ${l(t,i,r)}`}function u(t,e,i,s=2,r="abbr"){return`${(0,c.uf)(e,{minimumFractionDigits:s,maximumFractionDigits:s,signDisplay:"exceptZero"})} ${l(t,i,r)}`}function d(t,e,i,s=2,r="abbr"){const n=(0,h.Y8)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function g(t,e,i,s=2,r="abbr"){const n=(0,h.Y8)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function f(t,e,i,s=2,r="abbr"){const n=(0,h.Dw)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function y(t,e,i,s=2,r="abbr"){const n=(0,h.Dw)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function _(t,e,i,s=2,r="abbr"){const n=(0,h.Q7)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function v(t,e,i,s=2,r="abbr"){const n=(0,h.Q7)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function m(t,e,i,s=2,r="abbr"){const n=(0,h.jl)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function b(t,e,i,s=2,r="abbr"){const n=(0,h.jl)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function x(t,e,i,s=2,r="abbr"){const n=(0,h.ZI)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function G(t,e,i,s=2,r="abbr"){const n=(0,h.LV)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function w(t,e,i,s,n,a=r.BV,l=!0){let p=a.normalize((0,o.hw)((0,h.En)(t,e,"degrees"),i,s),0,l);const u=((t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"}))(p,n??2);return p=k(p,u),(0,c.uf)(p,u)}const M=new Map;function k(t,e){const i=JSON.stringify(e);let s=M.get(i);return s||(s=new Intl.NumberFormat("en-US",e),M.set(i,s)),/^[-+]?360\.?0*Â°?$/.test(s.format(t))?0:t}const C=["B","kB","MB","GB","TB"];function S(t,e){let i=0===(e=Math.round(e))?0:Math.floor(Math.log(e)/Math.log(s.Y.KILOBYTES));i=(0,n.uZ)(i,0,C.length-1);const r=(0,c.uf)(e/s.Y.KILOBYTES**i,{maximumFractionDigits:2});return(0,a.gx)(t.units.bytes[C[i]],{fileSize:r})}},25657:function(t,e,i){i.d(e,{Z:function(){return l}});var s,r=i(73440),n=i(89314),o=i(63255),a=i(17155),h=(i(61432),i(96711),i(83850),i(79775)),c=i(48023);let l=class extends(n.Z.ClonableMixin(o.Z)){static{s=this}constructor(t){super(t),this.type="georeferenced",this.origin=null}static{this.absolute=new s}};(0,r._)([(0,h.J)({georeferenced:"georeferenced"},{readOnly:!0})],l.prototype,"type",void 0),(0,r._)([(0,a.Cb)({type:[Number],nonNullable:!1,json:{write:!0}})],l.prototype,"origin",void 0),l=s=(0,r._)([(0,c.j)("esri.geometry.support.MeshGeoreferencedVertexSpace")],l)},93466:function(t,e,i){i.d(e,{Z:function(){return l}});var s=i(73440),r=i(89314),n=i(63255),o=i(17155),a=(i(61432),i(96711),i(83850),i(79775)),h=i(48023),c=i(82846);let l=class extends(r.Z.ClonableMixin(n.Z)){constructor(t){super(t),this.type="local",this.origin=(0,c.Ue)()}};(0,s._)([(0,a.J)({local:"local"},{readOnly:!0})],l.prototype,"type",void 0),(0,s._)([(0,o.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],l.prototype,"origin",void 0),l=(0,s._)([(0,h.j)("esri.geometry.support.MeshLocalVertexSpace")],l)},86456:function(t,e,i){i.d(e,{EU:function(){return y},Ue:function(){return c},WH:function(){return _},ZZ:function(){return f},q_:function(){return u},qw:function(){return g},uT:function(){return l},up:function(){return m},zk:function(){return p}});var s=i(99574),r=i(31865),n=i(18156),o=i(21117),a=i(24910),h=i(82846);function c(t=m){return[t[0],t[1],t[2],t[3]]}function l(t,e,i=c()){return(0,a.c)(i,t),i[3]=e,i}function p(t,e,i){return(0,a.h)(i,t,e),(0,a.n)(i,i),i[3]=-(0,a.p)(t,e),i}function u(t,e=c()){const i=(0,r.j6)(b,t);return v(e,(0,s.BV)((0,n.Bh)(e,i))),e}function d(t,e,i=c()){return(0,n.yY)(b,t,_(t)),(0,n.yY)(x,e,_(e)),(0,n.Jp)(b,x,b),v(i,(0,s.BV)((0,n.Bh)(i,b)))}function g(t,e,i,s=c()){return l(h.E9,t,G),l(h.IO,e,w),l(h.eG,i,M),d(G,w,G),d(G,M,s),s}function f(t){return t}function y(t){return t[3]}function _(t){return(0,s.Vl)(t[3])}function v(t,e){return t[3]=e,t}const m=[0,0,1,0],b=(0,o.Ue)(),x=(0,o.Ue)(),G=(c(),c()),w=c(),M=c()},52861:function(t,e,i){i.d(e,{G7:function(){return p},QK:function(){return c},rU:function(){return l},vI:function(){return u},z1:function(){return a},zZ:function(){return h}});var s=i(24910),r=i(60508),n=i(25657),o=i(93466);function a(t){return null==t.origin}function h(t){return null!=t.origin}function c(t){return h(t.vertexSpace)}function l(t,e){if(!h(t))return null;const[i,s,n]=t.origin;return new r.Z({x:i,y:s,z:n,spatialReference:e})}function p(t,e){const{x:i,y:s,z:r,spatialReference:a}=t,h=[i,s,r??0];return"local"===(e?.vertexSpace??function(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}(a))?new o.Z({origin:h}):new n.Z({origin:h})}function u(t,e){return t.type===e.type&&(t.origin===e.origin||null!=t.origin&&null!=e.origin&&(0,s.q)(t.origin,e.origin))}},1499:function(t,e,i){i.r(e),i.d(e,{default:function(){return q}});var s=i(73440),r=i(46451),n=i(87833),o=i(61100),a=i(1925),h=i(90403),c=i(17155),l=(i(61432),i(96711),i(83850),i(48023)),p=i(60508),u=i(67764),d=i(62197),g=i(47566),f=i(62951),y=i(28931),_=i(82868);function v(t,e,i,s){const r=[];for(const n of t){const t=n.slice();r.push(t);const o=e*(n[0]-s.x)-i*(n[1]-s.y)+s.x,a=i*(n[0]-s.x)+e*(n[1]-s.y)+s.y;t[0]=o,t[1]=a}return r}function m(t,e,i){const{hasM:s,hasZ:r,spatialReference:n}=t,o=e*Math.PI/180,a=Math.cos(o),h=Math.sin(o);if("xmin"in t&&(i=i??t.center,t=new u.Z({spatialReference:n,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})),"paths"in t){i=i??t.extent.center;const e=[];for(const s of t.paths)e.push(v(s,a,h,i));return new d.Z({hasM:s,hasZ:r,spatialReference:n,paths:e})}if("rings"in t){i=i??t.extent.center;const e=[];for(const s of t.rings){const t=(0,y.bu)(s),r=v(s,a,h,i);(0,y.bu)(r)!==t&&r.reverse(),e.push(r)}return new u.Z({hasM:s,hasZ:r,spatialReference:n,rings:e})}if("x"in t){i=i??t;const e=new p.Z({x:a*(t.x-i.x)-h*(t.y-i.y)+i.x,y:h*(t.x-i.x)+a*(t.y-i.y)+i.y,spatialReference:n});return null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}return"points"in t?(i=i??t.extent.center,new _.Z({hasM:s,hasZ:r,points:v(t.points,a,h,i),spatialReference:n})):null}var b=i(89636),x=i(38096),G=i(19886),w=i(89200),M=i(54339),k=i(91652),C=i(77308),S=i(52421),O=i(41943),E=i(3943),Z=i(59037),H=i(8449),I=i(66972),R=i(4939);class T{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type="move-start"}}class P{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type="move"}}class D{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type="move-stop"}}class L{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type="rotate-start"}}class z{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type="rotate"}}class U{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type="rotate-stop"}}class A{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type="scale-start"}}class Y{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type="scale"}}class B{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type="scale-stop"}}const N=S.X.transformGraphics,V={centerIndicator:new G.Z({style:"cross",size:N.center.size,color:N.center.color}),fill:{default:new b.Z({color:N.fill.color,outline:{color:N.fill.outlineColor,join:"round",width:1}}),active:new b.Z({color:N.fill.stagedColor,outline:{color:N.fill.outlineColor,join:"round",style:"dash",width:1}})},handles:{default:new G.Z({style:"square",size:N.vertex.size,color:N.vertex.color,outline:{color:N.vertex.outlineColor,width:1}}),hover:new G.Z({style:"square",size:N.vertex.hoverSize,color:N.vertex.hoverColor,outline:{color:N.vertex.hoverOutlineColor,width:1}})},rotator:{default:new G.Z({style:"circle",size:N.vertex.size,color:N.vertex.color,outline:{color:N.vertex.outlineColor,width:1}}),hover:new G.Z({style:"circle",size:N.vertex.hoverSize,color:N.vertex.hoverColor,outline:{color:N.vertex.hoverOutlineColor,width:1}})},rotatorLine:new x.Z({color:N.line.color,width:1})};let F=class extends n.Z.EventedAccessor{constructor(t){super(t),this._activeHandleGraphic=null,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._centerGraphic=null,this._backgroundGraphic=null,this._vertexGraphics=[],this._rotateHandleGraphic=null,this._rotateGraphicOffset=20,this._angleOfRotation=0,this._rotateLineGraphic=null,this._startInfo=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this.tooltip=null,this.type="box",this.callbacks={onMoveStart(){},onMove(){},onMoveStop(){},onScaleStart(){},onScale(){},onScaleStop(){},onRotateStart(){},onRotate(){},onRotateStop(){},onGraphicClick(){}},this.enableMovement=!0,this.enableRotation=!0,this.enableScaling=!0,this.graphics=[],this.highlightName=null,this.highlightsEnabled=!0,this.layer=null,this.preserveAspectRatio=!1,this.showCenterGraphic=!0,this.symbols=V,this.sketchOptions=new O.Z,this.view=null,this._getBounds=(()=>{const t=(0,g.Ue)();return(e,i)=>{e[0]=Number.POSITIVE_INFINITY,e[1]=Number.POSITIVE_INFINITY,e[2]=Number.NEGATIVE_INFINITY,e[3]=Number.NEGATIVE_INFINITY;for(const s of i){if(!s)continue;let i,r,n,o;if("point"===s.type)i=n=s.x,r=o=s.y;else if("multipoint"===s.type){const e=(0,y.nA)(s);[i,r,n,o]=(0,f.C6)(t,[e])}else if("extent"===s.type)[i,r,n,o]=[s.xmin,s.ymin,s.xmax,s.ymax];else{const e=(0,y.nA)(s);[i,r,n,o]=(0,f.C6)(t,e)}e[0]=Math.min(i,e[0]),e[1]=Math.min(r,e[1]),e[2]=Math.max(n,e[2]),e[3]=Math.max(o,e[3])}return e}})()}initialize(){const t=this.view;this._highlightHelper=new k.Z({view:t}),this._setup(),this.addHandles([(0,h.gx)((()=>t?.ready),(()=>{const{layer:t,view:e}=this;(0,C.p)(e,t)}),{once:!0,initial:!0}),(0,h.YP)((()=>this.preserveAspectRatio),(()=>{this._activeHandleGraphic&&(this._scaleGraphic(this._activeHandleGraphic),this._updateGraphics(),this._updateTooltip(this._activeHandleGraphic))})),(0,h.YP)((()=>t?.scale),(()=>{this._updateRotateGraphic(),this._updateRotateLineGraphic()})),(0,h.YP)((()=>this.graphics),(()=>this.refresh())),(0,h.YP)((()=>this.layer),((t,e)=>{e&&this._resetGraphics(e),this.refresh()})),(0,h.YP)((()=>[this.highlightsEnabled,this.highlightName]),(()=>{this._highlightHelper?.removeAll(),this._setUpHighlights()})),(0,h.YP)((()=>this.sketchOptions.tooltips.effectiveEnabled),(e=>{this.tooltip=e?(0,E.vG)((()=>({view:t,options:this.sketchOptions.tooltips}))):(0,o.SC)(this.tooltip)}),h.tX),(0,h.YP)((()=>this.view.effectiveTheme.accentColor),(()=>this._updateSymbolsForTheme()),h.nn),this.on("move-start",(t=>this.callbacks?.onMoveStart?.(t))),this.on("move",(t=>this.callbacks?.onMove?.(t))),this.on("move-stop",(t=>this.callbacks?.onMoveStop?.(t))),this.on("rotate-start",(t=>this.callbacks?.onRotateStart?.(t))),this.on("rotate",(t=>this.callbacks?.onRotate?.(t))),this.on("rotate-stop",(t=>this.callbacks?.onRotateStop?.(t))),this.on("scale-start",(t=>this.callbacks?.onScaleStart?.(t))),this.on("scale",(t=>this.callbacks?.onScale?.(t))),this.on("scale-stop",(t=>this.callbacks?.onScaleStop?.(t)))])}destroy(){this._reset(),this.tooltip=(0,o.SC)(this.tooltip)}get state(){const t=this.view?.ready??!1,e=this.graphics.length&&this.layer;return t&&e?"active":t?"ready":"disabled"}isUIGraphic(t){return this._vertexGraphics.includes(t)||t===this._backgroundGraphic||t===this._centerGraphic||t===this._rotateHandleGraphic||t===this._rotateLineGraphic}move(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=(0,w.e7)(s,t,e,this.view);i.geometry=r}this.refresh(),this.emit("move-stop",new D(this.graphics,null,t,e))}}scale(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=(0,w.bA)(s,t,e);i.geometry=r}this.refresh(),this.emit("scale-stop",new B(this.graphics,null,t,e))}}rotate(t,e){if(this._mover&&this.graphics.length){if(!e){const t=this._vertexGraphics[1].geometry.x,i=this._vertexGraphics[3].geometry.y;e=new p.Z(t,i,this.view.spatialReference)}for(const i of this.graphics){const s=m(i.geometry,t,e);i.geometry=s}this.refresh(),this.emit("rotate-stop",new U(this.graphics,null,t))}}refresh(){this._reset(),this._setup()}reset(){this.graphics=[]}_setup(){"active"===this.state&&(this._setUpHighlights(),this._setupGraphics(),this._setupMover(),this._updateGraphics())}_reset(){this._highlightHelper?.removeAll(),this._resetGraphicStateVars(),this._resetGraphics(),this._updateTooltip(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetGraphicStateVars(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}_resetGraphics(t){(t=t||this.layer)&&(t.removeMany(this._vertexGraphics),t.remove(this._backgroundGraphic),t.remove(this._centerGraphic),t.remove(this._rotateHandleGraphic),t.remove(this._rotateLineGraphic)),this._vertexGraphics.forEach((t=>!t.destroyed&&t.destroy())),!this._backgroundGraphic.destroyed&&this._backgroundGraphic.destroy(),!this._centerGraphic.destroyed&&this._centerGraphic.destroy(),!this._rotateHandleGraphic.destroyed&&this._rotateHandleGraphic.destroy(),!this._rotateLineGraphic.destroyed&&this._rotateLineGraphic.destroy(),this._vertexGraphics=[],this._backgroundGraphic=null,this._centerGraphic=null,this._rotateHandleGraphic=null,this._rotateLineGraphic=null}_setupMover(){let t=[];this.enableScaling&&(t=t.concat(this._vertexGraphics)),this.enableRotation&&t.push(this._rotateHandleGraphic),this.enableMovement&&(t=t.concat(this.graphics,this._backgroundGraphic)),this.showCenterGraphic&&t.push(this._centerGraphic),this._mover=new M.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,view:this.view,graphics:t,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_getStartInfo(t){const[e,i,s,r]=this._getBoxBounds((0,g.Ue)()),n=Math.abs(s-e),o=Math.abs(r-i),a=(s+e)/2,h=(r+i)/2,{x:c,y:l}=t.geometry;return{width:n,height:o,centerX:a,centerY:h,startX:c,startY:l,graphicInfos:this._getGraphicInfos(),box:this._backgroundGraphic.geometry,rotate:this._rotateHandleGraphic.geometry}}_getGraphicInfos(){return this.graphics.map((t=>this._getGraphicInfo(t)))}_getGraphicInfo(t){const e=t.geometry,[i,s,r,n]=this._getBounds((0,g.Ue)(),[e]);return{width:Math.abs(r-i),height:Math.abs(n-s),centerX:(r+i)/2,centerY:(n+s)/2,geometry:e}}_onGraphicClickCallback(t){t.viewEvent.stopPropagation(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}_onGraphicMoveStartCallback(t){const{_angleOfRotation:e,_xScale:i,_yScale:s,_backgroundGraphic:r,_vertexGraphics:n,_rotateHandleGraphic:o,symbols:a}=this,h=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),r.symbol=a.fill.active,this._startInfo=this._getStartInfo(h),this._updateTooltip(h,t.viewEvent),h===o?(this.view.cursor="grabbing",this.emit("rotate-start",new L(this.graphics,h,e))):n.includes(h)?(this._activeHandleGraphic=h,this.emit("scale-start",new A(this.graphics,h,i,s))):this.emit("move-start",new T(this.graphics,h,t.dx,t.dy))}_onGraphicMoveCallback(t){const e=t.graphic;if(this._startInfo)if(this._vertexGraphics.includes(e))this._scaleGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("scale",new Y(this.graphics,e,this._xScale,this._yScale));else if(e===this._rotateHandleGraphic)this._rotateGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("rotate",new z(this.graphics,e,this._angleOfRotation));else{const{dx:i,dy:s}=t;this._totalDx+=i,this._totalDy+=s,this._moveGraphic(e,i,s),this._updateTooltip(e,t.viewEvent),this.emit("move",new P(this.graphics,e,i,s))}}_onGraphicMoveStopCallback(t){const e=t.graphic;if(!this._startInfo)return void this.refresh();const{_angleOfRotation:i,_totalDx:s,_totalDy:r,_xScale:n,_yScale:o,_vertexGraphics:a,_rotateHandleGraphic:h}=this;this.refresh(),e===h?(this.view.cursor="pointer",this.emit("rotate-stop",new U(this.graphics,e,i))):a.includes(e)?this.emit("scale-stop",new B(this.graphics,e,n,o)):this.emit("move-stop",new D(this.graphics,e,s,r))}_onGraphicPointerOverCallback(t){const{_backgroundGraphic:e,_vertexGraphics:i,graphics:s,_rotateHandleGraphic:r,symbols:n,view:o}=this,a=t.graphic;if(this._hoveredGraphic=a,a===r)return r.symbol=n.rotator.hover,o.cursor="pointer",void this._updateTooltip(a);if(s.includes(a)||a===e)return void(o.cursor="move");if(!i.includes(a))return void(o.cursor="pointer");this._updateTooltip(a),t.graphic.symbol=n.handles.hover;const h=o.rotation;let c,l=t.index;switch(l<8&&(h>=0&&h<45?l%=8:l=h>=45&&h<90?(l+1)%8:h>=90&&h<135?(l+2)%8:h>=135&&h<180?(l+3)%8:h>=180&&h<225?(l+4)%8:h>=225&&h<270?(l+5)%8:h>=270&&h<315?(l+6)%8:(l+7)%8),l){case 0:case 4:c="nwse-resize";break;case 1:case 5:c="ns-resize";break;case 2:case 6:c="nesw-resize";break;case 3:case 7:c="ew-resize";break;default:c="pointer"}o.cursor=c}_onGraphicPointerOutCallback(t){const{_vertexGraphics:e,_rotateHandleGraphic:i,symbols:s,view:r}=this;this._hoveredGraphic=null,t.graphic===i?i.symbol=s.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=s.handles.default),r.cursor="default",this._updateTooltip()}_scaleGraphic(t){const{_startInfo:e,_vertexGraphics:i,preserveAspectRatio:s,view:r}=this,{centerX:n,centerY:o,graphicInfos:a,height:h,startX:c,startY:l,width:u}=e,{resolution:d,transform:g}=r.state,f=i.indexOf(t);1!==f&&5!==f||this._updateX(t,n),3!==f&&7!==f||this._updateY(t,o);const{x:y,y:_}=t.geometry,v=g[0]*y+g[2]*_+g[4],m=g[1]*y+g[3]*_+g[5],b=a?.map((t=>t.geometry))??[],x=b.every((t=>"point"===t.type));if((0===u||0===h)&&x){const t=j((y-c)/d),i=j((l-_)/d);for(let e=0;e<b.length;e++)this.graphics[e].geometry=(0,w.e7)(b[e],t,i,r,!0);return this._centerGraphic.geometry=new p.Z(y,_,r.spatialReference),void(this._backgroundGraphic.geometry=(0,w.e7)(e.box,t,i,r,!0))}if(s){const t=j(g[0]*n+g[2]*o+g[4],2),e=j(g[1]*n+g[3]*o+g[5],2),i=j(g[0]*c+g[2]*l+g[4],2),s=j(g[1]*c+g[3]*l+g[5],2);let r=(0,w.Ru)(t,e,i,s,v,m);0!==r&&Math.abs(r)!==1/0||(r=1),this._xScale=this._yScale=r;for(const t of b){const e=b.indexOf(t);this.graphics[e].geometry=(0,w.bA)(t,this._xScale,this._yScale,[n,o])}this._updateBackgroundGraphic()}else{let t=y-c,i=l-_;if(1===f||5===f?t=0:3!==f&&7!==f||(i=0),0===t&&0===i)return;const s=n+t/2,a=o+i/2;let g=(u+(c>n?t:-1*t))/u,v=(h+(l<o?i:-1*i))/h;1!==f&&5!==f&&0!==g&&Math.abs(g)!==1/0||(g=1),3!==f&&7!==f&&0!==v&&Math.abs(v)!==1/0||(v=1),this._xScale=g,this._yScale=v;const m=(s-n)/d,x=(a-o)/d,G=(0,w.bA)(e.box,this._xScale,this._yScale);this._backgroundGraphic.geometry=(0,w.e7)(G,m,x,r,!0);const{centerX:M,centerY:k}=this._getGraphicInfo(this._backgroundGraphic),C=(M-n)/d,S=-1*(k-o)/d;for(const t of b){const e=b.indexOf(t),i=(0,w.bA)(t,this._xScale,this._yScale,[n,o]);this.graphics[e].geometry=(0,w.e7)(i,C,S,r,!0)}this._centerGraphic.geometry=new p.Z(M,k,r.spatialReference)}}_rotateGraphic(t){const{centerX:e,centerY:i,startX:s,startY:r,box:n,rotate:o}=this._startInfo,a=this.view.spatialReference,h=new p.Z(s,r,a),c=new p.Z(e,i,a),l=t.geometry;this._angleOfRotation=(0,w.cM)(h,l,c);const u=this._startInfo.graphicInfos?.map((t=>t.geometry))??[];for(const t of u){const e=u.indexOf(t),i=m(t,this._angleOfRotation,c);this.graphics[e].geometry=i}this._backgroundGraphic.geometry=m(n,this._angleOfRotation,c),this._rotateHandleGraphic.geometry=m(o,this._angleOfRotation,c)}_moveGraphic(t,e,i){if(this.graphics.includes(t)){const s=this._backgroundGraphic.geometry;this._backgroundGraphic.geometry=(0,w.e7)(s,e,i,this.view);for(const s of this.graphics)s!==t&&(s.geometry=(0,w.e7)(s.geometry,e,i,this.view))}else if(t===this._centerGraphic){const t=this._backgroundGraphic.geometry;this._backgroundGraphic.geometry=(0,w.e7)(t,e,i,this.view)}if(t===this._backgroundGraphic||t===this._centerGraphic)for(const t of this.graphics)t.geometry=(0,w.e7)(t.geometry,e,i,this.view)}_setUpHighlights(){this.highlightsEnabled&&this.graphics.length&&this._highlightHelper?.add(this.graphics,this.highlightName)}_setupGraphics(){const{_graphicAttributes:t,symbols:e}=this;this._centerGraphic=new r.Z({symbol:e.centerIndicator,attributes:t}),this.showCenterGraphic&&this.layer.add(this._centerGraphic),this._backgroundGraphic=new r.Z({symbol:e.fill.default,attributes:t}),this.layer.add(this._backgroundGraphic),this._rotateLineGraphic=new r.Z({symbol:e.rotatorLine,attributes:t}),this._rotateHandleGraphic=new r.Z({symbol:e.rotator.default,attributes:t}),this.enableRotation&&!this._hasExtentGraphic()&&this.layer.addMany([this._rotateLineGraphic,this._rotateHandleGraphic]);for(let i=0;i<8;i++)this._vertexGraphics.push(new r.Z({symbol:e.handles.default,attributes:t}));this.enableScaling&&this.layer.addMany(this._vertexGraphics)}_updateSymbolsForTheme(){const t=this.view.effectiveTheme.accentColor;this.symbols={...this.symbols,fill:{active:this.symbols.fill.active?.clone().set("outline.color",t),default:this.symbols.fill.default?.clone().set("outline.color",t)},handles:{...this.symbols.handles,default:this.symbols.handles.default.clone().set("outline.color",t)},rotator:{...this.symbols.rotator,default:this.symbols.rotator.default.clone().set("outline.color",t)},rotatorLine:this.symbols.rotatorLine.clone().set("color",t)};for(const t of this._vertexGraphics)t.symbol=t===this._hoveredGraphic?this.symbols.handles.hover:this.symbols.handles.default;this._backgroundGraphic.symbol=this.symbols.fill.default,this._rotateHandleGraphic.symbol=this._rotateHandleGraphic===this._hoveredGraphic?this.symbols.rotator.hover:this.symbols.rotator.default,this._rotateLineGraphic.symbol=this.symbols.rotatorLine}_updateGraphics(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}_hideGraphicsBeforeUpdate(){this._centerGraphic.visible=!1,this._rotateHandleGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this._vertexGraphics.forEach((t=>t.visible=!1))}_updateHandleGraphics(){const t=this._getCoordinates(!0);this._vertexGraphics.forEach(((e,i)=>{const[s,r]=t[i];this._updateXY(e,s,r)}))}_updateBackgroundGraphic(){const t=this._getCoordinates().map((([t,e])=>[t,e]));this._backgroundGraphic.geometry=new u.Z({rings:[t],spatialReference:this.view.spatialReference})}_updateCenterGraphic(){const[t,e,i,s]=this._getBoxBounds((0,g.Ue)()),r=(i+t)/2,n=(s+e)/2;this._centerGraphic.geometry=new p.Z(r,n,this.view.spatialReference)}_updateRotateGraphic(){if(!this._vertexGraphics.length)return;const{x:t,y:e}=this._vertexGraphics[1].geometry,i=e+this.view.state.resolution*this._rotateGraphicOffset;this._rotateHandleGraphic.geometry=new p.Z(t,i,this.view.spatialReference)}_updateRotateLineGraphic(){if(!this._vertexGraphics.length||!this._rotateHandleGraphic?.geometry)return;const t=this._vertexGraphics[1].geometry,e=this._rotateHandleGraphic.geometry;this._rotateLineGraphic.geometry=new d.Z({paths:[[[t.x,t.y],[e.x,e.y]]],spatialReference:this.view.spatialReference})}_updateXY(t,e,i){t.geometry=new p.Z(e,i,this.view.spatialReference)}_updateX(t,e){const i=t.geometry.y;t.geometry=new p.Z(e,i,this.view.spatialReference)}_updateY(t,e){const i=t.geometry.x;t.geometry=new p.Z(i,e,this.view.spatialReference)}_hasExtentGraphic(){return this.graphics.some((t=>null!=t?.geometry&&"extent"===t.geometry.type))}_getBoxBounds(t){const e=this.graphics.map((t=>t.geometry));return this._getBounds(t,e)}_getCoordinates(t){const[e,i,s,r]=this._getBoxBounds((0,g.Ue)());if(t){const t=(e+s)/2,n=(r+i)/2;return[[e,r],[t,r],[s,r],[s,n],[s,i],[t,i],[e,i],[e,n]]}return[[e,r],[s,r],[s,i],[e,i]]}_updateTooltip(t,e){if(null==this.tooltip)return;if(!t)return void this.tooltip.clear();const{_backgroundGraphic:i,graphics:s,_vertexGraphics:r,_rotateHandleGraphic:n}=this;t===n?this._updateRotateTooltip():r.includes(t)?this._updateScaleTooltip():(s.includes(t)||t===i)&&this._updateMoveTooltip(e)}_updateRotateTooltip(){null!=this.tooltip&&(this.tooltip.info=new Z.c({sketchOptions:this.sketchOptions,angle:-this._angleOfRotation}))}_updateScaleTooltip(){const{tooltip:t,_xScale:e,_yScale:i,sketchOptions:s,view:r,automaticLengthMeasurementUtils:n}=this;if(null==t)return;const o=this._getCoordinates(),a=(0,R.D)({topLeft:o[0],topRight:o[1],bottomRight:o[2],bottomLeft:o[3],spatialReference:r.spatialReference,automaticLengthMeasurementUtils:n});if(null==a)return;const{xSize:h,ySize:c}=a,l=Math.abs(e),p=Math.abs(i);t.info=new H.p({sketchOptions:s,xScale:l,yScale:p,xSize:h,ySize:c})}_updateMoveTooltip(t){const{tooltip:e,sketchOptions:i,view:s,automaticLengthMeasurementUtils:r}=this;if(null==e)return;const n=new I.E({sketchOptions:i});if(t){const{x:e,y:i}=t.origin,o=s.toMap(t),h=s.toMap({x:e,y:i}),c=r.autoDistanceBetweenPoints2D(h,o);n.distance=null!=c?c:a.yP}e.info=n}};function j(t,e=2){return Number.parseFloat(t.toFixed(e))}(0,s._)([(0,c.Cb)()],F.prototype,"tooltip",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],F.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"callbacks",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"enableMovement",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"enableRotation",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"enableScaling",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"graphics",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"highlightName",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"highlightsEnabled",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"layer",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"preserveAspectRatio",void 0),(0,s._)([(0,c.Cb)()],F.prototype,"showCenterGraphic",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],F.prototype,"state",null),(0,s._)([(0,c.Cb)()],F.prototype,"symbols",void 0),(0,s._)([(0,c.Cb)({type:O.Z})],F.prototype,"sketchOptions",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],F.prototype,"view",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],F.prototype,"automaticLengthMeasurementUtils",void 0),F=(0,s._)([(0,l.j)("esri.views.draw.support.Box")],F);const q=F},54339:function(t,e,i){i.r(e),i.d(e,{default:function(){return E}});var s=i(73440),r=i(87833),n=i(28947),o=i(90403),a=i(17155),h=(i(61432),i(96711),i(48023)),c=i(53447),l=i(89636),p=i(38096),u=i(19886),d=i(89200),g=i(91652),f=i(77308);class y{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-click"}}class _{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-double-click"}}class v{constructor(t,e,i,s,r,n,o,a,h,c){this.graphic=t,this.allGraphics=e,this.index=i,this.x=s,this.y=r,this.dx=n,this.dy=o,this.totalDx=a,this.totalDy=h,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class m{constructor(t,e,i,s,r,n,o,a,h,c){this.graphic=t,this.allGraphics=e,this.index=i,this.x=s,this.y=r,this.dx=n,this.dy=o,this.totalDx=a,this.totalDy=h,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class b{constructor(t,e,i,s,r,n,o,a,h,c){this.graphic=t,this.allGraphics=e,this.index=i,this.x=s,this.y=r,this.dx=n,this.dy=o,this.totalDx=a,this.totalDy=h,this.viewEvent=c,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class x{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-over"}}class G{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-out"}}class w{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-down"}}class M{constructor(t,e,i,s,r){this.graphic=t,this.index=e,this.x=i,this.y=s,this.viewEvent=r,this.type="graphic-pointer-up"}}var k=i(96620),C=i(64515),S=i(70134);const O="indicator-symbols";let E=class extends r.Z.EventedAccessor{constructor(t){super(t),this._activeGraphic=null,this._dragEvent=null,this._hoverGraphic=null,this._indicators=[],this._initialDragGeometry=null,this._manipulators=[],this._layerViews=null,this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.highlightName=null,this.highlightsEnabled=!1,this.indicatorsEnabled=!1,this._defaultLayer=new c.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),this.layer=this._defaultLayer,this.view=null}initialize(){(0,f.p)(this.view,this.layer),this._highlightHelper=new g.Z({view:this.view}),this.refresh(),this.addHandles([(0,o.YP)((()=>this.graphics.length),(()=>this.refresh())),(0,o.gx)((()=>this.view?.ready),(()=>{this.addHandles([this.view.on("immediate-click",(t=>this._clickHandler(t)),k.f.TOOL),this.view.on("double-click",(t=>this._doubleClickHandler(t)),k.f.TOOL),this.view.on("pointer-down",(t=>this._pointerDownHandler(t)),k.f.TOOL),this.view.on("pointer-move",(t=>this._pointerMoveHandler(t)),k.f.TOOL),this.view.on("pointer-up",(t=>this._pointerUpHandler(t)),k.f.TOOL),this.view.on("drag",(t=>this._dragHandler(t)),k.f.TOOL),this.view.on("key-down",(t=>this._keyDownHandler(t)),k.f.TOOL)])}),{once:!0,initial:!0}),(0,o.YP)((()=>this.view),(t=>{this._highlightHelper.removeAll(),this._highlightHelper.view=t})),(0,o.YP)((()=>[this.highlightsEnabled,this.highlightName]),(()=>{this._highlightHelper?.removeAll(),this._setUpHighlights()}))])}destroy(){this._removeIndicators(),this.view.map?.remove(this.layer),this._defaultLayer.destroy(),this.reset(),this._manipulators.forEach((t=>t.destroy())),this._manipulators=null}get state(){const t=this.view.ready,e=this.graphics.length>0,i=this._activeGraphic;return t&&e?i?"moving":"active":t?"ready":"disabled"}refresh(){this.reset(),this._setup()}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null,this._highlightHelper.removeAll()}updateGeometry(t,e){const i=this.graphics[t];i&&(i.set("geometry",e),this._setUpIndicators())}_setup(){this._setUpHighlights(),this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}_clickHandler(t){const e=this._findTargetGraphic((0,S.vT)(t));if(e){const i=new y(e,this.graphics.indexOf(e),t.x,t.y,t);this.emit("graphic-click",i),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(i)}}_doubleClickHandler(t){const e=this._findTargetGraphic((0,S.vT)(t));if(e){const i=new _(e,this.graphics.indexOf(e),t.x,t.y,t);this.emit("graphic-double-click",i),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(i)}}_pointerDownHandler(t){const e=this._findTargetGraphic((0,S.vT)(t));if(e){this._activeGraphic=e;const{x:i,y:s}=t,r=new w(e,this.graphics.indexOf(e),i,s,t);this.emit("graphic-pointer-down",r),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(r)}else this._activeGraphic=null}_pointerUpHandler(t){if(this._activeGraphic){const{x:e,y:i}=t,s=this.graphics.indexOf(this._activeGraphic),r=new M(this._activeGraphic,s,e,i,t);this.emit("graphic-pointer-up",r),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(r)}}_pointerMoveHandler(t){if(this._dragEvent)return;const e=this._findTargetGraphic((0,S.vT)(t));if(e){const{x:i,y:s}=t;if(this._hoverGraphic){if(this._hoverGraphic===e)return;const r=this.graphics.indexOf(this._hoverGraphic),n=new G(this.graphics[r],r,i,s,t);this._hoverGraphic=null,this.emit("graphic-pointer-out",n),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(n)}const r=this.graphics.indexOf(e),n=new x(e,r,i,s,t);return this._hoverGraphic=e,this.emit("graphic-pointer-over",n),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(n))}if(this._hoverGraphic){const{x:e,y:i}=t,s=this.graphics.indexOf(this._hoverGraphic),r=new G(this.graphics[s],s,e,i,t);this._hoverGraphic=null,this.emit("graphic-pointer-out",r),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(r)}}_dragHandler(t){if("start"!==t.action&&!this._dragEvent||!this._activeGraphic?.geometry)return;"start"===t.action&&this._removeIndicators(),t.stopPropagation();const{action:e,x:i,y:s}=t,r=this.graphics.indexOf(this._activeGraphic),o=this._dragEvent?i-this._dragEvent.x:0,a=this._dragEvent?s-this._dragEvent.y:0,h=i-t.origin.x,c=s-t.origin.y,l="start"===e?this._activeGraphic.geometry:this._initialDragGeometry,p=(0,d.e7)(l,h,c,this.view);if(this._activeGraphic.geometry=p,this.enableMoveAllGraphics&&this.graphics.forEach((t=>{t!==this._activeGraphic&&(t.geometry=(0,d.e7)(t.geometry,o,a,this.view))})),this._dragEvent=t,"start"===e){this._initialDragGeometry=(0,n.d9)(l);const e=new v(this._activeGraphic,this.graphics,r,i,s,o,a,h,c,t);this.emit("graphic-move-start",e),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(e),e.defaultPrevented&&this._activeGraphic.set("geometry",l)}else if("update"===e){const e=new m(this._activeGraphic,this.graphics,r,i,s,o,a,h,c,t);this.emit("graphic-move",e),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(e),e.defaultPrevented&&(this._activeGraphic.geometry=l)}else{const e=new b(this._activeGraphic,this.graphics,r,i,s,o,a,h,c,t);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",e),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(e),e.defaultPrevented&&(this.graphics[r].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}_keyDownHandler(t){"a"!==t.key&&"d"!==t.key&&"n"!==t.key||"moving"!==this.state||t.stopPropagation()}_findTargetGraphic(t){const e=this.view.toMap(t),i=this.graphics;let s=null,r=Number.MAX_VALUE;this._syncLayerViews();const n=this._layerViews.flatMap((t=>"graphicsViews"in t?Array.from(t.graphicsViews(),(t=>t.hitTest(e))).flat():t.graphicsView.hitTest(e))).filter((t=>i.includes(t))).sort(((t,e)=>i.indexOf(t)-i.indexOf(e)));return n.length?n[0]:(this._manipulators.forEach((e=>{const i=e.intersectionDistance(t);null!=i&&i<r&&(r=i,s=e.graphic)})),s)}_syncLayerViews(){this._layerViews=[];const t=new Set;for(const e of this.graphics){const i=(0,f.j)(this.view,e.layer);i&&t.add(i)}this._layerViews=[...t]}_setUpManipulators(){const{graphics:t,view:e}=this;this._manipulators.forEach((t=>t.destroy())),this._manipulators=t.length?t.map((t=>new C.L({graphic:t,view:e}))):[]}_setUpHighlights(){this.highlightsEnabled&&this.graphics.length&&this._highlightHelper.add(this.graphics,this.highlightName)}_setUpIndicators(){if(this._removeIndicators(),this.indicatorsEnabled){for(const t of this.graphics){const e=t.clone();e.symbol=Z(t),this._indicators.push(e),this.addHandles((0,o.YP)((()=>t.symbol),(()=>this._setUpIndicators())),O)}this.layer.addMany(this._indicators)}}_removeIndicators(){this.removeHandles(O),this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach((t=>t.destroy())),this._indicators=[])}};function Z(t){if(null==t.symbol)return null;switch(t.symbol.type){case"cim":return new u.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:e,yoffset:i,height:s,width:r}=t.symbol,n=s===r?r:Math.max(s,r);return new u.Z({xoffset:e,yoffset:i,size:n,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:e,yoffset:i,size:s,style:r}=t.symbol;return new u.Z({xoffset:e,yoffset:i,style:"circle"===r?"circle":"square",size:s+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new l.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new p.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:e,yoffset:i}=t.symbol;return new u.Z({xoffset:e,yoffset:i,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}(0,s._)([(0,a.Cb)()],E.prototype,"_activeGraphic",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],E.prototype,"type",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"callbacks",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"enableMoveAllGraphics",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"graphics",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"highlightName",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"highlightsEnabled",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"indicatorsEnabled",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"_defaultLayer",void 0),(0,s._)([(0,a.Cb)()],E.prototype,"layer",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],E.prototype,"state",null),(0,s._)([(0,a.Cb)()],E.prototype,"view",void 0),E=(0,s._)([(0,h.j)("esri.views.draw.support.GraphicMover")],E)},91652:function(t,e,i){i.d(e,{Z:function(){return l}});var s=i(73440),r=i(70880),n=i(17155),o=(i(61432),i(96711),i(83850),i(48023)),a=i(77308),h=i(43295),c=i(27546);let l=class extends r.Z{constructor(t){super(t),this._layerViewCache=new Map,this.highlightName=h.b,this.view=null}add(t,e){const i=!t||Array.isArray(t)?t:[t];if(!i?.length)return;const s=e??this.highlightName;i.forEach((t=>this._highlight(t,s)))}getKeyForFeature(t){const e=t.getObjectId();return null!=e?`oid:${e}`:`uid:${t.uid}`}remove(t){const e=!t||Array.isArray(t)?t:[t];e?.length&&e.forEach((t=>t&&this._removeHighlight(this.getKeyForFeature(t))))}removeByKey(t){t?.forEach((t=>t&&this._removeHighlight(t)))}removeAll(){this.removeAllHandles()}update(t,e){this.remove(t),this.add(t,e)}_highlight(t,e){const i=t.layer??t.sourceLayer;if(!i)return;const s=this._layerViewCache.get(i);if(s)return void this.addHandles(s.highlight(t,{name:e}),this.getKeyForFeature(t));const r=(0,a.j)(this.view,i);(0,c.tl)(r)&&(this._layerViewCache.set(i,r),this.addHandles(r.highlight(t,{name:e}),this.getKeyForFeature(t)))}_removeHighlight(t){this.removeHandles(t)}};(0,s._)([(0,n.Cb)()],l.prototype,"_layerViewCache",void 0),(0,s._)([(0,n.Cb)()],l.prototype,"highlightName",void 0),(0,s._)([(0,n.Cb)()],l.prototype,"view",void 0),l=(0,s._)([(0,o.j)("esri.views.draw.support.HighlightHelper")],l)},89200:function(t,e,i){i.d(e,{Ru:function(){return l},bA:function(){return c},cM:function(){return p},e7:function(){return h}});var s=i(99574),r=i(47566),n=i(62951),o=i(28931);function a(t,e,i,s){if(null==s||t.hasZ||(s=void 0),"point"===t.type)return t.x+=e,t.y+=i,t.hasZ&&null!=s&&(t.z+=s),t;if("multipoint"===t.type){const r=t.points;for(let t=0;t<r.length;t++)r[t]=u(r[t],e,i,s);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=i,t.ymax+=i,null!=s&&(t.zmin??=0,t.zmin+=s,t.zmax??=0,t.zmax+=s),t;const r=(0,o.nA)(t),n="polyline"===t.type?t.paths:t.rings;for(let t=0;t<r.length;t++){const n=r[t];for(let t=0;t<n.length;t++)n[t]=u(n[t],e,i,s)}return"paths"in t?t.paths=n:t.rings=n,t}function h(t,e,i,s,r){const n=t.clone(),h=s.resolution;if("point"===n.type){if(r)a(n,e*h,-i*h);else{const t=s.state.transform,r=s.state.inverseTransform,o=t[0]*n.x+t[2]*n.y+t[4],a=t[1]*n.x+t[3]*n.y+t[5];n.x=r[0]*(o+e)+r[2]*(a+i)+r[4],n.y=r[1]*(o+e)+r[3]*(a+i)+r[5]}return n}if("multipoint"===n.type){if(r)a(n,e*h,-i*h);else{const t=n.points,r=s.state.transform,o=s.state.inverseTransform;for(let s=0;s<t.length;s++){const n=t[s],a=r[0]*n[0]+r[2]*n[1]+r[4],h=r[1]*n[0]+r[3]*n[1]+r[5],c=o[0]*(a+e)+o[2]*(h+i)+o[4],l=o[1]*(a+e)+o[3]*(h+i)+o[5];t[s]=d(n,c,l,void 0)}}return n}if("extent"===n.type){if(r)a(n,e*h,-i*h);else{const t=s.state.transform,r=s.state.inverseTransform,o=t[0]*n.xmin+t[2]*n.ymin+t[4],a=t[1]*n.xmin+t[3]*n.ymin+t[5],h=t[0]*n.xmax+t[2]*n.ymax+t[4],c=t[1]*n.xmax+t[3]*n.ymax+t[5];n.xmin=r[0]*(o+e)+r[2]*(a+i)+r[4],n.ymin=r[1]*(o+e)+r[3]*(a+i)+r[5],n.xmax=r[0]*(h+e)+r[2]*(c+i)+r[4],n.ymax=r[1]*(h+e)+r[3]*(c+i)+r[5]}return n}if(r)a(n,e*h,-i*h);else{const t=(0,o.nA)(n),r="polyline"===n.type?n.paths:n.rings,a=s.state.transform,h=s.state.inverseTransform;for(let s=0;s<t.length;s++){const r=t[s];for(let t=0;t<r.length;t++){const s=r[t],n=a[0]*s[0]+a[2]*s[1]+a[4],o=a[1]*s[0]+a[3]*s[1]+a[5],c=h[0]*(n+e)+h[2]*(o+i)+h[4],l=h[1]*(n+e)+h[3]*(o+i)+h[5];r[t]=d(s,c,l,void 0)}}"paths"in n?n.paths=r:n.rings=r}return n}function c(t,e,i,s){if("point"===t.type){const{x:r,y:n}=t,o=s?s[0]:r,a=s?s[1]:n,h=t.clone(),c=(r-o)*e+o,l=(n-a)*i+a;return h.x=c,h.y=l,h}if("multipoint"===t.type){const a=(0,o.nA)(t),h=(0,r.Ue)(),[c,l,p,u]=(0,n.C6)(h,[a]),g=s?s[0]:(c+p)/2,f=s?s[1]:(u+l)/2,y=t.clone(),_=y.points;for(let t=0;t<_.length;t++){const s=_[t],[r,n]=s,o=(r-g)*e+g,a=(n-f)*i+f;_[t]=d(s,o,a,void 0)}return y}if("extent"===t.type){const{xmin:r,xmax:n,ymin:o,ymax:a}=t,h=s?s[0]:(r+n)/2,c=s?s[1]:(a+o)/2,l=t.clone();if(l.xmin=(r-h)*e+h,l.ymax=(a-c)*i+c,l.xmax=(n-h)*e+h,l.ymin=(o-c)*i+c,l.xmin>l.xmax){const t=l.xmin,e=l.xmax;l.xmin=e,l.xmax=t}if(l.ymin>l.ymax){const t=l.ymin,e=l.ymax;l.ymin=e,l.ymax=t}return l}const a=(0,o.nA)(t),h=(0,r.Ue)(),[c,l,p,u]=(0,n.C6)(h,a),g=s?s[0]:(c+p)/2,f=s?s[1]:(u+l)/2,y=t.clone(),_="polyline"===y.type?y.paths:y.rings;for(let t=0;t<a.length;t++){const s=a[t];for(let r=0;r<s.length;r++){const n=s[r],[o,a]=n,h=(o-g)*e+g,c=(a-f)*i+f;_[t][r]=d(n,h,c,void 0)}}return"paths"in y?y.paths=_:y.rings=_,y}function l(t,e,i,s,r,n){const o=Math.sqrt((i-t)*(i-t)+(s-e)*(s-e));return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))/o}function p(t,e,i,r=!1){const n=Math.atan2(e.y-i.y,e.x-i.x)-Math.atan2(t.y-i.y,t.x-i.x),o=Math.atan2(Math.sin(n),Math.cos(n));return r?o:(0,s.BV)(o)}function u(t,e,i,s){return d(t,t[0]+e,t[1]+i,null!=t[2]&&null!=s?t[2]+s:void 0)}function d(t,e,i,s){const r=[e,i];return t.length>2&&r.push(null!=s?s:t[2]),t.length>3&&r.push(t[3]),r}},52421:function(t,e,i){i.d(e,{X:function(){return p}});var s=i(53147);const r={main:new s.Z([255,127,0]),selected:new s.Z([255,255,255]),outline:new s.Z([0,0,0,.5]),selectedOutline:new s.Z([255,255,255]),hoverOutline:new s.Z([255,255,255]),secondary:new s.Z([255,255,255]),secondaryOutline:new s.Z([100,100,100]),transparent:new s.Z([0,0,0,0])};function n(t,e){Object.assign(t,e)}class o{constructor(t){this.size=8,this.hoverSize=10,this.color=r.main,this.hoverColor=r.main,this.outlineColor=r.outline,this.hoverOutlineColor=r.hoverOutline,n(this,t)}}class a{constructor(t){this.color=r.secondary,this.hoverColor=r.main,n(this,t)}}class h{constructor(t){this.color=r.transparent,this.hoverColor=r.transparent,this.outlineColor=r.main,this.hoverOutlineColor=r.main,this.stagedColor=r.transparent,this.stagedOutlineColor=r.secondary,n(this,t)}}class c{constructor(t){this.vertex=new o,this.midpoint=new o({color:r.secondary,outlineColor:r.secondaryOutline,size:6}),this.selected=new o({color:r.selected,hoverColor:r.selected,hoverOutlineColor:r.hoverOutline}),n(this,t)}}class l{constructor(t){this.center=new o({color:r.secondaryOutline}),this.fill=new h,this.line=new a,this.vertex=new o({color:r.selected,outlineColor:r.main,hoverColor:r.selected,hoverOutlineColor:r.secondaryOutline}),n(this,t)}}const p=new class{constructor(t){this.reshapeGraphics=new c,this.transformGraphics=new l,n(this,t)}}},59037:function(t,e,i){i.d(e,{c:function(){return a}});var s=i(73440),r=i(17155),n=(i(61432),i(96711),i(83850),i(48023)),o=i(40298);let a=class extends o.h{constructor(t){super(t),this.type="extent-rotate",this.angle=0}};(0,s._)([(0,r.Cb)()],a.prototype,"type",void 0),(0,s._)([(0,r.Cb)()],a.prototype,"angle",void 0),a=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.infos.ExtentRotateTooltipInfo")],a)},8449:function(t,e,i){i.d(e,{p:function(){return h}});var s=i(73440),r=i(1925),n=i(17155),o=(i(61432),i(96711),i(83850),i(48023)),a=i(40298);let h=class extends a.h{constructor(t){super(t),this.type="extent-scale",this.xScale=0,this.yScale=0,this.xSize=r.yP,this.ySize=r.yP}};(0,s._)([(0,n.Cb)()],h.prototype,"type",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"xScale",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"yScale",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"xSize",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"ySize",void 0),h=(0,s._)([(0,o.j)("esri.views.interactive.tooltip.infos.ExtentScaleTooltipInfo")],h)},66972:function(t,e,i){i.d(e,{E:function(){return h}});var s=i(73440),r=i(1925),n=i(17155),o=(i(61432),i(96711),i(83850),i(48023)),a=i(40298);let h=class extends a.h{constructor(t){super(t),this.type="translate",this.distance=r.yP}clear(){this.distance=r.yP}};(0,s._)([(0,n.Cb)()],h.prototype,"type",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"distance",void 0),h=(0,s._)([(0,o.j)("esri.views.interactive.tooltip.infos.TranslateTooltipInfo")],h)},4939:function(t,e,i){i.d(e,{D:function(){return r}});var s=i(1925);function r({topLeft:t,topRight:e,bottomRight:i,bottomLeft:r,spatialReference:n,automaticLengthMeasurementUtils:{autoDistance2D:o}}){const a=(0,s.Fp)(o(r,i,n),o(t,e,n));if(null==a)return null;const h=(0,s.Fp)(o(i,e,n),o(r,t,n));return null==h?null:{xSize:a,ySize:h}}}}]);