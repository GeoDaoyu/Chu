"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[57026,28357],{45415:function(t,e,i){function n(t,e,i,n,s){r(t,e,i||0,n||t.length-1,s||o)}function r(t,e,i,n,o){for(;n>i;){if(n-i>600){var a=n-i+1,l=e-i+1,c=Math.log(a),h=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*h*(a-h)/a)*(l-a/2<0?-1:1);r(t,e,Math.max(i,Math.floor(e-l*h/a+u)),Math.min(n,Math.floor(e+(a-l)*h/a+u)),o)}var p=t[e],d=i,f=n;for(s(t,i,e),o(t[n],p)>0&&s(t,i,n);d<f;){for(s(t,d,f),d++,f--;o(t[d],p)<0;)d++;for(;o(t[f],p)>0;)f--}0===o(t[i],p)?s(t,i,f):s(t,++f,n),f<=e&&(i=f+1),e<=f&&(n=f-1)}}function s(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function o(t,e){return t<e?-1:t>e?1:0}i.d(e,{q:function(){return n}})},58426:function(t,e,i){i.d(e,{$c:function(){return d},Hg:function(){return f},jW:function(){return p},xb:function(){return y}});var n=i(70880),r=i(43254),s=i(22018);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(t){return t instanceof n.Z}function l(t){return t instanceof r.Z?Object.keys(t.items):a(t)?(0,s.vw)(t).keys():t?Object.keys(t):[]}function c(t,e){return t instanceof r.Z?t.items[e]:t[e]}function h(t){return t?t.declaredClass:null}function u(t,e){const i=t.diff;if(i&&"function"==typeof i)return i(t,e);const n=l(t),r=l(e);if(0===n.length&&0===r.length)return;if(!n.length||!r.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,e))return{type:"complete",oldValue:t,newValue:e};const s=r.filter((t=>!n.includes(t))),p=n.filter((t=>!r.includes(t))),d=n.filter((i=>r.includes(i)&&c(t,i)!==c(e,i))).concat(s,p).sort(),f=h(t);if(f&&o.has(f)&&d.length)return{type:"complete",oldValue:t,newValue:e};let y;const g=a(t)&&a(e);for(const n of d){const r=c(t,n),s=c(e,n);let o;if((g||"function"!=typeof r&&"function"!=typeof s)&&r!==s&&(null!=r||null!=s)){if(i&&i[n]&&"function"==typeof i[n])o=i[n]?.(r,s);else if(r instanceof Date&&s instanceof Date){if(r.getTime()===s.getTime())continue;o={type:"complete",oldValue:r,newValue:s}}else o="object"==typeof r&&"object"==typeof s&&h(r)===h(s)?u(r,s):{type:"complete",oldValue:r,newValue:s};null!=o&&(null!=y?y.diff[n]=o:y={type:"partial",diff:{[n]:o}})}}return y}function p(t,e){return function(t,e){if(null==t)return!1;const i=e.split(".");let n=t;for(const t of i){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const e=n.diff[t];if(!e)return!1;n=e}}return!0}(t,e)}function d(t,e){if(!t)return!1;if("partial"===t.type){const i=Object.keys(t.diff);return 1===i.length&&i[0]===e}return!1}function f(t,e){if("function"!=typeof t&&"function"!=typeof e&&(null!=t||null!=e))return null==t||null==e||"object"==typeof t&&"object"==typeof e&&h(t)!==h(e)?{type:"complete",oldValue:t,newValue:e}:u(t,e)}function y(t){if(null==t)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const t of e.added)if(!y(t))return!1;for(const t of e.removed)if(!y(t))return!1;for(const t of e.changed)if(!y(t))return!1;return!0}case"partial":for(const e in t.diff)if(!y(t.diff[e]))return!1;return!0}}},96946:function(t,e,i){i.d(e,{Q:function(){return a},b:function(){return E}});var n=i(3480),r=i(79487),s=(i(61432),i(63974)),o=i(45415);class a{constructor(t=9,e){this._compareMinX=p,this._compareMinY=d,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this._toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),S.prune(),C.prune(),v.prune(),w.prune()}all(t){l(this._data,t)}search(t,e){let i=this._data;const n=this._toBBox;if(b(t,i))for(S.clear();i;){for(let r=0,s=i.children.length;r<s;r++){const s=i.children[r],o=i.leaf?n(s):s;b(t,o)&&(i.leaf?e(s):m(t,o)?l(s,e):S.push(s))}i=S.pop()}}collides(t){let e=this._data;const i=this._toBBox;if(!b(t,e))return!1;for(S.clear();e;){for(let n=0,r=e.children.length;n<r;n++){const r=e.children[n],s=e.leaf?i(r):r;if(b(t,s)){if(e.leaf||m(t,s))return!0;S.push(r)}}e=S.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this._data.children.length)if(this._data.height===e.height)this._splitRoot(this._data,e);else{if(this._data.height<e.height){const t=this._data;this._data=e,e=t}this._insert(e,this._data.height-e.height-1,!0)}else this._data=e;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new G([]),this}remove(t){if(!t)return this;let e,i=this._data,s=null,o=0,a=!1;const l=this._toBBox(t);for(v.clear(),w.clear();i||v.length>0;){if(i||(i=v.pop(),s=v.data[v.length-1],o=w.pop()??0,a=!0),i.leaf&&(e=(0,n.cq)(i.children,(0,r.CY)(t),i.children.length,i.indexHint),-1!==e))return i.children.splice(e,1),v.push(i),this._condense(v),this;a||i.leaf||!m(i,l)?s?(o++,i=s.children[o],a=!1):i=null:(v.push(i),w.push(o),o=0,s=i,i=i.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_build(t,e,i,n){const r=i-e+1;let s=this._maxEntries;if(r<=s){const n=new G(t.slice(e,i+1));return c(n,this._toBBox),n}n||(n=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/s**(n-1)));const o=new O([]);o.height=n;const a=Math.ceil(r/s),l=a*Math.ceil(Math.sqrt(s));x(t,e,i,l,this._compareMinX);for(let r=e;r<=i;r+=l){const e=Math.min(r+l-1,i);x(t,r,e,a,this._compareMinY);for(let i=r;i<=e;i+=a){const r=Math.min(i+a-1,e);o.children.push(this._build(t,i,r,n-1))}}return c(o,this._toBBox),o}_insert(t,e,i){const n=this._toBBox,r=i?t:n(t);v.clear();const s=function(t,e,i,n){for(;n.push(e),!0!==e.leaf&&n.length-1!==i;){let i,n=1/0,r=1/0;for(let s=0,o=e.children.length;s<o;s++){const o=e.children[s],a=f(o),l=g(t,o)-a;l<r?(r=l,n=a<n?a:n,i=o):l===r&&a<n&&(n=a,i=o)}e=i||e.children[0]}return e}(r,this._data,e,v);for(s.children.push(t),u(s,r);e>=0&&v.data[e].children.length>this._maxEntries;)this._split(v,e),e--;!function(t,e,i){for(let n=i;n>=0;n--)u(e.data[n],t)}(r,v,e)}_split(t,e){const i=t.data[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);const s=this._chooseSplitIndex(i,r,n);if(!s)return;const o=i.children.splice(s,i.children.length-s),a=i.leaf?new G(o):new O(o);a.height=i.height,c(i,this._toBBox),c(a,this._toBBox),e?t.data[e-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,e){this._data=new O([t,e]),this._data.height=t.height+1,c(this._data,this._toBBox)}_chooseSplitIndex(t,e,i){let n,r,s;n=r=1/0;for(let o=e;o<=i-e;o++){const e=h(t,0,o,this._toBBox),a=h(t,o,i,this._toBBox),l=_(e,a),c=f(e)+f(a);l<n?(n=l,s=o,r=c<r?c:r):l===n&&c<r&&(r=c,s=o)}return s}_chooseSplitAxis(t,e,i){const n=t.leaf?this._compareMinX:p,r=t.leaf?this._compareMinY:d;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)}_allDistMargin(t,e,i,n){t.children.sort(n);const r=this._toBBox,s=h(t,0,e,r),o=h(t,i-e,i,r);let a=y(s)+y(o);for(let n=e;n<i-e;n++){const e=t.children[n];u(s,t.leaf?r(e):e),a+=y(s)}for(let n=i-e-1;n>=e;n--){const e=t.children[n];u(o,t.leaf?r(e):e),a+=y(o)}return a}_condense(t){for(let e=t.length-1;e>=0;e--){const i=t.data[e];if(0===i.children.length)if(e>0){const r=t.data[e-1],s=r.children;s.splice((0,n.cq)(s,i,s.length,r.indexHint),1)}else this.clear();else c(i,this._toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this._compareMinX=new Function("a","b",e.join(t[0])),this._compareMinY=new Function("a","b",e.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function l(t,e){let i=t;for(C.clear();i;){if(!0===i.leaf)for(const t of i.children)e((0,r.CY)(t));else C.pushArray(i.children);i=C.pop()??null}}function c(t,e){h(t,0,t.children.length,e,t)}function h(t,e,i,n,r){r||(r=new G([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s,o=e;o<i;o++)s=t.children[o],u(r,t.leaf?n(s):s);return r}function u(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function p(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function y(t){return t.maxX-t.minX+(t.maxY-t.minY)}function g(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function _(t,e){const i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,s-n)}function m(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function b(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function x(t,e,i,n,r){const s=[e,i];for(;s.length;){const e=s.pop(),i=s.pop();if(e-i<=n)continue;const a=i+Math.ceil((e-i)/n/2)*n;(0,o.q)(t,a,i,e,r),s.push(i,a,a,e)}}const S=new s.Z,C=new s.Z,v=new s.Z,w=new s.Z({deallocator:void 0});class E{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class I extends E{constructor(){super(...arguments),this.height=1,this.indexHint=new n.SO}}class G extends I{constructor(t){super(),this.children=t,this.leaf=!0}}class O extends I{constructor(t){super(),this.children=t,this.leaf=!1}}},92680:function(t,e,i){i.d(e,{e:function(){return o},s:function(){return a}});var n=i(3480),r=(i(61432),i(88194)),s=i(87644);function o(t){return null==t||"simple"===t.type||"unique-value"===t.type||"class-breaks"===t.type||"dictionary"===t.type||"heatmap"===t.type}function a(t,e){if(null==t)return null;if(!o(t))return new r.Z("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type||t.declaredClass}'`,{renderer:t});switch(t.type){case"simple":return function(t,e){const i={...s.K,...e,cimFallbackEnabled:!0};return l(t,(0,s.q)(t.symbol,i).error)}(t,e);case"unique-value":return function(t,e){const i={...s.K,...e,cimFallbackEnabled:!0},r=t.uniqueValueInfos?.map((t=>(0,s.q)(t.symbol,i).error)).filter(n.pC),o=(0,s.q)(t.defaultSymbol,i);return o.error&&r?.unshift(o.error),l(t,r)}(t,e);case"class-breaks":return function(t,e){const i={...s.K,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map((t=>(0,s.q)(t.symbol,i).error)).filter(n.pC),o=(0,s.q)(t.defaultSymbol,i);return o.error&&r.unshift(o.error),l(t,r)}(t,e);case"dictionary":case"heatmap":return null}return null}function l(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map((t=>t.details.symbol.type||t.details.symbol.declaredClass)).filter((t=>!!t));i.sort();const n=new Array;return i.forEach(((t,e)=>{0!==e&&t===i[e-1]||n.push(t)})),new r.Z("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${n.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}},56216:function(t,e,i){i.d(e,{Kb:function(){return o},o2:function(){return c},sV:function(){return l},xn:function(){return a}});var n=i(53147),r=i(47747),s=i(71618);function o(t,e){const i=function(t,e){if(null!=t.symbol)return t.symbol;const i=e?.renderer;return null!=i&&"dot-density"!==i.type?i.getSymbol(t,e):null}(t,e);if(null==i)return null;const n=e?.renderer,o=new r.E(n,i);if(null==n||!("visualVariables"in n)||!n.visualVariables)return o;const a=(0,s.getVisualVariableValues)(n,t,e)??[],l=["proportional","proportional","proportional"];for(const{variable:t,value:e}of a)if(null!=e||"size"===t.type&&t.useSymbolValue)switch(t.type){case"color":o.color=e?.toRgba();break;case"size":if("outline"===t.target)o.outlineSize=e;else{const i=t.axis,n=t.useSymbolValue?"symbol-value":e??"proportional";switch(i){case"width":l[0]=n;break;case"depth":l[1]=n;break;case"height":l[2]=n;break;case"width-and-depth":l[0]=l[1]=n;break;default:l[0]=l[1]=l[2]=n}}break;case"opacity":o.opacity=e;break;case"rotation":switch(t.axis){case"tilt":o.tilt=e;break;case"roll":o.roll=e;break;default:o.heading=e}}return"proportional"===l[0]&&"proportional"===l[1]&&"proportional"===l[2]||(o.size=l),o}async function a(t,e){const i=await async function(t,e){return null!=t.symbol?t.symbol:e?.renderer?.getSymbolAsync(t,e)??null}(t,e);if(!i)return null;const o=e?.renderer,a=new r.E(o,i);if(!o||!("visualVariables"in o)||!o.visualVariables)return a;const l=(0,s.getVisualVariableValues)(o,t,e)??[],c=["proportional","proportional","proportional"];for(const{variable:t,value:e}of l)if("color"===t.type)a.color=n.Z.toUnitRGBA(e);else if("size"===t.type)if("outline"===t.target)a.outlineSize=e;else{const i=t.axis,n=t.useSymbolValue?"symbol-value":e;"width"===i?c[0]=n:"depth"===i?c[1]=n:"height"===i?c[2]=n:c[0]=c[1]="width-and-depth"===i?n:c[2]=n}else"opacity"===t.type?a.opacity=e:"rotation"===t.type&&"tilt"===t.axis?a.tilt=e:"rotation"===t.type&&"roll"===t.axis?a.roll=e:"rotation"===t.type&&(a.heading=e);return(isFinite(c[0])||isFinite(c[1])||isFinite(c[2]))&&(a.size=c),a}function l(t,e=0){const i=t[e];return"number"==typeof i&&isFinite(i)?i:null}function c(t){for(let e=0;e<3;e++){const i=t[e];if("number"==typeof i)return isFinite(i)?i:0}return 0}},9350:function(t,e,i){i.d(e,{CJ:function(){return c},Rz:function(){return u},js:function(){return p},xA:function(){return l},z3:function(){return h}});i(61432);var n=i(89636),r=i(38096),s=i(19886),o=i(45433),a=i(54914);const l=s.Z.fromJSON(a.I4),c=r.Z.fromJSON(a.ET),h=n.Z.fromJSON(a.lF),u=o.Z.fromJSON(a.qP);function p(t){if(null==t)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return c;case"polygon":case"extent":return h}return null}s.Z.fromJSON(a.eG),r.Z.fromJSON(a.wW),n.Z.fromJSON(a.lj)},54914:function(t,e,i){i.d(e,{ET:function(){return o},I4:function(){return s},SQ:function(){return n},X1:function(){return r},eG:function(){return c},lF:function(){return a},lj:function(){return u},qP:function(){return l},wW:function(){return h}});const n=[252,146,31,255],r=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},h={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},17617:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var n=i(73440),r=i(70880),s=i(15894),o=i(61100),a=i(17155),l=(i(61432),i(96711),i(83850),i(48023)),c=i(98185),h=i(43295);let u=class extends(s.Z.IdentifiableMixin(r.Z)){constructor(t){super(t),this.drapeSourcePriorityOffset=0,this.processor=null,this.slicePlaneEnabled=!1,this.layer=new p,this.suspended=!1}initialize(){this._set("processor",new c.D({owner:this,drapeSourcePriorityOffset:this.drapeSourcePriorityOffset}))}destroy(){this._set("processor",(0,o.SC)(this.processor))}get loadedGraphics(){return this.getGraphics()}get updating(){return!!this.processor?.updating}get symbolUpdateType(){return this.processor.graphicsCore.symbolUpdateType}getHit(t){return this.processor.getHit(t)}whenGraphicBounds(t,e){return this.processor.whenGraphicBounds(t,e)}graphicChanged(t){this.processor.graphicsCore.graphicUpdateHandler(t)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}async queryGraphics(){return this.loadedGraphics}highlight(t,e){return this.processor.highlight(t,e?.name??h.b)}maskOccludee(t){return this.processor.maskOccludee(t)}get test(){return{graphics3DProcessor:this.processor}}};(0,n._)([(0,a.Cb)({constructOnly:!0})],u.prototype,"view",void 0),(0,n._)([(0,a.Cb)({constructOnly:!0})],u.prototype,"getGraphics",void 0),(0,n._)([(0,a.Cb)()],u.prototype,"loadedGraphics",null),(0,n._)([(0,a.Cb)()],u.prototype,"drapeSourcePriorityOffset",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],u.prototype,"updating",null),(0,n._)([(0,a.Cb)()],u.prototype,"processor",void 0),(0,n._)([(0,a.Cb)({type:Boolean})],u.prototype,"slicePlaneEnabled",void 0),(0,n._)([(0,a.Cb)()],u.prototype,"layer",void 0),(0,n._)([(0,a.Cb)()],u.prototype,"suspended",void 0),u=(0,n._)([(0,l.j)("esri.views.3d.layers.GraphicsView3D")],u);class p extends s.Z{constructor(){super(),this.type="graphics-view-3d-dummy",this.id=this.uid}}const d=u},5473:function(t,e,i){i.d(e,{_:function(){return p}});var n=i(73440),r=i(70880),s=i(87833),o=i(90403),a=i(17155),l=(i(61432),i(96711),i(83850),i(48023)),c=i(70395),h=i(94125),u=i(50399);let p=class extends r.Z{constructor(t){super(t),this._dirtyExtents=new c.D,this._globalDirty=!1,this._averageExtentUpdateSize=0,this._dirtyGraphicsSet=new Set,this._updateElevation=!1,this.graphicsCoreOwner=null,this.graphicsCore=null,this.events=new s.Z}initialize(){const t=this.elevationProvider,e=this.graphicsCoreOwner.view.resourceController.scheduler;this._task=e.registerTask(d(this.graphicsCore.layer.elevationInfo?.mode),this),this.addHandles([t.on("elevation-change",(t=>this._elevationChanged(t))),(0,o.YP)((()=>this.graphicsCoreOwner.suspended),(()=>this._suspendedChange())),this._task,(0,o.YP)((()=>d(this.graphicsCore.layer.elevationInfo?.mode)),(t=>this._task.priority=t))])}destroy(){this._dirtyGraphicsSet.clear(),this.graphicsCoreOwner=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null,this.elevationProvider=null}clear(){this._dirtyGraphicsSet.clear(),this.notifyChange("updating")}_suspendedChange(){!0===this.graphicsCoreOwner.suspended?this._updateElevation=!1:!1===this.graphicsCoreOwner.suspended&&this._updateElevation&&(this._globalDirty=!0,this.notifyChange("updating"))}elevationInfoChange(){this._globalDirty=!0,this.notifyChange("updating")}get updating(){return this.running}get running(){return this._dirtyGraphicsSet.size>0||this._dirtyExtents&&!this._dirtyExtents.empty||this._globalDirty}get updatingRemaining(){return this._dirtyGraphicsSet.size+this._dirtyExtents.size*this._averageExtentUpdateSize}runTask(t){for(this._globalDirty&&(this._markAllGraphicsElevationDirty(),this._globalDirty=!1,t.madeProgress()),t.run((()=>this._dirtyExtents.merge(t)));this.running&&!t.done;)this._updateDirtyGraphics(t),this._updateDirtyExtents(t);this.notifyChange("updating")}_updateDirtyGraphics(t){const e=this.graphicsCoreOwner.view.renderCoordsHelper,i=this.graphicsCore.effectiveUpdatePolicy===h.j.ASYNC;for(const n of this._dirtyGraphicsSet.keys()){const r=this.graphicsCore.getGraphics3DGraphicById(n);if(this._dirtyGraphicsSet.delete(n),null!=r&&(r.alignWithElevation(this.elevationProvider,e,i),this.graphicsCore.deconflictor?.setDirty(),t.madeProgress()),t.done)return}}_updateDirtyExtents(t){for(;!this._dirtyExtents.empty&&!t.done;){const e=this._dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit("invalidate-elevation",{extent:e,spatialReference:i});const n=this._dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(e,i,(t=>{const e=this.graphicsCore.getGraphics3DGraphicById(t);null!=e&&e.needsElevationUpdates()&&this._dirtyGraphicsSet.add(t)})),this._averageExtentUpdateSize=.1*(this._dirtyGraphicsSet.size-n)+.9*this._averageExtentUpdateSize,t.madeProgress()}}_markAllGraphicsElevationDirty(){this._dirtyExtents.clear(),this._dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((t,e)=>this._dirtyGraphicsSet.add(e)))}_elevationChanged(t){if("scene"===t.context&&(!this.graphicsCore.layer.elevationInfo||"relative-to-scene"!==this.graphicsCore.layer.elevationInfo.mode))return;const e=t.extent;if(this.graphicsCoreOwner.suspended){if(!this._updateElevation){const t=this.graphicsCore.computedExtent;t&&e[2]>t.xmin&&e[0]<t.xmax&&e[3]>t.ymin&&e[1]<t.ymax&&(this._updateElevation=!0)}this.events.emit("invalidate-elevation",t)}else e[0]===-1/0?this._globalDirty=!0:this._dirtyExtents.add(e),this.notifyChange("updating")}};function d(t){return null==t?u.T8.ELEVATION_ALIGNMENT:"relative-to-scene"===t?u.T8.ELEVATION_ALIGNMENT_SCENE:u.T8.ELEVATION_ALIGNMENT}(0,n._)([(0,a.Cb)()],p.prototype,"graphicsCoreOwner",void 0),(0,n._)([(0,a.Cb)()],p.prototype,"graphicsCore",void 0),(0,n._)([(0,a.Cb)()],p.prototype,"queryGraphicUIDsInExtent",void 0),(0,n._)([(0,a.Cb)()],p.prototype,"elevationProvider",void 0),(0,n._)([(0,a.Cb)({readOnly:!0})],p.prototype,"updating",null),(0,n._)([(0,a.Cb)({readOnly:!0})],p.prototype,"updatingRemaining",null),p=(0,n._)([(0,l.j)("esri.views.3d.layers.graphics.Graphics3DElevationAlignment")],p)},18234:function(t,e,i){i.d(e,{L:function(){return k}});var n=i(73440),r=i(70880),s=i(90403),o=i(17155),a=(i(61432),i(96711),i(83850),i(48023)),l=i(47925),c=i(79487),h=i(99574),u=i(31865),p=i(10934),d=i(24910),f=i(82846),y=i(74238),g=i(774),_=i(2051),m=i(16447),b=i(47566),x=i(33869),S=i(88970),C=i(77773),v=i(12659),w=i(56172),E=i(316);const I=.5*Math.PI,G=I/Math.PI*180;class O{constructor(t){this._extent=new Array(4),this._planes=new Array(6),this._maxSpan=0,this._center={origin:(0,f.Ue)(),direction:(0,f.Ue)()},this._renderCoordsHelper=t.renderCoordsHelper;for(let t=0;t<4;t++)this._extent[t]={origin:(0,f.Ue)(),direction:(0,f.Ue)(),cap:{next:null,direction:(0,f.Ue)()}},this._planes[t]=(0,C.Ue)();this._planes[x.Nu.NEAR]=(0,C.Ue)(),this._planes[x.Nu.FAR]=(0,C.Ue)(),this._planesWithoutFar=this._planes.slice(0,5)}update(t,e,i,n=!0){const r=this._extent;this._toRenderBoundingExtent(t,e,i),(0,d.f)(this._center.origin,r[0].origin,r[2].origin),(0,d.g)(this._center.origin,this._center.origin,.5),this._renderCoordsHelper.worldUpAtPosition(this._center.origin,this._center.direction),n||(0,d.g)(this._center.direction,this._center.direction,-1);for(let t=0;t<4;t++){const e=r[t];this._renderCoordsHelper.worldUpAtPosition(e.origin,e.direction);const i=r[3===t?0:t+1];e.cap.next=i.origin,(0,d.E)(e.cap.direction,e.origin,i.origin),(0,C.my)(e.direction,e.cap.direction,e.origin,this._planes[t]),n||(0,d.g)(e.direction,e.direction,-1)}(0,C.my)(r[0].cap.direction,r[1].cap.direction,r[0].origin,this._planes[x.Nu.NEAR]),n?(0,C.tk)(this._planes[x.Nu.NEAR],this._planes[x.Nu.FAR]):((0,C.JG)(this._planes[x.Nu.FAR],this._planes[x.Nu.NEAR]),(0,C.tk)(this._planes[x.Nu.NEAR],this._planes[x.Nu.NEAR])),this._maxSpan=Math.max(Math.abs(t[0]-t[2]),Math.abs(t[1]-t[3])),this._maxSpanSpatialReference=e,this._minGlobalAltitude=.9*(0,l.Iu)(this._maxSpanSpatialReference).radius}isVisibleInFrustum(t,e,i=!1){if(null==t)return!1;if(this._renderCoordsHelper.viewingMode===w.JY.Global){const i=this._maxSpanSpatialReference.isGeographic?G:I*e;if(this._maxSpan>i)return!0;if(null!=t.altitude&&t.altitude>=this._minGlobalAltitude)return this._isVisibleInFrustumGlobal(t)}if(0===this._maxSpan){const e=this._extent[0];return!(i||!t.intersectsRay((0,v.re)(e.origin,e.direction)))}for(let e=0;e<this._extent.length;e++){const n=this._extent[e];if(!i&&t.intersectsRay((0,v.re)(n.origin,n.direction)))return!0;if(t.intersectsLineSegment((0,S.zk)(n.origin,n.cap.next,A),n.cap.direction))return!0}const n=i?this._planes:this._planesWithoutFar;for(let e=0;e<t.lines.length;e++){const i=t.lines[e];if((0,E.kD)(n,i.origin,i.endpoint,i.direction))return!0}return!1}_toRenderBoundingExtentGlobal(t,e,i){(0,b.be)(t,B),B[2]=i,(0,y.B)(e,B,M,this._renderCoordsHelper.spatialReference),(0,u.U_)(j,M),(0,m.cS)(D);for(const{x0:n,x1:r,y0:s,y1:o}of V)for(let a=0;a<5;a++){const l=a/4;B[0]=(0,h.t7)(t[n],t[r],l),B[1]=(0,h.t7)(t[s],t[o],l),B[2]=i,(0,_.S)(B,e,B,this._renderCoordsHelper.spatialReference),(0,d.t)(B,B,j),(0,m.pp)(D,B)}(0,d.i)(this._extent[0].origin,D[0],D[1],D[2]),(0,d.i)(this._extent[1].origin,D[3],D[1],D[2]),(0,d.i)(this._extent[2].origin,D[3],D[4],D[2]),(0,d.i)(this._extent[3].origin,D[0],D[4],D[2]);for(let t=0;t<4;++t)(0,d.t)(this._extent[t].origin,this._extent[t].origin,M)}_toRenderBoundingExtentLocal(t,e,i){(0,g.d)(t,e,P,this._renderCoordsHelper.spatialReference),(0,d.i)(this._extent[0].origin,P[0],P[1],i),(0,d.i)(this._extent[1].origin,P[2],P[1],i),(0,d.i)(this._extent[2].origin,P[2],P[3],i),(0,d.i)(this._extent[3].origin,P[0],P[3],i)}_toRenderBoundingExtent(t,e,i){switch(this._renderCoordsHelper.viewingMode){case w.JY.Global:this._toRenderBoundingExtentGlobal(t,e,i);break;case w.JY.Local:this._toRenderBoundingExtentLocal(t,e,i);break;default:(0,c.Bg)(this._renderCoordsHelper.viewingMode)}}_isVisibleInFrustumGlobal(t){if((0,C.jH)(t.planes[x.Nu.NEAR],this._center.origin)<0&&(0,d.e)(this._center.direction,t.direction)<0)return!0;for(let e=0;e<4;e++){const i=this._extent[e];if((0,C.jH)(t.planes[x.Nu.NEAR],i.origin)<0&&(0,d.e)(i.direction,t.direction)<0)return!0}return!1}}const V=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],B=(0,f.Ue)(),M=(0,p.Ue)(),j=(0,p.Ue)(),D=(0,m.Ue)(),P=(0,b.Ue)(),A=(0,S.Ue)();var R=i(50399),Y=i(78891);let k=class extends r.Z{constructor(t){super(t),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:t}=this;this._extentIntersection=new O({renderCoordsHelper:t.view.renderCoordsHelper});const e=t.view,i=e.basemapTerrain,n=e.resourceController.scheduler;this.addHandles([e.on("resize",(()=>this._viewChange())),(0,s.YP)((()=>e.state.camera),(()=>this._viewChange()),s.Z_),n.registerTask(R.T8.FRUSTUM_VISIBILITY,this),(0,s.YP)((()=>i.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),"local"===e.viewingMode?this._isVisibleBelowSurface=!0:this.addHandles([(0,s.YP)((()=>[i.baseOpacity,i.wireframe,e.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),s.nn)])}destroy(){this._set("graphicsCoreOwner",null),this._extent=null,this._extentIntersection=null}_setDirty(){this.updating||this._set("updating",!0)}setExtent(t){this._extent=t,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(t){this._isVisibleBelowSurfaceInternal=t,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const t=this.graphicsCoreOwner.view,e=t.basemapTerrain,i="local"===t.viewingMode,n="none"===t.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=i||!e.opaque||n}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const t=this.graphicsCoreOwner.view;let e;if(this._isVisibleBelowSurfaceInternal)e=-.3*(0,l.Iu)(t.spatialReference).radius;else{const{min:i,max:n}=t.basemapTerrain.visibleElevationBounds;e=i-Math.max(1,(n-i)*(1.2-1))}this._extentIntersection.update(this._extent,t.spatialReference,e)}get running(){return this.updating}runTask(t){if(this._set("updating",!1),!this._extent)return this._set("suspended",!1),Y.J;this._updateExtentIntersection();const e=this.graphicsCoreOwner.view.frustum,i=(0,l.Iu)(this.graphicsCoreOwner.view.spatialReference).radius;this._set("suspended",!this._extentIntersection.isVisibleInFrustum(e,i)),t.madeProgress()}};(0,n._)([(0,o.Cb)({readOnly:!0})],k.prototype,"suspended",void 0),(0,n._)([(0,o.Cb)({constructOnly:!0})],k.prototype,"graphicsCoreOwner",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],k.prototype,"updating",void 0),k=(0,n._)([(0,a.j)("esri.views.3d.layers.graphics.Graphics3DFrustumVisibility")],k)},62564:function(t,e,i){i.d(e,{d:function(){return y}});var n=i(50702),r=(i(61432),i(32420));class s{}class o extends s{constructor(t,e){super(),this.objectStateId=t,this.object=e}remove(){this.object.removeStateID(this.objectStateId)}}class a extends s{constructor(t,e,i){super(),this.objectStateId=t,this.object=e,this.owner=i}remove(){this.owner.removeRenderGeometryObjectState(this.object,this.objectStateId)}}class l extends s{constructor(t,e){super(),this.objectStateId=t,this._removeCallback=e,this.object=null}remove(){this._removeCallback(this.objectStateId)}}class c{constructor(){this._items=[]}addObject(t,e){this._items.push(new o(e,t))}addRenderGeometry(t,e,i){this._items.push(new a(e,t,i))}addExternal(t,e){this._items.push(new l(e,t))}remove(t){this._remove((e=>e.objectStateId===t))}removeByObject(t){this._remove((e=>e.object===t))}removeAll(){this._items.forEach((t=>t.remove())),this._items=[]}_remove(t){const{_items:e}=this;for(let i=e.length-1;i>=0;--i){const n=e[i];t(n)&&(n.remove(),e.splice(i,1))}}}class h extends c{constructor(){super(...arguments),this.stateType=r.V_.MaskOccludee}}class u extends c{constructor(t){super(),this.highlightName=t,this.stateType=r.V_.Highlight}}class p{constructor(t){this.objectIdField=t,this.ids=new Set,this.paused=!1}hasGraphic(t){const e=this.objectIdField?t.graphic.attributes[this.objectIdField]:t.graphic.uid;return this.ids.has(e)}}class d extends p{constructor(t){super(t),this.stateType=r.V_.MaskOccludee,this.objectStateSet=new h}}class f extends p{constructor(t,e){super(e),this.highlightName=t,this.stateType=r.V_.Highlight,this.objectStateSet=new u(t)}}class y{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this.reset(),this._stateSets=null}reset(){this._stateSets&&(this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets.length=0)}acquireOccludeeSet(t){const e=new d(t);this._stateSets.push(e);const i=(0,n.kB)((()=>this.releaseSet(e)));return{set:e,handle:i}}acquireHighlightSet(t,e){const i=new f(t,e);this._stateSets.push(i);const r=(0,n.kB)((()=>this.releaseSet(i)));return{set:i,handle:r}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}setUid(t,e){t.ids.add(e);const i=this._graphicsCore.graphics3DGraphics.get(e);i&&i.addObjectStateSet(t.objectStateSet)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this._initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&t.addObjectStateSet(e.objectStateSet)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&t.removeObjectState(e.objectStateSet)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}_initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&e.addObjectStateSet(t.objectStateSet)})):t.ids.forEach((i=>{const n=e.get(i);n&&n.addObjectStateSet(t.objectStateSet)}))}get test(){}}},98185:function(t,e,i){i.d(e,{D:function(){return V}});var n=i(73440),r=i(46451),s=i(70880),o=i(50702),a=i(61100),l=i(93568),c=i(90403),h=i(17155),u=(i(61432),i(96711),i(83850),i(48023)),p=i(58426),d=i(60147),f=i(38209),y=i(74774),g=i(56216),_=i(29191),m=i(94808),b=i(47451),x=i(28994),S=i(5473),C=i(18234),v=i(62564),w=i(66290),E=i(36027),I=i(78637),G=i(94125),O=i(27546);let V=class extends s.Z{constructor(t){super(t),this.drapeSourcePriorityOffset=0,this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=m.Lw.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null,this._updatingHandles=new d.R}initialize(){const{layer:t}=this,e="effectiveScaleRange"in t?t:null,i=!(0,O.Dc)()&&this.scaleVisibilityEnabled&&null!=e,n=new x.w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:G.j.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(t,e)=>new S._({graphicsCoreOwner:this,graphicsCore:t,queryGraphicUIDsInExtent:e,elevationProvider:this.view.elevationProvider}),scaleVisibility:i?(t,i)=>new w.c({graphicsCoreOwner:this,layer:e,queryGraphicUIDsInExtent:i,graphicsCore:t,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:t=>new v.d(t)}});if(this._set("graphicsCore",n),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new C.L({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const t=this.owner;this._updatingHandles.add((()=>t.fullOpacity),(()=>this.graphicsCore.opacityChange()))}if("elevationInfo"in t){const e=t;this._updatingHandles.add((()=>e.elevationInfo),((t,e)=>{(0,p.Hg)(t,e)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())}))}this._set("initializePromise",this._initializeAsync()),this._updatingHandles.addPromise(this.initializePromise)}async _initializeAsync(){try{await this.graphicsCore.initializePromise}catch(t){if((0,l.D_)(t))return;throw t}this.destroyed||(this.addHandles((0,c.YP)((()=>this.view.clippingArea),(()=>this._updateClippingExtent()),c.Z_)),this._updateClippingExtent(),this._setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this._updatingHandles.destroy(),this._set("frustumVisibility",(0,a.SC)(this.frustumVisibility)),this._set("graphicsCore",(0,a.SC)(this.graphicsCore))}get layer(){return this.owner.layer}get layerViewUid(){return this.owner.uid}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get scaleVisibilitySuspended(){return!(null==this.scaleVisibility||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return null!=this.frustumVisibility&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||null!=this.scaleVisibility&&this.scaleVisibility.updating||null!=this.frustumVisibility&&this.frustumVisibility.updating||this._updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(t){this.graphicsCore.notifyGraphicGeometryChanged(t)}notifyGraphicVisibilityChanged(t){this.graphicsCore.notifyGraphicVisibilityChanged(t)}notifyContentGeometryUpdate(){this.owner.notifyContentGeometryUpdate?.()}getRenderingInfo(t,e,i){const n=(0,g.Kb)(t,{renderer:e,arcade:i});if(n?.color){const t=n.color;t[0]=t[0]/255,t[1]=t[1]/255,t[2]=t[2]/255}return n}getRenderingInfoAsync(t,e,i,n){return(0,g.xn)(t,{renderer:e,arcade:i,...n})}getHit(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof f.Z?this.layer:null,i=(0,y.mW)(e,t);return{type:"graphic",graphic:i,layer:i.layer}}}return null}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const e=this.graphicsCore?.objectStates;if(!e)return(0,o.kB)();const{set:i,handle:n}=e.acquireOccludeeSet(null);return e.setUid(i,t.uid),n}highlight(t,e){const i=this.graphicsCore?.objectStates;if(!i)return B;if(t instanceof _.Z)return B;const n=(0,I.OL)(t);if(0===n.length)return B;if(n[0]instanceof r.Z){const t=n.map((t=>t.uid)),{set:r,handle:s}=i.acquireHighlightSet(e,null);return i.setUids(r,t),s}if("number"==typeof n[0]){const t=n,{set:r,handle:s}=i.acquireHighlightSet(e,null);return i.setObjectIds(r,t),s}return B}_setupSuspendResumeExtent(){const{scaleVisibility:t,frustumVisibility:e}=this;if(null==t&&null==e)return;const i=({computedExtent:i,extentPadding:n})=>{this._suspendResumeExtent=(0,E.Go)(i,this._suspendResumeExtent,b.PY,n),null!=t&&t.setExtent(this._suspendResumeExtent),null!=e&&e.setExtent(this._suspendResumeExtent)};this.addHandles((0,c.YP)((()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding})),(t=>i(t)),c.tX))}_updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,n._)([(0,h.Cb)()],V.prototype,"drapeSourcePriorityOffset",void 0),(0,n._)([(0,h.Cb)()],V.prototype,"type",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],V.prototype,"owner",void 0),(0,n._)([(0,h.Cb)()],V.prototype,"layer",null),(0,n._)([(0,h.Cb)()],V.prototype,"layerViewUid",null),(0,n._)([(0,h.Cb)()],V.prototype,"view",null),(0,n._)([(0,h.Cb)({constructOnly:!0})],V.prototype,"graphicsCore",void 0),(0,n._)([(0,h.Cb)()],V.prototype,"scaleVisibility",null),(0,n._)([(0,h.Cb)({constructOnly:!0})],V.prototype,"frustumVisibility",void 0),(0,n._)([(0,h.Cb)()],V.prototype,"elevationAlignment",null),(0,n._)([(0,h.Cb)()],V.prototype,"scaleVisibilitySuspended",null),(0,n._)([(0,h.Cb)({readOnly:!0})],V.prototype,"frustumVisibilitySuspended",null),(0,n._)([(0,h.Cb)()],V.prototype,"suspended",null),(0,n._)([(0,h.Cb)({readOnly:!0})],V.prototype,"updating",null),(0,n._)([(0,h.Cb)()],V.prototype,"loadedGraphics",null),(0,n._)([(0,h.Cb)()],V.prototype,"fullOpacity",null),(0,n._)([(0,h.Cb)()],V.prototype,"slicePlaneEnabled",null),(0,n._)([(0,h.Cb)()],V.prototype,"drapeSourceType",void 0),(0,n._)([(0,h.Cb)()],V.prototype,"updatePolicy",null),(0,n._)([(0,h.Cb)({constructOnly:!0})],V.prototype,"scaleVisibilityEnabled",void 0),(0,n._)([(0,h.Cb)({constructOnly:!0})],V.prototype,"frustumVisibilityEnabled",void 0),(0,n._)([(0,h.Cb)()],V.prototype,"initializePromise",void 0),V=(0,n._)([(0,u.j)("esri.views.3d.layers.graphics.GraphicsProcessor")],V);const B=(0,o.kB)()},85754:function(t,e,i){i.d(e,{V5:function(){return s},e7:function(){return r},zc:function(){return o}});var n=i(76554);async function r(t,e=t.popupTemplate){if(null==e)return[];const i=await e.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:r}=e,{objectIdField:s,typeIdField:o,globalIdField:a,relationships:l}=t;if(i.includes("*"))return["*"];const c=r?(0,n.CH)(t):[],h=(0,n.Q0)(t.fieldsIndex,[...i,...c]);return o&&h.push(o),h&&s&&t.fieldsIndex?.has(s)&&!h.includes(s)&&h.push(s),h&&a&&t.fieldsIndex?.has(a)&&!h.includes(a)&&h.push(a),l&&l.forEach((e=>{const{keyField:i}=e;h&&i&&t.fieldsIndex?.has(i)&&!h.includes(i)&&h.push(i)})),h}function s(t,e){return t.popupTemplate?t.popupTemplate:null!=e&&e.defaultPopupTemplateEnabled&&null!=t.defaultPopupTemplate?t.defaultPopupTemplate:null}function o(t,e){return null!=s(t,{defaultPopupTemplateEnabled:e})}}}]);