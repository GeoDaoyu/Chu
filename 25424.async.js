"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[25424],{86462:function(e,t,n){n.d(t,{AJ:function(){return u},If:function(){return c},k0:function(){return l},uI:function(){return m},ul:function(){return s},wx:function(){return d}});var i=n(99574),o=n(96094),a=n(73749),r=n(27583);const s=2.4;function l(e){return(0,o.Wz)(e*s)}function u(e){return(0,o.F2)(e)/s}function f(e,t,n,o){let{color:r,ratio:s}=t,{color:l,ratio:u}=n;if(u===s){const e=1e-6;1===u?s-=e:u+=e}const f=(0,i.uZ)((o-s)/(u-s),0,1);(0,a.l)(e,r.toArray(),l.toArray(),f)}function m(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))),e.length<1)return t;let n=e[0],i=e[0],o=1;const a=(0,r.Ue)();for(let r=0;r<512;r++){const s=(r+.5)/512;for(;s>i.ratio&&o<e.length;)n=i,i=e[o++];f(a,n,i,s),t.set(a,4*r)}return t}function c(e,t,n){const i=Math.sqrt(e**2+t**2)/n;return i>1?0:3/(Math.PI*n**2)*(1-i**2)**2}function d(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},96694:function(e,t,n){n.r(t),n.d(t,{classBreaks:function(){return s},heatmapStatistics:function(){return u},histogram:function(){return l},summaryStatistics:function(){return a},uniqueValues:function(){return r}});var i=n(17600),o=n(46558);async function a(e){const{attribute:t,features:n}=e,{normalizationType:a,normalizationField:r,minValue:s,maxValue:l,fieldType:u,outStatisticTypes:f}=t,m=await(0,i.do)({field:t.field,valueExpression:t.valueExpression,normalizationType:a,normalizationField:r,normalizationTotal:t.normalizationTotal,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n),c=(0,o.S5)({normalizationType:a,normalizationField:r,minValue:s,maxValue:l}),d={value:.5,fieldType:u},p="esriFieldTypeString"===u?(0,o.H0)({values:m,supportsNullCount:c,percentileParams:d,outStatisticTypes:f}):(0,o.i5)({values:m,minValue:s,maxValue:l,useSampleStdDev:!a,supportsNullCount:c,percentileParams:d,outStatisticTypes:f});return(0,o.F_)(p,f,"esriFieldTypeDate"===u)}async function r(e){const{attribute:t,features:n}=e,a=await(0,i.do)({field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:t.valueExpression,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n,!1),r=(0,o.eT)(a);return(0,o.Qm)(r,t.domains,t.returnAllCodedValues,t.fieldDelimiter)}async function s(e){const{attribute:t,features:n}=e,{field:a,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u}=t,f=await(0,i.do)({field:a,valueExpression:t.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:l,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n),m=(0,o.G2)(f,{field:a,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u,standardDeviationInterval:t.standardDeviationInterval,numClasses:t.numClasses,minValue:t.minValue,maxValue:t.maxValue});return(0,o.DL)(m,u)}async function l(e){const{attribute:t,features:n}=e,{field:a,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u}=t,f=await(0,i.do)({field:a,valueExpression:t.valueExpression,normalizationType:r,normalizationField:s,normalizationTotal:l,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},n);return(0,o.oF)(f,{field:a,normalizationType:r,normalizationField:s,normalizationTotal:l,classificationMethod:u,standardDeviationInterval:t.standardDeviationInterval,numBins:t.numBins,minValue:t.minValue,maxValue:t.maxValue})}async function u(e){const{attribute:t,features:n}=e,{field:o,radius:a,transform:r,spatialReference:s}=t,l=t.size??[0,0],u=(0,i.gq)(n??[],r,s,l);return(0,i.qQ)(u,a??void 0,o,l[0],l[1])}},15364:function(e,t,n){n.d(t,{$8:function(){return z},Vo:function(){return h},YZ:function(){return l},a8:function(){return c},aV:function(){return d},ln:function(){return v},wP:function(){return g}});var i=n(60646),o=n(76554),a=(n(18177),n(3411)),r=n(41801),s=n(88097);const l=",",u={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},f=new Set(["integer","small-integer"]);let m=null;function c(e){return(0,o.y2)(e)||(0,o.UQ)(e)||(0,o.ig)(e)}async function d(e){const{field:t,field2:n,field3:i,normalizationField:o,valueExpression:r}=e;let s=[];if(r){if(!m){const{arcadeUtils:e}=await(0,a.L)();m=e}s=m.extractFieldNames(r)}return t&&s.push(t),n&&s.push(n),i&&s.push(i),o&&s.push(o),s}function p(e){return String(e).padStart(2,"0")}function y(e,t,n){let i;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),i=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${p((n?e.getMonth():e.getUTCMonth())+1)}-${p(n?e.getDate():e.getUTCDate())} ${p(n?e.getHours():e.getUTCHours())}:${p(n?e.getMinutes():e.getUTCMinutes())}:${p(n?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function v(e,t,n,i){const{hasQueryEngine:o}=e,a=`(${y(n,T(e,n),o)} - ${y(t,T(e,t),o)})`;let r=u[i],s="/";return r<1&&(r=1/r,s="*"),{sqlExpression:1===r?a:`(${a} ${s} ${r})`,sqlWhere:null}}function T(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if((0,o.y2)(n))return"field"}}function h(e,t){const n=t&&e.getField(t);return!!n&&f.has(n.type)}function g(e){return`cast(${e} as float)`}function z(e,t){const{format:n,timeZoneOptions:o,fieldType:a}=t??{};let l,u;if(o&&({timeZone:l,timeZoneName:u}=(0,s.Np)(o.layerTimeZone,o.datesInUnknownTimezone,o.viewTimeZone,(0,i.Ze)(n||"short-date-short-time"),a)),"string"==typeof e&&isNaN(Date.parse("time-only"===a?`1970-01-01T${e}Z`:e)))return e;switch(a){case"date-only":{const t=(0,i.Ze)(n||"short-date");return"string"==typeof e?(0,i.o8)(e,{...t}):(0,i.p6)(e,{...t,timeZone:r.pt})}case"time-only":{const t=(0,i.Ze)(n||"short-time");return"string"==typeof e?(0,i.LJ)(e,t):(0,i.p6)(e,{...t,timeZone:r.pt})}case"timestamp-offset":{if(!l&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const t=n||o?(0,i.Ze)(n||"short-date-short-time"):void 0,a=t?{...t,timeZone:l,timeZoneName:u}:void 0;return"string"==typeof e?(0,i.i$)(e,a):(0,i.p6)(e,a)}default:{const t=n||o?(0,i.Ze)(n||"short-date-short-time"):void 0;return(0,i.p6)("string"==typeof e?new Date(e):e,t?{...t,timeZone:l,timeZoneName:u}:void 0)}}}}}]);