"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[4751,917],{69055:function(t,n,e){e.d(n,{N:function(){return g},a:function(){return w},b:function(){return v},c:function(){return p},d:function(){return N},e:function(){return b},f:function(){return S},g:function(){return _},h:function(){return q},i:function(){return I},j:function(){return R},k:function(){return O},l:function(){return T},m:function(){return U},n:function(){return M},o:function(){return L},p:function(){return P},s:function(){return z},t:function(){return V},u:function(){return W},w:function(){return x}});e(61432),e(96711);var r=e(99574),o=e(31865),u=e(24910),i=e(82846),c=e(73749),s=e(27583),a=e(66130),f=e(93070),l=e(12659);function d(t,n){const e=(0,u.l)(t),o=(0,r.Kt)(t[2]/e),i=Math.atan2(t[1]/e,t[0]/e);return(0,u.i)(n,e,o,i),n}var h=e(63271),m=e(69811);const g=p();function p(){return(0,s.Ue)()}const M=c.e,y=c.e;function b(t,n){return(0,c.c)(n,t)}function T(t,n){return(0,s.al)(t[0],t[1],t[2],n)}function x(t){return t}function v(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function _(t){return t[3]}function w(t){return t}function S(t,n,e,r){return(0,s.al)(t,n,e,r)}function I(t,n,e){if(null==n)return!1;if(!B(t,n,E))return!1;let{t0:r,t1:o}=E;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(e){const{origin:t,direction:o}=n;e[0]=t[0]+o[0]*r,e[1]=t[1]+o[1]*r,e[2]=t[2]+o[2]*r}return!0}function U(t,n,e){const r=(0,l.zk)(n,e);if(!B(t,r,E))return[];const{origin:o,direction:c}=r,{t0:s,t1:f}=E,d=n=>{const e=(0,i.Ue)();return(0,u.b)(e,o,c,n),P(t,e,e)};return Math.abs(s-f)<(0,a.bn)()?[d(s)]:[d(s),d(f)]}const E={t0:0,t1:0};function B(t,n,e){const{origin:r,direction:o}=n,u=A;u[0]=r[0]-t[0],u[1]=r[1]-t[1],u[2]=r[2]-t[2];const i=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===i)return!1;const c=2*(o[0]*u[0]+o[1]*u[1]+o[2]*u[2]),s=c*c-4*i*(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]-t[3]*t[3]);if(s<0)return!1;const a=Math.sqrt(s);return e.t0=(-c-a)/(2*i),e.t1=(-c+a)/(2*i),!0}const A=(0,i.Ue)();function O(t,n){return I(t,n,null)}function R(t,n,e){const r=m.WM.get(),i=m.MP.get();(0,u.h)(r,n.origin,n.direction);const c=_(t);(0,u.h)(e,r,n.origin),(0,u.g)(e,e,1/(0,u.l)(e)*c);const s=j(t,n.origin),a=(0,h.EU)(n.origin,e);return(0,o.Us)(i,a+s,r),(0,u.t)(e,e,i),e}function N(t,n,e,r){const o=_(t),u=o*o,i=n+.5*Math.PI,c=e*e+u-2*Math.cos(i)*e*o,s=Math.sqrt(c),a=c-u;if(a<=0)return.5;const f=Math.sqrt(a),l=Math.acos(f/s)-Math.asin(o/(s/Math.sin(i)));return Math.min(1,(l+.5*r)/r)}function P(t,n,e){const r=(0,u.d)(m.WM.get(),n,t),o=(0,u.g)(m.WM.get(),r,t[3]/(0,u.l)(r));return(0,u.f)(e,o,t)}function q(t,n){const e=(0,u.d)(m.WM.get(),n,t),r=(0,u.k)(e),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))}function j(t,n){const e=(0,u.d)(m.WM.get(),n,t),o=(0,u.l)(e),i=_(t),c=i+Math.abs(i-o);return(0,r.ZF)(i/c)}const k=(0,i.Ue)();function F(t,n,e,r){const o=(0,u.d)(k,n,t);switch(e){case f.R.X:{const t=d(o,k)[2];return(0,u.i)(r,-Math.sin(t),Math.cos(t),0)}case f.R.Y:{const t=d(o,k),n=t[1],e=t[2],i=Math.sin(n);return(0,u.i)(r,-i*Math.cos(e),-i*Math.sin(e),Math.cos(n))}case f.R.Z:return(0,u.n)(r,o);default:return}}function C(t,n){const e=(0,u.d)(D,n,t);return(0,u.l)(e)-t[3]}function L(t,n){const e=(0,u.s)(t,n),r=_(t);return e<=r*r}function W(t,n,e=(0,s.Ue)()){const r=(0,u.j)(t,n),o=t[3],i=n[3];return r+i<o?((0,c.c)(e,t),e):r+o<i?((0,c.c)(e,n),e):((0,u.m)(e,t,n,(r+i-o)/(2*r)),e[3]=(r+o+i)/2,e)}const D=(0,i.Ue)(),V=p(),z=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:g,altitudeAt:C,angleToSilhouette:j,axisAt:F,cameraFrustumCoverage:N,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return I(t,n,e)?e:((0,l.JI)(n,t,e),P(t,e,e))},closestPointOnSilhouette:R,containsPoint:L,copy:b,create:p,distanceToSilhouette:q,elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:y,exactEquals:M,fromCenterAndRadius:T,fromRadius:v,fromValues:S,getCenter:w,getExtent:function(t,n){return n},getRadius:_,intersectLine:U,intersectRay:I,intersectRayClosestSilhouette:function(t,n,e){if(I(t,n,e))return e;const r=R(t,n,m.WM.get());return(0,u.f)(e,n.origin,(0,u.g)(m.WM.get(),n.direction,(0,u.j)(n.origin,r)/(0,u.l)(n.direction))),e},intersectsRay:O,projectPoint:P,setAltitudeAt:function(t,n,e,r){const o=C(t,n),i=F(t,n,f.R.Z,D),c=(0,u.g)(D,i,e-o);return(0,u.f)(r,n,c)},setExtent:function(t,n,e){return t!==e&&b(t,e),e},tmpSphere:V,union:W,wrap:x},Symbol.toStringTag,{value:"Module"}))},32505:function(t,n,e){e.d(n,{a:function(){return u},f:function(){return i},n:function(){return o}});var r=e(59384);function o(t,n){u(t.typedBuffer,n.typedBuffer,t.typedBufferStride,n.typedBufferStride)}function u(t,n,e=2,o=e){const u=n.length/2;let i=0,c=0;if(!(0,r.fU)(n)||(0,r.Q7)(n)){for(let r=0;r<u;++r)t[i]=n[c],t[i+1]=n[c+1],i+=e,c+=o;return}const s=(0,r.Op)(n);if((0,r.B3)(n))for(let r=0;r<u;++r)t[i]=Math.max(n[c]/s,-1),t[i+1]=Math.max(n[c+1]/s,-1),i+=e,c+=o;else for(let r=0;r<u;++r)t[i]=n[c]/s,t[i+1]=n[c+1]/s,i+=e,c+=o}function i(t,n,e,r){const o=t.typedBuffer,u=t.typedBufferStride,i=r?.count??t.count;let c=(r?.dstIndex??0)*u;for(let t=0;t<i;++t)o[c]=n,o[c+1]=e,c+=u}Object.freeze(Object.defineProperty({__proto__:null,fill:i,normalizeIntegerBuffer:u,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},2875:function(t,n,e){e.d(n,{a:function(){return l},b:function(){return c},c:function(){return i},d:function(){return o},e:function(){return d},f:function(){return f},l:function(){return a},n:function(){return h},t:function(){return u}});var r=e(38461);e(61432),e(96711);function o(t,n,e){u(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function u(t,n,e,r=3,o=r){if(t.length/r!==Math.ceil(n.length/o))return t;const u=t.length/r,i=e[0],c=e[1],s=e[2],a=e[4],f=e[5],l=e[6],d=e[8],h=e[9],m=e[10],g=e[12],p=e[13],M=e[14];let y=0,b=0;for(let e=0;e<u;e++){const e=n[y],u=n[y+1],T=n[y+2];t[b]=i*e+a*u+d*T+g,t[b+1]=c*e+f*u+h*T+p,t[b+2]=s*e+l*u+m*T+M,y+=o,b+=r}return t}function i(t,n,e){c(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function c(t,n,e,r=3,o=r){if(t.length/r!==Math.ceil(n.length/o))return;const u=t.length/r,i=e[0],c=e[1],s=e[2],a=e[3],f=e[4],l=e[5],d=e[6],h=e[7],m=e[8];let g=0,p=0;for(let e=0;e<u;e++){const e=n[g],u=n[g+1],M=n[g+2];t[p]=i*e+a*u+d*M,t[p+1]=c*e+f*u+h*M,t[p+2]=s*e+l*u+m*M,g+=o,p+=r}}function s(t,n,e,r=3,o=r){const u=Math.min(t.length/r,n.length/o);let i=0,c=0;for(let s=0;s<u;s++)t[c]=e*n[i],t[c+1]=e*n[i+1],t[c+2]=e*n[i+2],i+=o,c+=r;return t}function a(t,n,e,r){f(t.typedBuffer,n.typedBuffer,e,r,t.typedBufferStride,n.typedBufferStride)}function f(t,n,e,o,u=3,i=u){const c=Math.min(t.length/u,n.length/i);let s=0,a=0;const f=1/r.jm;for(let r=0;r<c;r++)t[a]=o*(e*n[s])**f,t[a+1]=o*(e*n[s+1])**f,t[a+2]=o*(e*n[s+2])**f,s+=i,a+=u}function l(t,n,e,r=3,o=r){const u=t.length/r;if(u!==Math.ceil(n.length/o))return t;let i=0,c=0;for(let s=0;s<u;s++)t[c]=n[i]+e[0],t[c+1]=n[i+1]+e[1],t[c+2]=n[i+2]+e[2],i+=o,c+=r;return t}function d(t,n){h(t.typedBuffer,n.typedBuffer,t.typedBufferStride,n.typedBufferStride)}function h(t,n,e=3,r=e){const o=Math.min(t.length/e,n.length/r);let u=0,i=0;for(let c=0;c<o;c++){const o=n[u],c=n[u+1],s=n[u+2],a=o*o+c*c+s*s;if(a>0){const n=1/Math.sqrt(a);t[i]=n*o,t[i+1]=n*c,t[i+2]=n*s}u+=r,i+=e}}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:a,normalize:h,normalizeView:d,scale:s,scaleView:function(t,n,e){s(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)},shiftRight:function(t,n,e){const r=Math.min(t.count,n.count),o=t.typedBuffer,u=t.typedBufferStride,i=n.typedBuffer,c=n.typedBufferStride;let s=0,a=0;for(let t=0;t<r;t++)o[a]=i[s]>>e,o[a+1]=i[s+1]>>e,o[a+2]=i[s+2]>>e,s+=c,a+=u},transformMat3:c,transformMat3View:i,transformMat4:u,transformMat4View:o,translate:l},Symbol.toStringTag,{value:"Module"}))},91426:function(t,n,e){e.d(n,{a:function(){return u},b:function(){return f},l:function(){return a},n:function(){return c},t:function(){return i}});var r=e(38461),o=(e(61432),e(96711));function u(t,n,e){i(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function i(t,n,e,r=4,o=r){if(t.length/r!=n.length/o)return;const u=t.length/r,i=e[0],c=e[1],s=e[2],a=e[3],f=e[4],l=e[5],d=e[6],h=e[7],m=e[8];let g=0,p=0;for(let e=0;e<u;e++){const e=n[g],u=n[g+1],M=n[g+2],y=n[g+3];t[p]=i*e+a*u+d*M,t[p+1]=c*e+f*u+h*M,t[p+2]=s*e+l*u+m*M,t[p+3]=y,g+=o,p+=r}}function c(t,n){const e=Math.min(t.count,n.count),r=t.typedBuffer,o=t.typedBufferStride,u=n.typedBuffer,i=n.typedBufferStride;for(let t=0;t<e;t++){const n=t*o,e=t*i,c=u[e],s=u[e+1],a=u[e+2],f=c*c+s*s+a*a;if(f>0){const t=1/Math.sqrt(f);r[n]=t*c,r[n+1]=t*s,r[n+2]=t*a}}}function s(t,n,e,r=4){const o=Math.min(t.length/r,n.count),u=n.typedBuffer,i=n.typedBufferStride;let c=0,s=0;for(let n=0;n<o;n++)t[s]=e*u[c],t[s+1]=e*u[c+1],t[s+2]=e*u[c+2],t[s+3]=e*u[c+3],c+=i,s+=r}function a(t,n,e,r){f(t.typedBuffer,n,e,r,t.typedBufferStride)}function f(t,n,e,o,u=4){const i=Math.min(t.length/u,n.count),c=n.typedBuffer,s=n.typedBufferStride;let a=0,f=0;const l=1/r.jm;for(let n=0;n<i;n++)t[f]=o*(e*c[a])**l,t[f+1]=o*(e*c[a+1])**l,t[f+2]=o*(e*c[a+2])**l,t[f+3]=o*e*c[a+3],a+=s,f+=u}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:a,normalize:c,scale:s,scaleView:function(t,n,e){s(t.typedBuffer,n,e,t.typedBufferStride)},transformMat3:i,transformMat3View:u,transformMat4:function(t,n,e,r=4,u=r){if(t.length/r!=n.length/u)return void o.Z.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const i=t.length/r,c=e[0],s=e[1],a=e[2],f=e[3],l=e[4],d=e[5],h=e[6],m=e[7],g=e[8],p=e[9],M=e[10],y=e[11],b=e[12],T=e[13],x=e[14],v=e[15];let _=0,w=0;for(let e=0;e<i;e++){const e=n[_],o=n[_+1],i=n[_+2],S=n[_+3];t[w]=c*e+l*o+g*i+b*S,t[w+1]=s*e+d*o+p*i+T*S,t[w+2]=a*e+h*o+M*i+x*S,t[w+3]=f*e+m*o+y*i+v*S,_+=u,w+=r}},transformMat4View:function(t,n,e){if(t.count!==n.count)return;const r=t.count,o=e[0],u=e[1],i=e[2],c=e[3],s=e[4],a=e[5],f=e[6],l=e[7],d=e[8],h=e[9],m=e[10],g=e[11],p=e[12],M=e[13],y=e[14],b=e[15],T=t.typedBuffer,x=t.typedBufferStride,v=n.typedBuffer,_=n.typedBufferStride;for(let t=0;t<r;t++){const n=t*x,e=t*_,r=v[e],w=v[e+1],S=v[e+2],I=v[e+3];T[n]=o*r+s*w+d*S+p*I,T[n+1]=u*r+a*w+h*S+M*I,T[n+2]=i*r+f*w+m*S+y*I,T[n+3]=c*r+l*w+g*S+b*I}}},Symbol.toStringTag,{value:"Module"}))},73749:function(t,n,e){e.d(n,{a:function(){return T},b:function(){return g},c:function(){return o},d:function(){return l},e:function(){return x},f:function(){return h},g:function(){return c},h:function(){return M},i:function(){return u},j:function(){return m},l:function(){return y},n:function(){return p},s:function(){return i},t:function(){return b},v:function(){return B}});var r=e(66130);function o(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function u(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function i(t,n,e,r,o){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t}function c(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function s(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function a(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function f(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function l(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function d(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(e*e+r*r+o*o+u*u)}function h(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return e*e+r*r+o*o+u*u}function m(t){const n=t[0],e=t[1],r=t[2],o=t[3];return Math.sqrt(n*n+e*e+r*r+o*o)}function g(t){const n=t[0],e=t[1],r=t[2],o=t[3];return n*n+e*e+r*r+o*o}function p(t,n){const e=n[0],r=n[1],o=n[2],u=n[3];let i=e*e+r*r+o*o+u*u;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=o*i,t[3]=u*i),t}function M(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function y(t,n,e,r){const o=n[0],u=n[1],i=n[2],c=n[3];return t[0]=o+r*(e[0]-o),t[1]=u+r*(e[1]-u),t[2]=i+r*(e[2]-i),t[3]=c+r*(e[3]-c),t}function b(t,n,e){const r=n[0],o=n[1],u=n[2],i=n[3];return t[0]=e[0]*r+e[4]*o+e[8]*u+e[12]*i,t[1]=e[1]*r+e[5]*o+e[9]*u+e[13]*i,t[2]=e[2]*r+e[6]*o+e[10]*u+e[14]*i,t[3]=e[3]*r+e[7]*o+e[11]*u+e[15]*i,t}function T(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function x(t,n){const e=t[0],o=t[1],u=t[2],i=t[3],c=n[0],s=n[1],a=n[2],f=n[3],l=(0,r.bn)();return Math.abs(e-c)<=l*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(o-s)<=l*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(u-a)<=l*Math.max(1,Math.abs(u),Math.abs(a))&&Math.abs(i-f)<=l*Math.max(1,Math.abs(i),Math.abs(f))}const v=s,_=a,w=f,S=d,I=h,U=m,E=g,B=Object.freeze(Object.defineProperty({__proto__:null,add:c,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},copy:o,copyVec3:u,dist:S,distance:d,div:w,divide:f,dot:M,equals:x,exactEquals:T,floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},len:U,length:m,lerp:y,max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},mul:_,multiply:a,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},normalize:p,random:function(t,n=1){const e=r.FD;let o,u,i,c,s,a;do{o=2*e()-1,u=2*e()-1,s=o*o+u*u}while(s>=1);do{i=2*e()-1,c=2*e()-1,a=i*i+c*c}while(a>=1);const f=Math.sqrt((1-s)/a);return t[0]=n*o,t[1]=n*u,t[2]=n*i*f,t[3]=n*c*f,t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:l,scaleAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},set:i,sqrDist:I,sqrLen:E,squaredDistance:h,squaredLength:g,str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},sub:v,subtract:s,transformMat4:b,transformQuat:function(t,n,e){const r=n[0],o=n[1],u=n[2],i=e[0],c=e[1],s=e[2],a=e[3],f=a*r+c*u-s*o,l=a*o+s*r-i*u,d=a*u+i*o-c*r,h=-i*r-c*o-s*u;return t[0]=f*a+h*-i+l*-s-d*-c,t[1]=l*a+h*-c+d*-i-f*-s,t[2]=d*a+h*-s+f*-c-l*-i,t[3]=n[3],t}},Symbol.toStringTag,{value:"Module"}))},61544:function(t,n,e){e.d(n,{r:function(){return r}});class r{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get outerSize(){return this._outer.size}get(t,n){return this._outer.get(t)?.get(n)}getInner(t){return this._outer.get(t)}set(t,n,e){const r=this._outer.get(t);r?r.set(n,e):this._outer.set(t,new Map([[n,e]]))}delete(t,n){const e=this._outer.get(t);e&&(e.delete(n),0===e.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((n,e)=>t(n,e)))}forAll(t){this._outer.forEach(((n,e)=>n.forEach(((n,r)=>t(n,e,r)))))}}},38949:function(t,n,e){e.d(n,{x:function(){return o}});var r=e(94413);class o{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*u);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,u));t++)this._items.push(this._allocator())}}const u=1024},15322:function(t,n,e){e.d(n,{G:function(){return o}});var r=e(88194);let o=class t{constructor(t,n,e=""){this.major=t,this.minor=n,this._context=e}lessThan(t,n){return this.major<t||t===this.major&&this.minor<n}greaterEqual(t,n){return!this.lessThan(t,n)}validate(t){if(this.major!==t.major){const n=this._context&&this._context+":",e=this._context&&this._context+" ";throw new r.Z(n+"unsupported-version",`Required major ${e}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new t(this.major,this.minor,this._context)}static parse(n,e=""){const[o,u]=n.split("."),i=/^\s*\d+\s*$/;if(!o?.match||!i.test(o))throw new r.Z((e&&e+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:n});if(!u?.match||!i.test(u))throw new r.Z((e&&e+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:n});const c=parseInt(o,10),s=parseInt(u,10);return new t(c,s,e)}}},10126:function(t,n,e){function r(t){return t=t||globalThis.location.hostname,a.some((n=>null!=t?.match(n)))}function o(t,n){return t?(n=n||globalThis.location.hostname)?null!=n.match(u)||null!=n.match(c)?t.replace("static.arcgis.com","staticdev.arcgis.com"):null!=n.match(i)||null!=n.match(s)?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}e.d(n,{XO:function(){return r},pJ:function(){return o}});const u=/^devext\.arcgis\.com$/,i=/^qaext\.arcgis\.com$/,c=/^[\w-]*\.mapsdevext\.arcgis\.com$/,s=/^[\w-]*\.mapsqa\.arcgis\.com$/,a=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,u,i,/^jsapps\.esri\.com$/,c,s]},30748:function(t,n,e){function r(){return[1,0,0,0,1,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function u(t,n,e,r,o,u,i,c,s){return[t,n,e,r,o,u,i,c,s]}e.d(n,{Ue:function(){return r},Wd:function(){return i},al:function(){return u},d9:function(){return o}});const i=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,fromValues:u},Symbol.toStringTag,{value:"Module"}))},10934:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function u(t,n,e,r,o,u,i,c,s,a,f,l,d,h,m,g){return[t,n,e,r,o,u,i,c,s,a,f,l,d,h,m,g]}e.d(n,{Ue:function(){return r},Wd:function(){return i},al:function(){return u},d9:function(){return o}});const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,fromValues:u},Symbol.toStringTag,{value:"Module"}))},21117:function(t,n,e){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}function u(t,n,e,r){return[t,n,e,r]}e.d(n,{Ue:function(){return r},Wd:function(){return i},al:function(){return u},d9:function(){return o}});const i=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,fromValues:u},Symbol.toStringTag,{value:"Module"}))},12414:function(t,n,e){function r(){return new Float32Array(2)}function o(t,n){const e=new Float32Array(2);return e[0]=t,e[1]=n,e}function u(){return r()}function i(){return o(1,1)}function c(){return o(1,0)}function s(){return o(0,1)}e.d(n,{AG:function(){return a},Ue:function(){return r},al:function(){return o},hq:function(){return f}});const a=u(),f=i(),l=c(),d=s();Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:d,ZEROS:a,clone:function(t){const n=new Float32Array(2);return n[0]=t[0],n[1]=t[1],n},create:r,fromValues:o,ones:i,unitX:c,unitY:s,zeros:u},Symbol.toStringTag,{value:"Module"}))},41788:function(t,n,e){function r(){return[0,0]}function o(t){return[t[0],t[1]]}function u(t,n){return[t,n]}function i(t,n=[0,0]){const e=Math.min(2,t.length);for(let r=0;r<e;++r)n[r]=t[r];return n}function c(){return[0,0]}function s(){return u(1,1)}function a(){return u(1,0)}function f(){return u(0,1)}e.d(n,{AG:function(){return l},E9:function(){return h},IO:function(){return m},Ue:function(){return r},al:function(){return u},d9:function(){return o},hq:function(){return d},ll:function(){return c},nI:function(){return i}});const l=[0,0],d=s(),h=a(),m=f();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:h,UNIT_Y:m,ZEROS:l,clone:o,create:r,freeze:function(t,n){return[t,n]},fromArray:i,fromValues:u,ones:s,unitX:a,unitY:f,zeros:c},Symbol.toStringTag,{value:"Module"}))},27583:function(t,n,e){function r(){return[0,0,0,0]}function o(t){return[t[0],t[1],t[2],t[3]]}function u(t,n,e,r){return[t,n,e,r]}function i(t,n,e,r){return[t,n,e,r]}function c(t,n=[0,0,0,0]){const e=Math.min(4,t.length);for(let r=0;r<e;++r)n[r]=t[r];return n}function s(){return[0,0,0,0]}function a(){return u(1,1,1,1)}function f(){return u(1,0,0,0)}function l(){return u(0,1,0,0)}function d(){return u(0,0,1,0)}function h(){return u(0,0,0,1)}e.d(n,{AG:function(){return m},Ue:function(){return r},al:function(){return u},d9:function(){return o},hq:function(){return g},iU:function(){return a},nI:function(){return c},vV:function(){return i}});const m=[0,0,0,0],g=a(),p=f(),M=l(),y=d(),b=h();Object.freeze(Object.defineProperty({__proto__:null,ONES:g,UNIT_W:b,UNIT_X:p,UNIT_Y:M,UNIT_Z:y,ZEROS:m,clone:o,create:r,freeze:i,fromArray:c,fromValues:u,ones:a,unitW:h,unitX:f,unitY:l,unitZ:d,zeros:s},Symbol.toStringTag,{value:"Module"}))},96373:function(t,n,e){e.d(n,{Iu:function(){return l},Jp:function(){return f},U1:function(){return d},U_:function(){return s},XL:function(){return p},bA:function(){return h},en:function(){return m},f6:function(){return g},p4:function(){return c},t8:function(){return u},uj:function(){return a},xO:function(){return o},yR:function(){return i}});var r=e(66130);function o(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function u(t,n,e,r,o,u,i,c,s,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=u,t[5]=i,t[6]=c,t[7]=s,t[8]=a,t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function c(t,n){if(t===n){const e=n[1],r=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function s(t,n){const e=n[0],r=n[1],o=n[2],u=n[3],i=n[4],c=n[5],s=n[6],a=n[7],f=n[8],l=f*i-c*a,d=-f*u+c*s,h=a*u-i*s;let m=e*l+r*d+o*h;return m?(m=1/m,t[0]=l*m,t[1]=(-f*r+o*a)*m,t[2]=(c*r-o*i)*m,t[3]=d*m,t[4]=(f*e-o*s)*m,t[5]=(-c*e+o*u)*m,t[6]=h*m,t[7]=(-a*e+r*s)*m,t[8]=(i*e-r*u)*m,t):null}function a(t,n){const e=n[0],r=n[1],o=n[2],u=n[3],i=n[4],c=n[5],s=n[6],a=n[7],f=n[8];return t[0]=i*f-c*a,t[1]=o*a-r*f,t[2]=r*c-o*i,t[3]=c*s-u*f,t[4]=e*f-o*s,t[5]=o*u-e*c,t[6]=u*a-i*s,t[7]=r*s-e*a,t[8]=e*i-r*u,t}function f(t,n,e){const r=n[0],o=n[1],u=n[2],i=n[3],c=n[4],s=n[5],a=n[6],f=n[7],l=n[8],d=e[0],h=e[1],m=e[2],g=e[3],p=e[4],M=e[5],y=e[6],b=e[7],T=e[8];return t[0]=d*r+h*i+m*a,t[1]=d*o+h*c+m*f,t[2]=d*u+h*s+m*l,t[3]=g*r+p*i+M*a,t[4]=g*o+p*c+M*f,t[5]=g*u+p*s+M*l,t[6]=y*r+b*i+T*a,t[7]=y*o+b*c+T*f,t[8]=y*u+b*s+T*l,t}function l(t,n,e){const r=n[0],o=n[1],u=n[2],i=n[3],c=n[4],s=n[5],a=n[6],f=n[7],l=n[8],d=e[0],h=e[1];return t[0]=r,t[1]=o,t[2]=u,t[3]=i,t[4]=c,t[5]=s,t[6]=d*r+h*i+a,t[7]=d*o+h*c+f,t[8]=d*u+h*s+l,t}function d(t,n,e){const r=n[0],o=n[1],u=n[2],i=n[3],c=n[4],s=n[5],a=n[6],f=n[7],l=n[8],d=Math.sin(e),h=Math.cos(e);return t[0]=h*r+d*i,t[1]=h*o+d*c,t[2]=h*u+d*s,t[3]=h*i-d*r,t[4]=h*c-d*o,t[5]=h*s-d*u,t[6]=a,t[7]=f,t[8]=l,t}function h(t,n,e){const r=e[0],o=e[1],u=e[2];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=u*n[6],t[7]=u*n[7],t[8]=u*n[8],t}function m(t,n){const e=n[0],r=n[1],o=n[2],u=n[3],i=e+e,c=r+r,s=o+o,a=e*i,f=r*i,l=r*c,d=o*i,h=o*c,m=o*s,g=u*i,p=u*c,M=u*s;return t[0]=1-l-m,t[3]=f-M,t[6]=d+p,t[1]=f+M,t[4]=1-a-m,t[7]=h-g,t[2]=d-p,t[5]=h+g,t[8]=1-a-l,t}function g(t,n){const e=n[0],r=n[1],o=n[2],u=n[4],i=n[5],c=n[6],s=n[8],a=n[9],f=n[10],l=f*i-c*a,d=-f*u+c*s,h=a*u-i*s,m=e*l+r*d+o*h;if(!m)return null;const g=1/m;return t[0]=l*g,t[1]=(-f*r+o*a)*g,t[2]=(c*r-o*i)*g,t[3]=d*g,t[4]=(f*e-o*s)*g,t[5]=(-c*e+o*u)*g,t[6]=h*g,t[7]=(-a*e+r*s)*g,t[8]=(i*e-r*u)*g,t}function p(t,n){const e=n[0],r=n[1],o=n[2],u=n[3],i=n[4],c=n[5],s=n[6],a=n[7],f=n[8],l=n[9],d=n[10],h=n[11],m=n[12],g=n[13],p=n[14],M=n[15],y=e*c-r*i,b=e*s-o*i,T=e*a-u*i,x=r*s-o*c,v=r*a-u*c,_=o*a-u*s,w=f*g-l*m,S=f*p-d*m,I=f*M-h*m,U=l*p-d*g,E=l*M-h*g,B=d*M-h*p;let A=y*B-b*E+T*U+x*I-v*S+_*w;return A?(A=1/A,t[0]=(c*B-s*E+a*U)*A,t[1]=(s*I-i*B-a*S)*A,t[2]=(i*E-c*I+a*w)*A,t[3]=(o*E-r*B-u*U)*A,t[4]=(e*B-o*I+u*S)*A,t[5]=(r*I-e*E-u*w)*A,t[6]=(g*_-p*v+M*x)*A,t[7]=(p*T-m*_-M*b)*A,t[8]=(m*v-g*T+M*y)*A,t):null}function M(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}const y=f,b=M;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},adjoint:a,copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},determinant:function(t){const n=t[0],e=t[1],r=t[2],o=t[3],u=t[4],i=t[5],c=t[6],s=t[7],a=t[8];return n*(a*u-i*s)+e*(-a*o+i*c)+r*(s*o-u*c)},equals:function(t,n){const e=t[0],o=t[1],u=t[2],i=t[3],c=t[4],s=t[5],a=t[6],f=t[7],l=t[8],d=n[0],h=n[1],m=n[2],g=n[3],p=n[4],M=n[5],y=n[6],b=n[7],T=n[8],x=(0,r.bn)();return Math.abs(e-d)<=x*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(o-h)<=x*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-m)<=x*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(i-g)<=x*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(c-p)<=x*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(s-M)<=x*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(a-y)<=x*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(f-b)<=x*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(l-T)<=x*Math.max(1,Math.abs(l),Math.abs(T))},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},fromMat2d:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},fromMat4:o,fromQuat:m,fromRotation:function(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},identity:i,invert:s,isOrthoNormal:function(t){const n=(0,r.bn)(),e=t[0],o=t[1],u=t[2],i=t[3],c=t[4],s=t[5],a=t[6],f=t[7],l=t[8];return Math.abs(1-(e*e+i*i+a*a))<=n&&Math.abs(1-(o*o+c*c+f*f))<=n&&Math.abs(1-(u*u+s*s+l*l))<=n},mul:y,multiply:f,multiplyScalar:function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},multiplyScalarAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},normalFromMat4:p,normalFromMat4Legacy:g,projection:function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},rotate:d,scale:h,scaleByVec2:function(t,n,e){const r=e[0],o=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t},set:u,str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},sub:b,subtract:M,translate:l,transpose:c},Symbol.toStringTag,{value:"Module"}))},85881:function(t,n,e){e.d(n,{F$:function(){return i},G7:function(){return a},HG:function(){return d},Mm:function(){return l},Qi:function(){return h},YL:function(){return o},YN:function(){return f},du:function(){return u},kk:function(){return c}});var r=e(59384);function o(t){return 32+t.length}const u=16;function i(t){if(!t)return 0;let n=l;for(const e in t)t.hasOwnProperty(e)&&(n+=s(t[e],!1));return n}function c(t){if(!t)return 0;if("number"==typeof t[0])return a(t);if(Array.isArray(t))return function(t){const n=t.length;if(0===n||"number"==typeof t[0])return f(t,8);let e=d;for(let r=0;r<n;r++)e+=s(t[r]);return e}(t);let n=l;for(const e in t)t.hasOwnProperty(e)&&(n+=s(t[e]));return n}function s(t,n=!0){switch(typeof t){case"object":return n?c(t):l;case"string":return o(t);case"number":return u;case"boolean":return 4;default:return 8}}function a(...t){return t.reduce(((t,n)=>t+(n?(0,r.fU)(n)?n.byteLength+h:Array.isArray(n)?f(n,u):0:0)),0)}function f(t,n){return d+t.length*n}const l=32,d=16,h=145},70331:function(t,n,e){e.d(n,{HQ:function(){return c},VY:function(){return s},rS:function(){return f},wY:function(){return a}});var r=e(47925),o=e(45213),u=e(8554);const i=new o.Z(r.kU),c=new o.Z(r.JL),s=new o.Z(r.mM),a=new o.Z(r.pn);function f(t){const n=l.get(t);if(n)return n;let e=i;if(t)if(t===c)e=c;else if(t===s)e=s;else{const n=t.wkid,r=t.latestWkid;if(null!=n||null!=r)(0,u.o$)(n)||(0,u.o$)(r)?e=c:((0,u.ME)(n)||(0,u.ME)(r))&&(e=s);else{const n=t.wkt2??t.wkt;if(n){const t=n.toUpperCase();t===d?e=c:t===h&&(e=s)}}}return l.set(t,e),e}const l=new Map,d=c.wkt.toUpperCase(),h=s.wkt.toUpperCase()},88970:function(t,n,e){e.d(n,{AR:function(){return y},Gr:function(){return M},JG:function(){return f},Jk:function(){return h},KU:function(){return g},Ue:function(){return s},al:function(){return l},ct:function(){return p},nF:function(){return m},re:function(){return a},zk:function(){return d}});var r=e(99574),o=e(38949),u=e(24910),i=e(82846),c=e(69811);function s(t){return t?{origin:(0,i.d9)(t.origin),vector:(0,i.d9)(t.vector)}:{origin:(0,i.Ue)(),vector:(0,i.Ue)()}}function a(t,n){const e=x.get();return e.origin=t,e.vector=n,e}function f(t,n=s()){return l(t.origin,t.vector,n)}function l(t,n,e=s()){return(0,u.c)(e.origin,t),(0,u.c)(e.vector,n),e}function d(t,n,e=s()){return(0,u.c)(e.origin,t),(0,u.d)(e.vector,n,t),e}function h(t,n){const e=(0,u.d)(c.WM.get(),n,t.origin),o=(0,u.e)(t.vector,e),i=(0,u.e)(t.vector,t.vector),s=(0,r.uZ)(o/i,0,1),a=(0,u.d)(c.WM.get(),(0,u.g)(c.WM.get(),t.vector,s),e);return(0,u.e)(a,a)}function m(t,n,e){return p(t,n,0,1,e)}function g(t,n,e){return(0,u.f)(e,t.origin,(0,u.g)(e,t.vector,n))}function p(t,n,e,o,i){const{vector:s,origin:a}=t,f=(0,u.d)(c.WM.get(),n,a),l=(0,u.e)(s,f)/(0,u.k)(s);return(0,u.g)(i,s,(0,r.uZ)(l,e,o)),(0,u.f)(i,i,t.origin)}function M(t,n){if(b(t,a(n.origin,n.direction),!1,T)){const{tA:n,pB:e,distance2:r}=T;if(n>=0&&n<=1)return r;if(n<0)return(0,u.s)(t.origin,e);if(n>1)return(0,u.s)((0,u.f)(c.WM.get(),t.origin,t.vector),e)}return null}function y(t,n,e){return!!b(t,n,!0,T)&&((0,u.c)(e,T.pA),!0)}function b(t,n,e,o){const i=1e-6,s=t.origin,a=(0,u.f)(c.WM.get(),s,t.vector),f=n.origin,l=(0,u.f)(c.WM.get(),f,n.vector),d=c.WM.get(),h=c.WM.get();if(d[0]=s[0]-f[0],d[1]=s[1]-f[1],d[2]=s[2]-f[2],h[0]=l[0]-f[0],h[1]=l[1]-f[1],h[2]=l[2]-f[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const m=c.WM.get();if(m[0]=a[0]-s[0],m[1]=a[1]-s[1],m[2]=a[2]-s[2],Math.abs(m[0])<i&&Math.abs(m[1])<i&&Math.abs(m[2])<i)return!1;const g=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],p=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],M=d[0]*m[0]+d[1]*m[1]+d[2]*m[2],y=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],b=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*y-p*p;if(Math.abs(b)<i)return!1;let T=(g*p-M*y)/b,x=(g+p*T)/y;e&&(T=(0,r.uZ)(T,0,1),x=(0,r.uZ)(x,0,1));const v=c.WM.get(),_=c.WM.get();return v[0]=s[0]+T*m[0],v[1]=s[1]+T*m[1],v[2]=s[2]+T*m[2],_[0]=f[0]+x*h[0],_[1]=f[1]+x*h[1],_[2]=f[2]+x*h[2],o.tA=T,o.tB=x,o.pA=v,o.pB=_,o.distance2=(0,u.s)(v,_),!0}const T={tA:0,tB:0,pA:(0,i.Ue)(),pB:(0,i.Ue)(),distance2:0},x=new o.x((()=>s()))},77773:function(t,n,e){e.d(n,{Ac:function(){return R},BR:function(){return B},Er:function(){return P},JG:function(){return l},Kt:function(){return C},Oy:function(){return m},Qi:function(){return D},T5:function(){return S},TE:function(){return k},Ue:function(){return a},Yq:function(){return g},al:function(){return h},dZ:function(){return O},fn:function(){return E},jH:function(){return F},my:function(){return U},nF:function(){return q},nI:function(){return y},oq:function(){return N},oy:function(){return z},re:function(){return f},rx:function(){return A},st:function(){return d},tk:function(){return I},tx:function(){return j},zk:function(){return p},zu:function(){return M}});var r=e(99574),o=e(24910),u=e(82846),i=(e(73749),e(63271)),c=e(69811),s=e(22365);function a(t=V){return[t[0],t[1],t[2],t[3]]}function f(t=V[0],n=V[1],e=V[2],r=V[3]){return h(t,n,e,r,c.o6.get())}function l(t,n){return h(n[0],n[1],n[2],n[3],t)}function d(t){return t}function h(t,n,e,r,o=a()){return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function m(t,n,e){return(0,o.c)(e,t),e[3]=n,e}function g(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function p(t,n,e,r=a()){const o=e[0]-n[0],u=e[1]-n[1],i=e[2]-n[2],c=t[0]-n[0],s=t[1]-n[1],f=t[2]-n[2],l=u*f-i*s,d=i*c-o*f,h=o*s-u*c,m=l*l+d*d+h*h,g=Math.abs(m-1)>1e-5&&m>1e-12?1/Math.sqrt(m):1;return r[0]=l*g,r[1]=d*g,r[2]=h*g,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function M(t,n,e,r=0,u=Math.floor(e*(1/3)),i=Math.floor(e*(2/3))){if(e<3)return!1;n(T,r);let c=u,s=!1;for(;c<e-1&&!s;)n(x,c),c++,s=!(0,o.q)(T,x);if(!s)return!1;for(c=Math.max(c,i),s=!1;c<e&&!s;)n(v,c),c++,(0,o.d)(_,T,x),(0,o.n)(_,_),(0,o.d)(w,x,v),(0,o.n)(w,w),s=!(0,o.q)(T,v)&&!(0,o.q)(x,v)&&Math.abs((0,o.e)(_,w))<b;return s?(p(T,x,v,t),!0):(0!==r||1!==u||2!==i)&&M(t,n,e,0,1,2)}function y(t,n,e=!0){const r=n.length/3;return M(t,((t,e)=>(0,o.i)(t,n[3*e+0],n[3*e+1],n[3*e+2])),e?r-1:r)}const b=.99619469809,T=(0,u.Ue)(),x=(0,u.Ue)(),v=(0,u.Ue)(),_=(0,u.Ue)(),w=(0,u.Ue)();function S(t,n,e){return n!==t&&l(t,n),t[3]=-(0,o.e)(t,e),t}function I(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function U(t,n,e,r){return(0,o.h)(v,n,t),g(e,v,r)}function E(t,n,e,r){return W(D(t,n,(0,o.d)(c.WM.get(),e,n),J,r))}function B(t,n,e){return null!=n&&W(D(t,n.origin,n.direction,G,e))}function A(t,n,e){return W(D(t,n.origin,n.vector,z.NONE,e))}function O(t,n,e){return W(D(t,n.origin,n.vector,z.CLAMP,e))}function R(t,n){return F(t,n)>=0}function N(t,n){const e=(0,o.e)(t,n.ray.direction),r=-F(t,n.ray.origin);if(r<0&&e>=0)return!1;if(e>-1e-6&&e<1e-6)return r>0;if((r<0||e<0)&&!(r<0&&e<0))return!0;const u=r/e;return e>0?u<n.c1&&(n.c1=u):u>n.c0&&(n.c0=u),n.c0<=n.c1}function P(t,n){const e=(0,o.e)(t,n.ray.direction),r=-F(t,n.ray.origin);if(e>-1e-6&&e<1e-6)return r>0;const u=r/e;return e>0?u<n.c1&&(n.c1=u):u>n.c0&&(n.c0=u),n.c0<=n.c1}function q(t,n,e){const r=(0,o.g)(c.WM.get(),t,-t[3]),u=function(t,n,e){const r=(0,o.g)(c.WM.get(),t,(0,o.e)(t,n));return(0,o.d)(e,n,r),e}(t,(0,o.d)(c.WM.get(),n,r),c.WM.get());return(0,o.f)(e,u,r),e}function j(t,n,e,r){const u=t,a=c.WM.get(),f=c.WM.get();(0,s._F)(u,a,f);const l=(0,o.d)(c.WM.get(),e,n),d=(0,i.SR)(a,l),h=(0,i.SR)(f,l),m=(0,i.SR)(u,l);return(0,o.i)(r,d,h,m)}function k(t,n){return Math.abs(F(t,n))}function F(t,n){return(0,o.e)(t,n)+t[3]}var C,L;function W(t){return t===C.INTERSECTS_INSIDE_OUT||t===C.INTERSECTS_OUTSIDE_IN}function D(t,n,e,u,i){const c=(0,o.e)(t,e),s=F(t,n);if(0===c)return s>=0?C.INSIDE:C.OUTSIDE;let a=-s/c;return u&z.CLAMP&&(a=(0,r.uZ)(a,0,1)),!(u&z.INFINITE_MIN)&&a<0||!(u&z.INFINITE_MAX)&&a>1?s>=0?C.INSIDE:C.OUTSIDE:((0,o.f)(i,n,(0,o.g)(i,e,a)),s>=0?C.INTERSECTS_INSIDE_OUT:C.INTERSECTS_OUTSIDE_IN)}(L=C||(C={}))[L.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",L[L.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",L[L.INSIDE=2]="INSIDE",L[L.OUTSIDE=3]="OUTSIDE";const V=[0,0,1,0];var z;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(z||(z={}));const J=z.INFINITE_MIN|z.INFINITE_MAX,G=z.INFINITE_MAX},12659:function(t,n,e){e.d(n,{JG:function(){return m},JI:function(){return y},Jk:function(){return M},Ue:function(){return f},_w:function(){return b},al:function(){return p},fS:function(){return d},re:function(){return h},zk:function(){return g}});var r=e(3480),o=e(38949),u=e(96373),i=e(30748),c=e(24910),s=e(82846),a=e(69811);function f(t){return t?l((0,s.d9)(t.origin),(0,s.d9)(t.direction)):l((0,s.Ue)(),(0,s.Ue)())}function l(t,n){return{origin:t,direction:n}}function d(t,n){return(0,r.fS)(t.origin,n.origin)&&(0,r.fS)(t.direction,n.direction)}function h(t,n){const e=T.get();return e.origin=t,e.direction=n,e}function m(t,n=f()){return p(t.origin,t.direction,n)}function g(t,n,e=f()){return(0,c.c)(e.origin,t),(0,c.d)(e.direction,n,t),e}function p(t,n,e=f()){return(0,c.c)(e.origin,t),(0,c.c)(e.direction,n),e}function M(t,n){const e=(0,c.h)(a.WM.get(),(0,c.n)(a.WM.get(),t.direction),(0,c.d)(a.WM.get(),n,t.origin));return(0,c.e)(e,e)}function y(t,n,e){const r=(0,c.e)(t.direction,(0,c.d)(e,n,t.origin));return(0,c.f)(e,t.origin,(0,c.g)(e,t.direction,r)),e}function b(t,n,e,r){const o=t.origin,i=n.origin,s=t.direction,a=n.direction,f=(0,c.e)((0,c.n)(v,s),(0,c.n)(_,a));if(Math.abs(f)>=1)return null;const l=(0,c.h)(v,s,a),d=(0,c.a)(x,i,o),h=(0,u.t8)(w,s[0],s[1],s[2],-a[0],-a[1],-a[2],l[0],l[1],l[2]),m=(0,u.U_)(w,h);if(null==m)return[e,r];const g=(0,c.e)((0,c.i)(v,m[0],m[3],m[6]),d),p=(0,c.e)((0,c.i)(_,m[1],m[4],m[7]),d);return(0,c.f)(e,o,(0,c.g)(x,s,g)),(0,c.f)(r,i,(0,c.g)(x,a,p)),[e,r]}const T=new o.x((()=>f())),x=(0,s.Ue)(),v=(0,s.Ue)(),_=(0,s.Ue)(),w=(0,i.Ue)()},79012:function(t,n,e){e.d(n,{bE:function(){return a},wu:function(){return s}});var r=e(38949),o=e(24910),u=e(82846),i=e(88970);e(69811);function c(t){return t?{p0:(0,u.d9)(t.p0),p1:(0,u.d9)(t.p1),p2:(0,u.d9)(t.p2)}:{p0:(0,u.Ue)(),p1:(0,u.Ue)(),p2:(0,u.Ue)()}}function s(t,n,e){const r=n[0]-t[0],o=n[1]-t[1],u=e[0]-t[0],i=e[1]-t[1];return.5*Math.abs(r*i-o*u)}function a(t,n,e){return(0,o.d)(f,n,t),(0,o.d)(l,e,t),.5*(0,o.l)((0,o.h)(f,f,l))}new r.x(i.Ue),new r.x((()=>c()));const f=(0,u.Ue)(),l=(0,u.Ue)()},63271:function(t,n,e){e.d(n,{EU:function(){return s},SR:function(){return c},cp:function(){return a},nF:function(){return i}});var r=e(99574),o=e(24910),u=e(82846);function i(t,n,e){const r=(0,o.e)(t,n)/(0,o.e)(t,t);return(0,o.g)(e,t,r)}function c(t,n){return(0,o.e)(t,n)/(0,o.l)(t)}function s(t,n){const e=(0,o.e)(t,n)/((0,o.l)(t)*(0,o.l)(n));return-(0,r.ZF)(e)}function a(t,n,e){(0,o.n)(f,t),(0,o.n)(l,n);const u=(0,o.e)(f,l),i=(0,r.ZF)(u),c=(0,o.h)(f,f,l);return(0,o.e)(c,e)<0?2*Math.PI-i:i}const f=(0,u.Ue)(),l=(0,u.Ue)()},69811:function(t,n,e){e.d(n,{MP:function(){return m},vD:function(){return g},qW:function(){return l},WM:function(){return d},o6:function(){return h}});e(61432);var r=e(94413),o=e(30748),u=e(10934),i=e(21117),c=e(41788),s=e(82846),a=e(27583);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(c.Ue)}static createVec3f64(){return new f(s.Ue)}static createVec4f64(){return new f(a.Ue)}static createMat3f64(){return new f(o.Ue)}static createMat4f64(){return new f(u.Ue)}static createQuatf64(){return new f(i.Ue)}get test(){}}const l=f.createVec2f64(),d=f.createVec3f64(),h=f.createVec4f64(),m=(f.createMat3f64(),f.createMat4f64()),g=f.createQuatf64()},95631:function(t,n,e){e.d(n,{C:function(){return s}});var r=e(78619),o=e(29292),u=e(88194),i=e(93568),c=e(95490);class s{constructor(t){this._streamDataRequester=t}async loadJSON(t,n){return this._load("json",t,n)}async loadBinary(t,n){return(0,c.HK)(t)?((0,i.k_)(n),(0,c.AH)(t)):this._load("binary",t,n)}async loadImage(t,n){return this._load("image",t,n)}async _load(t,n,e){if(null==this._streamDataRequester)return(await(0,r.Z)(n,{responseType:a[t]})).data;const c=await(0,o.q6)(this._streamDataRequester.request(n,t,e));if(!0===c.ok)return c.value;throw(0,i.r9)(c.error),new u.Z("glt-loader-request-error",`Request for resource failed: ${c.error}`)}}const a={image:"image",binary:"array-buffer",json:"json","image+type":void 0}},80641:function(t,n,e){e.d(n,{i:function(){return i}});var r=e(30748),o=e(12414),u=e(96373);function i(t){if(null==t)return null;const n=null!=t.offset?t.offset:o.AG,e=null!=t.rotation?t.rotation:0,i=null!=t.scale?t.scale:o.hq,c=(0,r.al)(1,0,0,0,1,0,n[0],n[1],1),s=(0,r.al)(Math.cos(e),-Math.sin(e),0,Math.sin(e),Math.cos(e),0,0,0,1),a=(0,r.al)(i[0],0,0,0,i[1],0,0,0,1),f=(0,r.Ue)();return(0,u.Jp)(f,s,a),(0,u.Jp)(f,c,f),f}},42869:function(t,n,e){e.d(n,{p:function(){return i}});var r=e(59384),o=e(38766),u=e(65650);function i(t,n){switch(n){case u.MX.TRIANGLES:return function(t){return"number"==typeof t?(0,o.KF)(t):(0,r.lq)(t)?new Uint16Array(t):t}(t);case u.MX.TRIANGLE_STRIP:return function(t){const n="number"==typeof t?t:t.length;if(n<3)return[];const e=n-2,r=(0,o.$z)(3*e);if("number"==typeof t){let t=0;for(let n=0;n<e;n+=1)n%2==0?(r[t++]=n,r[t++]=n+1,r[t++]=n+2):(r[t++]=n+1,r[t++]=n,r[t++]=n+2)}else{let n=0;for(let o=0;o<e;o+=1)o%2==0?(r[n++]=t[o],r[n++]=t[o+1],r[n++]=t[o+2]):(r[n++]=t[o+1],r[n++]=t[o],r[n++]=t[o+2])}return r}(t);case u.MX.TRIANGLE_FAN:return function(t){const n="number"==typeof t?t:t.length;if(n<3)return new Uint16Array(0);const e=n-2,r=e<=65536?new Uint16Array(3*e):new Uint32Array(3*e);if("number"==typeof t){let t=0;for(let n=0;n<e;++n)r[t++]=0,r[t++]=n+1,r[t++]=n+2;return r}const o=t[0];let u=t[1],i=0;for(let n=0;n<e;++n){const e=t[n+2];r[i++]=o,r[i++]=u,r[i++]=e,u=e}return r}(t)}}},917:function(t,n,e){e.d(n,{$A:function(){return i},Ml:function(){return s},NM:function(){return u},i$:function(){return c}});var r=e(61432),o=e(32420);class u{constructor(t){this.data=t,this.type="encoded-mesh-texture",this.encoding=o.Ti.KTX2_ENCODING}}function i(t){return"encoded-mesh-texture"===t?.type}async function c(t){const n=new Blob([t]),e=await n.text();return JSON.parse(e)}async function s(t,n){if(n===o.Ti.KTX2_ENCODING)return new u(t);const e=new Blob([t],{type:n});let i=URL.createObjectURL(e);switch(n){case"image/jpeg":i+="#.jpg";break;case"image/png":i+="#.png"}const c=new Image;if((0,r.Z)("esri-iPhone"))return new Promise(((t,n)=>{const e=()=>{o(),t(c)},r=t=>{o(),n(t)},o=()=>{URL.revokeObjectURL(i),c.removeEventListener("load",e),c.removeEventListener("error",r)};c.addEventListener("load",e),c.addEventListener("error",r),c.src=i}));try{c.src=i,await c.decode()}catch(t){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(i),c}},29540:function(t,n,e){e.d(n,{fetch:function(){return P}});var r=e(38461),o=e(10126),u=e(99574),i=e(96373),c=e(30748),s=e(31865),a=e(10934),f=e(41788),l=e(24910),d=e(82846),h=e(16447),m=e(39909),g=e(81342),p=e(2875),M=e(91426),y=e(32505),b=e(95631),T=e(42869),x=e(917),v=e(80641);class _{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class w{constructor(t,n,e){this.name=t,this.lodThreshold=n,this.pivotOffset=e,this.stageResources=new _,this.numberOfVertices=0}}var S=e(58744),I=e(57716),U=e(81749),E=e(32420),B=e(25952),A=e(28751),O=e(52061),R=e(35720),N=e(18836);async function P(t,n){const c=function(t){const n=t.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return n?{fileType:"gltf",url:n[1],specifiedLodIndex:null!=n[4]?Number(n[4]):null}:t.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:t,specifiedLodIndex:null}:{fileType:"unknown",url:t,specifiedLodIndex:null}}((0,o.pJ)(t));if("wosr"===c.fileType){const t=await(n.cache?n.cache.loadWOSR(c.url,n):(0,S.zD)(c.url,n)),{engineResources:e,referenceBoundingBox:r}=(0,S.p2)(t,n);return{lods:e,referenceBoundingBox:r,isEsriSymbolResource:!1,isWosr:!0}}let _;if(n.cache)_=await n.cache.loadGLTF(c.url,n,!!n.usePBR);else{const{loadGLTF:t}=await e.e(50022).then(e.bind(e,50022));_=await t(new b.C(n.streamDataRequester),c.url,n,n.usePBR)}const P=_.model.meta?.ESRI_proxyEllipsoid,j=_.meta.isEsriSymbolResource&&null!=P&&"EsriRealisticTreesStyle"===_.meta.ESRI_webstyle;j&&!_.customMeta.esriTreeRendering&&(_.customMeta.esriTreeRendering=!0,function(t,n){for(let e=0;e<t.model.lods.length;++e){const o=t.model.lods[e];for(const u of o.parts){const o=u.attributes.normal;if(null==o)return;const i=u.attributes.position,c=i.count,f=(0,d.Ue)(),h=(0,d.Ue)(),m=(0,d.Ue)(),p=new Float32Array(4*c),M=new Float32Array(3*c),y=(0,s.U_)((0,a.Ue)(),u.transform);let b=0,T=0;for(let s=0;s<c;s++){i.getVec(s,h),o.getVec(s,f),(0,l.t)(h,h,u.transform),(0,l.d)(m,h,n.center),(0,l.D)(m,m,n.radius);const c=m[2],a=(0,l.l)(m),d=Math.min(.45+.55*a*a,1)**r.jm;(0,l.D)(m,m,n.radius),null!==y&&(0,l.t)(m,m,y),(0,l.n)(m,m),e+1!==t.model.lods.length&&t.model.lods.length>1&&(0,l.m)(m,m,f,c>-1?.2:Math.min(-4*c-3.8,1)),M[b]=m[0],M[b+1]=m[1],M[b+2]=m[2],b+=3,p[T]=d,p[T+1]=d,p[T+2]=d,p[T+3]=1,T+=4}u.attributes.normal=new g.ct(M),u.attributes.color=new g.ek(p)}}}(_,P));const k=!!n.usePBR,F=_.meta.isEsriSymbolResource?{usePBR:k,isSchematic:!1,treeRendering:j,mrrFactors:N.eP}:{usePBR:k,isSchematic:!1,treeRendering:!1,mrrFactors:N.xq},C={...n.materialParameters,treeRendering:j},{engineResources:L,referenceBoundingBox:W}=function(t,n,e,o,c,s){const a=t.model,l=new Array,d=new Map,b=new Map,_=a.lods.length,S=(0,h.cS)();return a.lods.forEach(((t,P)=>{const j=!0===o.skipHighLods&&(_>1&&0===P||_>3&&1===P)||!1===o.skipHighLods&&null!=c&&P!==c;if(j&&0!==P)return;const k=new w(t.name,t.lodThreshold,[0,0,0]);t.parts.forEach((t=>{const c=j?new R.Gp({},o):function(t,n,e,o,u,i,c,s,a){const l=t.materials.get(n.material);if(null==l)return null;const{normal:d,color:h,texCoord0:m,tangent:g}=n.attributes,p=n.material+(d?"_normal":"")+(h?"_color":"")+(m?"_texCoord0":"")+(g?"_tangent":""),M=null!=n.attributes.texCoord0,y=null!=n.attributes.normal,b=function(t){switch(t){case"BLEND":return E.JJ.Blend;case"MASK":return E.JJ.Mask;case"OPAQUE":case null:case void 0:return E.JJ.Opaque}}(l.alphaMode);if(!i.has(p)){if(M){const n=(n,e=!1,r=!1)=>{if(null!=n&&!c.has(n)){const o=t.textures.get(n);if(o){const t=o.data,u=e&&!(0,x.$A)(t)?s.compressionOptions:void 0;c.set(n,new A.x((0,x.$A)(t)?t.data:t,{...o.parameters,preMultiplyAlpha:!(0,x.$A)(t)&&r,encoding:(0,x.$A)(t)?t.encoding:void 0,compressionOptions:u}))}}},e=b!==E.JJ.Opaque&&!a;n(l.colorTexture,e,b!==E.JJ.Opaque),n(l.normalTexture),n(l.occlusionTexture,!0),n(l.emissiveTexture),n(l.metallicRoughnessTexture,!0)}const e=1/r.jm,d=l.color[0]**e,h=l.color[1]**e,m=l.color[2]**e,g=l.emissiveFactor[0]**e,T=l.emissiveFactor[1]**e,_=l.emissiveFactor[2]**e,w=null!=l.colorTexture&&M?c.get(l.colorTexture):null,S=(0,N.Ih)(l),U=null!=l.normalTextureTransform?.scale?l.normalTextureTransform?.scale:f.hq;i.set(p,new R.Gp({...o,customDepthTest:E.Gv.Lequal,textureAlphaMode:b,textureAlphaCutoff:l.alphaCutoff,diffuse:[d,h,m],ambient:[d,h,m],opacity:"OPAQUE"===l.alphaMode?1:l.opacity,doubleSided:l.doubleSided,doubleSidedType:"winding-order",cullFace:l.doubleSided?E.Vr.None:E.Vr.Back,hasVertexColors:!!n.attributes.color,hasVertexTangents:!!n.attributes.tangent,normalType:y?I.r.Attribute:I.r.ScreenDerivative,castShadows:!0,receiveShadows:l.receiveShadows,receiveAmbientOcclusion:l.receiveAmbientOcclusion,textureId:null!=w?w.id:void 0,colorMixMode:l.colorMixMode,normalTextureId:null!=l.normalTexture&&M?c.get(l.normalTexture).id:void 0,textureAlphaPremultiplied:null!=w&&!!w.parameters.preMultiplyAlpha,occlusionTextureId:null!=l.occlusionTexture&&M?c.get(l.occlusionTexture).id:void 0,emissiveTextureId:null!=l.emissiveTexture&&M?c.get(l.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=l.metallicRoughnessTexture&&M?c.get(l.metallicRoughnessTexture).id:void 0,emissiveBaseColor:[g,T,_],mrrFactors:S?N.S7:[l.metallicFactor,l.roughnessFactor,o.mrrFactors[2]],isSchematic:S,colorTextureTransformMatrix:(0,v.i)(l.colorTextureTransform),normalTextureTransformMatrix:(0,v.i)(l.normalTextureTransform),scale:[U[0],U[1]],occlusionTextureTransformMatrix:(0,v.i)(l.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,v.i)(l.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,v.i)(l.metallicRoughnessTextureTransform),...u},s))}const T=i.get(p);if(e.stageResources.materials.push(T),M){const t=t=>{null!=t&&e.stageResources.textures.push(c.get(t))};t(l.colorTexture),t(l.normalTexture),t(l.occlusionTexture),t(l.emissiveTexture),t(l.metallicRoughnessTexture)}return T}(a,t,k,n,e,d,b,o,s),{geometry:l,vertexCount:_}=function(t,n){const e=t.attributes.position.count,r=(0,T.p)(t.indices||e,t.primitiveType),o=(0,m.xx)(3*e),{typedBuffer:c,typedBufferStride:s}=t.attributes.position;(0,p.t)(o,c,t.transform,3,s);const a=[[O.T.POSITION,new U.a(o,r,3,!0)]];if(null!=t.attributes.normal){const n=(0,m.xx)(3*e),{typedBuffer:o,typedBufferStride:c}=t.attributes.normal;(0,i.XL)(q,t.transform),(0,p.b)(n,o,q,3,c),(0,u.oc)(q)&&(0,p.n)(n,n),a.push([O.T.NORMAL,new U.a(n,r,3,!0)])}if(null!=t.attributes.tangent){const n=(0,m.xx)(4*e),{typedBuffer:o,typedBufferStride:c}=t.attributes.tangent;(0,i.xO)(q,t.transform),(0,M.t)(n,o,q,4,c),(0,u.oc)(q)&&(0,p.n)(n,n,4),a.push([O.T.TANGENT,new U.a(n,r,4,!0)])}if(null!=t.attributes.texCoord0){const n=(0,m.xx)(2*e),{typedBuffer:o,typedBufferStride:u}=t.attributes.texCoord0;(0,y.a)(n,o,2,u),a.push([O.T.UV0,new U.a(n,r,2,!0)])}const f=t.attributes.color;if(null!=f){const n=new Uint8Array(4*e);4===f.elementCount?f instanceof g.ek?(0,M.b)(n,f,1,255):(f instanceof g.mc||f instanceof g.v6)&&(0,M.b)(n,f,1/255,255):(n.fill(255),f instanceof g.ct?(0,p.f)(n,f.typedBuffer,1,255,4,f.typedBufferStride):(t.attributes.color instanceof g.ne||t.attributes.color instanceof g.mw)&&(0,p.f)(n,f.typedBuffer,1/255,255,4,t.attributes.color.typedBufferStride)),a.push([O.T.COLOR,new U.a(n,r,4,!0)])}return{geometry:new B.Z(n,a),vertexCount:e}}(t,c??new R.Gp({},o)),w=l.boundingInfo;null!=w&&0===P&&((0,h.pp)(S,w.bbMin),(0,h.pp)(S,w.bbMax)),null!=c&&(k.stageResources.geometries.push(l),k.numberOfVertices+=_)})),j||l.push(k)})),{engineResources:l,referenceBoundingBox:S}}(_,F,C,n,c.specifiedLodIndex,j);return{lods:L,referenceBoundingBox:W,isEsriSymbolResource:_.meta.isEsriSymbolResource,isWosr:!1}}const q=(0,c.Ue)()},58744:function(t,n,e){e.d(n,{p2:function(){return U},zD:function(){return w}});var r=e(78619),o=e(29292),u=e(88194),i=e(96711),c=e(85881),s=e(61544),a=e(93568),f=e(15322),l=e(82846),d=e(16447),h=e(38766),m=e(51880),g=e(81749),p=e(32420),M=e(25952),y=e(28751),b=e(52061),T=e(35720),x=e(65650);const v=()=>i.Z.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");class _{constructor(t,n,e){this.resource=t,this.textures=n,this.cachedMemory=e}}async function w(t,n){const e=await async function(t,n){const e=n?.streamDataRequester;if(e)return async function(t,n,e){const r=await(0,o.q6)(n.request(t,"json",e));if(!0===r.ok)return r.value;(0,a.r9)(r.error),S(r.error.details.url)}(t,e,n);const u=await(0,o.q6)((0,r.Z)(t,n));if(!0===u.ok)return u.value.data;(0,a.r9)(u.error),S(u.error)}(t,n),u=await async function(t,n){const e=new Array;for(const r in t){const o=t[r],u=o.images[0].data;if(!u){v().warn("Externally referenced texture data is not yet supported");continue}const i=o.encoding+";base64,"+u,c="/textureDefinitions/"+r,s="rgba"===o.channels?o.alphaChannelUsage||"transparency":"none",a={noUnpackFlip:!0,wrap:{s:x.e8.REPEAT,t:x.e8.REPEAT},preMultiplyAlpha:B(s)!==p.JJ.Opaque},f=n?.disableTextures?Promise.resolve(null):(0,m.t)(i,n);e.push(f.then((t=>({refId:c,image:t,parameters:a,alphaChannelUsage:s}))))}const r=await Promise.all(e),o={};for(const t of r)o[t.refId]=t;return o}(e.textureDefinitions??{},n);let i=0;for(const t in u)if(u.hasOwnProperty(t)){const n=u[t];i+=n?.image?n.image.width*n.image.height*4:0}return new _(e,u,i+(0,c.kk)(e))}function S(t){throw new u.Z("",`Request for object resource failed: ${t}`)}function I(t){const n=t.params,e=n.topology;let r=!0;switch(n.vertexAttributes||(v().warn("Geometry must specify vertex attributes"),r=!1),n.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const t=n.faces;if(t){if(n.vertexAttributes)for(const e in n.vertexAttributes){const n=t[e];n?.values?(null!=n.valueType&&"UInt32"!==n.valueType&&(v().warn(`Unsupported indexed geometry indices type '${n.valueType}', only UInt32 is currently supported`),r=!1),null!=n.valuesPerElement&&1!==n.valuesPerElement&&(v().warn(`Unsupported indexed geometry values per element '${n.valuesPerElement}', only 1 is currently supported`),r=!1)):(v().warn(`Indexed geometry does not specify face indices for '${e}' attribute`),r=!1)}}else v().warn("Indexed geometries must specify faces"),r=!1;break}default:v().warn(`Unsupported topology '${e}'`),r=!1}t.params.material||(v().warn("Geometry requires material"),r=!1);const o=t.params.vertexAttributes;for(const t in o)o[t].values||(v().warn("Geometries with externally defined attributes are not yet supported"),r=!1);return r}function U(t,n){const e=new Array,r=new Array,o=new Array,u=new s.r,i=t.resource,c=f.G.parse(i.version||"1.0","wosr");O.validate(c);const a=i.model.name,d=i.model.geometries,m=i.materialDefinitions??{},x=t.textures;let v=0;const _=new Map;for(let t=0;t<d.length;t++){const i=d[t];if(!I(i))continue;const c=A(i),s=i.params.vertexAttributes,a=[],f=t=>{if("PerAttributeArray"===i.params.topology)return null;const n=i.params.faces;for(const e in n)if(e===t)return n[e].values;return null},w=s[b.T.POSITION],S=w.values.length/w.valuesPerElement;for(const t in s){const n=s[t],e=n.values,r=f(t)??(0,h.KF)(S);a.push([t,new g.a(e,r,n.valuesPerElement,!0)])}const U=c.texture,E=x&&x[U];if(E&&!_.has(U)){const{image:t,parameters:n}=E,e=new y.x(t,n);r.push(e),_.set(U,e)}const O=_.get(U),R=O?O.id:void 0,N=c.material;let P=u.get(N,U);if(null==P){const t=m[N.slice(N.lastIndexOf("/")+1)].params;1===t.transparency&&(t.transparency=0);const e=E?B(E.alphaChannelUsage):void 0,r={ambient:(0,l.nI)(t.diffuse),diffuse:(0,l.nI)(t.diffuse),opacity:1-(t.transparency||0),textureAlphaMode:e,textureAlphaCutoff:.33,textureId:R,doubleSided:!0,cullFace:p.Vr.None,colorMixMode:t.externalColorMixMode||"tint",textureAlphaPremultiplied:E?.parameters.preMultiplyAlpha??!1};n?.materialParameters&&Object.assign(r,n.materialParameters),P=new T.Gp(r,n),u.set(N,U,P)}o.push(P);const q=new M.Z(P,a);v+=a.find((t=>t[0]===b.T.POSITION))?.[1]?.indices.length??0,e.push(q)}return{engineResources:[{name:a,stageResources:{textures:r,materials:o,geometries:e},pivotOffset:i.model.pivotOffset,numberOfVertices:v,lodThreshold:null}],referenceBoundingBox:E(e)}}function E(t){const n=(0,d.cS)();return t.forEach((t=>{const e=t.boundingInfo;null!=e&&((0,d.pp)(n,e.bbMin),(0,d.pp)(n,e.bbMax))})),n}function B(t){switch(t){case"mask":return p.JJ.Mask;case"maskAndTransparency":return p.JJ.MaskBlend;case"none":return p.JJ.Opaque;default:return p.JJ.Blend}}function A(t){const n=t.params;return{id:1,material:n.material,texture:n.texture,region:n.texture}}const O=new f.G(1,2,"wosr")},22365:function(t,n,e){e.d(n,{$U:function(){return p},EU:function(){return h},T:function(){return s},ZA:function(){return l},_F:function(){return a},bX:function(){return f},ek:function(){return d},mw:function(){return c},pG:function(){return g},u1:function(){return i},uV:function(){return m}});var r=e(99574),o=e(24910),u=e(82846);function i(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function c(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),r=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),u=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,o.i)(t,e,r,u),t}function s(t,n,e){e=e||t;const r=(0,o.e)(t,n);(0,o.i)(e,t[0]-r*n[0],t[1]-r*n[1],t[2]-r*n[2]),(0,o.n)(e,e)}function a(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,o.i)(n,0,1,0):(0,o.i)(n,1,0,0),(0,o.h)(e,t,n),(0,o.h)(n,e,t),(0,o.n)(e,e),(0,o.n)(n,n)}function f(t,n,e,r,o,u){const i=t+(n-t)*o;return i+(e+(r-e)*o-i)*u}function l(t,n,e,r=(0,u.Ue)()){const i=(0,o.l)(t),c=(0,o.l)(n),s=(0,o.e)(t,n)/(i*c);if(s<.9999999999999999){const u=Math.acos(s),a=((1-e)*i+e*c)/Math.sin(u),f=a/i*Math.sin((1-e)*u),l=a/c*Math.sin(e*u);return(0,o.g)(T,t,f),(0,o.g)(x,n,l),(0,o.f)(r,T,x)}return(0,o.m)(r,t,n,e)}function d(t,n,e,r=(0,u.Ue)(),i=(0,u.Ue)()){const c=(0,o.l)(t),s=(0,o.l)(n),a=(0,o.e)(t,n)/(c*s);if(a<.9999999999999999){const u=Math.acos(a),f=Math.sin(u),l=Math.sin(e*u),d=Math.sin((1-e)*u),h=(1-e)*c+e*s;{const e=h/f,u=e/s*l;(0,o.g)(T,t,e/c*d),(0,o.g)(x,n,u),(0,o.f)(r,T,x)}{const r=1/c*(-Math.cos((1-e)*u)*u*h+d*(-c+s));(0,o.g)(T,t,r);const a=1/s*(Math.cos(e*u)*u*h+l*(-c+s));(0,o.g)(x,n,a),(0,o.f)(i,T,x),(0,o.g)(i,i,1/f)}return i}return(0,o.m)(r,t,n,e),(0,o.d)(i,n,t),(0,o.n)(i,i),i}function h(t,n,e){t=(0,o.n)(T,t),n=(0,o.n)(x,n);const u=(0,r.ZF)((0,o.e)(t,n));if(e){const r=(0,o.h)(b,t,n);if((0,o.e)(r,e)<0)return-u}return u}function m(t){const n=t.length;return e=>{if(e<=t[0][0])return t[0][1];if(e>=t[n-1][0])return t[n-1][1];let r=1;for(;e>t[r][0];)r++;const o=t[r-1][0],u=t[r][0],i=(u-e)/(u-o);return i*t[r-1][1]+(1-i)*t[r][1]}}function g(t,n,e,r){(0,o.d)(M,n,t),(0,o.d)(y,e,t),(0,o.h)(r,M,y),(0,o.n)(r,r),r[3]=-(0,o.e)(t,r)}function p(t,n){if((0,o.i)(n,0,0,0),t.length>0){for(let e=0;e<t.length;++e)(0,o.f)(n,n,t[e]);(0,o.g)(n,n,1/t.length)}}const M=(0,u.Ue)(),y=(0,u.Ue)(),b=(0,u.Ue)(),T=(0,u.Ue)(),x=(0,u.Ue)()}}]);