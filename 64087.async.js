"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[64087,76873,81066,70885],{7196:function(t,e,n){n.d(e,{O:function(){return l}});var r=n(73440),s=n(81066),i=n(10057),a=n(11894),o=n(60988),u=n(9519),c=n(95016);class l{getOperatorType(){return 10204}supportsCurves(){return!0}accelerateGeometry(t,e,n){return!1}canAccelerateGeometry(t){return!1}executeMany(t,e,n,r){return new m(t,e,n,r)}execute(t,e,n,r){return t||(0,i.a)("null param is not allowed."),new m(null,e,n,r).generalize(t)}}class m extends s.G{constructor(t,e,n,r){super(),this.m_pline=null,this.m_point=new o.P,this.m_stack=[],this.m_resultstack=[],this.m_callCount=0,this.m_progressTracker=r,this.m_geoms=t,this.m_maxDeviation=e,this.m_bRemoveDegenerateParts=n}tock(){return!0}getRank(){return 1}next(){const t=this.m_geoms.next();return null===t?null:((0,i.c)(t),this.generalize(t))}getGeometryID(){return this.m_geoms.getGeometryID()}generalize(t){const e=t.getGeometryType();if((0,i.e)(e))return t;if(e===i.G.enumEnvelope){const e=new a.a({vd:t.getDescription()});return e.addEnvelope(t,!1),this.generalize(e)}if((0,i.f)(e)){const e=new a.P({vd:t.getDescription()});return e.addSegment(t,!0),this.generalize(e)}if((0,i.h)(e)||(0,i.t)(""),t.isEmpty()||this.m_maxDeviation<=0)return t;const n=(new c.O).execute(t,0,.05*this.m_maxDeviation,0,this.m_progressTracker);t.hasNonLinearSegments()&&(this.m_maxDeviation*=.95);const s=n,o=t.createInstance();o.getGeometryType()===i.G.enumPolygon&&o.setFillRule(t.getFillRule()),this.m_xy=s.getAttributeStreamRef(0);{const t={stack:[],error:void 0,hasError:!1};try{const e=new a.L;this.m_pline=e,(0,r.b)(t,(0,u.h)((()=>{this.m_pline=null}),!1),!1);for(let t=0,e=s.getPathCount();t<e;t++)this.generalizePath(s.getImpl(),t,o.getImpl())}catch(e){t.error=e,t.hasError=!0}finally{(0,r.c)(t)}}return this.m_resultstack.length=0,this.m_stack.length=0,o}generalizePath(t,e,n){if(t.getPathSize(e)<2)return;this.m_resultstack.length=0,this.m_stack.length=0;const r=t.getPathStart(e),s=t.getPathEnd(e)-1,i=t.isClosedPath(e),a=t.isClosedPathInXYPlane(e);let o=0,c=-1;this.m_stack.push(i?r:s),this.m_stack.push(r);let l=!1,m=!1;for(!this.m_bRemoveDegenerateParts&&a&&(l=!0,m=!0);this.m_stack.length>1;){const e=this.m_stack.at(-1);this.m_stack.pop();const n=this.m_stack.at(-1);let r=t.getXY(e);this.m_pline.setStartXY(r),r=t.getXY(n),this.m_pline.setEndXY(r);const i=[Number.NaN];let a=this.findGreatestDistance(e,n,s,i);a>=0&&(l?l=!1:(m&&i[0]>o&&(o=i[0],c=a),i[0]<=this.m_maxDeviation&&(a=-1))),a>=0?(this.m_stack.push(a),this.m_stack.push(e)):this.m_resultstack.push(e)}i||this.m_resultstack.push(this.m_stack[0]);const h=this.m_resultstack.length;if(h===t.getPathSize(e)&&h===this.m_stack.length)n.addPath(t,e,!0);else if(this.m_resultstack.length>0){if(this.m_bRemoveDegenerateParts&&this.m_resultstack.length<=2){if(i||1===this.m_resultstack.length)return;if(u.P.distance(t.getXY(this.m_resultstack[0]),t.getXY(this.m_resultstack[1]))<=this.m_maxDeviation)return}if(m&&c>=0&&o<=this.m_maxDeviation){const t=this.m_resultstack.at(-1)>c;this.m_resultstack.push(c),t&&(this.m_resultstack[this.m_resultstack.length-2]=(0,u.c)(this.m_resultstack[this.m_resultstack.length-1],this.m_resultstack[this.m_resultstack.length-1]=this.m_resultstack[this.m_resultstack.length-2]))}for(let e=0,r=this.m_resultstack.length;e<r;e++)t.getPointByVal(this.m_resultstack[e],this.m_point),0===e?n.startPathPoint(this.m_point):n.lineToPoint(this.m_point);if(i){for(let t=this.m_resultstack.length;t<3;t++)n.lineToPoint(this.m_point);n.closePathWithLine()}}}findGreatestDistance(t,e,n,r){let s=e-1;e<=t&&(s=n);let i=-1,a=0;const o=new u.P;for(let e=t+1;e<=s;e++){this.m_xy.queryPoint2D(2*e,o);const t=o.x,n=o.y,r=this.m_pline.getClosestCoordinate(o,!1);o.assign(this.m_pline.getCoord2D(r)),o.x-=t,o.y-=n;const s=o.length();s>a&&(i=e,a=s),this.m_callCount++}return r[0]=a,i}}},81066:function(t,e,n){n.d(e,{G:function(){return r},S:function(){return s}});class r{*[Symbol.iterator](){let t=this.next();for(;t;)yield t,t=this.next()}}class s extends r{constructor(t){super(),this.m_iGeom=-1,this.m_aGeoms=t?t.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const t=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,t}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}},30783:function(t,e,n){n.d(e,{a:function(){return u},e:function(){return o},g:function(){return l},s:function(){return c}});var r=n(3480),s=n(26636),i=n(84688),a=n(40472);function o(t,e,n={}){const{removeDegenerateParts:r=!1,unit:o}=n,u=(0,a.getSpatialReference)(t);return o&&(e=(0,s.nC)(e,o,u)),(0,a.toGeometry)((0,i.ht)((0,a.fromGeometry)(t),e,r),u)}function u(t,e,n={}){const{removeDegenerateParts:o=!1,unit:u}=n,c=t.map(a.fromGeometry),l=(0,a.getSpatialReference)(t);return u&&(e=(0,s.nC)(e,u,l)),(0,i.XR)(c,e,o).map((t=>(0,a.toGeometry)(t,l))).filter(r.pC)}const c=(0,i.dE)(),l=Object.freeze(Object.defineProperty({__proto__:null,execute:o,executeMany:u,supportsCurves:c},Symbol.toStringTag,{value:"Module"}))},64087:function(t,e,n){n.r(e),n.d(e,{execute:function(){return r.e},executeMany:function(){return r.a},supportsCurves:function(){return r.s}});n(3480),n(26636),n(84688),n(40472);var r=n(30783)},84688:function(t,e,n){n.d(e,{XR:function(){return a},dE:function(){return o},ht:function(){return i}});var r=n(81066);const s=new(n(7196).O);function i(t,e,n){return s.execute(t,e,n,null)}function a(t,e,n){const i=s.executeMany(new r.S(t),e,n,null);return Array.from(i)}function o(){return s.supportsCurves()}},40472:function(t,e,n){n.r(e),n.d(e,{fromExtent:function(){return y},fromGeometry:function(){return _},fromMultipoint:function(){return k},fromPoint:function(){return x},fromPolygon:function(){return P},fromPolyline:function(){return G},fromSpatialReference:function(){return d},getSpatialReference:function(){return p},toExtent:function(){return v},toGeometry:function(){return C},toMultipoint:function(){return w},toPoint:function(){return M},toPolygon:function(){return D},toPolyline:function(){return R}});var r=n(9519),s=(n(64699),n(10057)),i=n(60988),a=n(11894),o=n(65513),u=n(71354),c=n(82868),l=n(60508),m=n(67764),h=n(62197),f=(n(77245),n(56870));const g="_gxVersion";function p(t){return Array.isArray(t)?t[0].spatialReference:t.spatialReference}function _(t){switch(t.type){case"point":return x(t);case"multipoint":return k(t);case"polyline":return G(t);case"polygon":return P(t);case"extent":return y(t);default:throw new Error(`Unsupported geometry type: ${t.type}`)}}function y(t){if(!t.getCacheValue(g)){const e=new i.E;e.setCoords(t.xmin,t.ymin,t.xmax,t.ymax),t.hasM&&e.setInterval(2,0,t.mmin,t.mmax),t.hasZ&&e.setInterval(1,0,t.zmin,t.zmax),t.setCacheValue(g,e)}return t.getCacheValue(g)}function k(t){if(!t.getCacheValue(g)){const e=new a.M,n=new i.P,r=t.points,s=t.hasM,o=t.hasZ,u=o?3:2;for(let t=0,i=r.length;t<i;t++){const i=r[t];n.setXYCoords(i[0],i[1]),o&&n.setZ(i[2]??0),s&&n.setM(i[u]??NaN),e.add(n)}t.setCacheValue(g,e)}return t.getCacheValue(g)}function x(t){if(!t.getCacheValue(g)){const e=new i.P;e.setXYCoords(t.x,t.y),t.hasM&&e.setM(t.m),t.hasZ&&e.setZ(t.z),t.setCacheValue(g,e)}return t.getCacheValue(g)}function P(t){if(!t.getCacheValue(g)){const{curveRings:e,hasM:n,hasZ:r,rings:s}=t,i=(0,f.fromGeometryToGXGeometry)({curveRings:e,hasM:n,hasZ:r,rings:s});t.setCacheValue(g,i)}return t.getCacheValue(g)}function G(t){if(!t.getCacheValue(g)){const{curvePaths:e,hasM:n,hasZ:r,paths:s}=t,i=(0,f.fromGeometryToGXGeometry)({curvePaths:e,hasM:n,hasZ:r,paths:s});t.setCacheValue(g,i)}return t.getCacheValue(g)}function d(t){if(t.wkid)return(0,o.c)(t.wkid);const e=t.wkt2||t.wkt;return e?(0,o.a)(e):null}function C(t,e){if(t)switch(t.getGeometryType()){case s.G.enumPoint:return M(t,e);case s.G.enumEnvelope:return v(t,e);case s.G.enumMultiPoint:return w(t,e);case s.G.enumPolyline:return R(t,e);case s.G.enumPolygon:return D(t,e)}return null}function v(t,e){if(t.isEmpty())return null;const n=new u.Z({xmin:t.getXMin(),ymin:t.getYMin(),xmax:t.getXMax(),ymax:t.getYMax(),spatialReference:e}),r=t.getDescription();if(r.hasM()){const e=t.queryInterval(2,0);n.mmin=e.vmin,n.mmax=e.vmax}if(r.hasZ()){const e=t.queryInterval(1,0);n.zmin=e.vmin,n.zmax=e.vmax}return n.setCacheValue(g,t),n}function w(t,e){if(t.isEmpty())return null;const n=t.getDescription(),r=n.hasM(),s=n.hasZ(),a=[],o=new i.P;for(let e=0,n=t.getPointCount();e<n;e++){t.getPointByVal(e,o);const n=[o.getX(),o.getY()];s&&n.push(o.getZ()),r&&n.push(o.getM()),a.push(n)}const u=new c.Z({hasM:r,hasZ:s,points:a,spatialReference:e});return u.setCacheValue(g,t),u}function M(t,e){if(t instanceof r.P)return new l.Z({x:t.x,y:t.y,spatialReference:e});if(t.isEmpty())return null;const n=new l.Z({x:t.getX(),y:t.getY(),spatialReference:e}),s=t.getDescription();return s.hasM()&&(n.m=t.getM()),s.hasZ()&&(n.z=t.getZ()),n.setCacheValue(g,t),n}function D(t,e){if(t.isEmpty())return null;const n=m.Z.fromJSON({spatialReference:e,...(0,f.toGeometry)(t,null)});return n.setCacheValue(g,t),n}function R(t,e){if(t.isEmpty())return null;const n=h.Z.fromJSON({spatialReference:e,...(0,f.toGeometry)(t,null)});return n.setCacheValue(g,t),n}}}]);