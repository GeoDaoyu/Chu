"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[86337],{9283:function(e,t,n){n.d(t,{$A:function(){return h},Bj:function(){return r},FJ:function(){return w},JW:function(){return d},J_:function(){return p},NP:function(){return m},Qk:function(){return T},Sh:function(){return f},T4:function(){return y},US:function(){return S},_U:function(){return F},dj:function(){return i},hd:function(){return _},q2:function(){return b},tI:function(){return g},yE:function(){return v},yJ:function(){return x}});var r,i,o,u=n(11347),l=n(21201),s=n(88633),a=n(49651),c=n(87599);function d(e){return a.Z.fromJSON(e.toJSON())}function f(e){return e.toJSON?e.toJSON():e}function p(e){return e instanceof Date}function y(e){return e instanceof c.ou}function m(e){return e instanceof u.iG}function h(e){return e instanceof l.u}function F(e){return e instanceof s.n}(o=r||(r={}))[o.Standardised=0]="Standardised",o[o.StandardisedNoInterval=1]="StandardisedNoInterval",o[o.SqlServer=2]="SqlServer",o[o.Oracle=3]="Oracle",o[o.Postgres=4]="Postgres",o[o.PGDB=5]="PGDB",o[o.FILEGDB=6]="FILEGDB",o[o.NotEvaluated=7]="NotEvaluated",function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(i||(i={}));const g=1e3;const T={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},b={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},v={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function S(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function _(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){const r={key:t,value:e[t]},o={key:n,value:e[n]};return i(r,o)}});var i;const o=[];return function e(t){if(t?.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let i,u;if(Array.isArray(t)){for(u="[",i=0;i<t.length;i++)i&&(u+=","),u+=e(t[i])||"null";return u+"]"}if(null===t)return"null";if(o.includes(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const l=o.push(t)-1,s=Object.keys(t).sort(r?.(t));for(u="",i=0;i<s.length;i++){const n=s[i],r=e(t[n]);r&&(u&&(u+=","),u+=JSON.stringify(n)+":"+r)}return o.splice(l,1),"{"+u+"}"}(e)}function w(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function x(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return w(e)}}},28960:function(e,t,n){n.d(t,{A4:function(){return o},L9:function(){return u},yV:function(){return i}});var r=n(87599);class i{static{this.instance=new r.vF("Etc/UTC")}}function o(e){return e instanceof r.ld?e===i.instance:"unknown"===e?.toString().toLowerCase()}function u(e){return o(e)?i.instance:e}},60199:function(e,t,n){n.d(t,{QZ:function(){return o},Rq:function(){return u},bg:function(){return i}});var r=n(59384);function i(e,t=!1){return e<=r.c8?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function o(e){return((0,r.fU)(e)?e.byteLength/8:e.length)<=r.c8?Array.from(e):new Float64Array(e)}function u(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}},16447:function(e,t,n){n.d(t,{BD:function(){return x},Cb:function(){return v},FY:function(){return s},G1:function(){return h},G_:function(){return $},HH:function(){return d},I7:function(){return O},JR:function(){return P},KE:function(){return G},TC:function(){return p},Tn:function(){return J},Ue:function(){return u},VK:function(){return y},Wi:function(){return F},Ye:function(){return b},Zp:function(){return N},al:function(){return l},bA:function(){return D},bM:function(){return z},bZ:function(){return q},be:function(){return _},bf:function(){return T},cS:function(){return A},cv:function(){return Z},dp:function(){return w},eZ:function(){return c},fS:function(){return L},gy:function(){return B},is:function(){return E},kK:function(){return M},nX:function(){return f},op:function(){return V},pp:function(){return m},r3:function(){return I},re:function(){return k},sU:function(){return g},t8:function(){return C},wp:function(){return R},wq:function(){return a},wz:function(){return S},y8:function(){return j}});var r=n(71354),i=n(47566),o=n(60199);function u(e=z){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function l(e,t,n,r,i,o,l=u()){return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l}function s(e,t=u()){return a(e,0,e.length/3,t)}function a(e,t,n,r=u()){return C(r,$),h(r,e,t,n),r}function c(e,t=(0,o.bg)(24)){const[n,r,i,u,l,s]=e;return t[0]=n,t[1]=r,t[2]=i,t[3]=n,t[4]=r,t[5]=s,t[6]=n,t[7]=l,t[8]=i,t[9]=n,t[10]=l,t[11]=s,t[12]=u,t[13]=r,t[14]=i,t[15]=u,t[16]=r,t[17]=s,t[18]=u,t[19]=l,t[20]=i,t[21]=u,t[22]=l,t[23]=s,t}function d(e,t){const n=isFinite(e[2])||isFinite(e[5]);return new r.Z(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function f(e,t,n=u()){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=t[0],n[4]=t[1],n[5]=t[2],n}function p(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function y(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function m(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function h(e,t,n=0,r=t.length/3){let i=e[0],o=e[1],u=e[2],l=e[3],s=e[4],a=e[5];for(let e=0;e<r;e++)i=Math.min(i,t[n+3*e]),o=Math.min(o,t[n+3*e+1]),u=Math.min(u,t[n+3*e+2]),l=Math.max(l,t[n+3*e]),s=Math.max(s,t[n+3*e+1]),a=Math.max(a,t[n+3*e+2]);e[0]=i,e[1]=o,e[2]=u,e[3]=l,e[4]=s,e[5]=a}function F(e,t,n){const r=t.length;let i=e[0],o=e[1],u=e[2],l=e[3],s=e[4],a=e[5];if(n)for(let e=0;e<r;e++){const n=t[e];i=Math.min(i,n[0]),o=Math.min(o,n[1]),u=Math.min(u,n[2]),l=Math.max(l,n[0]),s=Math.max(s,n[1]),a=Math.max(a,n[2])}else for(let e=0;e<r;e++){const n=t[e];i=Math.min(i,n[0]),o=Math.min(o,n[1]),l=Math.max(l,n[0]),s=Math.max(s,n[1])}e[0]=i,e[1]=o,e[2]=u,e[3]=l,e[4]=s,e[5]=a}function g(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function T(e){return e[0]>=e[3]?0:e[3]-e[0]}function b(e){return e[1]>=e[4]?0:e[4]-e[1]}function v(e){return e[2]>=e[5]?0:e[5]-e[2]}function S(e){const t=T(e),n=v(e),r=b(e);return Math.sqrt(t*t+n*n+r*r)}function _(e,t=[0,0,0]){return t[0]=e[0]+T(e)/2,t[1]=e[1]+b(e)/2,t[2]=e[2]+v(e)/2,t}function w(e,t=[0,0,0]){return t[0]=T(e),t[1]=b(e),t[2]=v(e),t}function x(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function I(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]}function M(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function N(e,t){return null==t||M(e,t)}function O(e,t,n){let r=0,i=1;for(let o=0;o<3;++o){const u=e[o],l=e[o+3],s=t[o],a=n[o],c=a<s,d=c?a:s,f=c?s:a,p=Math.max(u,d),y=Math.min(l,f);if(p>y)return!1;if(f===d)break;const m=f-d,h=(p-d)/m,F=(y-d)/m;if(r=Math.max(r,c?1-F:h),i=Math.min(i,c?1-h:F),r>i)return!1}return!0}function Z(e,t,n,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i}function D(e,t,n=e){const r=e[0]+T(e)/2,i=e[1]+b(e)/2,o=e[2]+v(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=o+(e[2]-o)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=o+(e[5]-o)*t,n}function G(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function V(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function J(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function C(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function A(e){return e?C(e,$):u($)}function j(e,t){return t||(t=(0,i.Ue)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function P(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function q(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=i,e[5]=Number.POSITIVE_INFINITY,e}function E(e){return 6===e.length}function R(e){return 0===T(e)&&0===b(e)&&0===v(e)}function L(e,t,n){if(null==e||null==t)return e===t;if(!E(e)||!E(t))return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function k(e,t,n,r,i,o){return l(e,t,n,r,i,o,U)}const B=[-1/0,-1/0,-1/0,1/0,1/0,1/0],$=[1/0,1/0,1/0,-1/0,-1/0,-1/0],z=[0,0,0,0,0,0],U=u()},15083:function(e,t,n){function r(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const n=[];for(const r of t.fieldNames)n.push(e.attributes[r]??null);return JSON.stringify(n)}}}function i(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const n=t.uniqueIdFields.map((t=>e.attributes?.[t]));return JSON.stringify(n)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}n.d(t,{C:function(){return r},v:function(){return i}})},41964:function(e,t,n){n.d(t,{u:function(){return s}});var r,i=n(73440),o=n(63255),u=n(17155),l=(n(61432),n(96711),n(83850),n(48023));let s=r=class extends o.Z{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,i._)([(0,u.Cb)({type:String,json:{write:{isRequired:!0}}})],s.prototype,"name",void 0),(0,i._)([(0,u.Cb)({type:[String,Number],json:{write:{isRequired:!0}}})],s.prototype,"code",void 0),s=r=(0,i._)([(0,l.j)("esri.layers.support.CodedValue")],s)},37127:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(73440),o=n(28947),u=n(17155),l=(n(61432),n(96711),n(79775)),s=n(48023),a=n(41964),c=n(85853);let d=class extends c.Z{static{r=this}constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new r({codedValues:(0,o.d9)(this.codedValues),name:this.name})}};(0,i._)([(0,u.Cb)({type:[a.u],json:{write:{isRequired:!0}}})],d.prototype,"codedValues",void 0),(0,i._)([(0,l.J)({codedValue:"coded-value"})],d.prototype,"type",void 0),d=r=(0,i._)([(0,s.j)("esri.layers.support.CodedValueDomain")],d)},85853:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(73440),i=n(41773),o=n(63255),u=n(17155),l=(n(61432),n(96711),n(83850),n(79775)),s=n(48023);const a=new i.X({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends o.Z{constructor(e){super(e),this.name=null,this.type=null}};(0,r._)([(0,u.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,l.J)(a),(0,u.Cb)({json:{write:{isRequired:!0}}})],c.prototype,"type",void 0),c=(0,r._)([(0,s.j)("esri.layers.support.Domain")],c)},49651:function(e,t,n){n.d(t,{Z:function(){return m}});var r,i=n(73440),o=n(41773),u=n(63255),l=n(17155),s=n(95226),a=(n(61432),n(83850),n(79775)),c=n(1194),d=n(48023),f=n(76746),p=n(72396);const y=new o.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m=class extends u.Z{static{r=this}constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?.value??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?y.fromJSON(n.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,i._)([(0,l.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,i._)([(0,l.Cb)()],m.prototype,"description",void 0),(0,i._)([(0,c.r)("description")],m.prototype,"readDescription",null),(0,i._)([(0,l.Cb)({types:f.V5,json:{read:{reader:f.im},write:!0}})],m.prototype,"domain",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,i._)([(0,l.Cb)({type:s.z8,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],m.prototype,"length",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,i._)([(0,a.J)(p.v)],m.prototype,"type",void 0),(0,i._)([(0,l.Cb)()],m.prototype,"valueType",void 0),(0,i._)([(0,c.r)("valueType",["description"])],m.prototype,"readValueType",null),(0,i._)([(0,l.Cb)({type:Boolean,json:{read:!1}})],m.prototype,"visible",void 0),m=r=(0,i._)([(0,d.j)("esri.layers.support.Field")],m)},299:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(88194),i=n(96711),o=n(79577),u=n(28960),l=n(69306),s=n(76554),a=n(41801),c=n(88097),d=n(87599);const f=new Map;class p{static fromJSON(e){return new p(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new p(e.fields??[],F(e))}static fromLayerJSON(e){return new p(e.fields??[],F(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const n=[];for(const e of this.fields){const t=e?.name,r=m(t);if(t&&r){const i=y(t);this._fieldsMap.set(t,e),this._fieldsMap.set(i,e),this._normalizedFieldsMap.set(r,e),n.push(`${i}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,s.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,s.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,s.Dl)(e)||(0,s.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,s.Dl)(e)||(0,s.Se)(e)||e.nullable||void 0!==(0,s.os)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(m(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(i.Z.getLogger("esri.layers.support.FieldsIndex").errorOnce(new r.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),a.pt):h.has(t.type)?a._4:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===a._4?u.yV.instance:t===a.pt?d.Qf.utcInstance:(0,o.s1)(f,t,(()=>d.vF.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,s.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,l.A)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function m(e){return(0,s.q6)(e)?.toLowerCase()??""}const h=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function F(e){const t=new Map;if(!e.fields)return t;const n=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:i}=e,o=(r?"startField"in r?r.startField:r.startTimeField:"")??"",u=(r?"endField"in r?r.endField:r.endTimeField:"")??"",l=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,c.Jv)(e.dateFieldsTimeReference):null,s=i?function(e){return"timeZone"in e}(i)?i.timeZone??l:i.dateFieldsTimeReference?(0,c.Jv)(i.dateFieldsTimeReference):l??a.pt:null,d=r?function(e){return"timeZone"in e}(r)?r.timeZone??l:r.timeReference?(0,c.Jv)(r.timeReference):l:null,f=new Map([[y(i?.creationDateField??""),s],[y(i?.editDateField??""),s],[y(o),d],[y(u),d]]);for(const{name:r,type:i}of e.fields)if(h.has(i))t.set(r,a._4);else if("date"!==i&&"esriFieldTypeDate"!==i)t.set(r,null);else if(n)t.set(r,a._4);else{const e=f.get(y(r??""))??l;t.set(r,e)}return t}},39502:function(e,t,n){n.d(t,{Z:function(){return s}});var r,i=n(73440),o=(n(96711),n(61432),n(83850),n(88194),n(79775)),u=n(48023),l=n(85853);let s=class extends l.Z{static{r=this}constructor(e){super(e),this.type="inherited"}clone(){return new r}};(0,i._)([(0,o.J)({inherited:"inherited"})],s.prototype,"type",void 0),s=r=(0,i._)([(0,u.j)("esri.layers.support.InheritedDomain")],s)},95951:function(e,t,n){n.d(t,{Z:function(){return a}});var r,i=n(73440),o=n(17155),u=(n(61432),n(96711),n(83850),n(79775)),l=n(48023),s=n(85853);let a=class extends s.Z{static{r=this}constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,i._)([(0,o.Cb)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]},isRequired:!0}}})],a.prototype,"maxValue",void 0),(0,i._)([(0,o.Cb)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]},isRequired:!0}}})],a.prototype,"minValue",void 0),(0,i._)([(0,u.J)({range:"range"})],a.prototype,"type",void 0),a=r=(0,i._)([(0,l.j)("esri.layers.support.RangeDomain")],a)},76746:function(e,t,n){n.d(t,{V5:function(){return l},im:function(){return s}});n(61432);var r=n(37127),i=n(85853),o=n(39502),u=n(95951);const l={key:"type",base:i.Z,typeMap:{range:u.Z,"coded-value":r.Z,inherited:o.Z}};function s(e){if(!e?.type)return null;switch(e.type){case"range":return u.Z.fromJSON(e);case"codedValue":return r.Z.fromJSON(e);case"inherited":return o.Z.fromJSON(e)}return null}},72396:function(e,t,n){n.d(t,{v:function(){return r}});const r=new(n(41773).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},56545:function(e,t,n){n.d(t,{LP:function(){return d},cv:function(){return c},en:function(){return a},lA:function(){return s}});var r=n(81001),i=n(10218),o=n(28947),u=n(95490),l=n(82674);function s(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function a(e){return"string"==typeof e?(0,u.mN)(e):(0,o.d9)(e)}function c(e,t,n){const r={};for(const i in e){if("declaredClass"===i)continue;const o=e[i];if(null!=o&&"function"!=typeof o)if(Array.isArray(o))r[i]=o.map((e=>c(e)));else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(n?.[i]);r[i]=t?e:JSON.stringify(e)}else r[i]=t?o:JSON.stringify(o);else r[i]=o}return r}async function d(e,t,o){const u=function(e,t){return e?t&&(0,l.rU)(e)?t:(0,l.Pi)(e)??i.id?.findCredential(e)?.token:null}(e,t);if(u)return u;!i.id&&r.default.request.useIdentity&&await n.e(39428).then(n.bind(n,39428));return(await i.id.getCredential(e,o))?.token}},26593:function(e,t,n){n.r(t),n.d(t,{Dictionary:function(){return u.Z},Voxel:function(){return y},arcade:function(){return r.h},arcadeFeature:function(){return l.Z},convertFeatureLayerToFeatureSet:function(){return E},convertJsonToArcade:function(){return L},convertMapToFeatureSetCollection:function(){return R},convertServiceUrlToWorkspace:function(){return q},createExecContext:function(){return N},createFeature:function(){return O},createFunction:function(){return M},createSyntaxTree:function(){return I},dependsOnView:function(){return A},enableFeatureSetOperations:function(){return $},enableGeometryOperations:function(){return B},evalSyntaxTree:function(){return D},executeAsyncFunction:function(){return V},executeFunction:function(){return G},extractFieldNames:function(){return C},getArcadeType:function(){return x},getViewInfo:function(){return P},hasGeometryFunctions:function(){return X},hasGeometryOperations:function(){return Y},hasVariable:function(){return j},loadScriptDependencies:function(){return k},updateExecContext:function(){return Z}});var r=n(85954),i=n(11347),o=n(79793),u=n(92530),l=n(25112),s=n(67161),a=n(12122),c=n(92052),d=n(43462);const f="Voxel.Position",p="Voxel.LocalTime";class y{constructor(e,t){this._graphic=e,this._timeZone=t,this.arcadeDeclaredClass="esri.arcade.Voxel",this._layer=e.sourceLayer}getPosition(){return void 0!==this._position?this._position:this._position=function(e){const t=e.getAttribute(f);if("string"!=typeof t)throw new a.aV(null,a.rH.InvalidParameter,null);const n=JSON.parse(t);if(!Array.isArray(n)||"number"!=typeof n[0]||"number"!=typeof n[1]||"number"!=typeof n[2])throw new a.aV(null,a.rH.InvalidParameter,null);return new c.Z(n)}(this._graphic)}getLocalTime(){return void 0!==this._localTime?this._localTime:this._localTime=function(e,t){const n=e.getAttribute(p);if(null==n)return null;if(!(0,d.J_)(n))throw new a.aV(null,a.rH.InvalidParameter,null);return i.iG.dateJSAndZoneToArcadeDate(n,t)}(this._graphic,this._timeZone??"system")}keys(){return this._layer.fields.map((e=>e.name)).sort()}hasField(e){return this._layer.fieldsIndex.has(e)}field(e){const t=this._layer.fieldsIndex?.get(e)?.name;if(null==t)throw new a.aV(null,a.rH.FieldNotFound,null,{key:e});switch(t){case f:return this.getPosition();case p:return this.getLocalTime()}return this._graphic.attributes[t]??null}castToText(e=!1){const t={...this._graphic.attributes};t[f]=this.getPosition(),p in t&&(t[p]=this.getLocalTime());for(const e of Object.keys(t))this._layer.fieldsIndex?.has(e)||delete t[e];return(0,s.c)(t,{useNumbersForDates:e})}}var m=n(28947),h=n(21201),F=n(88633),g=n(71354),T=n(82868),b=n(60508),v=n(67764),S=n(62197);const _={vars:{$feature:"any",$view:"any"}};function w(e){return e.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function x(e){return null==e?null:(0,d.kJ)(e)||(0,s.j)(e)?"array":(0,s.e)(e)?"date":(0,d.HD)(e)?"text":(0,d.jn)(e)?"boolean":(0,d.hj)(e)?"number":e instanceof u.Z?"dictionary":(0,s.k)(e)?"feature":e instanceof b.Z?"point":e instanceof v.Z?"polygon":e instanceof S.Z?"polyline":e instanceof T.Z?"multipoint":e instanceof g.Z?"extent":e instanceof h.u?"dateOnly":e instanceof F.n?"time":(0,s.m)(e)?"featureSet":(0,s.l)(e)?"featureSetCollection":null}function I(e){if(!e)return null;try{return(0,r.p)(e)}catch(e){}return null}function M(e,t){const n="string"==typeof e?I(e):e;if(!n)return null;try{return t=t||(0,m.d9)(_),(0,r.c)(n,t)}catch(e){}return null}function N(e,t,n){return{vars:{$feature:null==e?new l.Z:l.Z.createFromGraphic(e,n),$view:t?.view},spatialReference:t?.sr,timeZone:n??null}}function O(e,t,n){return l.Z.createFromGraphicLikeObject(t,e,n,null)}function Z(e,t){null!=e.vars&&(e.vars.$feature=t)}function D(e,t){let n;try{n=(0,r.e)(e,t)}catch(e){n=null}return n}function G(e,t){let n;try{n=e?e(t):null}catch(e){n=null}return n}function V(e,t){try{return e?e(t):Promise.resolve(null)}catch(e){return Promise.resolve(null)}}const J=new Set(["$feature","$aggregatedFeatures","$voxel"].map((e=>(0,o.D)(e))));function C(e,t){if(!e)return[];const n="string"==typeof e?I(e):e;if(!n)return[];const i=(0,r.a)(n).filter((({varId:e})=>J.has(e))).map((({memberNamePattern:e})=>e)).flatMap((e=>{if(e.includes("*")){if(null==t)return[];const n=new RegExp(`^${e.split(/\*+/).map(w).join(".*")}$`,"i");return t.filter((e=>n.test(e)))}return e.toLowerCase()}));return[...new Set(i.sort())]}function A(e){return(0,r.r)(e,"$view")}function j(e,t){return!!e&&(0,r.r)(e,t)}function P(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;let t,n;const{timeProperties:r,timeZone:o}=e;if(null!=r){const{currentStart:e,currentEnd:u}=r;null!=o?(t=null!=e?i.iG.dateJSAndZoneToArcadeDate(e,o):null,n=null!=u?i.iG.dateJSAndZoneToArcadeDate(u,o):null):(t=null!=e?i.iG.dateJSToArcadeDate(e):null,n=null!=u?i.iG.dateJSToArcadeDate(u):null)}return{view:e.viewingMode&&null!=e.scale?new u.Z({__proto__:null,viewingMode:e.viewingMode,scale:e.scale,timeProperties:null!=t||null!=n?new u.Z({__proto__:null,currentStart:t,currentEnd:n,startIncluded:!0,endIncluded:!0}):null}):null,sr:e.spatialReference}}function q({url:e,spatialReference:t,lrucache:n,interceptor:i}){const o=(0,r.f)();return o?o.createFeatureSetCollectionFromService(e,t,n,i):null}function E({layer:e,spatialReference:t,outFields:n,returnGeometry:i,lrucache:o,interceptor:u}){if(null===e)return null;const l=(0,r.f)();return l?l.constructFeatureSet(e,t,n,i??!0,o,u):null}function R(e){if(null===e?.map)return null;const t=(0,r.f)();return t?t.createFeatureSetCollectionFromMap(e.map,e.spatialReference,e.lrucache,e.interceptor):null}function L(e,t){return u.Z.convertJsonToArcade(e,t)}function k(e,t,n=[]){return(0,r.l)(e,t,n)}function B(){return(0,r.b)()}function $(){return(0,r.d)()}function z(e,t){if(!e)return!1;if("string"==typeof e)return t(e);const n=e;if(function(e){return"type"in e&&("class-breaks"===e.type||"dictionary"===e.type||"dot-density"===e.type||"pie-chart"===e.type||"simple"===e.type||"unique-value"===e.type)}(n)){if("dot-density"===n.type){const e=n.attributes?.some((e=>t(e.valueExpression)));if(e)return e}const e=n.visualVariables,r=!!e&&e.some((e=>{let n=t(e.valueExpression);return"size"===e.type&&(K(e.minSize)&&(n=n||t(e.minSize.valueExpression)),K(e.maxSize)&&(n=n||t(e.maxSize.valueExpression))),n}));return!(!("valueExpression"in n)||!t(n.valueExpression))||r}if(function(e){return"esri.layers.support.LabelClass"===e.declaredClass}(n)){const e=n.labelExpressionInfo?.expression;return!(!e||!t(e))||!1}return!!function(e){return"esri.PopupTemplate"===e.declaredClass}(n)&&(!!n.expressionInfos&&n.expressionInfos.some((e=>t(e.expression)))||Array.isArray(n.content)&&n.content.some((e=>"expression"===e.type&&t(e.expressionInfo?.expression))))}function U(e){const t=I(e);return!!t&&(0,r.s)(t)}function X(e){return z(e,U)}function H(e){const t=I(e);return!!t&&(0,r.g)(t)}function Y(e){return z(e,H)}function K(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}}}]);