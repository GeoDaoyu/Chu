"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[45059],{45059:function(e,t,r){r.r(t),r.d(t,{getGeometryServiceURL:function(){return u},projectGeometry:function(){return c}});var n=r(81001),o=r(88194),i=r(77601),a=r(74935),s=r(8084);async function u(e=null,t){if(n.default.geometryServiceUrl)return n.default.geometryServiceUrl;if(!e)throw new o.Z("internal:geometry-service-url-not-configured","No geometryServiceUrl in configuration");let r;r="portal"in e?e.portal||i.Z.getDefault():e,await r.load({signal:t});const a=r.helperServices?.geometry?.url;if(!a)throw new o.Z("internal:geometry-service-url-not-configured","No geometryServiceUrl in configuration");return a}async function c(e,t,r=null,n){const i=await u(r,n),c=new s.Z({geometries:[e],outSpatialReference:t}),f=await(0,a.i)(i,c,{signal:n});if(f&&Array.isArray(f)&&1===f.length)return f[0];throw new o.Z("internal:geometry-service-projection-failed","Geometry projection failed on service")}},74935:function(e,t,r){r.d(t,{i:function(){return f}});var n=r(78619),o=r(95226),i=r(90756),a=r(56545),s=r(93333),u=r(8084);const c=(0,o.se)(u.Z);async function f(e,t,r){t=c(t);const o=(0,a.en)(e),u={...o.query,f:"json",...t.toJSON()},f=t.outSpatialReference,l=(0,i.Ji)(t.geometries[0]),m=(0,a.lA)(u,r);return(0,n.Z)(o.path+"/project",m).then((({data:{geometries:e}})=>(0,s.o)(e,l,f)))}},93333:function(e,t,r){r.d(t,{F:function(){return o},o:function(){return i}});var n=r(90756);function o(e){return{geometryType:(0,n.Ji)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,r){const o=(0,n.q9)(t);return e.map((e=>{const t=o.fromJSON(e);return t.spatialReference=r,t}))}},8084:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(73440),o=r(63255),i=r(17155),a=(r(61432),r(96711),r(83850),r(48023)),s=r(45213),u=r(90756),c=r(8554);let f=class extends o.Z{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,c.B9)(this.outSpatialReference),r.inSR=(0,c.B9)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,u.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,n._)([(0,i.Cb)()],f.prototype,"geometries",void 0),(0,n._)([(0,i.Cb)({type:s.Z,json:{read:{source:"outSR"}}})],f.prototype,"outSpatialReference",void 0),(0,n._)([(0,i.Cb)()],f.prototype,"transformation",void 0),(0,n._)([(0,i.Cb)()],f.prototype,"transformForward",void 0),f=(0,n._)([(0,a.j)("esri.rest.support.ProjectParameters")],f)},56545:function(e,t,r){r.d(t,{LP:function(){return l},cv:function(){return f},en:function(){return c},lA:function(){return u}});var n=r(81001),o=r(10218),i=r(28947),a=r(95490),s=r(82674);function u(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function c(e){return"string"==typeof e?(0,a.mN)(e):(0,i.d9)(e)}function f(e,t,r){const n={};for(const o in e){if("declaredClass"===o)continue;const i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i))n[o]=i.map((e=>f(e)));else if("object"==typeof i)if(i.toJSON){const e=i.toJSON(r?.[o]);n[o]=t?e:JSON.stringify(e)}else n[o]=t?i:JSON.stringify(i);else n[o]=i}return n}async function l(e,t,i){const a=function(e,t){return e?t&&(0,s.rU)(e)?t:(0,s.Pi)(e)??o.id?.findCredential(e)?.token:null}(e,t);if(a)return a;!o.id&&n.default.request.useIdentity&&await r.e(39428).then(r.bind(r,39428));return(await o.id.getCredential(e,i))?.token}}}]);