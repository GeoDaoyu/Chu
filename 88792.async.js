"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[88792],{88792:function(t,e,n){n.d(e,{$F:function(){return rt},C9:function(){return E},Ci:function(){return P},FV:function(){return _},Fr:function(){return j},HW:function(){return et},JD:function(){return F},JY:function(){return k},Jj:function(){return Z},K7:function(){return H},KE:function(){return A},KL:function(){return nt},O2:function(){return it},Ob:function(){return Y},SU:function(){return O},UM:function(){return $},VG:function(){return R},Wd:function(){return J},Y5:function(){return S},cy:function(){return N},fz:function(){return Q},gG:function(){return D},k6:function(){return V},kZ:function(){return B},kp:function(){return M},nU:function(){return W},rP:function(){return L},rk:function(){return T},sX:function(){return K},tD:function(){return q},uA:function(){return tt},uj:function(){return x}});var r=n(10218),i=n(29292),o=n(88194),s=n(41773),a=n(48797),u=n(18764),c=n(68886),l=n(41964),p=n(37127),d=n(87802),y=n(76554),f=n(75428),h=n(43957),m=n(55105),b=n(9364),w=n(599),g=n(29191),v=n(25668),I=n(68578);const j=new s.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function F(t,e,n,r){const i=await G(t);if(await C(t,e,r),!i.addAttachment)throw new o.Z(r,"Layer source does not support addAttachment capability");return i.addAttachment(e,n)}function C(t,e,n){const{attributes:r}=e,{objectIdField:i}=t;return t.capabilities?.data?.supportsAttachment?e?r?i&&r[i]?Promise.resolve():Promise.reject(new o.Z(n,`feature is missing the identifying attribute ${i}`)):Promise.reject(new o.Z(n,"'attributes' are required on a feature to query attachments")):Promise.reject(new o.Z(n,"A feature is required to add/delete/update attachments")):Promise.reject(new o.Z(n,"this layer doesn't support attachments"))}async function S(t,e,n,r,i){const s=await G(t);if(await C(t,e,i),!s.updateAttachment)throw new o.Z(i,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,n,r)}async function Z(t,e,r){const{applyEdits:i}=await n.e(99813).then(n.bind(n,99813)),o=await t.load();let s=r;return"feature"===o.type&&o.infoFor3D&&null!=e.deleteFeatures&&null!=o.globalIdField&&(s={...s,globalIdToObjectId:await et(o,e.deleteFeatures,o.globalIdField)}),i(o,o.source,e,r)}async function x(t,e,r){const{uploadAssets:i}=await n.e(99813).then(n.bind(n,99813)),o=await t.load();return i(o,o.source,e,r)}async function _(t,e,n,r){const i=await G(t);if(await C(t,e,r),!i.deleteAttachments)throw new o.Z(r,"Layer source does not support deleteAttachments capability");return i.deleteAttachments(e,n)}async function P(t,e,n){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new o.Z(n,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function O(t,e,n,r){e=b.Z.from(e),await t.load();const i=t.source,s=t.capabilities;if(!s?.data?.supportsAttachment)throw new o.Z(r,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:u,globalIds:c,num:l,size:p,start:d,where:y}=e;if(!s?.operations?.supportsQueryAttachments&&(a?.length>0||c?.length>0||p?.length>0||l||d||y))throw new o.Z(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(u?.length||c?.length||y))throw new o.Z(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!i.queryAttachments)throw new o.Z(r,"Layer source does not support queryAttachments capability",e);return!s?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),i.queryAttachments(e)}async function q(t,e,n,r){const i=await G(t);if(!i.queryObjectIds)throw new o.Z(r,"Layer source does not support queryObjectIds capability");return i.queryObjectIds(g.Z.from(e)??t.createQuery(),n)}async function R(t,e,n,r){const i=await G(t);if(!i.queryFeatureCount)throw new o.Z(r,"Layer source does not support queryFeatureCount capability");return i.queryFeatureCount(g.Z.from(e)??t.createQuery(),n)}async function A(t,e,n,r){const i=await G(t);if(!i.queryExtent)throw new o.Z(r,"Layer source does not support queryExtent capability");return i.queryExtent(g.Z.from(e)??t.createQuery(),n)}async function M(t,e,n,r){const i=await G(t);if(!i.queryRelatedFeatures)throw new o.Z(r,"Layer source does not support queryRelatedFeatures capability");return i.queryRelatedFeatures(v.default.from(e),n)}async function E(t,e,n,r){const i=await G(t);if(!i.queryRelatedFeaturesCount)throw new o.Z(r,"Layer source does not support queryRelatedFeaturesCount capability");return i.queryRelatedFeaturesCount(v.default.from(e),n)}async function D(t){const e=t.source;if(e?.refresh)try{const{dataChanged:n,updates:r}=await e.refresh();if(null!=r&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),n)return!0}catch{}if(t.definitionExpression)try{return(await(0,a.EP)(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function L(t){const e=new g.Z;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption="multipatch"===t.geometryType?"xyFootprint":null;const n=t.capabilities?.query;n&&(e.compactGeometryEnabled=n.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference);const r=t.capabilities?.data;r?.supportsZ&&null!=t.returnZ&&(e.returnZ=t.returnZ),r?.supportsM&&null!=t.returnM&&(e.returnM=t.returnM);const{timeOffset:i,timeExtent:o}=t;return e.timeExtent=null!=i&&null!=o?o.offset(-i.value,i.unit):o||null,e}function T(t){const{globalIdField:e,fields:n}=t;if(e)return e;if(n)for(const t of n)if("esriFieldTypeGlobalID"===t.type)return t.name}function B(t){const{objectIdField:e,fields:n}=t;if(e)return e;if(n)for(const t of n)if("esriFieldTypeOID"===t.type)return t.name}function k(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function N(t,e,n,r){const i=n?.feature,o=!!t.subtypes?.length;if(o&&!n?.excludeImpliedDomains){const n=H(t,e);if(n)return n}const s=o&&V(t,i);if(s){const t=s?.domains?.[e];return"inherited"===t?.type?r:t}const a=nt(t.types,t.typeIdField,i);if(a){const t=a.domains&&a.domains[e];if(t&&"inherited"!==t?.type)return t}if(r)return r;if(!n?.excludeImpliedDomains){const n=function(t,e){const{fieldsIndex:n}=t,{name:r,type:i}=n.get(e)??{};if(!r)return null;if(("typeIdField"in t?n.get(t.typeIdField)?.name:null)===r&&"types"in t&&t.types?.length){const e=t.types.map((t=>new l.u({code:z(t.id,i),name:t.name})));return new p.Z({codedValues:e})}return null}(t,e);if(n)return n}return null}function V(t,e){const{subtypes:n,subtypeField:r}=t;if(!e?.attributes||!n?.length||!r)return null;const i=e.attributes[r];return null==i?null:n.find((t=>t.code===i))}function H(t,e){const{fieldsIndex:n,subtypeField:r}=t,{name:i,type:o}=n.get(e)??{};if(!i)return null;if((r&&n.get(r)?.name)===i&&t.subtypes?.length){const e=t.subtypes.map((t=>new l.u({code:z(t.code,o),name:t.name})));if(e?.length)return new p.Z({codedValues:e})}return null}function z(t,e){return e?(0,y.qN)({type:e})&&"number"==typeof t?`${t}`:(0,y.Vo)({type:e})&&"string"==typeof t?Number.parseInt(t,10):t:t}async function G(t){return(await t.load()).source}async function J(t,e){if(!r.id)return;const n=r.id.findCredential(t);if(n)return n.userId;let i;try{const n=await(0,f.oP)(t,e);n&&(i=await r.id.checkSignInStatus(`${n}/sharing`))}catch(t){}return i?i.userId:null}async function U(t,e){if(!r.id)return;if(r.id.findCredential(t))return;let n;try{const i=await(0,f.oP)(t,e);i&&(n=await r.id.checkSignInStatus(`${i}/sharing`))}catch(t){}if(n)try{const n=null!=e?e.signal:null;await r.id.getCredential(t,{signal:n})}catch(t){}}async function W(t,e,n){const r=t.parsedUrl?.path;r&&t.authenticationTriggerEvent===e&&await U(r,n)}async function Q(t){const e=t.parsedUrl?.path;e&&function(t){return function(t){return!(!(0,f.W$)(t)||!t.capabilities?.query.supportsCurrentUser)}(t)&&("serviceDefinitionExpression"in t&&$(t.serviceDefinitionExpression)||"definitionExpression"in t&&$(t.definitionExpression))}(t)&&await U(e)}function $(t){return!!t?.toLowerCase().includes("current_user")}function K(t){return!rt(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const X=(0,c.d)({types:I.QT});function Y(t,e){if(t.defaultSymbol)return t.types?.length?new m.Z({defaultSymbol:X(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map((t=>({id:t.id,symbol:X(t.symbol,t,e)})))}):new h.Z({symbol:X(t.defaultSymbol,t,e)})}function tt(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const n=t.editingInfo?.lastEditDate?.getTime();return null==n||(e*=1e3,Date.now()-n<e)}async function et(t,e,n){if(null==e)return null;const r=[],{objectIdField:o}=t;if(e.forEach((t=>{let e=null;if("attributes"in t){const{attributes:r}=t;e={globalId:r[n],objectId:null!=r[o]&&-1!==r[o]?r[o]:null}}else e={globalId:t.globalId,objectId:null!=t.objectId&&-1!==t.objectId?t.objectId:null};null!=e.globalId&&(null!=e.objectId&&-1!==e.objectId||r.push(e.globalId))})),0===r.length)return null;const s=t.createQuery();s.where=r.map((t=>`${n}='${t}'`)).join(" OR "),s.returnGeometry=!1,s.outFields=[o,n],s.cacheHint=!1;const a=await(0,i.mt)((0,d.UK)(t,s));if(!a.ok)return null;const c=new Map,l=a.value.features;for(const t of l){const e=t.attributes[n],r=t.attributes[o];null!=e&&null!=r&&-1!==r&&c.set((0,u.L3)(e),r)}return c}function nt(t,e,n){if(!e||!n||!t)return null;const r=n.getAttribute(e);return null==r?null:t.find((t=>{const{id:e}=t;return null!=e&&e.toString()===r.toString()}))??null}function rt(t){return t.sourceJSON?.isMultiServicesView||function(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map((t=>t.trim())).includes("map")}(t)}function it(t,e,n){const r=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!r)throw new o.Z(n,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new o.Z(n,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!ot(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new o.Z(n,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new o.Z(n,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new o.Z(n,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new o.Z(n,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new o.Z(n,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new o.Z(n,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!ot(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new o.Z(n,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new o.Z(n,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new o.Z(n,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new o.Z(n,"Layer source does not support firstDayOfWeek binning");const i=r?.supportedStatistics;if(t.outStatistics&&i){const e=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:r}of t.outStatistics){const t=e.get(r);if(t&&!i[t])throw new o.Z(n,`Layer source does not support ${r} statistic type`)}}}function ot(t,e){return null!=t&&!!e?.[w.P.toJSON(t)]}},87802:function(t,e,n){n.d(e,{UK:function(){return i},qo:function(){return o}});var r=n(29191);async function i(t,e,n){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=s(t));const r=o(t),i=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let a=null;for(;;){const o=await t.source.queryFeaturesJSON(e,n);if(null==a?a=o:a.features=a.features.concat(o.features),a.exceededTransferLimit=o.exceededTransferLimit,!i||!o.exceededTransferLimit)break;e.start+=r}return a}function o(t){return s(t)*function(t){return t.capabilities.query.maxRecordCount||2e3}(t)}function s(t){return t.capabilities.query.supportsMaxRecordCountFactor?r.Z.MAX_MAX_RECORD_COUNT_FACTOR:1}},43957:function(t,e,n){n.d(e,{Z:function(){return d}});var r,i=n(73440),o=n(28947),s=n(17155),a=(n(61432),n(96711),n(79775)),u=n(48023),c=n(69258),l=n(23298),p=n(31186);let d=r=class extends((0,l.W)(c.Z)){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map((n=>n.collectRequiredFields(t,e))))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce(((t,e)=>t+e.getAttributeHash()),"")??""}getMeshHash(){return this.symbols.reduce(((t,e)=>t+JSON.stringify(e)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new r({description:this.description,label:this.label,symbol:(0,o.d9)(this.symbol),visualVariables:(0,o.d9)(this.visualVariables),authoringInfo:(0,o.d9)(this.authoringInfo)})}};(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,i._)([(0,s.Cb)(p.EW)],d.prototype,"symbol",void 0),(0,i._)([(0,a.J)({simple:"simple"})],d.prototype,"type",void 0),d=r=(0,i._)([(0,u.j)("esri.renderers.SimpleRenderer")],d)},9364:function(t,e,n){n.d(e,{Z:function(){return p}});var r,i=n(73440),o=n(63255),s=n(28947),a=n(17155),u=n(95226),c=n(48023),l=n(29884);let p=class extends o.Z{static{r=this}constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new r((0,s.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],p.prototype,"attachmentTypes",void 0),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],p.prototype,"attachmentsWhere",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],p.prototype,"cacheHint",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],p.prototype,"keywords",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],p.prototype,"globalIds",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],p.prototype,"name",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],p.prototype,"num",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],p.prototype,"objectIds",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],p.prototype,"orderByFields",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{default:!1,write:!0}})],p.prototype,"returnMetadata",void 0),(0,i._)([(0,a.Cb)({type:[Number],json:{write:!0}})],p.prototype,"size",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],p.prototype,"start",void 0),(0,i._)([(0,l.c)("start"),(0,l.c)("num")],p.prototype,"writeStart",null),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p.prototype,"where",void 0),p=r=(0,i._)([(0,c.j)("esri.rest.support.AttachmentQuery")],p),p.from=(0,u.se)(p)},25668:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});var r,i=n(73440),o=n(63255),s=n(28947),a=n(17155),u=n(95226),c=n(48023),l=n(29884),p=n(45213),d=n(82282);let y=class extends o.Z{static{r=this}constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(e.definitionExpression="1=1")}clone(){return new r((0,s.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"cacheHint",void 0),(0,i._)([(0,a.Cb)({type:d.n,json:{write:!0}})],y.prototype,"dynamicDataSource",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{write:!0}})],y.prototype,"geometryPrecision",void 0),(0,i._)([(0,a.Cb)({type:Date})],y.prototype,"historicMoment",void 0),(0,i._)([(0,l.c)("historicMoment")],y.prototype,"_writeHistoricMoment",null),(0,i._)([(0,a.Cb)({type:Number,json:{write:!0}})],y.prototype,"maxAllowableOffset",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],y.prototype,"objectIds",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),(0,i._)([(0,a.Cb)({type:[String],json:{write:!0}})],y.prototype,"outFields",void 0),(0,i._)([(0,a.Cb)({type:p.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],y.prototype,"outSpatialReference",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],y.prototype,"relationshipId",void 0),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],y.prototype,"start",void 0),(0,i._)([(0,l.c)("start"),(0,l.c)("num")],y.prototype,"writeStart",null),(0,i._)([(0,a.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],y.prototype,"num",void 0),(0,i._)([(0,a.Cb)({json:{write:!0}})],y.prototype,"returnGeometry",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],y.prototype,"returnM",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],y.prototype,"returnZ",void 0),(0,i._)([(0,a.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],y.prototype,"where",void 0),y=r=(0,i._)([(0,c.j)("esri.rest.support.RelationshipQuery")],y),y.from=(0,u.se)(y)}}]);