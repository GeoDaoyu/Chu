"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[50718],{62359:function(e,t,n){n.d(t,{O:function(){return l},U:function(){return s}});var r=n(21201),a=n(41602),o=n(2462),i=n(88633),u=n(87599);function s(e,t){const n=c[e.toLowerCase()];if(null==n)throw new a.eS(a.f.FunctionNotRecognized);if(t.length<n.minParams||t.length>n.maxParams)throw new a.eS(a.f.InvalidParameterCount,{name:e.toUpperCase()});return n.evaluate(t)}function l(e,t){const n=c[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}const c={min:{minParams:1,maxParams:1,evaluate:e=>p(e[0],"min")},max:{minParams:1,maxParams:1,evaluate:e=>p(e[0],"max")},avg:{minParams:1,maxParams:1,evaluate:e=>f(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(null!==r){if(!d(r))throw new a.eS(a.f.InvalidValueForAggregateFunction);t+=r}}return t}(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;const t=m(e);return null===t?null:Math.sqrt(t)}(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>m(e[0])}};function f(e){if(null===e)return null;let t=0,n=0;for(let r=0;r<e.length;r++){const o=e[r];if(null!==o){if(!d(o))throw new a.eS(a.f.InvalidValueForAggregateFunction);n++,t+=o}}return 0===n?null:t/e.length}function d(e){return"number"==typeof e}function p(e,t){if(null===e)return null;let n=null,a=null;for(const s of e){let e=s;e=r.u.isDateOnly(s)||i.n.isTimeOnly(s)?s.toNumber():u.ou.isDateTime(s)?s.toMillis():o.H.isTimestampOffset(s)?s.toMilliseconds():s,(null===n||"max"===t&&null!==a&&null!==e&&a<=e||"min"===t&&null!==a&&null!==e&&a>=e)&&(n=s,a=e)}return n}function m(e){if(null===e)return null;if(0===(e=e.filter((e=>null!==e))).length)return null;const t=f(e);if(null===t)return null;let n=0;for(const r of e){if(!d(r))throw new a.eS(a.f.InvalidValueForAggregateFunction);n+=(t-r)**2}return n/(e.length-1)}},2462:function(e,t,n){n.d(t,{H:function(){return i}});var r=n(87599);function a(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}const o="esri.core.sql.SqlTimeStampOffset";class i{constructor(e){this._timeStampOffset=e,this.declaredRootClass=o,this._date=null}static isTimestampOffset(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===o}toDateTime(){return this._date??=r.ou.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return a(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return a(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return i.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new i(r.ou.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new i(e.toISO({includeOffset:!0}))}static fromParts(e,t,n=0,r=0,a=0,o=0,u=0,s=!1,l=0,c=0){const f=`${e.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`;let d="";o<10&&(d="0");let p=`${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${d+o.toString()}`;0!==u&&(p+="."+u.toString().padStart(3,"0"));const m=`${s?"-":"+"}${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`;return new i(f+"T"+p+m)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&(e=e.replace(".000","")),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){const t=this.toDateTime().plus(e);return i.fromDateTime(t)}}},50718:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var r=n(61432),a=n(62359),o=n(21201),i=n(41602);function u(e){if(null!==e.precision||null!==e.secondary)throw new i.eS(i.f.PrimarySecondaryQualifiers)}function s(e,t){if(t.includes(".")){const n=t.split(".");e.second=parseFloat(n[0]),e.millis=parseInt(n[1],10)}else e.second=parseFloat(t)}const l="esri.core.sql.SqlInterval";class c{constructor(){this.declaredRootClass=l,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===l}static createFromMilliseconds(e){const t=new c;return t.second=e/1e3,t}static createFromValueAndQualifier(e,t,n){let r=null;const a=new c;if(a.op="-"===n?"-":"+","interval-period"===t.type){u(t);const n=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new i.eS(i.f.YearMonthIntervals);if("second"===t.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new i.eS(i.f.IllegalInterval);s(a,e)}else{if(!n.test(e))throw new i.eS(i.f.IllegalInterval);a[t.period]=parseFloat(e)}}else{if(u(t.start),u(t.end),"year"===t.start.period||"month"===t.start.period||"year"===t.end.period||"month"===t.end.period)throw new i.eS(i.f.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(r=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!r.test(e))throw new i.eS(i.f.IllegalInterval);a[t.start.period]=parseFloat(e.split(" ")[0]),a[t.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!r.test(e))throw new i.eS(i.f.IllegalInterval);{a[t.start.period]=parseFloat(e.split(" ")[0]);const n=e.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1])}break;case"second":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new i.eS(i.f.IllegalInterval);{a[t.start.period]=parseFloat(e.split(" ")[0]);const n=e.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1]),s(a,n[2])}break;default:throw new i.eS(i.f.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!r.test(e))throw new i.eS(i.f.IllegalInterval);a.hour=parseFloat(e.split(":")[0]),a.minute=parseFloat(e.split(":")[1]);break;case"second":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new i.eS(i.f.IllegalInterval);{const t=e.split(":");a.hour=parseFloat(t[0]),a.minute=parseFloat(t[1]),s(a,t[2])}break;default:throw new i.eS(i.f.IllegalInterval)}break;case"minute":if("second"!==t.end.period)throw new i.eS(i.f.IllegalInterval);if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new i.eS(i.f.IllegalInterval);{const t=e.split(":");a.minute=parseFloat(t[0]),s(a,t[1])}break;default:throw new i.eS(i.f.IllegalInterval)}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}var f=n(2462),d=n(88633),p=n(28960),m=n(87599);const h=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,v=/^(\d{1,2}):(\d{1,2})$/,w=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,S=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,g=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,T=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function N(e,t){if(t instanceof m.ld)return t===p.yV.instance?m.ou.fromMillis(e.getTime(),{zone:p.yV.instance}):m.ou.fromJSDate(e,{zone:t});switch(t){case"system":case"local":case null:return m.ou.fromJSDate(e);default:return"unknown"===t?.toLowerCase()?m.ou.fromMillis(e.getTime(),{zone:p.yV.instance}):m.ou.fromJSDate(e,{zone:t})}}function O(e){return c.isInterval(e)}function x(e){return m.ou.isDateTime(e)}function D(e){return o.u.isDateOnly(e)}function E(e){return d.n.isTimeOnly(e)}function C(e){return f.H.isTimestampOffset(e)}function _(e){let t=h.exec(e);if(null!==t){const[,e,n,r]=t,a=d.n.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),0);if(null!==a)return a;throw new i.eS(i.f.InvalidTime)}if(t=v.exec(e),null!==t){const[,e,n]=t,r=d.n.fromParts(parseInt(e,10),parseInt(n,10),0,0);if(null!==r)return r;throw new i.eS(i.f.InvalidTime)}if(t=w.exec(e),null!==t){const[,e,n,r,a]=t,o=d.n.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),parseInt(a,10));if(null!==o)return o;throw new i.eS(i.f.InvalidTime)}throw new i.eS(i.f.InvalidTime)}function M(e,t,n=!1){let r=S.exec(e);if(null!==r){const[,e,n,a,o,u,s,l]=r,c=m.ou.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:parseInt(o,10),minute:parseInt(u,10),second:parseInt(s,10),millisecond:l?parseInt(l.replace(".",""),10):0},{zone:(0,p.L9)(t)});if(!1===c.isValid)throw new i.eS(i.f.InvalidTimeStamp);return c}if(r=g.exec(e),null!==r){const[,e,t,n,a,o,u,s,l,c,d]=r,p=f.H.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(a,10),parseInt(o,10),parseInt(u,10),s?parseInt(s.replace(".",""),10):0,"-"===l,parseInt(c,10),parseInt(d,10));if(!1===p.isValid)throw new i.eS(i.f.InvalidTimeStamp);return p}if(r=y.exec(e),null!==r){const[,e,t,n,a,o,u,s,l]=r,c=f.H.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(a,10),parseInt(o,10),0,0,"-"===u,parseInt(s,10),parseInt(l,10));if(!1===c.isValid)throw new i.eS(i.f.InvalidTimeStamp);return c}if(r=T.exec(e),null!==r){const[,e,n,a,o,u]=r,s=m.ou.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:parseInt(o,10),minute:parseInt(u,10),second:0},{zone:(0,p.L9)(t)});if(!1===s.isValid)throw new i.eS(i.f.InvalidTimeStamp);return s}if(r=I.exec(e),null!==r){const[,e,n,a]=r,o=m.ou.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:0,minute:0,second:0},{zone:(0,p.L9)(t)});if(!1===o.isValid)throw new i.eS(i.f.InvalidTimeStamp);return o}throw new i.eS(i.f.InvalidTimeStamp)}function b(e,t){const n=I.exec(e);if(null===n)try{return M(e,t)}catch{throw new i.eS(i.f.InvalidDate)}const[,r,a,u]=n,s=o.u.fromParts(parseInt(r,10),parseInt(a,10),parseInt(u,10));if(null===s)throw new i.eS(i.f.InvalidDate);return s}var A=n(99574),F=n(29138),L=n(43462);function P(e){return!!x(e)||!!C(e)}function R(e){return!!(x(e)||D(e)||C(e)||E(e))}function $(e){if(x(e))return e.toMillis();if(D(e))return e.toNumber();if(C(e))return e.toMilliseconds();throw new i.eS(i.f.InvalidDataType)}function U(e,t,n){if(null==e||null==t)return null;if((0,L.hj)(e)){if((0,L.hj)(t))return V(e,t,n);if((0,L.HD)(t))return function(e,t,n){const r=parseFloat(t);if(!isNaN(r))return V(e,r,n);const a=e.toString();switch(n){case"<>":return a!==t;case"=":return a===t;case">":return a>t;case"<":return a<t;case">=":return a>=t;case"<=":return a<=t}}(e,t,n);if(R(t))throw new i.eS(i.f.InvalidOperator);if(D(t))throw new i.eS(i.f.InvalidOperator)}else if((0,L.HD)(e)){if((0,L.hj)(t))return function(e,t,n){const r=parseFloat(e);if(!isNaN(r))return V(r,t,n);const a=t.toString();switch(n){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}(e,t,n);if((0,L.HD)(t))return function(e,t,n){switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}(e,t,n);if(x(t))throw new i.eS(i.f.InvalidOperator);if(D(t))throw new i.eS(i.f.InvalidOperator);if(E(t))throw new i.eS(i.f.InvalidOperator);if(C(t))throw new i.eS(i.f.InvalidOperator)}else if(x(e)){if(P(t)){if((0,p.A4)(e.zone)){if(m.ou.isDateTime(t)&&!(0,p.A4)(t.zone))return H(e,t,n);if(f.H.isTimestampOffset(t))return H(e,t,n)}else if(m.ou.isDateTime(t)&&(0,p.A4)(t.zone)){if(!(0,p.A4)(e.zone))return H(e,t,n);if(f.H.isTimestampOffset(e))return H(e,t,n)}return V($(e),$(t),n)}if((0,L.HD)(t))throw new i.eS(i.f.InvalidOperator);if(D(t))return function(e,t,n){const r=t.toDateTimeLuxon(e.zone);return V((e=e.startOf("day")).toMillis(),r.toMillis(),n)}(e,t,n);if(E(t))throw new i.eS(i.f.InvalidOperator);if((0,L.hj)(t))throw new i.eS(i.f.InvalidOperator)}else if(D(e)){if(C(t))return function(e,t,n){const r=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),V(r.toMillis(),t.toMilliseconds(),n)}(e,t,n);if(x(t))return function(e,t,n){const r=e.toDateTimeLuxon(t.zone);return t=t.startOf("day"),V(r.toMillis(),t.toMillis(),n)}(e,t,n);if((0,L.HD)(t))throw new i.eS(i.f.InvalidOperator);if(D(t))return V(e.toNumber(),t.toNumber(),n);if(E(t))throw new i.eS(i.f.InvalidOperator);if((0,L.hj)(t))throw new i.eS(i.f.InvalidOperator)}else if(E(e)){if(E(t))return V(e.toNumber(),t.toNumber(),n);if((0,L.HD)(t))throw new i.eS(i.f.InvalidOperator);if((0,L.hj)(t))throw new i.eS(i.f.InvalidOperator);if(D(t))throw new i.eS(i.f.InvalidOperator);if(P(t))throw new i.eS(i.f.InvalidOperator)}else if(C(e)){if(P(t))return m.ou.isDateTime(t)&&(0,p.A4)(t.zone)?H(e,t,n):V($(e),$(t),n);if((0,L.HD)(t))throw new i.eS(i.f.InvalidOperator);if(D(t))return function(e,t,n){const r=t.toDateTimeLuxon(e.toDateTime().zone);return V((e=e.startOfDay()).toMilliseconds(),r.toMillis(),n)}(e,t,n);if(E(t))throw new i.eS(i.f.InvalidOperator);if((0,L.hj)(t))throw new i.eS(i.f.InvalidOperator)}switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function V(e,t,n){switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function H(e,t,n){f.H.isTimestampOffset(e)&&(e=e.toDateTime()),f.H.isTimestampOffset(t)&&(t=t.toDateTime());const r=k(e),a=k(t);switch(n){case"<>":return r!==a;case"=":return r===a;case">":return r>a;case"<":return r<a;case">=":return r>=a;case"<=":return r<=a}}function k(e){return 321408e5*e.year+26784e5*e.month+864e5*e.day+36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond}function z(e,t,n){const r=Z[e.toLowerCase()];if(null==r)throw new i.eS(i.f.FunctionNotRecognized);if(t.length<r.minParams||t.length>r.maxParams)throw new i.eS(i.f.InvalidParameterCount,{name:e.toUpperCase()});return r.evaluate(t,n)}function j(e){return!((0,L.J_)(e)||D(e)||x(e)||E(e)||C(e))}function q(e){return D(e)||E(e)?e.toString():C(e)?e.toSQLValue():x(e)?0===e.millisecond?e.toFormat("yyyy-LL-dd HH:mm:ss"):e.toSQL({includeOffset:!1}):(0,L.J_)(e)?q(m.ou.fromJSDate(e)):e.toString()}const Z={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(null==t)return null;if((0,L.J_)(t))switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0;case"DOW":return m.ou.fromJSDate(t,{zone:"system"}).weekday;case"DOY":return m.ou.fromJSDate(t,{zone:"system"}).ordinal;case"WEEK":return m.ou.fromJSDate(t,{zone:"system"}).weekNumber}else if(x(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new i.eS(i.f.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return t.weekday;case"DOY":return t.ordinal;case"WEEK":return t.weekNumber}else if(D(t))switch(e.toUpperCase()){case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new i.eS(i.f.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return t.toDateTime("unknown").weekday;case"DOY":return t.toDateTime("unknown").ordinal;case"WEEK":return t.toDateTime("unknown").weekNumber}else if(E(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour}else if(C(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":return t.timezoneOffsetHour;case"TIMEZONE_MINUTE":return t.timezoneOffsetMinutes;case"DOW":return t.toDateTime().weekday;case"DOY":return t.toDateTime().ordinal;case"WEEK":return t.toDateTime().weekNumber}throw new i.eS(i.f.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const[t,n]=e;return null==t||null==n?null:t.toString().substring(n-1)}if(3===e.length){const[t,n,r]=e;return null==t||null==n||null==r?null:r<=0?"":t.toString().substring(n-1,n+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>null==e||null==t?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=3===e.length,n=t?e[1]:" ",r=t?e[2]:e[1];if(null==n||null==r)return null;const a=`(${(0,F.Qs)(n)})`;switch(e[0]){case"BOTH":return r.replaceAll(new RegExp(`^${a}*|${a}*$`,"g"),"");case"LEADING":return r.replaceAll(new RegExp(`^${a}*`,"g"),"");case"TRAILING":return r.replaceAll(new RegExp(`${a}*$`,"g"),"")}throw new i.eS(i.f.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0]>0?1:e[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],n=2===e.length?10**e[1]:1;return null==t?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length||0===e[1]?Math.trunc(e[0]):(0,A.eF)("trunc",e[0],-Number(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>(0,L.HD)(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let n=0;n<e.length;n++){if(null==e[n])return null;t+=e[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:e=>U(e[0],e[1],"=")?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,t)=>{const n=e[0],r=e[1];if(null===n)return null;switch(r.type){case"integer":{if(!j(n))throw new i.eS(i.f.CannotCastValue);const e=parseInt(n,10);if(isNaN(e))throw new i.eS(i.f.CannotCastValue);return e}case"smallint":{if(!j(n))throw new i.eS(i.f.CannotCastValue);const e=parseInt(n,10);if(isNaN(e))throw new i.eS(i.f.CannotCastValue);if(e>32767||e<-32767)throw new i.eS(i.f.CannotCastValue);return e}case"float":case"real":{if(!j(n))throw new i.eS(i.f.CannotCastValue);const e=parseFloat(n);if(isNaN(e))throw new i.eS(i.f.CannotCastValue);return e}case"time":return function(e){if((0,L.J_)(e))return d.n.fromDateJS(e);if(x(e))return d.n.fromDateTime(e);if(D(e))throw new i.eS(i.f.CannotCastValue);if(E(e))return e;if(C(e))return d.n.fromSqlTimeStampOffset(e);if((0,L.HD)(e))return _(e);throw new i.eS(i.f.CannotCastValue)}(n);case"date":return function(e){if((0,L.J_)(e))return o.u.fromDateJS(e);if(x(e))return o.u.fromParts(e.year,e.month,e.day);if(D(e))return e;if(E(e))throw new i.eS(i.f.CannotCastValue);if(C(e)&&null===o.u.fromParts(e.year,e.month,e.day))throw new i.eS(i.f.CannotCastValue);if((0,L.HD)(e)){const t=o.u.fromReader(e);if(null!==t&&t.isValid)return t}throw new i.eS(i.f.CannotCastValue)}(n);case"timestamp":return function(e,t,n){if((0,L.J_)(e))return N(e,t);if(x(e))return e;if(D(e))return e.toDateTimeLuxon("unknown");if(E(e))throw new i.eS(i.f.CannotCastValue);if(C(e))return e;if((0,L.HD)(e))return M(e,"unknown",n);throw new i.eS(i.f.CannotCastValue)}(n,t,!0===r.withtimezone);case"varchar":{const e=q(n);if(e.length>r.size)throw new i.eS(i.f.CannotCastValue);return e}default:throw new i.eS(i.f.InvalidDataType)}}}};function J(e,t,n,r){if("||"===e)return z("concat",[t,n],r);if(null===t||null===n)return null;if((0,L.hj)(t)){if((0,L.hj)(n))return Y(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return c.createFromMilliseconds(e+t.valueInMilliseconds());case"-":return c.createFromMilliseconds(e-t.valueInMilliseconds());case"*":return c.createFromMilliseconds(e*t.valueInMilliseconds());case"/":return c.createFromMilliseconds(e/t.valueInMilliseconds())}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(E(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(D(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(C(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(x(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if((0,L.HD)(n))return function(e,t,n){const r=parseFloat(t);if(isNaN(r))throw new i.eS(i.f.InvalidOperator);return Y(e,r,n)}(t,n,e);throw new i.eS(i.f.InvalidOperator)}if(D(t)){if((0,L.hj)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus("milliseconds",r);case"-":return e.plus("milliseconds",-1*r)}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(E(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(D(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon("UTC").diff(t.toDateTimeLuxon("UTC")).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(C(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(x(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon(t.zone).diff(t).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if((0,L.HD)(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();throw new i.eS(i.f.InvalidOperator)}if(E(t)){if((0,L.hj)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus("milliseconds",r);case"-":return e.plus("milliseconds",-1*r)}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(E(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(D(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(C(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(x(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if((0,L.HD)(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();throw new i.eS(i.f.InvalidOperator)}if(O(t)){if((0,L.hj)(n))return function(e,t,n){switch(n){case"+":return c.createFromMilliseconds(e.valueInMilliseconds()+t);case"-":return c.createFromMilliseconds(e.valueInMilliseconds()-t);case"*":return c.createFromMilliseconds(e.valueInMilliseconds()*t);case"/":return c.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return c.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case"-":return c.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case"*":return c.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case"/":return c.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(E(n))return function(e,t,n){if("+"===n)return t.plus("milliseconds",e.valueInMilliseconds());throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(D(n))return function(e,t,n){if("+"===n)return t.plus("milliseconds",e.valueInMilliseconds());throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(C(n))return function(e,t,n){if("+"===n)return t.addMilliseconds(e.valueInMilliseconds());throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(x(n))return function(e,t,n){switch(n){case"+":return t.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-t.toMillis()}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if((0,L.HD)(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();throw new i.eS(i.f.InvalidOperator)}if(x(t)){if((0,L.hj)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus({milliseconds:r});case"-":return e.minus({milliseconds:r})}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return e.plus({milliseconds:t.valueInMilliseconds()});case"-":return e.minus({milliseconds:t.valueInMilliseconds()})}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(E(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(D(n))return function(e,t,n){if("-"===n)return e.diff(t.toDateTimeLuxon(e.zone)).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(C(n))return function(e,t,n){if("-"===n)return e.diff(t.toDateTime()).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(x(n))return function(e,t,n){if("-"===n)return e.diff(t).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if((0,L.HD)(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();throw new i.eS(i.f.InvalidOperator)}if(C(t)){if((0,L.hj)(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.addMilliseconds(r);case"-":return e.addMilliseconds(-1*r)}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(O(n))return function(e,t,n){switch(n){case"+":return e.addMilliseconds(t.valueInMilliseconds());case"-":return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(E(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(D(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(C(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t.toDateTime()).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if(x(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t).as("days");throw new i.eS(i.f.InvalidOperator)}(t,n,e);if((0,L.HD)(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();throw new i.eS(i.f.InvalidOperator)}if((0,L.HD)(t)){if((0,L.hj)(n))return function(e,t,n){const r=parseFloat(e);if(isNaN(r))throw new i.eS(i.f.InvalidOperator);return Y(r,t,n)}(t,n,e);if(O(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(E(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(D(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(C(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if(x(n))return function(e,t,n){throw new i.eS(i.f.InvalidOperator)}();if((0,L.HD)(n))return function(e,t,n){if("+"===n)return e+t;throw new i.eS(i.f.InvalidOperator)}(t,n,e);throw new i.eS(i.f.InvalidOperator)}throw new i.eS(i.f.InvalidOperator)}function Y(e,t,n){switch(n){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t}throw new i.eS(i.f.InvalidOperator)}class W extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let n=null;const r=e.find((e=>e.source===this.location.source));r&&(n=r.text.split(/\r\n|\n|\r/g));const a=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,i=this.location.source+":"+o.line+":"+o.column;if(n){const e=this.location.end,r="".padEnd(o.line.toString().length," "),u=n[a.line-1],s=(a.line===e.line?e.column:u.length+1)-a.column||1;t+="\n --\x3e "+i+"\n"+r+" |\n"+o.line+" | "+u+"\n"+r+" | "+"".padEnd(a.column-1," ")+"".padEnd(s,"^")}else t+="\n at "+i}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function a(e){return r?e.replace(r,(e=>"\\u{"+n(e)+"}")):e}function o(e){return a(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}function i(e){return a(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}const u={literal:e=>'"'+o(e.text)+'"',class(e){const t=e.parts.map((e=>Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function s(e){return u[e.type](e)}return"Expected "+function(e){const t=e.map(s);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."}}function Q(e,t){const n={},r=(t=void 0!==t?t:{}).grammarSource,a={start:pt};let o=pt;const i="''",u=/^[<-=]/,s=/^[+\-]/,l=/^[*\/]/,c=/^[A-Za-z_\x80-\uFFFF]/,f=/^[A-Za-z0-9_]/,d=/^[A-Za-z0-9_.\x80-\uFFFF]/,p=/^["]/,m=/^[^']/,h=/^[0-9]/,v=/^[eE]/,w=/^[ \t\n\r]/,I=/^[^`]/,S=ut("!",!1),g=ut("=",!1),y=ut(">=",!1),T=ut(">",!1),N=ut("<=",!1),O=ut("<>",!1),x=st([["<","="]],!1,!1,!1),D=ut("!=",!1),E=st(["+","-"],!1,!1,!1),C=ut("||",!1),_=st(["*","/"],!1,!1,!1),M=st([["A","Z"],["a","z"],"_",["","￿"]],!1,!1,!1),b=st([["A","Z"],["a","z"],["0","9"],"_"],!1,!1,!1),A=st([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1,!1),F=st(['"'],!1,!1,!1),L=ut("@",!1),P=ut("'",!1),R=ut("N'",!1),$=ut("''",!1),U=st(["'"],!0,!1,!1),V=ut(".",!1),H=st([["0","9"]],!1,!1,!1),k=st(["e","E"],!1,!1,!1),z=ut("NULL",!0),j=ut("TRUE",!0),q=ut("FALSE",!0),Z=ut("IN",!0),J=ut("IS",!0),Y=ut("LIKE",!0),Q=ut("ESCAPE",!0),B=ut("NOT",!0),G=ut("AND",!0),K=ut("OR",!0),X=ut("BETWEEN",!0),ee=ut("FROM",!0),te=ut("FOR",!0),ne=ut("SUBSTRING",!0),re=ut("EXTRACT",!0),ae=ut("TRIM",!0),oe=ut("POSITION",!0),ie=ut("TIMESTAMP",!0),ue=ut("DATE",!0),se=ut("TIME",!0),le=ut("LEADING",!0),ce=ut("TRAILING",!0),fe=ut("BOTH",!0),de=ut("CAST",!0),pe=ut("AS",!0),me=ut("INTEGER",!0),he=ut("INT",!0),ve=ut("SMALLINT",!0),we=ut("FLOAT",!0),Ie=ut("REAL",!0),Se=ut("VARCHAR",!0),ge=ut("TO",!0),ye=ut("INTERVAL",!0),Te=ut("YEAR",!0),Ne=ut("TIMEZONE_HOUR",!0),Oe=ut("TIMEZONE_MINUTE",!0),xe=ut("MONTH",!0),De=ut("DAY",!0),Ee=ut("HOUR",!0),Ce=ut("MINUTE",!0),_e=ut("SECOND",!0),Me=ut("DOW",!0),be=ut("DOY",!0),Ae=ut("WEEK",!0),Fe=ut("CASE",!0),Le=ut("END",!0),Pe=ut("WHEN",!0),Re=ut("THEN",!0),$e=ut("ELSE",!0),Ue=ut(",",!1),Ve=ut("(",!1),He=ut(")",!1),ke=st([" ","\t","\n","\r"],!1,!1,!1),ze=ut("`",!1),je=st(["`"],!0,!1,!1);function qe(e,t,n){return{op:t,expr:n,location:ot()}}function Ze(e,t,n){return{op:t,expr:n,location:ot()}}function Je(e,t){return{op:e,expr:t,location:ot()}}function Ye(e,t,n){return{op:t,expr:n,location:ot()}}function We(e,t,n){return{op:t,expr:n,location:ot()}}function Qe(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&it("Timestamp literal is invalid")}(e.value),{type:"timestamp",location:ot(),value:e.value}}function Be(e){return"string"===e.type&&function(e){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)&&it("Time literal is invalid")}(e.value),{type:"time",location:ot(),value:e.value}}function Ge(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&it("Date literal is invalid")}(e.value),{type:"date",location:ot(),value:e.value}}let Ke=0|t.peg$currPos,Xe=Ke;const et=[{line:1,column:1}];let tt,nt=Ke,rt=t.peg$maxFailExpected||[],at=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=a[t.startRule]}function ot(){return ct(Xe,Ke)}function it(e,t){throw dt(e,t=void 0!==t?t:ct(Xe,Ke))}function ut(e,t){return{type:"literal",text:e,ignoreCase:t}}function st(e,t,n,r){return{type:"class",parts:e,inverted:t,ignoreCase:n,unicode:r}}function lt(t){let n,r=et[t];if(r)return r;if(t>=et.length)n=et.length-1;else for(n=t;!et[--n];);for(r=et[n],r={line:r.line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return et[t]=r,r}function ct(e,t,n){const a=lt(e),o=lt(t);return{source:r,start:{offset:e,line:a.line,column:a.column},end:{offset:t,line:o.line,column:o.column}}}function ft(e){Ke<nt||(Ke>nt&&(nt=Ke,rt=[]),rt.push(e))}function dt(e,t){return new W(e,null,null,t)}function pt(){let e,t;return e=Ke,Gn(),t=ht(),t!==n?(Gn(),Xe=e,e=t):(Ke=e,e=n),e}function mt(){let e,t,r,a,o,i,u,s;if(e=Ke,t=Qn(),t!==n){for(Gn(),r=[],a=ht();a!==n;)r.push(a),a=Ke,o=Ke,i=Gn(),u=Wn(),u!==n?(s=Gn(),i=[i,u,s],o=i):(Ke=o,o=n),o!==n?(o=ht(),o===n?(Ke=a,a=n):a=o):a=o;a=Gn(),o=Bn(),o!==n?(Xe=e,e=function(e){return{type:"expression-list",location:ot(),value:e}}(r)):(Ke=e,e=n)}else Ke=e,e=n;return e}function ht(){let e,t,r,a,o,i;if(e=Ke,t=vt(),t!==n){for(r=[],a=Ke,Gn(),o=sn(),o!==n?(Gn(),i=vt(),i!==n?(Xe=a,a=qe(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);a!==n;)r.push(a),a=Ke,Gn(),o=sn(),o!==n?(Gn(),i=vt(),i!==n?(Xe=a,a=qe(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);Xe=e,e=function(e,t){return nr(e,t)}(t,r)}else Ke=e,e=n;return e}function vt(){let e,t,r,a,o,i;if(e=Ke,t=wt(),t!==n){for(r=[],a=Ke,Gn(),o=un(),o!==n?(Gn(),i=wt(),i!==n?(Xe=a,a=Ze(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);a!==n;)r.push(a),a=Ke,Gn(),o=un(),o!==n?(Gn(),i=wt(),i!==n?(Xe=a,a=Ze(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);Xe=e,e=function(e,t){return nr(e,t)}(t,r)}else Ke=e,e=n;return e}function wt(){let t,r,a,o,i;return t=Ke,r=on(),r===n&&(r=Ke,33===e.charCodeAt(Ke)?(a="!",Ke++):(a=n,0===at&&ft(S)),a!==n?(o=Ke,at++,61===e.charCodeAt(Ke)?(i="=",Ke++):(i=n,0===at&&ft(g)),at--,i===n?o=void 0:(Ke=o,o=n),o!==n?(a=[a,o],r=a):(Ke=r,r=n)):(Ke=r,r=n)),r!==n?(a=Gn(),o=wt(),o!==n?(Xe=t,t=function(e){return function(e,t,n){return{type:"unary-expression",location:n,operator:e,expr:t}}("NOT",e,ot())}(o)):(Ke=t,t=n)):(Ke=t,t=n),t===n&&(t=function(){let e,t,r,a;return e=Ke,t=yt(),t!==n?(r=Ke,Gn(),a=function(){let e;return e=function(){let e,t,r,a,o;if(e=Ke,t=[],r=Ke,Gn(),a=It(),a!==n?(Gn(),o=yt(),o!==n?(Xe=r,r=Je(a,o)):(Ke=r,r=n)):(Ke=r,r=n),r!==n)for(;r!==n;)t.push(r),r=Ke,Gn(),a=It(),a!==n?(Gn(),o=yt(),o!==n?(Xe=r,r=Je(a,o)):(Ke=r,r=n)):(Ke=r,r=n);else t=n;return t!==n&&(Xe=e,t=function(e){return{type:"arithmetic",tail:e}}(t)),e=t,e}(),e===n&&(e=function(){let e,t,r;return e=Ke,t=gt(),t!==n?(Gn(),r=mt(),r!==n?(Xe=e,e=function(e,t){return{op:e,right:t}}(t,r)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=gt(),t!==n?(Gn(),r=At(),r!==n?(Xe=e,e=function(e,t){return{op:e,right:t}}(t,r)):(Ke=e,e=n)):(Ke=e,e=n)),e}(),e===n&&(e=function(){let e,t,r,a,o,i,u,s;return e=Ke,t=on(),t!==n?(Gn(),r=ln(),r!==n?(a=Gn(),o=Ke,i=yt(),i!==n?(Gn(),u=un(),u!==n?(Gn(),s=yt(),s!==n?(Xe=o,o=function(e,t,n){return tr(ot(),t,n)}(0,i,s)):(Ke=o,o=n)):(Ke=o,o=n)):(Ke=o,o=n),o!==n?(Xe=e,e=function(e,t){return{op:"NOT"+e,right:t}}(r,o)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=ln(),t!==n?(Gn(),r=Ke,a=yt(),a!==n?(o=Gn(),i=un(),i!==n?(Gn(),u=yt(),u!==n?(Xe=r,r=function(e,t,n){return tr(ot(),t,n)}(0,a,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n),r!==n?(Xe=e,e=function(e,t){return{op:e,right:t}}(t,r)):(Ke=e,e=n)):(Ke=e,e=n)),e}(),e===n&&(e=function(){let e,t,r,a;return e=Ke,t=nn(),t!==n?(Gn(),r=on(),r!==n?(Gn(),a=yt(),a!==n?(Xe=e,e=function(e,t){return{op:e+"NOT",right:t}}(t,a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=nn(),t!==n?(Gn(),r=yt(),r!==n?(Xe=e,e=function(e,t){return{op:e,right:t}}(t,r)):(Ke=e,e=n)):(Ke=e,e=n)),e}(),e===n&&(e=function(){let e,t,r,a,o;return e=Ke,t=St(),t!==n?(Gn(),r=kt(),r!==n?(Gn(),a=an(),a!==n?(Gn(),o=zt(),o!==n?(Xe=e,e=function(e,t,n){return{op:e,right:t,escape:n.value}}(t,r,o)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=St(),t!==n?(Gn(),r=kt(),r!==n?(Xe=e,e=function(e,t){return{op:e,right:t,escape:""}}(t,r)):(Ke=e,e=n)):(Ke=e,e=n)),e}())))),e}(),a!==n?r=a:(Ke=r,r=n),r===n&&(r=null),Xe=e,e=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?nr(e,t.tail):er(t.op,e,t.right,t.escape,ot())}(t,r)):(Ke=e,e=n),e}()),t}function It(){let t;return">="===e.substr(Ke,2)?(t=">=",Ke+=2):(t=n,0===at&&ft(y)),t===n&&(62===e.charCodeAt(Ke)?(t=">",Ke++):(t=n,0===at&&ft(T)),t===n&&("<="===e.substr(Ke,2)?(t="<=",Ke+=2):(t=n,0===at&&ft(N)),t===n&&("<>"===e.substr(Ke,2)?(t="<>",Ke+=2):(t=n,0===at&&ft(O)),t===n&&(t=e.charAt(Ke),u.test(t)?Ke++:(t=n,0===at&&ft(x)),t===n&&("!="===e.substr(Ke,2)?(t="!=",Ke+=2):(t=n,0===at&&ft(D))))))),t}function St(){let e,t,r,a,o;return e=Ke,t=Ke,r=on(),r!==n?(a=Gn(),o=rn(),o!==n?(r=[r,a,o],t=r):(Ke=t,t=n)):(Ke=t,t=n),t!==n&&(Xe=e,t=function(e){return e[0]+" "+e[2]}(t)),e=t,e===n&&(e=rn()),e}function gt(){let e,t,r,a,o;return e=Ke,t=Ke,r=on(),r!==n?(a=Gn(),o=tn(),o!==n?(r=[r,a,o],t=r):(Ke=t,t=n)):(Ke=t,t=n),t!==n&&(Xe=e,t=function(e){return e[0]+" "+e[2]}(t)),e=t,e===n&&(e=tn()),e}function yt(){let e,t,r,a,o,i;if(e=Ke,t=Nt(),t!==n){for(r=[],a=Ke,Gn(),o=Tt(),o!==n?(Gn(),i=Nt(),i!==n?(Xe=a,a=Ye(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);a!==n;)r.push(a),a=Ke,Gn(),o=Tt(),o!==n?(Gn(),i=Nt(),i!==n?(Xe=a,a=Ye(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);Xe=e,e=function(e,t){return nr(e,t)}(t,r)}else Ke=e,e=n;return e}function Tt(){let t;return t=e.charAt(Ke),s.test(t)?Ke++:(t=n,0===at&&ft(E)),t===n&&("||"===e.substr(Ke,2)?(t="||",Ke+=2):(t=n,0===at&&ft(C))),t}function Nt(){let e,t,r,a,o,i;if(e=Ke,t=xt(),t!==n){for(r=[],a=Ke,Gn(),o=Ot(),o!==n?(Gn(),i=xt(),i!==n?(Xe=a,a=We(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);a!==n;)r.push(a),a=Ke,Gn(),o=Ot(),o!==n?(Gn(),i=xt(),i!==n?(Xe=a,a=We(0,o,i)):(Ke=a,a=n)):(Ke=a,a=n);Xe=e,e=function(e,t){return nr(e,t)}(t,r)}else Ke=e,e=n;return e}function Ot(){let t;return t=e.charAt(Ke),l.test(t)?Ke++:(t=n,0===at&&ft(_)),t}function xt(){let e,t,r,a;return e=function(){let e;return e=zt(),e===n&&(e=function(){let e,t,r,a;return e=Ke,t=function(){let e,t,r,a;return e=Ke,t=Jt(),t!==n?(r=Yt(),r!==n?(a=Wt(),a!==n?(Xe=e,e=function(e,t,n){return parseFloat(e+t+n)}(t,r,a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Jt(),t!==n?(r=Yt(),r!==n?(Xe=e,e=function(e,t){return parseFloat(e+t)}(t,r)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Jt(),t!==n?(r=Wt(),r!==n?(Xe=e,e=function(e,t){return parseFloat(e+t)}(t,r)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Jt(),t!==n&&(Xe=e,t=function(e){return parseFloat(e)}(t)),e=t))),e}(),t!==n?(r=Ke,at++,a=Et(),at--,a===n?r=void 0:(Ke=r,r=n),r!==n?(Xe=e,e=function(e){return{type:"number",location:ot(),value:e}}(t)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t;return e=Ke,t=Xt(),t!==n&&(Xe=e,t={type:"boolean",location:ot(),value:!0}),e=t,e===n&&(e=Ke,t=en(),t!==n&&(Xe=e,t={type:"boolean",location:ot(),value:!1}),e=t),e}(),e===n&&(e=function(){let e,t;return e=Ke,t=Kt(),t!==n&&(Xe=e,t={type:"null",location:ot(),value:null}),e=t,e}(),e===n&&(e=function(){let e,t,r;return e=Ke,t=wn(),t!==n?(Gn(),r=kt(),r!==n?(Xe=e,e=Ge(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t,r;return e=Ke,t=vn(),t!==n?(Gn(),r=kt(),r!==n?(Xe=e,e=Qe(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=Rt(),e===n&&(e=function(){let e,t,r;return e=Ke,t=In(),t!==n?(Gn(),r=kt(),r!==n?(Xe=e,e=Be(r)):(Ke=e,e=n)):(Ke=e,e=n),e}()))))))),e}(),e===n&&(e=function(){let e,t,r,a,o,i,u,s;return e=Ke,t=pn(),t!==n?(Gn(),r=Ke,a=Qn(),a!==n?(Gn(),o=Pt(),o!==n?(Gn(),i=cn(),i!==n?(Gn(),u=ht(),u!==n?(Gn(),s=Bn(),s!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n),r===n&&(r=Ke,a=Qn(),a!==n?(Gn(),o=Pt(),o!==n?(Gn(),i=Wn(),i!==n?(Gn(),u=ht(),u!==n?(Gn(),s=Bn(),s!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)),r!==n?(Xe=e,e=function(e){return{type:"function",location:ot(),name:"extract",args:e}}(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t,r,a,o,i,u,s,l,c,f;return e=Ke,t=dn(),t!==n?(Gn(),r=Ke,a=Qn(),a!==n?(Gn(),o=ht(),o!==n?(Gn(),i=cn(),i!==n?(Gn(),u=ht(),u!==n?(Gn(),s=Ke,l=fn(),l!==n?(c=Gn(),f=ht(),f!==n?(Gn(),s=f):(Ke=s,s=n)):(Ke=s,s=n),s===n&&(s=null),l=Bn(),l!==n?(Xe=r,r=function(e,t,n){return tr(ot(),e,t,...n?[n]:[])}(o,u,s)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n),r===n&&(r=Ke,a=Qn(),a!==n?(Gn(),o=ht(),o!==n?(Gn(),i=Wn(),i!==n?(Gn(),u=ht(),u!==n?(Gn(),s=Wn(),s!==n?(l=Gn(),c=ht(),c!==n?(f=Bn(),f!==n?(Xe=r,r=function(e,t,n){return tr(ot(),e,t,n)}(o,u,c)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)),r!==n?(Xe=e,e=function(e){return{type:"function",location:ot(),name:"substring",args:e}}(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t,r,a,o,i,u,s,l;return e=Ke,t=mn(),t!==n?(Gn(),r=Ke,a=Qn(),a!==n?(Gn(),o=Lt(),Gn(),i=ht(),i!==n?(Gn(),u=cn(),u!==n?(Gn(),s=ht(),s!==n?(Gn(),l=Bn(),l!==n?(Xe=r,r=function(e,t,n){return tr(ot(),e,t,n)}(o,i,s)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n),r===n&&(r=Ke,a=Qn(),a!==n?(Gn(),o=Lt(),Gn(),i=ht(),i!==n?(Gn(),u=Bn(),u!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,i)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)),r!==n?(Xe=e,e=function(e){return{type:"function",location:ot(),name:"trim",args:e}}(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t,r,a,o,i,u,s;return e=Ke,t=hn(),t!==n?(Gn(),r=Ke,a=Qn(),a!==n?(Gn(),o=ht(),o!==n?(Gn(),i=tn(),i!==n?(Gn(),u=ht(),u!==n?(Gn(),s=Bn(),s!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n),r===n&&(r=Ke,a=Qn(),a!==n?(Gn(),o=ht(),o!==n?(Gn(),i=Wn(),i!==n?(Gn(),u=ht(),u!==n?(Gn(),s=Bn(),s!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)),r!==n?(Xe=e,e=function(e){return{type:"function",location:ot(),name:"position",args:e}}(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t,r,a,o,i,u,s;return e=Ke,t=Tn(),t!==n?(Gn(),r=Ke,a=Qn(),a!==n?(Gn(),o=ht(),o!==n?(Gn(),i=Nn(),i!==n?(Gn(),u=Ft(),u!==n?(Gn(),s=Bn(),s!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n),r===n&&(r=Ke,a=Qn(),a!==n?(Gn(),o=ht(),o!==n?(Gn(),i=Wn(),i!==n?(Gn(),u=Ft(),u!==n?(Gn(),s=Bn(),s!==n?(Xe=r,r=function(e,t){return tr(ot(),e,t)}(o,u)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)):(Ke=r,r=n)),r!==n?(Xe=e,e=function(e){return{type:"function",location:ot(),name:"cast",args:e}}(r)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e,t,r,a;return e=Ke,t=Ke,at++,r=pn(),at--,r===n?t=void 0:(Ke=t,t=n),t!==n?(r=Xn(),r!==n?(Gn(),a=mt(),a!==n?(Xe=e,e=function(e,t){return{type:"function",location:ot(),name:e,args:t}}(r,a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e}(),e===n&&(e=function(){let e;return e=function(){let e,t,r,a,o,i,u;if(e=Ke,t=jn(),t!==n)if(Gn(),r=ht(),r!==n){for(Gn(),a=[],o=Ke,i=qt(),i!==n?(u=Gn(),o=i):(Ke=o,o=n);o!==n;)a.push(o),o=Ke,i=qt(),i!==n?(u=Gn(),o=i):(Ke=o,o=n);o=qn(),o!==n?(Xe=e,e=function(e,t){return{type:"case-expression",location:ot(),format:"simple",operand:e,clauses:t,else:null,elseLocation:null}}(r,a)):(Ke=e,e=n)}else Ke=e,e=n;else Ke=e,e=n;if(e===n)if(e=Ke,t=jn(),t!==n)if(Gn(),r=ht(),r!==n){for(Gn(),a=[],o=Ke,i=qt(),i!==n?(u=Gn(),o=i):(Ke=o,o=n);o!==n;)a.push(o),o=Ke,i=qt(),i!==n?(u=Gn(),o=i):(Ke=o,o=n);o=Zt(),o!==n?(i=Gn(),u=qn(),u!==n?(Xe=e,e=function(e,t,n){return{type:"case-expression",location:ot(),format:"simple",operand:e,clauses:t,else:n.value,elseLocation:n.location}}(r,a,o)):(Ke=e,e=n)):(Ke=e,e=n)}else Ke=e,e=n;else Ke=e,e=n;return e}(),e===n&&(e=function(){let e,t,r,a,o,i;if(e=Ke,t=jn(),t!==n){for(Gn(),r=[],a=Ke,o=jt(),o!==n?(i=Gn(),a=o):(Ke=a,a=n);a!==n;)r.push(a),a=Ke,o=jt(),o!==n?(i=Gn(),a=o):(Ke=a,a=n);a=qn(),a!==n?(Xe=e,e=function(e){return{type:"case-expression",location:ot(),format:"searched",clauses:e,else:null,elseLocation:null}}(r)):(Ke=e,e=n)}else Ke=e,e=n;if(e===n)if(e=Ke,t=jn(),t!==n){for(Gn(),r=[],a=Ke,o=jt(),o!==n?(i=Gn(),a=o):(Ke=a,a=n);a!==n;)r.push(a),a=Ke,o=jt(),o!==n?(i=Gn(),a=o):(Ke=a,a=n);a=Zt(),a!==n?(o=Gn(),i=qn(),i!==n?(Xe=e,e=function(e,t){return{type:"case-expression",location:ot(),format:"searched",clauses:e,else:t.value,elseLocation:t.location}}(r,a)):(Ke=e,e=n)):(Ke=e,e=n)}else Ke=e,e=n;return e}()),e}(),e===n&&(e=function(){let e,t;return e=Ke,t=function(){let e,t;return e=Ke,t=function(){let e,t,r,a;if(e=Ke,t=Et(),t!==n){for(r=[],a=_t();a!==n;)r.push(a),a=_t();Xe=e,e=function(e,t){return e+t.join("")}(t,r)}else Ke=e,e=n;return e}(),t!==n&&(Xe=e),e=t,e}(),t!==n&&(Xe=e,t=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:ot(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:ot(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:ot(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:ot()}:{type:"column-reference",location:ot(),table:"",column:e}}(t)),e=t,e===n&&(e=Ke,t=function(){let e,t,r,a;return e=Ke,t=bt(),t!==n?(r=function(){let e,t,r;for(e=Ke,t=[],r=Mt();r!==n;)t.push(r),r=Mt();return Xe=e,t=function(e){return e.join("")}(t),e=t,e}(),a=bt(),a!==n?(Xe=e,e=r):(Ke=e,e=n)):(Ke=e,e=n),e}(),t!==n&&(Xe=e,t=function(e){return{type:"column-reference",location:ot(),table:"",column:e,delimited:!0}}(t)),e=t),e}(),e===n&&(e=At(),e===n&&(e=Ke,t=Qn(),t!==n?(Gn(),r=ht(),r!==n?(Gn(),a=Bn(),a!==n?(Xe=e,e=function(e){return e.paren=!0,e}(r)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n))))))))))),e}function Dt(){let e,t,r,a;if(e=Ke,t=Et(),t!==n){for(r=[],a=Ct();a!==n;)r.push(a),a=Ct();Xe=e,e=function(e,t){return e+t.join("")}(t,r)}else Ke=e,e=n;return e}function Et(){let t;return t=e.charAt(Ke),c.test(t)?Ke++:(t=n,0===at&&ft(M)),t}function Ct(){let t;return t=e.charAt(Ke),f.test(t)?Ke++:(t=n,0===at&&ft(b)),t}function _t(){let t;return t=e.charAt(Ke),d.test(t)?Ke++:(t=n,0===at&&ft(A)),t}function Mt(){let t;return t=function(){let t;return t=e.charAt(Ke),d.test(t)?Ke++:(t=n,0===at&&ft(A)),t}(),t===n&&(t=function(){let e,t,r;return e=Ke,t=bt(),t!==n?(r=bt(),r!==n?(Xe=e,e='"'):(Ke=e,e=n)):(Ke=e,e=n),e}()),t}function bt(){let t;return t=e.charAt(Ke),p.test(t)?Ke++:(t=n,0===at&&ft(F)),t}function At(){let t,r,a,o;return t=Ke,r=Ke,64===e.charCodeAt(Ke)?(a="@",Ke++):(a=n,0===at&&ft(L)),a!==n?(o=Dt(),o!==n?(a=[a,o],r=a):(Ke=r,r=n)):(Ke=r,r=n),r!==n&&(Xe=t,r=function(e){return{type:"parameter",location:ot(),value:e[1]}}(r)),t=r,t}function Ft(){let e,t,r,a,o;return e=Ke,t=On(),t===n&&(t=xn()),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"integer"}}),e=t,e===n&&(e=Ke,t=Dn(),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"smallint"}}),e=t,e===n&&(e=Ke,t=En(),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"float"}}),e=t,e===n&&(e=Ke,t=Cn(),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"real"}}),e=t,e===n&&(e=Ke,t=wn(),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"date"}}),e=t,e===n&&(e=Ke,t=vn(),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"timestamp"}}),e=t,e===n&&(e=Ke,t=In(),t!==n&&(Xe=e,t={type:"data-type",location:ot(),value:{type:"time"}}),e=t,e===n&&(e=Ke,t=_n(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Qt(),a!==n?(Gn(),o=Bn(),o!==n?(Xe=e,e=function(e){return{type:"data-type",location:ot(),value:{type:"varchar",size:parseInt(e)}}}(a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)))))))),e}function Lt(){let e,t;return e=Ke,t=Sn(),t===n&&(t=gn(),t===n&&(t=yn())),t===n&&(t=null),Xe=e,t=function(e){return{type:"string",location:ot(),value:e??"BOTH"}}(t),e=t,e}function Pt(){let e,t;return e=Ke,t=An(),t===n&&(t=Pn(),t===n&&(t=Rn(),t===n&&(t=$n(),t===n&&(t=Un(),t===n&&(t=Vn(),t===n&&(t=Fn(),t===n&&(t=Ln(),t===n&&(t=Hn(),t===n&&(t=kn(),t===n&&(t=zn())))))))))),t!==n&&(Xe=e,t=function(e){return{type:"string",location:ot(),value:e}}(t)),e=t,e}function Rt(){let t,r,a,o,i;return t=Ke,r=bn(),r!==n?(Gn(),a=e.charAt(Ke),s.test(a)?Ke++:(a=n,0===at&&ft(E)),a!==n?(Gn(),o=kt(),o!==n?(Gn(),i=$t(),i!==n?(Xe=t,t=function(e,t,n){return{type:"interval",location:ot(),value:t,qualifier:n,op:e}}(a,o,i)):(Ke=t,t=n)):(Ke=t,t=n)):(Ke=t,t=n)):(Ke=t,t=n),t===n&&(t=Ke,r=bn(),r!==n?(Gn(),a=kt(),a!==n?(Gn(),o=$t(),o!==n?(Xe=t,t=function(e,t){return{type:"interval",location:ot(),value:e,qualifier:t,op:""}}(a,o)):(Ke=t,t=n)):(Ke=t,t=n)):(Ke=t,t=n)),t}function $t(){let e,t,r,a;return e=Ke,t=function(){let e,t,r,a,o;return e=Ke,t=Ut(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Ht(),a!==n?(Gn(),o=Bn(),o!==n?(Xe=e,e=function(e,t){return{type:"interval-period",location:ot(),period:e.value,precision:t,secondary:null}}(t,a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Ut(),t!==n&&(Xe=e,t=function(e){return{type:"interval-period",location:ot(),period:e.value,precision:null,secondary:null}}(t)),e=t),e}(),t!==n?(Gn(),r=Mn(),r!==n?(Gn(),a=function(){let e,t,r,a,o,i,u;return e=Ke,t=Ut(),t!==n&&(Xe=e,t=function(e){return{type:"interval-period",location:ot(),period:e.value,precision:null,secondary:null}}(t)),e=t,e===n&&(e=Ke,t=Vn(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Ht(),a!==n?(Gn(),o=Wn(),o!==n?(Gn(),i=Vt(),i!==n?(Gn(),u=Bn(),u!==n?(Xe=e,e=function(e,t){return{type:"interval-period",location:ot(),period:"second",precision:e,secondary:t}}(a,i)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Vn(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Ht(),a!==n?(Gn(),o=Bn(),o!==n?(Xe=e,e=function(e){return{type:"interval-period",location:ot(),period:"second",precision:e,secondary:null}}(a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Vn(),t!==n&&(Xe=e,t={type:"interval-period",location:ot(),period:"second",precision:null,secondary:null}),e=t))),e}(),a!==n?(Xe=e,e=function(e,t){return{type:"interval-qualifier",location:ot(),start:e,end:t}}(t,a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=function(){let e,t,r,a,o,i,u;return e=Ke,t=Ut(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Vt(),a!==n?(Gn(),o=Bn(),o!==n?(Xe=e,e=function(e,t){return{type:"interval-period",location:ot(),period:e.value,precision:t,secondary:null}}(t,a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Ut(),t!==n&&(Xe=e,t=function(e){return{type:"interval-period",location:ot(),period:e.value,precision:null,secondary:null}}(t)),e=t,e===n&&(e=Ke,t=Vn(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Ht(),a!==n?(Gn(),o=Wn(),o!==n?(Gn(),i=Vt(),i!==n?(Gn(),u=Bn(),u!==n?(Xe=e,e=function(e,t){return{type:"interval-period",location:ot(),period:"second",precision:e,secondary:t}}(a,i)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Vn(),t!==n?(Gn(),r=Qn(),r!==n?(Gn(),a=Vt(),a!==n?(Gn(),o=Bn(),o!==n?(Xe=e,e=function(e){return{type:"interval-period",location:ot(),period:"second",precision:e,secondary:null}}(a)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e===n&&(e=Ke,t=Vn(),t!==n&&(Xe=e,t={type:"interval-period",location:ot(),period:"second",precision:null,secondary:null}),e=t)))),e}()),e}function Ut(){let e,t;return e=Ke,t=Rn(),t!==n&&(Xe=e,t={type:"string",location:ot(),value:"day"}),e=t,e===n&&(e=Ke,t=$n(),t!==n&&(Xe=e,t={type:"string",location:ot(),value:"hour"}),e=t,e===n&&(e=Ke,t=Un(),t!==n&&(Xe=e,t={type:"string",location:ot(),value:"minute"}),e=t,e===n&&(e=Ke,t=Pn(),t!==n&&(Xe=e,t={type:"string",location:ot(),value:"month"}),e=t,e===n&&(e=Ke,t=An(),t!==n&&(Xe=e,t={type:"string",location:ot(),value:"year"}),e=t)))),e}function Vt(){let e,t;return e=Ke,t=Qt(),t!==n&&(Xe=e,t=function(e){return parseFloat(e)}(t)),e=t,e}function Ht(){let e,t;return e=Ke,t=Qt(),t!==n&&(Xe=e,t=function(e){return parseFloat(e)}(t)),e=t,e}function kt(){let e;return e=zt(),e===n&&(e=At()),e}function zt(){let t,r,a,o,u;if(t=Ke,39===e.charCodeAt(Ke)?(r="'",Ke++):(r=n,0===at&&ft(P)),r===n&&("N'"===e.substr(Ke,2)?(r="N'",Ke+=2):(r=n,0===at&&ft(R))),r!==n){for(a=[],o=Ke,e.substr(Ke,2)===i?(u=i,Ke+=2):(u=n,0===at&&ft($)),u!==n&&(Xe=o,u="'"),o=u,o===n&&(o=e.charAt(Ke),m.test(o)?Ke++:(o=n,0===at&&ft(U)));o!==n;)a.push(o),o=Ke,e.substr(Ke,2)===i?(u=i,Ke+=2):(u=n,0===at&&ft($)),u!==n&&(Xe=o,u="'"),o=u,o===n&&(o=e.charAt(Ke),m.test(o)?Ke++:(o=n,0===at&&ft(U)));39===e.charCodeAt(Ke)?(o="'",Ke++):(o=n,0===at&&ft(P)),o!==n?(Xe=t,t=function(e){return{type:"string",location:ot(),value:e.join("")}}(a)):(Ke=t,t=n)}else Ke=t,t=n;return t}function jt(){let e,t,r,a,o;return e=Ke,t=Zn(),t!==n?(Gn(),r=ht(),r!==n?(Gn(),a=Jn(),a!==n?(Gn(),o=ht(),o!==n?(Xe=e,e=function(e,t){return{type:"when-clause",location:ot(),operand:e,value:t}}(r,o)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e}function qt(){let e,t,r,a,o;return e=Ke,t=Zn(),t!==n?(Gn(),r=ht(),r!==n?(Gn(),a=Jn(),a!==n?(Gn(),o=ht(),o!==n?(Xe=e,e=function(e,t){return{type:"when-clause",location:ot(),operand:e,value:t}}(r,o)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n)):(Ke=e,e=n),e}function Zt(){let e,t,r;return e=Ke,t=Yn(),t!==n?(Gn(),r=ht(),r!==n?(Xe=e,e=function(e){return{type:"else-clause",location:ot(),value:e}}(r)):(Ke=e,e=n)):(Ke=e,e=n),e}function Jt(){let t,r,a;return t=Qt(),t===n&&(t=Ke,r=e.charAt(Ke),s.test(r)?Ke++:(r=n,0===at&&ft(E)),r!==n?(a=Qt(),a!==n?(Xe=t,t=function(e,t){return e[0]+t}(r,a)):(Ke=t,t=n)):(Ke=t,t=n)),t}function Yt(){let t,r,a;return t=Ke,46===e.charCodeAt(Ke)?(r=".",Ke++):(r=n,0===at&&ft(V)),r!==n?(a=Qt(),a===n&&(a=null),Xe=t,t=function(e){return"."+(null!=e?e:"")}(a)):(Ke=t,t=n),t}function Wt(){let e,t,r;return e=Ke,t=Gt(),t!==n?(r=Qt(),r!==n?(Xe=e,e=function(e,t){return e+t}(t,r)):(Ke=e,e=n)):(Ke=e,e=n),e}function Qt(){let e,t,r;if(e=Ke,t=[],r=Bt(),r!==n)for(;r!==n;)t.push(r),r=Bt();else t=n;return t!==n&&(Xe=e,t=function(e){return e.join("")}(t)),e=t,e}function Bt(){let t;return t=e.charAt(Ke),h.test(t)?Ke++:(t=n,0===at&&ft(H)),t}function Gt(){let t,r,a;return t=Ke,r=e.charAt(Ke),v.test(r)?Ke++:(r=n,0===at&&ft(k)),r!==n?(a=e.charAt(Ke),s.test(a)?Ke++:(a=n,0===at&&ft(E)),a===n&&(a=null),Xe=t,t=function(e,t){return"e"+(null===t?"":t)}(0,a)):(Ke=t,t=n),t}function Kt(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"null"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(z)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(r=[r,a],t=r):(Ke=t,t=n)):(Ke=t,t=n),t}function Xt(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"true"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(j)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(r=[r,a],t=r):(Ke=t,t=n)):(Ke=t,t=n),t}function en(){let t,r,a,o;return t=Ke,r=e.substr(Ke,5),"false"===r.toLowerCase()?Ke+=5:(r=n,0===at&&ft(q)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(r=[r,a],t=r):(Ke=t,t=n)):(Ke=t,t=n),t}function tn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,2),"in"===r.toLowerCase()?Ke+=2:(r=n,0===at&&ft(Z)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="IN"):(Ke=t,t=n)):(Ke=t,t=n),t}function nn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,2),"is"===r.toLowerCase()?Ke+=2:(r=n,0===at&&ft(J)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="IS"):(Ke=t,t=n)):(Ke=t,t=n),t}function rn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"like"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Y)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="LIKE"):(Ke=t,t=n)):(Ke=t,t=n),t}function an(){let t,r,a,o;return t=Ke,r=e.substr(Ke,6),"escape"===r.toLowerCase()?Ke+=6:(r=n,0===at&&ft(Q)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="ESCAPE"):(Ke=t,t=n)):(Ke=t,t=n),t}function on(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"not"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(B)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="NOT"):(Ke=t,t=n)):(Ke=t,t=n),t}function un(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"and"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(G)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="AND"):(Ke=t,t=n)):(Ke=t,t=n),t}function sn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,2),"or"===r.toLowerCase()?Ke+=2:(r=n,0===at&&ft(K)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="OR"):(Ke=t,t=n)):(Ke=t,t=n),t}function ln(){let t,r,a,o;return t=Ke,r=e.substr(Ke,7),"between"===r.toLowerCase()?Ke+=7:(r=n,0===at&&ft(X)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="BETWEEN"):(Ke=t,t=n)):(Ke=t,t=n),t}function cn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"from"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(ee)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="FROM"):(Ke=t,t=n)):(Ke=t,t=n),t}function fn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"for"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(te)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="FOR"):(Ke=t,t=n)):(Ke=t,t=n),t}function dn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,9),"substring"===r.toLowerCase()?Ke+=9:(r=n,0===at&&ft(ne)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="SUBSTRING"):(Ke=t,t=n)):(Ke=t,t=n),t}function pn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,7),"extract"===r.toLowerCase()?Ke+=7:(r=n,0===at&&ft(re)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="EXTRACT"):(Ke=t,t=n)):(Ke=t,t=n),t}function mn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"trim"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(ae)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TRIM"):(Ke=t,t=n)):(Ke=t,t=n),t}function hn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,8),"position"===r.toLowerCase()?Ke+=8:(r=n,0===at&&ft(oe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="POSITION"):(Ke=t,t=n)):(Ke=t,t=n),t}function vn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,9),"timestamp"===r.toLowerCase()?Ke+=9:(r=n,0===at&&ft(ie)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TIMESTAMP"):(Ke=t,t=n)):(Ke=t,t=n),t}function wn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"date"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(ue)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="DATE"):(Ke=t,t=n)):(Ke=t,t=n),t}function In(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"time"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(se)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TIME"):(Ke=t,t=n)):(Ke=t,t=n),t}function Sn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,7),"leading"===r.toLowerCase()?Ke+=7:(r=n,0===at&&ft(le)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="LEADING"):(Ke=t,t=n)):(Ke=t,t=n),t}function gn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,8),"trailing"===r.toLowerCase()?Ke+=8:(r=n,0===at&&ft(ce)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TRAILING"):(Ke=t,t=n)):(Ke=t,t=n),t}function yn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"both"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(fe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="BOTH"):(Ke=t,t=n)):(Ke=t,t=n),t}function Tn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"cast"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(de)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="CAST"):(Ke=t,t=n)):(Ke=t,t=n),t}function Nn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,2),"as"===r.toLowerCase()?Ke+=2:(r=n,0===at&&ft(pe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="AS"):(Ke=t,t=n)):(Ke=t,t=n),t}function On(){let t,r,a,o;return t=Ke,r=e.substr(Ke,7),"integer"===r.toLowerCase()?Ke+=7:(r=n,0===at&&ft(me)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="INTEGER"):(Ke=t,t=n)):(Ke=t,t=n),t}function xn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"int"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(he)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="INT"):(Ke=t,t=n)):(Ke=t,t=n),t}function Dn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,8),"smallint"===r.toLowerCase()?Ke+=8:(r=n,0===at&&ft(ve)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="SMALLINT"):(Ke=t,t=n)):(Ke=t,t=n),t}function En(){let t,r,a,o;return t=Ke,r=e.substr(Ke,5),"float"===r.toLowerCase()?Ke+=5:(r=n,0===at&&ft(we)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="FLOAT"):(Ke=t,t=n)):(Ke=t,t=n),t}function Cn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"real"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Ie)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="REAL"):(Ke=t,t=n)):(Ke=t,t=n),t}function _n(){let t,r,a,o;return t=Ke,r=e.substr(Ke,7),"varchar"===r.toLowerCase()?Ke+=7:(r=n,0===at&&ft(Se)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="VARCHAR"):(Ke=t,t=n)):(Ke=t,t=n),t}function Mn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,2),"to"===r.toLowerCase()?Ke+=2:(r=n,0===at&&ft(ge)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TO"):(Ke=t,t=n)):(Ke=t,t=n),t}function bn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,8),"interval"===r.toLowerCase()?Ke+=8:(r=n,0===at&&ft(ye)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="INTERVAL"):(Ke=t,t=n)):(Ke=t,t=n),t}function An(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"year"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Te)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="YEAR"):(Ke=t,t=n)):(Ke=t,t=n),t}function Fn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,13),"timezone_hour"===r.toLowerCase()?Ke+=13:(r=n,0===at&&ft(Ne)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TIMEZONE_HOUR"):(Ke=t,t=n)):(Ke=t,t=n),t}function Ln(){let t,r,a,o;return t=Ke,r=e.substr(Ke,15),"timezone_minute"===r.toLowerCase()?Ke+=15:(r=n,0===at&&ft(Oe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="TIMEZONE_MINUTE"):(Ke=t,t=n)):(Ke=t,t=n),t}function Pn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,5),"month"===r.toLowerCase()?Ke+=5:(r=n,0===at&&ft(xe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="MONTH"):(Ke=t,t=n)):(Ke=t,t=n),t}function Rn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"day"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(De)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="DAY"):(Ke=t,t=n)):(Ke=t,t=n),t}function $n(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"hour"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Ee)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="HOUR"):(Ke=t,t=n)):(Ke=t,t=n),t}function Un(){let t,r,a,o;return t=Ke,r=e.substr(Ke,6),"minute"===r.toLowerCase()?Ke+=6:(r=n,0===at&&ft(Ce)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="MINUTE"):(Ke=t,t=n)):(Ke=t,t=n),t}function Vn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,6),"second"===r.toLowerCase()?Ke+=6:(r=n,0===at&&ft(_e)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="SECOND"):(Ke=t,t=n)):(Ke=t,t=n),t}function Hn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"dow"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(Me)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="DOW"):(Ke=t,t=n)):(Ke=t,t=n),t}function kn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"doy"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(be)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="DOY"):(Ke=t,t=n)):(Ke=t,t=n),t}function zn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"week"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Ae)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="WEEK"):(Ke=t,t=n)):(Ke=t,t=n),t}function jn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"case"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Fe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="CASE"):(Ke=t,t=n)):(Ke=t,t=n),t}function qn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,3),"end"===r.toLowerCase()?Ke+=3:(r=n,0===at&&ft(Le)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="END"):(Ke=t,t=n)):(Ke=t,t=n),t}function Zn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"when"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Pe)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="WHEN"):(Ke=t,t=n)):(Ke=t,t=n),t}function Jn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"then"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft(Re)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="THEN"):(Ke=t,t=n)):(Ke=t,t=n),t}function Yn(){let t,r,a,o;return t=Ke,r=e.substr(Ke,4),"else"===r.toLowerCase()?Ke+=4:(r=n,0===at&&ft($e)),r!==n?(a=Ke,at++,o=Ct(),at--,o===n?a=void 0:(Ke=a,a=n),a!==n?(Xe=t,t="ELSE"):(Ke=t,t=n)):(Ke=t,t=n),t}function Wn(){let t;return 44===e.charCodeAt(Ke)?(t=",",Ke++):(t=n,0===at&&ft(Ue)),t}function Qn(){let t;return 40===e.charCodeAt(Ke)?(t="(",Ke++):(t=n,0===at&&ft(Ve)),t}function Bn(){let t;return 41===e.charCodeAt(Ke)?(t=")",Ke++):(t=n,0===at&&ft(He)),t}function Gn(){let e,t;for(e=[],t=Kn();t!==n;)e.push(t),t=Kn();return e}function Kn(){let t;return t=e.charAt(Ke),w.test(t)?Ke++:(t=n,0===at&&ft(ke)),t}function Xn(){let t,r,a,o;if(t=Ke,r=Dt(),r!==n&&(Xe=t),t=r,t===n)if(t=Ke,96===e.charCodeAt(Ke)?(r="`",Ke++):(r=n,0===at&&ft(ze)),r!==n){if(a=[],o=e.charAt(Ke),I.test(o)?Ke++:(o=n,0===at&&ft(je)),o!==n)for(;o!==n;)a.push(o),o=e.charAt(Ke),I.test(o)?Ke++:(o=n,0===at&&ft(je));else a=n;a!==n?(96===e.charCodeAt(Ke)?(o="`",Ke++):(o=n,0===at&&ft(ze)),o!==n?(Xe=t,t=function(e){return e.join("")}(a)):(Ke=t,t=n)):(Ke=t,t=n)}else Ke=t,t=n;return t}function er(e,t,n,r,a){const o={type:"binary-expression",location:a,operator:e,left:t,right:n};return void 0!==r&&(o.escape=r),o}function tr(e,...t){return{type:"expression-list",location:e,value:t}}function nr(e,t){let n=e;for(const{op:e,expr:r,location:{end:a}}of t)n=er(e,n,r,void 0,{...n.location,end:a});return n}tt=o();const rr=tt!==n&&Ke===e.length;function ar(){throw tt!==n&&Ke<e.length&&ft({type:"end"}),function(e,t,n){return new W(W.buildMessage(e,t),e,t,n)}(rt,nt<e.length?function(t=Ke){const n=e.codePointAt(t);return void 0===n?"":String.fromCodePoint(n)}(nt):null,nt<e.length?ct(nt,nt+1):ct(nt,nt))}return t.peg$library?{peg$result:tt,peg$currPos:Ke,peg$FAILED:n,peg$maxFailExpected:rt,peg$maxFailPos:nt,peg$success:rr,peg$throw:rr?void 0:ar}:rr?tt:void ar()}class B{static parse(e){return Q(e)}}function G(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":G(e.operand,t),G(e.value,t);break;case"case-expression":for(const n of e.clauses)G(n,t);"simple"===e.format&&G(e.operand,t),null!==e.else&&G(e.else,t);break;case"expression-list":for(const n of e.value)G(n,t);break;case"unary-expression":G(e.expr,t);break;case"binary-expression":G(e.left,t),G(e.right,t);break;case"function":G(e.args,t);break;case"interval":G(e.value,t),G(e.qualifier,t);break;case"interval-qualifier":G(e.start,t),G(e.end,t)}}const K=new Set(["current_timestamp","current_date","current_time"]);class X{constructor(e){this.staticData=e}makeBool(e){return fe(e)}featureValue(e,t,n,r){return Oe(e,t,n,r)}equalsNull(e){return null===e}applyLike(e,t,n){return Ne(e,t,n)}ensureArray(e){return de(e)}applyIn(e,t){return ve(e,t)}currentTimestamp(e){return we(e)}currentDate(e){return Ie(e)}currentTime(e){return Se(e)}makeSqlInterval(e,t,n){return c.createFromValueAndQualifier(e,t,n)}convertInterval(e){return c.isInterval(e)?e.valueInMilliseconds():e}compare(e,t,n){return U(t,n,e)}calculate(e,t,n,r){return J(e,t,n,r)}evaluateTime(e){return _(e)}evaluateTimestamp(e,t,n){return M(e,t,n)}evaluateDate(e,t){return b(e,t)}evaluateFunction(e,t,n){return z(e,t,n)}lookup(e,t){const n=t[e];return void 0===n?null:n}between(e,t){return null==e||null==t[0]||null==t[1]?null:U(e,t[0],">=")&&U(e,t[1],"<=")}notbetween(e,t){return null==e||null==t[0]||null==t[1]?null:U(e,t[0],"<")||U(e,t[1],">")}ternaryNot(e){return pe(e)}ternaryAnd(e,t){return me(e,t)}ternaryOr(e,t){return he(e,t)}}function ee(e,...t){return`this.${e}(${t.join(", ")})`}function te(e){return void 0===e?"void 0":JSON.stringify(e)}function ne({type:e,period:t,precision:n,secondary:r}){return JSON.stringify({type:e,period:t,precision:n,secondary:r})}const re="feature",ae="lookups",oe="attributeAdapter",ie="fieldsIndex",ue="timeZone",se="currentUser";class le{constructor(e){this._parseTree=e,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){const e=this._compileNode(this._parseTree),t=`\n      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(", ")};`:""}\n      return this.convertInterval(${e});\n    `;return new Function(re,ae,oe,ie,ue,se,t).bind(new X(this._staticData))}_storeStaticData(e){const t="static$"+this._nextStaticDataId++;return this._staticData[t]=e,t}_compileRefStaticData(e){return`this.staticData[${te(e)}]`}_generateTempVar(){const e="temp$"+this._nextTempVarId++;return this._tempVars.add(e),e}_compileSimpleCase(e){const t=this._compileNode(e.operand),n=this._generateTempVar(),r=[];for(const t of e.clauses){const e=ee("compare",te("="),n,this._compileNode(t.operand)),a=this._compileNode(t.value);r.push(`${e} ? (${a}) :`)}return null!=e.else?r.push(this._compileNode(e.else)):r.push(te(null)),`(${n} = ${t}, ${r.join(" ")})`}_compileSearchedCase(e){const t=[];for(const n of e.clauses){const e=ee("makeBool",this._compileNode(n.operand)),r=this._compileNode(n.value);t.push(`${e} ? (${r}) :`)}return null!=e.else?t.push(this._compileNode(e.else)):t.push(te(null)),t.join(" ")}_compileInExpr(e,t){const n=new Set,r=[];for(const e of t.value)"number"===e.type||"string"===e.type?n.add(e.value):r.push(e);const a=this._compileNode(e),o=ee("ensureArray",this._compileNode({type:"expression-list",location:t.location,value:r}));if(n.size>0){const e=this._compileRefStaticData(this._storeStaticData(n)),t=this._generateTempVar();return r.length>0?`(${t} = ${a}, ${e}.has(${t}) || ${ee("applyIn",t,o)})`:`(${t} = ${a}, ${t} == null ? null : ${e}.has(${t}))`}return ee("applyIn",a,o)}_compileNode(e){switch(e.type){case"interval":return ee("makeSqlInterval",this._compileNode(e.value),"interval-qualifier"===e.qualifier.type?function({type:e,start:t,end:n}){return`{type: ${te(e)}, start: ${ne(t)}, end: ${ne(n)}}`}(e.qualifier):ne(e.qualifier),te(e.op));case"case-expression":return"simple"===e.format?this._compileSimpleCase(e):this._compileSearchedCase(e);case"parameter":return ee("lookup",te(e.value.toLowerCase()),ae);case"expression-list":return`[${e.value.map((e=>this._compileNode(e))).join(", ")}]`;case"unary-expression":return ee("ternaryNot",this._compileNode(e.expr));case"binary-expression":switch(e.operator){case"AND":return ee("ternaryAnd",this._compileNode(e.left),this._compileNode(e.right));case"OR":return ee("ternaryOr",this._compileNode(e.left),this._compileNode(e.right));case"IS":if("null"!==e.right.type)throw new i.eS(i.f.UnsupportedIsRhs);return ee("equalsNull",this._compileNode(e.left));case"ISNOT":if("null"!==e.right.type)throw new i.eS(i.f.UnsupportedIsRhs);return`!${ee("equalsNull",this._compileNode(e.left))}`;case"IN":return this._compileInExpr(e.left,e.right);case"NOT IN":return ee("ternaryNot",this._compileInExpr(e.left,e.right));case"BETWEEN":return ee("between",this._compileNode(e.left),this._compileNode(e.right));case"NOTBETWEEN":return ee("notbetween",this._compileNode(e.left),this._compileNode(e.right));case"LIKE":return ee("applyLike",this._compileNode(e.left),this._compileNode(e.right),te(e.escape));case"NOT LIKE":return ee("ternaryNot",ee("applyLike",this._compileNode(e.left),this._compileNode(e.right),te(e.escape)));case"<>":case"<":case">":case">=":case"<=":case"=":return ee("compare",te(e.operator),this._compileNode(e.left),this._compileNode(e.right));case"*":case"-":case"+":case"/":case"||":return ee("calculate",te(e.operator),this._compileNode(e.left),this._compileNode(e.right),ue);default:throw new i.eS(i.f.UnsupportedOperator,{operator:e.operator})}case"null":case"boolean":case"string":case"number":return te(e.value);case"time":try{return this._compileRefStaticData(this._storeStaticData(_(e.value)))}catch{return ee("evaluateTime",te(e.value))}case"date":try{return this._compileRefStaticData(this._storeStaticData(b(e.value,"unknown")))}catch{return ee("evaluateDate",te(e.value),te("unknown"))}case"timestamp":try{return this._compileRefStaticData(this._storeStaticData(M(e.value,"unknown")))}catch{return ee("evaluateTimestamp",te(e.value),te("unknown"))}case"current-time":return"date"===e.mode?ee("currentDate",ue):"time"===e.mode?ee("currentTime",ue):ee("currentTimestamp",ue);case"current-user":return se;case"column-reference":return ee("featureValue",re,te(e.column),ie,oe);case"data-type":return function({type:e,size:t,withtimezone:n}){return JSON.stringify({type:e,size:t,withtimezone:n})}(e.value);case"function":return ee("evaluateFunction",te(e.name),this._compileNode(e.args),ue)}throw new i.eS(i.f.UnsupportedSyntax,{node:e.type})}}class ce{static create(e,t={}){return new ce(e,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}constructor(e,t,n="UTC",r=null){this.fieldsIndex=t,this.timeZone=n,this.currentUser=r,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=B.parse(e);const{isStandardized:a,isAggregate:o,currentUserRequired:i,referencedFieldNames:u}=this._extractExpressionInfo(t);this._referencedFieldNames=u,this.isStandardized=a,this.isAggregate=o,this.currentUserRequired=i}static convertValueToStorageFormat(e,t=null){if(null===t)return(0,L.J_)(e)?e.getTime():x(e)?e.toMillis():C(e)?e.toStorageFormat():E(e)?e.toStorageString():D(e)?e.toStorageFormat():e;switch(t){case"date":return(0,L.J_)(e)?e.getTime():x(e)?e.toMillis():C(e)?e.toMilliseconds():D(e)?e.toNumber():e;case"date-only":return(0,L.J_)(e)?o.u.fromDateJS(e).toString():C(e)?o.u.fromSqlTimeStampOffset(e).toString():x(e)?o.u.fromDateTime(e).toString():e;case"time-only":return(0,L.J_)(e)?d.n.fromDateJS(e).toStorageString():x(e)?d.n.fromDateTime(e).toStorageString():C(e)?d.n.fromSqlTimeStampOffset(e).toStorageString():E(e)?e.toStorageString():e;case"timestamp-offset":if((0,L.J_)(e))return f.H.fromJSDate(e).toStorageFormat();if(x(e))return f.H.fromDateTime(e).toStorageFormat();if(C(e))return e.toStorageFormat()}return e}get fieldNames(){return this._referencedFieldNames}testSet(e,t=xe,n=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,n)}calculateValue(e,t=xe,n=this.currentUser){const r=this._evaluateNode(this.parseTree,e,t,null,n);return c.isInterval(r)?r.valueInMilliseconds()/864e5:r}tryGetCompiledExecutor(){if(null!=this._compiledExecutor)return this._compiledExecutor;if((0,r.Z)("esri-csp-restrictions"))return null;const e=new le(this.parseTree);return this._compiledExecutor=e.compile(),this._compiledExecutor}calculateValueCompiled(e,t=xe,n=this.currentUser){const r=this.tryGetCompiledExecutor();return null==r?this.calculateValue(e,t):r(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null)}testFeature(e,t=xe,n=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,n)}testFeatureCompiled(e,t=xe,n=this.currentUser){const r=this.tryGetCompiledExecutor();return null==r?this.testFeature(e,t):!!r(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null)}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,G(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||K.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return G(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return G(this.parseTree,(t=>{if("function"===t.type){const n=t.name.toLowerCase(),r=t.args.value[0];if("column-reference"===r.type){const t=r.column,a=`${n}-${t}`;e.has(a)||e.set(a,{aggregateType:n,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return G(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_extractExpressionInfo(e){const t=[],n=new Set;let r=!0,o=!1,i=!1;return G(this.parseTree,(u=>{switch(u.type){case"column-reference":{const r=e?.get(u.column);let a,o;r?a=o=r.name??"":(o=u.column,a=o.toLowerCase()),n.has(a)||(n.add(a),t.push(o)),u.column=o;break}case"current-user":i=!0;break;case"function":{const{name:e,args:t}=u,n=t.value.length;r&&(r=function(e,t){const n=Z[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}(e,n)),!1===o&&(o=(0,a.O)(e,n));break}}})),{referencedFieldNames:Array.from(t),isStandardized:r,isAggregate:o,currentUserRequired:i}}_evaluateNode(e,t,n,r,o){let u;switch(e.type){case"interval":{const a=this._evaluateNode(e.value,t,n,r,o);return c.createFromValueAndQualifier(a,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const a=this._evaluateNode(e.operand,t,n,r,o);for(let i=0;i<e.clauses.length;i++)if(U(a,this._evaluateNode(e.clauses[i].operand,t,n,r,o),"="))return this._evaluateNode(e.clauses[i].value,t,n,r,o);if(null!==e.else)return this._evaluateNode(e.else,t,n,r,o)}else{for(let a=0;a<e.clauses.length;a++)if(fe(this._evaluateNode(e.clauses[a].operand,t,n,r,o)))return this._evaluateNode(e.clauses[a].value,t,n,r,o);if(null!==e.else)return this._evaluateNode(e.else,t,n,r,o)}return null;case"parameter":return u=this.parameters[e.value.toLowerCase()],(0,L.J_)(u)?m.ou.fromJSDate(u):null!=u&&"object"==typeof u&&"toDateTime"in u?u.toDateTime():u;case"expression-list":{const a=[];for(const i of e.value)a.push(this._evaluateNode(i,t,n,r,o));return a}case"unary-expression":return pe(this._evaluateNode(e.expr,t,n,r,o));case"binary-expression":switch(e.operator){case"AND":return me(this._evaluateNode(e.left,t,n,r,o),this._evaluateNode(e.right,t,n,r,o));case"OR":return he(this._evaluateNode(e.left,t,n,r,o),this._evaluateNode(e.right,t,n,r,o));case"IS":if("null"!==e.right.type)throw new i.eS(i.f.UnsupportedIsRhs);return null===this._evaluateNode(e.left,t,n,r,o);case"ISNOT":if("null"!==e.right.type)throw new i.eS(i.f.UnsupportedIsRhs);return null!==this._evaluateNode(e.left,t,n,r,o);case"IN":{const a=de(this._evaluateNode(e.right,t,n,r,o));return ve(this._evaluateNode(e.left,t,n,r,o),a)}case"NOT IN":{const a=de(this._evaluateNode(e.right,t,n,r,o));return pe(ve(this._evaluateNode(e.left,t,n,r,o),a))}case"BETWEEN":{const a=this._evaluateNode(e.left,t,n,r,o),i=this._evaluateNode(e.right,t,n,r,o);return null==a||null==i[0]||null==i[1]?null:U(a,i[0],">=")&&U(a,i[1],"<=")}case"NOTBETWEEN":{const a=this._evaluateNode(e.left,t,n,r,o),i=this._evaluateNode(e.right,t,n,r,o);return null==a||null==i[0]||null==i[1]?null:U(a,i[0],"<")||U(a,i[1],">")}case"LIKE":return Ne(this._evaluateNode(e.left,t,n,r,o),this._evaluateNode(e.right,t,n,r,o),e.escape);case"NOT LIKE":return pe(Ne(this._evaluateNode(e.left,t,n,r,o),this._evaluateNode(e.right,t,n,r,o),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return U(this._evaluateNode(e.left,t,n,r,o),this._evaluateNode(e.right,t,n,r,o),e.operator);case"-":case"+":case"*":case"/":case"||":return J(e.operator,this._evaluateNode(e.left,t,n,r,o),this._evaluateNode(e.right,t,n,r,o),this.timeZone)}case"null":case"boolean":case"string":case"number":return e.value;case"date":return e.parsedValue??=b(e.value,"unknown"),e.parsedValue;case"timestamp":return e.parsedValue??=M(e.value,"unknown"),e.parsedValue;case"time":return _(e.value);case"current-time":return"date"===e.mode?Ie(this.timeZone):"time"===e.mode?Se(this.timeZone):we(this.timeZone);case"current-user":return o??null;case"column-reference":return Oe(t,e.column,this.fieldsIndex,n);case"data-type":return e.value;case"function":{if(this.isAggregate&&(0,a.O)(e.name,e.args.value.length)){const t=[];for(const a of e.args?.value||[]){const e=[];for(const t of r||[])e.push(this._evaluateNode(a,t,n,null,o));t.push(e)}return(0,a.U)(e.name,t)}const i=this._evaluateNode(e.args,t,n,r,o);return z(e.name,i,this.timeZone)}}throw new i.eS(i.f.UnsupportedSyntax,{node:e.type})}}function fe(e){return!0===e}function de(e){return Array.isArray(e)?e:[e]}function pe(e){return null!==e?!0!==e:null}function me(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function he(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function ve(e,t){if(null==e)return null;let n=!1;for(const r of t)if(null==r)n=null;else{if(e===r){n=!0;break}if(R(e)&&R(r)&&(n=U(e,r,"="),n))break}return n}function we(e){return N(new Date,e)}function Ie(e){return o.u.fromNow(e)}function Se(e){const t=N(new Date,e);return d.n.fromDateTime(t)}const ge="-[]/{}()*+?.\\^$|";var ye,Te;function Ne(e,t,n){return null==e?null:function(e,t){const n=t;let r="",a=ye.Normal;for(let t=0;t<e.length;t++){const o=e.charAt(t);switch(a){case ye.Normal:o===n?a=ye.Escaped:ge.includes(o)?r+="\\"+o:r+="%"===o?".*":"_"===o?".":o;break;case ye.Escaped:ge.includes(o)?r+="\\"+o:r+=o,a=ye.Normal}}return new RegExp("^"+r+"$","m")}(t,n).test(e)}function Oe(e,t,n,r){if("getAttributeSQL"in r)return r.getAttributeSQL(e,t);const a=r.getAttribute(e,t);if(null==a)return a;const i=n?.get(t);switch(i?.type){case"esriFieldTypeDate":case"date":return N(new Date(a),n?.getLuxonTimeZone(i.name)??m.Qf.utcInstance);case"esriFieldTypeDateOnly":case"date-only":return o.u.fromReader(a);case"esriFieldTypeTimeOnly":case"time-only":return d.n.fromReader(a);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return new f.H(a)}return a}(Te=ye||(ye={}))[Te.Normal=0]="Normal",Te[Te.Escaped=1]="Escaped";const xe={getAttribute:(e,t)=>(function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e)[t]}},41602:function(e,t,n){n.d(t,{eS:function(){return u},f:function(){return r}});var r,a,o=n(29138);(a=r||(r={})).InvalidFunctionParameters="InvalidFunctionParameters",a.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",a.UnsupportedSqlFunction="UnsupportedSqlFunction",a.UnsupportedOperator="UnsupportedOperator",a.UnsupportedSyntax="UnsupportedSyntax",a.UnsupportedIsRhs="UnsupportedIsRhs",a.UnsupportedIsLhs="UnsupportedIsLhs",a.InvalidDataType="InvalidDataType",a.CannotCastValue="CannotCastValue",a.FunctionNotRecognized="FunctionNotRecognized",a.InvalidTime="InvalidTime",a.InvalidParameterCount="InvalidParameterCount",a.InvalidTimeStamp="InvalidTimeStamp",a.InvalidDate="InvalidDate",a.InvalidOperator="InvalidOperator",a.IllegalInterval="IllegalInterval",a.YearMonthIntervals="YearMonthIntervals",a.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",a.MissingStatisticParameters="MissingStatisticParameters";const i={[r.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[r.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[r.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[r.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[r.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[r.UnsupportedOperator]:"Unsupported operator - {operator}",[r.UnsupportedSyntax]:"Unsupported syntax - {node}",[r.UnsupportedSqlFunction]:"Sql function not found = {function}",[r.InvalidDataType]:"Invalid sql data type",[r.InvalidDate]:"Invalid date encountered",[r.InvalidOperator]:"Invalid operator encountered",[r.InvalidTime]:"Invalid time encountered",[r.IllegalInterval]:"Illegal interval",[r.FunctionNotRecognized]:"Function not recognized",[r.InvalidTimeStamp]:"Invalid timestamp encountered",[r.InvalidParameterCount]:"Invalid parameter count for call to {name}",[r.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[r.YearMonthIntervals]:"Year-Month Intervals not supported",[r.CannotCastValue]:"Cannot cast value to the required data type"};class u extends Error{constructor(e,t){super((0,o.gx)(i[e],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,u)}}}}]);