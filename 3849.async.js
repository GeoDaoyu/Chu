"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[3849,69183],{54229:function(t,e,n){n.d(e,{Z:function(){return m}});var r,o=n(73440),i=n(63255),s=n(17155),a=(n(61432),n(96711),n(83850),n(48023)),u=n(31865),l=n(10934),c=n(18156),f=n(21117),d=n(82846),p=n(86456);let m=class extends i.Z{static{r=this}constructor(t){super(t),this.translation=(0,d.Ue)(),this.rotationAxis=(0,d.nI)(p.up),this.rotationAngle=0,this.scale=(0,d.al)(1,1,1)}get rotation(){return(0,p.uT)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,d.d9)((0,p.ZZ)(t)),this.rotationAngle=(0,p.EU)(t)}get localMatrix(){const t=(0,l.Ue)();return(0,c.yY)(y,(0,p.ZZ)(this.rotation),(0,p.WH)(this.rotation)),(0,u.Iw)(t,y,this.translation,this.scale),t}get localMatrixInverse(){return(0,u.U_)((0,l.Ue)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,u.I6)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,d.d9)(this.translation),rotationAxis:(0,d.d9)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,d.d9)(this.scale)};return new r(t)}};(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],m.prototype,"translation",void 0),(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],m.prototype,"rotationAxis",void 0),(0,o._)([(0,s.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"rotationAngle",void 0),(0,o._)([(0,s.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],m.prototype,"scale",void 0),(0,o._)([(0,s.Cb)()],m.prototype,"rotation",null),(0,o._)([(0,s.Cb)()],m.prototype,"localMatrix",null),(0,o._)([(0,s.Cb)()],m.prototype,"localMatrixInverse",null),m=r=(0,o._)([(0,a.j)("esri.geometry.support.MeshTransform")],m);const y=(0,f.Ue)()},60419:function(t,e,n){n.d(e,{$6:function(){return A},$z:function(){return i},F7:function(){return o},S0:function(){return s},Si:function(){return m},Wr:function(){return x},X4:function(){return f},Zq:function(){return d},d1:function(){return u},dm:function(){return l},eP:function(){return c},fe:function(){return p},sg:function(){return y}});const r=[["binary","application/octet-stream","bin",""]];function o(t,e){return null!=w(e.name,t?.supportedFormats??[])}function i(t,e){if(!t)return!1;const n=l(e,t.supportedFormats??[]);return null!=n&&t.editFormats.includes(n)}function s(t,e){return b(function(t,e){const n=t.toLowerCase();return h(e).find((t=>g(t)===n))}(t,e))}function a(t,e){return b(w(t,e))}function u(t,e){return g(function(t,e){return h(e).find((e=>b(e)===t))}(t,e))}function l(t,e){return a(t.name,e)??s(t.type,e)}function c(t,e,n){return s(t,n)??a(e,n)}function f({supportedFormats:t}){return c("model/gltf-binary","glb",t)}function d(t){const e=f(t);return null!=e&&t.editFormats.includes(e)}function p({supportedFormats:t}){return c("model/gltf+json","gltf",t)}function m(t){if(!t)return null;const e=f(t),n=p(t);let r=null;for(const o of t.queryFormats){if(o===e)return o;o===n&&(r=o)}return r}function y({supportedFormats:t}){return c("application/esri3do-SR_world","wld",t)}function x({supportedFormats:t}){return c("application/esri3do-SR_prj","prj",t)}function h(t){return[...r,...t]}function w(t,e){const n=t.toLowerCase();return h(e).find((t=>v(t).some((t=>n.endsWith(t)))))}function b(t){return t?.[0]}function g(t){return t?.[1].toLowerCase()}function v(t){return t?.[2].split(",").map((t=>t.toLowerCase()))??[]}function A(t){return t.tables?.find((t=>"assetMaps"===t.role))}},61204:function(t,e,n){n.d(e,{processQueryGeometries:function(){return a}});var r=n(45213),o=n(90756),i=n(13878),s=n(4043);function a(t,e){const n=new Array,a=r.Z.fromJSON(e.spatialReference);for(const r of e.features){const e=r.metadata,i=(0,o.im)(r.geometry);if(!e||!i){n.push(null);continue}i.spatialReference=a;const u=i.extent,l=(0,s.createMesh)({layerView:t,nodeIndex:e.meta.node.index,featureIndex:e.index,extent:u,spatialReference:a});n.push(l),r.geometry=null}const u=i.Z.fromJSON(e);for(let t=0;t<u.features.length;t++){const e=u.features[t],r=n[t];e.geometry=r}return u}},4043:function(t,e,n){n.r(e),n.d(e,{createMesh:function(){return f}});var r=n(88194),o=n(29097),i=n(30146),s=n(16447),a=n(25657),u=n(98556),l=n(2875),c=n(75272);function f(t){const e=new c.S,n=t.spatialReference??t.layerView.view.spatialReference;return e.externalSources.add({extent:t.extent??d(t,n),source:{type:"loadable",load:e=>async function(t,{layerView:e,nodeIndex:n,featureIndex:o}){const s=e.getNodeComponentHandle(n);if(!s?.intersectionGeometry)throw new r.Z("i3s-layer-view-geometry-missing","Cannot load mesh because scene layer view data is no longer available.");const a={indices:null,data:null,stride:0,startIndex:0,endIndex:0};s.intersectionGeometry.getComponentPositions(o,a);const{indices:c,data:f,stride:d,startIndex:p,endIndex:m}=a,y=new Float64Array(3*(m-p));let x=0;for(let t=p;t<m;t+=3){const e=d*c[t],n=d*c[t+1],r=d*c[t+2];y[x++]=f[e],y[x++]=f[e+1],y[x++]=f[e+2],y[x++]=f[n],y[x++]=f[n+1],y[x++]=f[n+2],y[x++]=f[r],y[x++]=f[r+1],y[x++]=f[r+2]}const h=s.transform;(0,l.b)(y,y,h.rotationScale),(0,l.a)(y,y,h.position),(0,i.projectBuffer)(y,e.view.renderSpatialReference,0,y,t.spatialReference,0),t.vertexAttributes=new u.Q({position:y})}(e,t)}}),new o.default({metadata:e,vertexSpace:new a.Z,spatialReference:n})}function d({layerView:t,nodeIndex:e,featureIndex:n},r){const o=t.getAABB(e,n);if(!o)return null;const a=t.view.spatialReference;return a.equals(r)||(0,i.projectBuffer)(o,a,0,o,r,0),(0,s.HH)(o,r)}}}]);