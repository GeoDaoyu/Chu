"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[24293],{24293:function(e,t,r){r.r(t),r.d(t,{registerFunctions:function(){return x}});var n=r(81001),o=r(57829),i=r(92530),a=r(12122),s=r(67161),u=r(10921),p=r(82890),l=r(13132),c=r(45213),f=r(97290),d=r(77601),h=r(96193),y=r(74935),m=r(46024),g=r(42167),w=r(27065),v=r(51337),Z=r(26790),b=r(8084),S=r(43462);let _=null;async function j(e,t){const n=new h.default({portal:e,id:t});return await n.load(),null===_&&(_=await Promise.all([r.e(61861),r.e(92403)]).then(r.bind(r,61861))),await _.fetchKnowledgeGraph(n.url)}function R(e,t,r,n,o){if(null===e)return null;if((0,S.HD)(e)||(0,S.hj)(e))return e;if((0,s.e)(e))return e.toJSDate();if((0,s.e)(e))return e.toJSDate();if((0,s.f)(e))return e.toStorageFormat();if((0,s.g)(e))return e.toStorageString();if((0,s.n)(e)){const i={};for(const a of e.keys())i[a]=R(e.field(a),t,r,n,o),i[a]instanceof p.Z&&o.push({container:i,indexer:a});return i}if((0,S.kJ)(e)){const i=e.map((e=>R(e,t,r,n,o)));for(let e=0;e<i.length;e++)i[e]instanceof p.Z&&o.push({container:i,indexer:e});return i}return(0,s.h)(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&t?(0,f.Sx)(e):e:void 0}function G(e,t){if(!e)return null;const r={};for(const n in e)r[n]=C(e[n],t);return r}function C(e,t){return null===e?null:(0,S.kJ)(e)?e.map((e=>C(e,t))):e instanceof m.Z?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:G(e.properties,t)}:e instanceof w.Z?{graphType:"object",properties:G(e.properties,t)}:e instanceof Z.Z?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:G(e.properties,t)}:e instanceof v.Z?{graphType:"path",path:e.path?e.path.map((e=>C(e,t))):null}:(0,s.h)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,f.$)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new a.aV(t,a.rH.WrongSpatialReference,null)}(e,t):(0,S.HD)(e)||(0,S.hj)(e)||(0,S.J_)(e)?e:null}function x(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,((e,n,i)=>{if((0,s.B)(i,2,2,t,r),null===i[0])throw new a.aV(t,a.rH.PortalRequired,r);if(i[0]instanceof o.Z){const e=(0,s.w)(i[1]);let r;return r=t.services?.portal?t.services.portal:d.Z.getDefault(),j((0,u._)(i[0],r),e)}if(!1===(0,S.HD)(i[0]))throw new a.aV(t,a.rH.InvalidParameter,r);const p=(0,s.w)(i[0]);return j(t.services?.portal??d.Z.getDefault(),p)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,o){return e.standardFunctionAsync(t,o,(async(e,u,p)=>{(0,s.B)(p,2,4,t,o);const f=p[0];if(!(0,s.o)(f))throw new a.aV(t,a.rH.InvalidParameter,o);const d=p[1];if(!(0,S.HD)(d))throw new a.aV(t,a.rH.InvalidParameter,o);null===_&&(_=await Promise.all([r.e(61861),r.e(92403)]).then(r.bind(r,61861)));let h=null;const m=(0,s.J)(p[2],null);if(!(m instanceof i.Z||null===m))throw new a.aV(t,a.rH.InvalidParameter,o);if(m){let e=[];h=R(m,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await async function(e){const t=n.default.geometryServiceUrl??"";if(!t){(0,l.isLoaded)()||await(0,l.load)();for(const t of e)t.container[t.indexer]=(0,l.project)(t.container[t.indexer],c.Z.WGS84);return}const r=e.map((e=>e.container[e.indexer])),o=new b.Z({geometries:r,outSpatialReference:c.Z.WGS84}),i=await(0,y.i)(t,o);for(let t=0;t<i.length;t++){const r=e[t];r.container[r.indexer]=i[t]}}(e)}const w=(0,s.J)(p[3],!1),v=new g.Z({openCypherQuery:d,bindParameters:h,provenanceBehavior:w?"include":"exclude"});(f?.serviceDefinition?.currentVersion??11.3)>11.2&&(v.outputSpatialReference=t.spatialReference);const Z=(await _.executeQueryStreaming(f,v)).resultRowsStream.getReader(),j=[];try{for(;;){const{done:e,value:r}=await Z.read();if(e)break;if((0,S.kJ)(r))for(const e of r)j.push(C(e,t));else{const e=[];for(const n of r)e.push(C(r[n],t));j.push(e)}}}catch(e){throw e}return i.Z.convertJsonToArcade(j,(0,s.K)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},10921:function(e,t,r){r.d(t,{_:function(){return o}});var n=r(77601);function o(e,t){return null===e?t:new n.Z({url:e.field("url")})}},74935:function(e,t,r){r.d(t,{i:function(){return l}});var n=r(78619),o=r(95226),i=r(90756),a=r(56545),s=r(93333),u=r(8084);const p=(0,o.se)(u.Z);async function l(e,t,r){t=p(t);const o=(0,a.en)(e),u={...o.query,f:"json",...t.toJSON()},l=t.outSpatialReference,c=(0,i.Ji)(t.geometries[0]),f=(0,a.lA)(u,r);return(0,n.Z)(o.path+"/project",f).then((({data:{geometries:e}})=>(0,s.o)(e,c,l)))}},46024:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023)),a=r(60508),s=r(28074);let u=class extends s.Z{constructor(e){super(e),this.layoutGeometry=null}};(0,n._)([(0,o.Cb)({type:a.Z,json:{write:!0}})],u.prototype,"layoutGeometry",void 0),u=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.Entity")],u)},28074:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023)),a=r(72869);let s=class extends a.Z{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphNamedObject")],s)},72869:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(73440),o=r(63255),i=r(17155),a=(r(61432),r(96711),r(83850),r(48023));let s=class extends o.Z{constructor(e){super(e),this.properties=null}};(0,n._)([(0,i.Cb)({json:{write:!0}})],s.prototype,"properties",void 0),s=(0,n._)([(0,a.j)("esri.rest.knowledgeGraph.GraphObject")],s)},42167:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023)),a=r(45213),s=r(70880);let u=class extends s.Z{constructor(e){super(e),this.openCypherQuery=""}};(0,n._)([(0,o.Cb)()],u.prototype,"openCypherQuery",void 0),u=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphQuery")],u);let p=class extends u{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,n._)([(0,o.Cb)()],p.prototype,"bindParameters",void 0),(0,n._)([(0,o.Cb)()],p.prototype,"bindGeometryQuantizationParameters",void 0),(0,n._)([(0,o.Cb)()],p.prototype,"outputQuantizationParameters",void 0),(0,n._)([(0,o.Cb)({type:a.Z})],p.prototype,"outputSpatialReference",void 0),(0,n._)([(0,o.Cb)()],p.prototype,"provenanceBehavior",void 0),p=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.GraphQueryStreaming")],p)},27065:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(73440),o=(r(96711),r(61432),r(83850),r(88194),r(48023)),i=r(72869);let a=class extends i.Z{constructor(e){super(e)}};a=(0,n._)([(0,o.j)("esri.rest.knowledgeGraph.ObjectValue")],a)},51337:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(73440),o=r(63255),i=r(17155),a=(r(61432),r(96711),r(83850),r(48023)),s=r(72869);let u=class extends o.Z{constructor(e){super(e),this.path=[]}};(0,n._)([(0,i.Cb)({type:[s.Z],json:{write:!0}})],u.prototype,"path",void 0),u=(0,n._)([(0,a.j)("esri.rest.knowledgeGraph.Path")],u)},26790:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023)),a=r(62197),s=r(28074);let u=class extends s.Z{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"originId",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],u.prototype,"destinationId",void 0),(0,n._)([(0,o.Cb)({type:a.Z,json:{write:!0}})],u.prototype,"layoutGeometry",void 0),u=(0,n._)([(0,i.j)("esri.rest.knowledgeGraph.Relationship")],u)},8084:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(73440),o=r(63255),i=r(17155),a=(r(61432),r(96711),r(83850),r(48023)),s=r(45213),u=r(90756),p=r(8554);let l=class extends o.Z{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,p.B9)(this.outSpatialReference),r.inSR=(0,p.B9)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,u.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,n._)([(0,i.Cb)()],l.prototype,"geometries",void 0),(0,n._)([(0,i.Cb)({type:s.Z,json:{read:{source:"outSR"}}})],l.prototype,"outSpatialReference",void 0),(0,n._)([(0,i.Cb)()],l.prototype,"transformation",void 0),(0,n._)([(0,i.Cb)()],l.prototype,"transformForward",void 0),l=(0,n._)([(0,a.j)("esri.rest.support.ProjectParameters")],l)}}]);