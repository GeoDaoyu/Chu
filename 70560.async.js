"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[70560],{38874:function(e,t,n){function o(e,t,n){n=n||2;var o,r,s,l,c,p,h,d=t&&t.length,y=d?t[0]*n:e.length,f=i(e,0,y,n,!0),g=[];if(!f||f.next===f.prev)return g;if(d&&(f=u(e,t,f,n)),e.length>80*n){o=s=e[0],r=l=e[1];for(var m=n;m<y;m+=n)(c=e[m])<o&&(o=c),(p=e[m+1])<r&&(r=p),c>s&&(s=c),p>l&&(l=p);h=0!==(h=Math.max(s-o,l-r))?1/h:0}return a(f,g,n,o,r,h),g}function i(e,t,n,o,i){var r,a;if(i===I(e,t,n,o)>0)for(r=t;r<n;r+=o)a=T(r,e[r],e[r+1],a);else for(r=n-o;r>=t;r-=o)a=T(r,e[r],e[r+1],a);if(a&&M(a,a.next)){var s=a.next;O(a),a=s}return a}function r(e,t){if(!e)return e;t||(t=e);var n,o=e;do{if(n=!1,o.steiner||!M(o,o.next)&&0!==w(o.prev,o,o.next))o=o.next;else{var i=o.prev;if(O(o),(o=t=i)===o.next)break;n=!0}}while(n||o!==t);return t}function a(e,t,n,o,i,u,h){if(e){!h&&u&&g(e,o,i,u);for(var d,y,f=e;e.prev!==e.next;)if(d=e.prev,y=e.next,u?l(e,o,i,u):s(e))t.push(d.i/n),t.push(e.i/n),t.push(y.i/n),O(e),e=y.next,f=y.next;else if((e=y)===f){h?1===h?a(e=c(r(e),t,n),t,n,o,i,u,2):2===h&&p(e,t,n,o,i,u):a(r(e),t,n,o,i,u,1);break}}}function s(e){var t=e.prev,n=e,o=e.next;if(w(t,n,o)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,o.x,o.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,n,o){var i=e.prev,r=e,a=e.next;if(w(i,r,a)>=0)return!1;for(var s=i.x<r.x?i.x<a.x?i.x:a.x:r.x<a.x?r.x:a.x,l=i.y<r.y?i.y<a.y?i.y:a.y:r.y<a.y?r.y:a.y,c=i.x>r.x?i.x>a.x?i.x:a.x:r.x>a.x?r.x:a.x,p=i.y>r.y?i.y>a.y?i.y:a.y:r.y>a.y?r.y:a.y,u=m(s,l,t,n,o),h=m(c,p,t,n,o),d=e.prevZ,y=e.nextZ;d&&d.z>=u&&y&&y.z<=h;){if(d!==e.prev&&d!==e.next&&_(i.x,i.y,r.x,r.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,y!==e.prev&&y!==e.next&&_(i.x,i.y,r.x,r.y,a.x,a.y,y.x,y.y)&&w(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&_(i.x,i.y,r.x,r.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=h;){if(y!==e.prev&&y!==e.next&&_(i.x,i.y,r.x,r.y,a.x,a.y,y.x,y.y)&&w(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function c(e,t,n){var o=e;do{var i=o.prev,a=o.next.next;!M(i,a)&&C(i,o,o.next,a)&&x(i,a)&&x(a,i)&&(t.push(i.i/n),t.push(o.i/n),t.push(a.i/n),O(o),O(o.next),o=e=a),o=o.next}while(o!==e);return r(o)}function p(e,t,n,o,i,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&b(l,c)){var p=P(l,c);return l=r(l,l.next),p=r(p,p.next),a(l,t,n,o,i,s),void a(p,t,n,o,i,s)}c=c.next}l=l.next}while(l!==e)}function u(e,t,n,o){var a,s,l,c=[];for(a=0,s=t.length;a<s;a++)(l=i(e,t[a]*o,a<s-1?t[a+1]*o:e.length,o,!1))===l.next&&(l.steiner=!0),c.push(v(l));for(c.sort(h),a=0;a<c.length;a++)n=r(n=y(c[a],n),n.next);return n}function h(e,t){return e.x-t.x}function d(e){if(e.next.prev===e)return e;let t=e;for(;;){const n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function y(e,t){var n=function(e,t){var n,o=t,i=e.x,r=e.y,a=-1/0;do{if(r<=o.y&&r>=o.next.y&&o.next.y!==o.y){var s=o.x+(r-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(s<=i&&s>a){if(a=s,s===i){if(r===o.y)return o;if(r===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==t);if(!n)return null;if(i===a)return n;var l,c=n,p=n.x,u=n.y,h=1/0;o=n;do{i>=o.x&&o.x>=p&&i!==o.x&&_(r<u?i:a,r,p,u,r<u?a:i,r,o.x,o.y)&&(l=Math.abs(r-o.y)/(i-o.x),x(o,e)&&(l<h||l===h&&(o.x>n.x||o.x===n.x&&f(n,o)))&&(n=o,h=l)),o=o.next}while(o!==c);return n}(e,t);if(!n)return t;var o=P(n,e),i=r(n,n.next);let a=d(o);return r(a,a.next),i=d(i),d(t===n?i:t)}function f(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function g(e,t,n,o){var i=e;do{null===i.z&&(i.z=m(i.x,i.y,t,n,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,o,i,r,a,s,l,c=1;do{for(n=e,e=null,r=null,a=0;n;){for(a++,o=n,s=0,t=0;t<c&&(s++,o=o.nextZ);t++);for(l=c;s>0||l>0&&o;)0!==s&&(0===l||!o||n.z<=o.z)?(i=n,n=n.nextZ,s--):(i=o,o=o.nextZ,l--),r?r.nextZ=i:e=i,i.prevZ=r,r=i;n=o}r.nextZ=null,c*=2}while(a>1)}(i)}function m(e,t,n,o,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-o)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,o,i,r,a,s){return(i-a)*(t-s)-(e-a)*(r-s)>=0&&(e-a)*(o-s)-(n-a)*(t-s)>=0&&(n-a)*(r-s)-(i-a)*(o-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&C(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,o=!1,i=(e.x+t.x)/2,r=(e.y+t.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&i<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==e);return o}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||M(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function M(e,t){return e.x===t.x&&e.y===t.y}function C(e,t,n,o){var i=E(w(e,t,n)),r=E(w(e,t,o)),a=E(w(n,o,e)),s=E(w(n,o,t));return i!==r&&a!==s||!(0!==i||!S(e,n,t))||!(0!==r||!S(e,o,t))||!(0!==a||!S(n,e,o))||!(0!==s||!S(n,t,o))}function S(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function E(e){return e>0?1:e<0?-1:0}function x(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function P(e,t){var n=new G(e.i,e.x,e.y),o=new G(t.i,t.x,t.y),i=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,o.next=n,n.prev=o,r.next=o,o.prev=r,o}function T(e,t,n,o){var i=new G(e,t,n);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function O(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function G(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,n,o){for(var i=0,r=t,a=n-o;r<n;r+=o)i+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return i}n.d(t,{e:function(){return o}}),o.deviation=function(e,t,n,o){var i=t&&t.length,r=i?t[0]*n:e.length,a=Math.abs(I(e,0,r,n));if(i)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,p=s<l-1?t[s+1]*n:e.length;a-=Math.abs(I(e,c,p,n))}var u=0;for(s=0;s<o.length;s+=3){var h=o[s]*n,d=o[s+1]*n,y=o[s+2]*n;u+=Math.abs((e[h]-e[y])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[y+1]-e[h+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},o=0,i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++)for(var a=0;a<t;a++)n.vertices.push(e[i][r][a]);i>0&&(o+=e[i-1].length,n.holes.push(o))}return n}},95437:function(e,t,n){n.d(t,{BV:function(){return c},Q4:function(){return l},c5:function(){return s},pE:function(){return i}});var o=n(99574);class i{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e,t=0,n=!1){return r(this.range,this.min,this.max,e,t,n)}clamp(e,t=0){return(0,o.uZ)(e-t,this.min,this.max)+t}monotonic(e,t,n){return e<t?t:t+a(this.range,e-t,n)}minimalMonotonic(e,t,n){return r(this.range,e,e+this.range,t,n)}center(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}diff(e,t,n){return this.monotonic(e,t,n)-e}shortestSignedDiff(e,t){e=this.normalize(e);const n=(t=this.normalize(t))-e,o=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(o)?n:o}contains(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}function r(e,t,n,o,i=0,r=!1){return(o-=i)<t?o+=a(e,t-o):o>n&&(o-=a(e,o-n)),r&&o===n&&(o=t),o+i}function a(e,t,n=0){return Math.ceil((t-n)/e)*e+n}const s=new i(0,2*Math.PI),l=new i(-Math.PI,Math.PI),c=new i(0,360)},12853:function(e,t,n){n.d(t,{z:function(){return i}});var o=n(69071);class i{constructor(e,t){this.removeFunc=t,this._storage=new o.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,n=1){this._storage.put(this,e,t,n,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58426:function(e,t,n){n.d(t,{$c:function(){return d},Hg:function(){return y},jW:function(){return h},xb:function(){return f}});var o=n(70880),i=n(43254),r=n(22018);const a=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function s(e){return e instanceof o.Z}function l(e){return e instanceof i.Z?Object.keys(e.items):s(e)?(0,r.vw)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof i.Z?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function u(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const o=l(e),i=l(t);if(0===o.length&&0===i.length)return;if(!o.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const r=i.filter((e=>!o.includes(e))),h=o.filter((e=>!i.includes(e))),d=o.filter((n=>i.includes(n)&&c(e,n)!==c(t,n))).concat(r,h).sort(),y=p(e);if(y&&a.has(y)&&d.length)return{type:"complete",oldValue:e,newValue:t};let f;const g=s(e)&&s(t);for(const o of d){const i=c(e,o),r=c(t,o);let a;if((g||"function"!=typeof i&&"function"!=typeof r)&&i!==r&&(null!=i||null!=r)){if(n&&n[o]&&"function"==typeof n[o])a=n[o]?.(i,r);else if(i instanceof Date&&r instanceof Date){if(i.getTime()===r.getTime())continue;a={type:"complete",oldValue:i,newValue:r}}else a="object"==typeof i&&"object"==typeof r&&p(i)===p(r)?u(i,r):{type:"complete",oldValue:i,newValue:r};null!=a&&(null!=f?f.diff[o]=a:f={type:"partial",diff:{[o]:a}})}}return f}function h(e,t){return function(e,t){if(null==e)return!1;const n=t.split(".");let o=e;for(const e of n){if("complete"===o.type)return!0;if("partial"!==o.type)return!1;{const t=o.diff[e];if(!t)return!1;o=t}}return!0}(e,t)}function d(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:u(e,t)}function f(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!f(e))return!1;for(const e of t.removed)if(!f(e))return!1;for(const e of t.changed)if(!f(e))return!1;return!0}case"partial":for(const t in e.diff)if(!f(e.diff[t]))return!1;return!0}}},1925:function(e,t,n){n.d(t,{Fp:function(){return p},GJ:function(){return s},M1:function(){return i},MQ:function(){return y},Ww:function(){return f},bA:function(){return u},hw:function(){return h},mE:function(){return c},ne:function(){return a},nn:function(){return l},qF:function(){return g},yG:function(){return r},yP:function(){return d}});var o=n(26636);function i(e){return{value:e}}function r(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}function a(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}function s(e,t,n="arithmetic"){return{type:(0,o.UF)(t),value:e,unit:t,rotationType:n}}function l(e,t){const n=c(e,t);return"angle"===e.type?s(n,t,e.rotationType):function(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}(n,t)}function c(e,t){return(0,o.En)(e.value,e.unit,t)}function p(e,t){return null==e?t:null==t||e.value>(0,o.En)(t.value,t.unit,e.unit)?e:t}function u(e,t){return null==e?null:{...e,value:e.value*t}}function h(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}const d=r(0,"meters"),y=a(0,"square-meters"),f=(s(0,"radians"),s(0,"degrees")),g=s(0,"degrees","geographic")},60147:function(e,t,n){n.d(t,{R:function(){return p}});var o=n(73440),i=n(70880),r=n(50702),a=n(90403),s=n(99153),l=n(17155),c=n(48023);let p=class extends i.Z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,t,n={}){return this._installWatch(e,t,n,a.YP)}addWhen(e,t,n={}){return this._installWatch(e,t,n,a.gx)}addOnCollectionChange(e,t,{initial:n=!1,final:o=!1}={}){const i=++this._handleId;return this.addHandles([(0,a.on)(e,"after-changes",this._createSyncUpdatingCallback(),a.Z_),(0,a.on)(e,"change",t,{onListenerAdd:n?e=>t({added:e.toArray(),removed:[]}):void 0,onListenerRemove:o?e=>t({added:[],removed:e.toArray()}):void 0})],i),(0,r.kB)((()=>this.removeHandles(i)))}addPromise(e){if(null==e)return e;const t=++this._handleId;this.addHandles((0,r.kB)((()=>{this._pendingPromises.delete(e)&&(0!==this._pendingPromises.size||this.hasHandles(u)||this._set("updating",!1))})),t),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this.removeHandles(t);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,t,n={},o){const i=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,i);const a=o(e,t,n);return this.addHandles(a,i),(0,r.kB)((()=>this.removeHandles(i)))}_installSyncUpdatingWatch(e,t){const n=this._createSyncUpdatingCallback(),o=(0,a.YP)(e,n,{sync:!0,equals:()=>!1});return this.addHandles(o,t),o}_createSyncUpdatingCallback(){return()=>{this.removeHandles(u),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles((0,s.Os)((()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(u))})),u)}}};(0,o._)([(0,l.Cb)({readOnly:!0})],p.prototype,"updating",void 0),p=(0,o._)([(0,c.j)("esri.core.support.UpdatingHandles")],p);const u=-42},88970:function(e,t,n){n.d(t,{AR:function(){return v},Gr:function(){return m},JG:function(){return p},Jk:function(){return d},KU:function(){return f},Ue:function(){return l},al:function(){return u},ct:function(){return g},nF:function(){return y},re:function(){return c},zk:function(){return h}});var o=n(99574),i=n(38949),r=n(24910),a=n(82846),s=n(69811);function l(e){return e?{origin:(0,a.d9)(e.origin),vector:(0,a.d9)(e.vector)}:{origin:(0,a.Ue)(),vector:(0,a.Ue)()}}function c(e,t){const n=w.get();return n.origin=e,n.vector=t,n}function p(e,t=l()){return u(e.origin,e.vector,t)}function u(e,t,n=l()){return(0,r.c)(n.origin,e),(0,r.c)(n.vector,t),n}function h(e,t,n=l()){return(0,r.c)(n.origin,e),(0,r.d)(n.vector,t,e),n}function d(e,t){const n=(0,r.d)(s.WM.get(),t,e.origin),i=(0,r.e)(e.vector,n),a=(0,r.e)(e.vector,e.vector),l=(0,o.uZ)(i/a,0,1),c=(0,r.d)(s.WM.get(),(0,r.g)(s.WM.get(),e.vector,l),n);return(0,r.e)(c,c)}function y(e,t,n){return g(e,t,0,1,n)}function f(e,t,n){return(0,r.f)(n,e.origin,(0,r.g)(n,e.vector,t))}function g(e,t,n,i,a){const{vector:l,origin:c}=e,p=(0,r.d)(s.WM.get(),t,c),u=(0,r.e)(l,p)/(0,r.k)(l);return(0,r.g)(a,l,(0,o.uZ)(u,n,i)),(0,r.f)(a,a,e.origin)}function m(e,t){if(_(e,c(t.origin,t.direction),!1,b)){const{tA:t,pB:n,distance2:o}=b;if(t>=0&&t<=1)return o;if(t<0)return(0,r.s)(e.origin,n);if(t>1)return(0,r.s)((0,r.f)(s.WM.get(),e.origin,e.vector),n)}return null}function v(e,t,n){return!!_(e,t,!0,b)&&((0,r.c)(n,b.pA),!0)}function _(e,t,n,i){const a=1e-6,l=e.origin,c=(0,r.f)(s.WM.get(),l,e.vector),p=t.origin,u=(0,r.f)(s.WM.get(),p,t.vector),h=s.WM.get(),d=s.WM.get();if(h[0]=l[0]-p[0],h[1]=l[1]-p[1],h[2]=l[2]-p[2],d[0]=u[0]-p[0],d[1]=u[1]-p[1],d[2]=u[2]-p[2],Math.abs(d[0])<a&&Math.abs(d[1])<a&&Math.abs(d[2])<a)return!1;const y=s.WM.get();if(y[0]=c[0]-l[0],y[1]=c[1]-l[1],y[2]=c[2]-l[2],Math.abs(y[0])<a&&Math.abs(y[1])<a&&Math.abs(y[2])<a)return!1;const f=h[0]*d[0]+h[1]*d[1]+h[2]*d[2],g=d[0]*y[0]+d[1]*y[1]+d[2]*y[2],m=h[0]*y[0]+h[1]*y[1]+h[2]*y[2],v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],_=(y[0]*y[0]+y[1]*y[1]+y[2]*y[2])*v-g*g;if(Math.abs(_)<a)return!1;let b=(f*g-m*v)/_,w=(f+g*b)/v;n&&(b=(0,o.uZ)(b,0,1),w=(0,o.uZ)(w,0,1));const M=s.WM.get(),C=s.WM.get();return M[0]=l[0]+b*y[0],M[1]=l[1]+b*y[1],M[2]=l[2]+b*y[2],C[0]=p[0]+w*d[0],C[1]=p[1]+w*d[1],C[2]=p[2]+w*d[2],i.tA=b,i.tB=w,i.pA=M,i.pB=C,i.distance2=(0,r.s)(M,C),!0}const b={tA:0,tB:0,pA:(0,a.Ue)(),pB:(0,a.Ue)(),distance2:0},w=new i.x((()=>l()))},79012:function(e,t,n){n.d(t,{bE:function(){return c},wu:function(){return l}});var o=n(38949),i=n(24910),r=n(82846),a=n(88970);n(69811);function s(e){return e?{p0:(0,r.d9)(e.p0),p1:(0,r.d9)(e.p1),p2:(0,r.d9)(e.p2)}:{p0:(0,r.Ue)(),p1:(0,r.Ue)(),p2:(0,r.Ue)()}}function l(e,t,n){const o=t[0]-e[0],i=t[1]-e[1],r=n[0]-e[0],a=n[1]-e[1];return.5*Math.abs(o*a-i*r)}function c(e,t,n){return(0,i.d)(p,t,e),(0,i.d)(u,n,e),.5*(0,i.l)((0,i.h)(p,p,u))}new o.x(a.Ue),new o.x((()=>s()));const p=(0,r.Ue)(),u=(0,r.Ue)()},53447:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(73440),i=n(17155),r=(n(61432),n(96711),n(83850),n(48023)),a=n(34415),s=n(38209),l=n(83263),c=n(3752),p=n(53866),u=n(13689);let h=class extends((0,l.h7)((0,c.M)(s.Z))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new p.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,o._)([(0,i.Cb)({type:u.Z})],h.prototype,"elevationInfo",void 0),(0,o._)([(0,i.Cb)((0,a.z)(p.J,"graphics"))],h.prototype,"graphics",void 0),(0,o._)([(0,i.Cb)({type:["show","hide"]})],h.prototype,"listMode",void 0),(0,o._)([(0,i.Cb)()],h.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,i.Cb)({readOnly:!0})],h.prototype,"type",void 0),(0,o._)([(0,i.Cb)({constructOnly:!0})],h.prototype,"internal",void 0),h=(0,o._)([(0,r.j)("esri.layers.GraphicsLayer")],h)},90833:function(e,t,n){n.d(t,{Ax:function(){return l},c_:function(){return p},lD:function(){return c}});var o=n(73440),i=n(60123),r=n(17155),a=(n(61432),n(96711),n(83850),n(48023)),s=n(72917);function l(e,t,n){if(!e)return null;const o=e.find((e=>!!e.field));if(!o)return null;const i=new s.Z;return i.read(o,n),[i]}const c={type:[s.Z],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,n,o){const r=e.find((e=>!!e.field));r&&(0,i.RB)(n,[r.toJSON()],t)}}}},p=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,o._)([(0,r.Cb)(c)],t.prototype,"orderBy",void 0),t=(0,o._)([(0,a.j)("esri.layers.mixins.OrderedLayer")],t),t}},72917:function(e,t,n){n.d(t,{Z:function(){return p}});var o,i=n(73440),r=n(41773),a=n(63255),s=n(17155),l=(n(61432),n(96711),n(83850),n(48023));const c=new r.X({asc:"ascending",desc:"descending"});let p=class extends a.Z{static{o=this}constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new o({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,i._)([(0,s.Cb)({type:String,json:{write:!0}})],p.prototype,"field",void 0),(0,i._)([(0,s.Cb)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],p.prototype,"valueExpression",void 0),(0,i._)([(0,s.Cb)({type:c.apiValues,json:{type:c.jsonValues,read:c.read,write:c.write}})],p.prototype,"order",void 0),p=o=(0,i._)([(0,l.j)("esri.layers.support.OrderByInfo")],p)},86462:function(e,t,n){n.d(t,{AJ:function(){return c},If:function(){return h},k0:function(){return l},uI:function(){return u},ul:function(){return s},wx:function(){return d}});var o=n(99574),i=n(96094),r=n(73749),a=n(27583);const s=2.4;function l(e){return(0,i.Wz)(e*s)}function c(e){return(0,i.F2)(e)/s}function p(e,t,n,i){let{color:a,ratio:s}=t,{color:l,ratio:c}=n;if(c===s){const e=1e-6;1===c?s-=e:c+=e}const p=(0,o.uZ)((i-s)/(c-s),0,1);(0,r.l)(e,a.toArray(),l.toArray(),p)}function u(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))),e.length<1)return t;let n=e[0],o=e[0],i=1;const r=(0,a.Ue)();for(let a=0;a<512;a++){const s=(a+.5)/512;for(;s>o.ratio&&i<e.length;)n=o,o=e[i++];p(r,n,o,s),t.set(r,4*a)}return t}function h(e,t,n){const o=Math.sqrt(e**2+t**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function d(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},13878:function(e,t,n){n.d(t,{Z:function(){return v}});var o,i=n(73440),r=n(46451),a=n(41773),s=n(63255),l=n(28947),c=n(17155),p=(n(61432),n(96711),n(1194)),u=n(48023),h=n(29884),d=n(45213),y=n(90756),f=n(98842),g=n(49651);const m=new a.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let v=o=class extends s.Z{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,r.Z)}writeGeometryType(e,t,n,o){if(e)return void m.write(e,t,n,o);const{features:i}=this;if(i)for(const e of i)if(null!=e?.geometry)return void m.write(e.geometry.type,t,n,o)}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,o=(0,y.im)(e);return o&&!n&&t.spatialReference&&(o.spatialReference=d.Z.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n)for(const e of n)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new o(this.cloneProperties())}cloneProperties(){return(0,l.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const o=t.features[n];if(o.geometry){const t=e?.[n];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,n],translate:[o,i]}=e,r=this.features,a=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-o)/t)),(e=>Math.round((i-e)/n)));for(let e=0,t=r.length;e<t;e++)a?.(r[e].geometry)||(r.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[o,i],scale:[r,a]}=n;let s=null,l=null;if(this.hasZ&&null!=n?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=n;s=n=>n*t+e}if(this.hasM&&null!=n?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=n;l=n=>null==n?n:n*t+e}const c=this._getHydrationFunction(e,(e=>e*r+o),(e=>i-e*a),s,l);for(const{geometry:e}of t)null!=e&&c&&c(e);return this.transform=null,this}readFeaturesWithClass(e,t,n){const o=d.Z.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){const r=e[t],a=n.fromJSON(r),s=r.geometry?.spatialReference;null==a.geometry||s||(a.geometry.spatialReference=o);const l=r.aggregateGeometries,c=a.aggregateGeometries;if(l&&null!=c)for(const e in c){const t=c[e],n=l[e]?.spatialReference;null==t||n||(t.spatialReference=o)}i.push(a)}return i}_quantizePoints(e,t,n){let o,i;const r=[];for(let a=0,s=e.length;a<s;a++){const s=e[a];if(a>0){const e=t(s[0]),a=n(s[1]);e===o&&a===i||(r.push([e-o,a-i]),o=e,i=a)}else o=t(s[0]),i=n(s[1]),r.push([o,i])}return r.length>0?r:null}_getQuantizationFunction(e,t,n){return"point"===e?e=>(e.x=t(e.x),e.y=n(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,y.oU)(e)?e.rings:e.paths,i=[];for(let e=0,r=o.length;e<r;e++){const r=o[e],a=this._quantizePoints(r,t,n);a&&i.push(a)}return i.length>0?((0,y.oU)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,n);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,n,o,i){return"point"===e?e=>{e.x=t(e.x),e.y=n(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const r=(0,y.oU)(e)?e.rings:e.paths;let a,s;for(let e=0,o=r.length;e<o;e++){const o=r[e];for(let e=0,i=o.length;e<i;e++){const i=o[e];e>0?(a+=i[0],s+=i[1]):(a=i[0],s=i[1]),i[0]=t(a),i[1]=n(s)}}if(o&&i)for(let e=0,t=r.length;e<t;e++){const t=r[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=o(n[2]),n[3]=i(n[3])}}else if(o)for(let e=0,t=r.length;e<t;e++){const t=r[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=o(n[2])}}else if(i)for(let e=0,t=r.length;e<t;e++){const t=r[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=i(n[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const r=e.points;let a,s;for(let e=0,o=r.length;e<o;e++){const o=r[e];e>0?(a+=o[0],s+=o[1]):(a=o[0],s=o[1]),o[0]=t(a),o[1]=n(s)}if(o&&i)for(let e=0,t=r.length;e<t;e++){const t=r[e];t[2]=o(t[2]),t[3]=i(t[3])}else if(o)for(let e=0,t=r.length;e<t;e++){const t=r[e];t[2]=o(t[2])}else if(i)for(let e=0,t=r.length;e<t;e++){const t=r[e];t[2]=i(t[2])}}:null}};(0,i._)([(0,c.Cb)({type:String,json:{write:!0}})],v.prototype,"displayFieldName",void 0),(0,i._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,c.Cb)({type:[r.Z],json:{write:!0}})],v.prototype,"features",void 0),(0,i._)([(0,p.r)("features")],v.prototype,"readFeatures",null),(0,i._)([(0,c.Cb)({type:[g.Z],json:{write:!0}})],v.prototype,"fields",void 0),(0,i._)([(0,c.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:m.read}}})],v.prototype,"geometryType",void 0),(0,i._)([(0,h.c)("geometryType")],v.prototype,"writeGeometryType",null),(0,i._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasM",void 0),(0,i._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasZ",void 0),(0,i._)([(0,c.Cb)({types:f.qM,json:{write:!0}})],v.prototype,"queryGeometry",void 0),(0,i._)([(0,p.r)("queryGeometry")],v.prototype,"readQueryGeometry",null),(0,i._)([(0,c.Cb)({type:d.Z,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,i._)([(0,h.c)("spatialReference")],v.prototype,"writeSpatialReference",null),(0,i._)([(0,c.Cb)({json:{write:!0}})],v.prototype,"transform",void 0),v=o=(0,i._)([(0,u.j)("esri.rest.support.FeatureSet")],v),v.prototype.toJSON.isDefaultToJSON=!0},599:function(e,t,n){n.d(t,{P:function(){return c},d:function(){return h}});var o=n(73440),i=n(41773),r=n(96711),a=n(17155),s=(n(61432),n(83850),n(79775)),l=n(48023);const c=(0,i.w)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),p="percent-of-total",u="field",h=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&u||n&&p||null,t&&n&&r.Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==u&&e!==p||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,o._)([(0,a.Cb)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,o._)([(0,a.Cb)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,o._)([(0,a.Cb)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,o._)([(0,a.Cb)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,o._)([(0,s.J)(c,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,o._)([(0,l.j)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},6298:function(e,t,n){n.d(t,{E:function(){return i}});var o=n(44252);const i={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:o.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:o.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:o.of.Loop,repeatdelay:0,easing:o.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,n){n.d(t,{$Z:function(){return C},BX:function(){return w},Cc:function(){return g},E_:function(){return s},F:function(){return S},FG:function(){return x},H1:function(){return r},J0:function(){return f},JW:function(){return O},Lb:function(){return z},Le:function(){return G},Ml:function(){return H},On:function(){return _},Qf:function(){return P},RI:function(){return m},TB:function(){return T},Ul:function(){return D},W7:function(){return M},X_:function(){return E},be:function(){return p},e0:function(){return R},gJ:function(){return y},hU:function(){return A},hf:function(){return o},k5:function(){return d},oY:function(){return c},pJ:function(){return v},qQ:function(){return a},wi:function(){return b},yL:function(){return h},yl:function(){return I},zL:function(){return u}});n(6298);function o(e,t,n,o){return function(e){return"function"==typeof e}(e)?e(t,n,o):e}function i(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function r(e,t){const n=[];let o=0,r=-1;do{if(r=e.indexOf("[",o),r>=o){if(r>o){const t=e.slice(o,r);n.push([t,null,i(t)])}if(o=r+1,r=e.indexOf("]",o),r>=o){if(r>o){const i=t[e.slice(o,r)];i&&n.push([null,i,!1])}o=r+1}}}while(-1!==r);if(o<e.length){const t=e.slice(o);n.push([t,null,i(t)])}return n}function a(e,t,n){let o="",i=null;for(const n of t){const[t,r,a]=n;if(null!=t&&""!==t)a?i=t:(null!=i&&(o+=i,i=null),o+=t);else{const t=e.readAttribute(r);null!=t&&""!==t&&(null!==i&&(o+=i,i=null),o+=t)}}return l(o,n)}function s(e,t,n,o){let i="",r=null;for(const o of t){const[t,a,s]=o;if(null!=t&&""!==t)s?r=t:(null!=r&&(i+=r,r=null),i+=t);else{let t=a;null!=n&&(t=U(a,n));const o=e.attributes[t];null!=o&&""!==o&&(null!=r&&(i+=r,r=null),i+=o)}}return l(i,o)}function l(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function c(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function p(e){return e.data?.symbol??null}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function h(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const f=(e,t=0)=>null==e||isNaN(e)?t:e,g=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function m(){return Promise.all([n.e(27093),n.e(13323)]).then(n.bind(n,69339))}function v(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function _(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function b(e){let t="normal",n="normal";if(e){const o=e.toLowerCase();o.includes("italic")?t="italic":o.includes("oblique")&&(t="oblique"),o.includes("bold")?n="bold":o.includes("light")&&(n="lighter")}return{style:t,weight:n}}function w(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function M(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=M(t);if(null!=e)return e}break;case"CIMTextSymbol":return M(e.symbol);case"CIMSolidFill":return e.color}return null}function C(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=C(e);if(null!=t)return t}break}case"CIMTextSymbol":return C(e.symbol);case"CIMSolidStroke":return e.color}}function S(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=S(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return S(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function E(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function x(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function P(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const T=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function G(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function I(e,t,n,o,i,r,a=!0){const{infos:s}=r;let l=1,c=0,p=0,u=0,h=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:n,rotation:o,size:i,frameHeight:r,rotateClockWise:d,scaleSymbolsProportionally:y}of s)h=e?1:l,p=Z(t,n,c,h,p),u=L(t,n,c,h,u),r&&(y||a)&&(l*=i/r),c=N(o,d,c);const d=Z(o,i,c,h,p),y=L(o,i,c,h,u);return{size:e*l,rotation:N(t,n,c),offsetX:d,offsetY:y}}function k(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function A(e){return e?.dashTemplate&&(e.dashTemplate=k(e.dashTemplate)),e}function R(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return R(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return R(e.symbol)}}return"Normal"}function U(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function D(e){return e.map((e=>({...e,propertyName:G(e.propertyName)})))}function H(e){const t={};for(const n in e){const o=e[n];t[G(n)]=o}return t}function L(e,t,n,o,i){const r=n*Math.PI/180;if(r){const n=Math.cos(r);return(Math.sin(r)*e+n*t)*o+i}return t*o+i}function Z(e,t,n,o,i){const r=n*Math.PI/180;return r?(Math.cos(r)*e-Math.sin(r)*t)*o+i:e*o+i}function N(e,t,n){return t?n-e:n+e}function z(e,t){return Math.max(Math.min((e??t)/100,1),0)}},9350:function(e,t,n){n.d(t,{CJ:function(){return c},Rz:function(){return u},js:function(){return h},xA:function(){return l},z3:function(){return p}});n(61432);var o=n(89636),i=n(38096),r=n(19886),a=n(45433),s=n(54914);const l=r.Z.fromJSON(s.I4),c=i.Z.fromJSON(s.ET),p=o.Z.fromJSON(s.lF),u=a.Z.fromJSON(s.qP);function h(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return c;case"polygon":case"extent":return p}return null}r.Z.fromJSON(s.eG),i.Z.fromJSON(s.wW),o.Z.fromJSON(s.lj)},54914:function(e,t,n){n.d(t,{ET:function(){return a},I4:function(){return r},SQ:function(){return o},X1:function(){return i},eG:function(){return c},lF:function(){return s},lj:function(){return u},qP:function(){return l},wW:function(){return p}});const o=[252,146,31,255],i=[153,153,153,255],r={type:"esriSMS",style:"esriSMSCircle",size:6,color:o,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:o},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},p={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},85164:function(e,t,n){n.d(t,{O:function(){return i},h:function(){return o}});var o;n(61432);function i(e){switch(e){case o.SUPPORTED:break;case o.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case o.GEOMETRY_MISSING:return"no geometry";case o.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case o.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case o.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}!function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(o||(o={}))},51413:function(e,t,n){n.d(t,{Y:function(){return r}});n(61432);var o=n(51870),i=n(85164);function r(e){if(e.graphic&&"graphics"!==e.graphic.layer?.type)return i.h.GRAPHICS_LAYER_MISSING;const t=e.operations?.data.type;if(!t)return i.h.GEOMETRY_TYPE_UNSUPPORTED;switch(t){case"polygon":case"point":case"polyline":case"mesh":break;default:return i.h.GEOMETRY_TYPE_UNSUPPORTED}const n=e.elevationInfo;return(0,o.XH)(n)?i.h.ELEVATION_MODE_UNSUPPORTED:i.h.SUPPORTED}},77308:function(e,t,n){function o(e,t,n){if(!t||!e?.map)return;const{map:o}=e,i=o.layers.find((e=>e===t));i||o.add(t,n),i&&null!=n&&o.layers.reorder(i,n)}function i(e,t){const n="subtype-sublayer"===t?.type?t.parent:t;return e.allLayerViews.find((e=>{const t=e.layer;return t===n||"sublayers"in t&&null!=t.sublayers&&t.sublayers.includes(n)}))}n.d(t,{j:function(){return i},p:function(){return o}})},42527:function(e,t,n){n.d(t,{a:function(){return i}});n(61432),n(96711);class o{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const t=e.modifiers;for(const e of this.keyModifiers)if(!t.has(e))return!1;return!0}}class i{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e)}onUninstall(){}registerIncoming(e,t,n){let i;"function"==typeof t?(n=t,i=[]):i=t||[];const a="string"==typeof e?new o(e,i):e,s=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=e=>{const t=this._incoming[e.match.eventType];if(t){const n=t.indexOf(e);t.splice(n,1),s(),this._manager&&this._manager.updateDependencies()}},c=new r(a,n,{onPause:l,onRemove:l,onResume:e=>{const t=this._incoming[e.match.eventType];t&&!t.includes(e)&&(t.push(e),s(),this._manager&&this._manager.updateDependencies())}});let p=this._incoming[a.eventType];return p||(p=[],this._incoming[a.eventType]=p),p.push(c),s(),this._manager&&this._manager.updateDependencies(),c}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new a(e,{onEmit:(e,t,n,o)=>{this._manager?.emit(e.eventType,t,n,o)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const n of t)if(n.match.matches(e)&&(n.callback?.(e),e.shouldStopPropagation()))break}}class r{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class a{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n)}remove(){this._removed=!0,this._handler.onRemove(this)}}},96620:function(e,t,n){n.d(t,{$:function(){return f},f:function(){return v}});var o=n(73440),i=n(70880),r=(n(61432),n(96711)),a=n(92462),s=n(17155),l=(n(83850),n(48023)),c=n(42458),p=n(42527);class u extends p.a{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",(e=>this._update(e.data)))}_update(e){const t="touch"===e.native.pointerType?"touch":"mouse",{x:n,y:o}=e;t===this._value&&this._x===n&&this._y===o||(this._value=t,this._x=n,this._y=o,this._onChange(t,n,o))}}var h=n(39355);class d extends p.a{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=(0,h.t)(!1),this._onPointerAdd=({data:e})=>{"touch"===e.pointerType&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{"touch"===e.pointerType&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}}var y=n(96571);let f=class extends i.Z{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=c.C,this._latestPointerType="mouse",this._propertiesPool=new y.L({latestPointerLocation:_},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,n=v.INTERNAL){if(this._nameToGroup[e])return;if(0===t.length)return;const o={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=o;for(let e=o.handlers.length-1;e>=0;e--){const t=o.handlers[e];this._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(e,n,o,i,r)=>{this._emitInputEvent(t.priorityIndex+1,e,n,o,r,i)},setPointerCapture:(e,n)=>{this._setPointerCapture(o,t,e,n)},setEventCallback:e=>{t.eventCallback=e},setUninstallCallback:e=>{t.uninstallCallback=e},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback?.()})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):r.Z.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return void 0!==this._nameToGroup[e]}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let e=this._handlers.length-1;e>=0;e--){const t=this._handlers[e];t.priorityIndex=e,this._handlersPriority.push(t)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const o=this._handlersPriority[n];o.priorityIndex=n;let i=o.handler.hasSideEffects;if(!i)for(const t of o.handler.outgoingEventTypes)if(e.has(t)){i=!0;break}if(i)for(const n of o.handler.incomingEventMatches){e.add(n.eventType);for(const e of n.keyModifiers)(0,c.w)(e)||t.add(e)}o.active=i}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,n){this._latestPointerType=e;const o=this._get("latestPointerLocation");if(null==o||o.x!==t||o.y!==n){const e=this._propertiesPool.get("latestPointerLocation");e.x=t,e.y=n,this._set("latestPointerLocation",e)}}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);const n=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,o=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,n,o)}_updateKeyModifiers(e,t){if(!t)return;let n=!1;const o=()=>{n||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),n=!0)},i=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(o(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(o(),this._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){const n=t.key;this._keyModifiers.has(n)&&i(n,"key-down"===e)}const r=t.native;i("Alt",!!r?.altKey),i("Control",!!r?.ctrlKey),i("Ctrl",!!r?.ctrlKey),i("Shift",!!r?.shiftKey),i("Meta",!!r?.metaKey),i("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new u(((e,t,n)=>this._setLatestPointer(e,t,n))),this._multiTouchHandler=new d,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],v.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,v.INTERNAL)}_setPointerCapture(e,t,n,o){const i=e.name+"-"+t.priorityIndex,r=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,r),o?(r.add(i),1===r.size&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):r.has(i)&&(r.delete(i),0===r.size&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies()}_emitInputEventFromSource(e,t,n,o){this._emitInputEvent(0,e,t,n,o)}_emitInputEvent(e,t,n,o,i,r){const a=void 0!==o?o:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),s=void 0!==i&&i,l={event:new g(t,n,a,r||this._activeKeyModifiers,s),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new a.Z,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:t,priorityIndex:n}=e.events.pop(),o=t.data?.eventId;if(null==o||!this._stoppedPropagationEventIds.has(o))for(e.currentHandler=this._handlersPriority[n];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){null!=o&&this._stoppedPropagationEventIds.add(o);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new a.Z;t.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)t.push(n.events.pop());n.events=t,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(n.eventType!==e.eventType)continue;const t=n.keyModifiers.filter((t=>e.keyModifiers.includes(t)));if(t.length===n.keyModifiers.length!=(t.length===e.keyModifiers.length))return n.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const n of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(n,t[e])>=0;)e++;t.splice(e,0,n)}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t};return{injectEvent:(t,n)=>{e((()=>this._onEventReceived(t,n)))},disablePointerCapture:e}}};(0,o._)([(0,s.Cb)({readOnly:!0})],f.prototype,"hasPendingInputs",null),(0,o._)([(0,s.Cb)({constructOnly:!0})],f.prototype,"eventSource",void 0),(0,o._)([(0,s.Cb)({constructOnly:!0})],f.prototype,"recognizers",void 0),(0,o._)([(0,s.Cb)()],f.prototype,"_latestPointerType",void 0),(0,o._)([(0,s.Cb)()],f.prototype,"latestPointerType",null),(0,o._)([(0,s.Cb)()],f.prototype,"multiTouchActive",null),(0,o._)([(0,s.Cb)({readOnly:!0})],f.prototype,"latestPointerLocation",void 0),(0,o._)([(0,s.Cb)()],f.prototype,"_paused",void 0),(0,o._)([(0,s.Cb)({readOnly:!0})],f.prototype,"updating",null),f=(0,o._)([(0,l.j)("esri.views.input.InputManager")],f);class g{constructor(e,t,n,o,i){this.type=e,this.data=t,this.timestamp=n,this.modifiers=o,this.cancelable=i,this._propagationState=m.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=m.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&m.STOPPED)}defer(e){this._propagationState|=m.PAUSED;const t=(e,t)=>{this._propagationState&=~m.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),t)throw e;return e};return("function"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return!!(this._propagationState&m.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}}var m;!function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"}(m||(m={}));const v={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};const _=class{}},42458:function(e,t,n){n.d(t,{C:function(){return o},w:function(){return r}});const o=(0,n(61432).Z)("mac")?"Meta":"Control",i=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),r=e=>i.has(e)},18753:function(e,t,n){n.d(t,{G7:function(){return y},Kj:function(){return p},Lk:function(){return h},NG:function(){return l},Sn:function(){return c},T6:function(){return u},a8:function(){return d}});var o=n(3480),i=n(50702),r=n(79577),a=n(96620),s=n(42458);const l={cancel:"Escape",complete:"Enter"},c={...l,redo:"r",undo:"z",center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},p={toggle:"Control"},u={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},h={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:s.C,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},editSourcePoints:{key:"Alt",continuePropagation:!0},undo:"z",redo:"r"},d={invertType:["Control","Meta"]};class y{constructor(){this._bindings=new Map}add(e,t){return this.addToggle(e,(e=>{"key-down"===e.type&&t(e)}))}addToggle(e,t){const n=f.fromDefinition(e,t),a=(0,r.s1)(this._bindings,n.key,(()=>[]));return a.push(n),(0,i.kB)((()=>(0,o.Od)(a,n)))}register(e,t=a.f.WIDGET){return(0,i.AL)([e.on("key-down",(t=>this.dispatch(e.inputManager,t)),t),e.on("key-up",(t=>this.dispatch(e.inputManager,t)),t)])}dispatch(e,t){const n=t.key,o=this._bindings.get(n);if(o)for(const n of o)n.process(e,t)}}class f{constructor(e,t,n,o,i){this.key=e,this.modifiers=t,this.repeats=n,this.continuePropagation=o,this.callback=i}process(e,t){if(!(t.key!==this.key||"repeat"in t&&t.repeat&&!this.repeats)){for(const t of this.modifiers)if(!e.isModifierKeyDown(t))return;this.continuePropagation||t.stopPropagation(),this.callback(t)}}static fromDefinition(e,t){if("string"==typeof e)return new f(e,[],!1,!1,t);const{key:n,modifier:o,repeats:i,continuePropagation:r}=e;return new f(n,o?Array.isArray(o)?o:[o]:[],!!i,!!r,t)}}},60396:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(73440),i=n(70880),r=n(17155),a=(n(61432),n(96711),n(83850),n(48023));let s=class extends i.Z{constructor(e){super(e),this.enabled=!1}};(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],s.prototype,"enabled",void 0),s=(0,o._)([(0,a.j)("esri.views.interactive.sketch.SketchLabelOptions")],s)},41943:function(e,t,n){n.d(t,{Z:function(){return p}});var o=n(73440),i=n(70880),r=n(17155),a=(n(61432),n(96711),n(83850),n(48023)),s=n(60396),l=n(69660),c=n(57440);let p=class extends i.Z{constructor(e){super(e),this.labels=new s.Z,this.tooltips=new l.Z,this.values=new c.Z}};(0,o._)([(0,r.Cb)({nonNullable:!0,type:s.Z})],p.prototype,"labels",void 0),(0,o._)([(0,r.Cb)({nonNullable:!0,type:l.Z})],p.prototype,"tooltips",void 0),(0,o._)([(0,r.Cb)({nonNullable:!0,type:c.Z})],p.prototype,"values",void 0),p=(0,o._)([(0,a.j)("esri.views.interactive.sketch.SketchOptions")],p)},69660:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(73440),i=n(70880),r=n(17155),a=(n(61432),n(96711),n(83850),n(48023));let s=class extends i.Z{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};(0,o._)([(0,r.Cb)({type:String,nonNullable:!0})],s.prototype,"mode",void 0),s=(0,o._)([(0,a.j)("esri.views.interactive.sketch.SketchTooltipElevationOptions")],s);let l=class extends i.Z{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"area",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"coordinates",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"direction",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"distance",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"elevation",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"header",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"helpMessage",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"orientation",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"radius",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"rotation",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"scale",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"size",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],l.prototype,"totalLength",void 0),l=(0,o._)([(0,a.j)("esri.views.interactive.sketch.SketchTooltipVisibleElements")],l);let c=class extends i.Z{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new s,this.placement="auto",this.offset=null,this.visibleElements=new l,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],c.prototype,"enabled",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"forceEnabled",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"effectiveEnabled",null),(0,o._)([(0,r.Cb)()],c.prototype,"helpMessage",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"helpMessageIcon",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],c.prototype,"inputEnabled",void 0),(0,o._)([(0,r.Cb)({type:s,nonNullable:!0})],c.prototype,"elevation",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"placement",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"offset",void 0),(0,o._)([(0,r.Cb)({type:l,nonNullable:!0})],c.prototype,"visibleElements",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"visualVariables",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"xyMode",void 0),c=(0,o._)([(0,a.j)("esri.views.interactive.sketch.SketchTooltipOptions")],c)},57440:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(73440),i=n(70880),r=n(17155),a=(n(61432),n(96711),n(83850),n(48023));let s=class extends i.Z{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};(0,o._)([(0,r.Cb)()],s.prototype,"length",void 0),(0,o._)([(0,r.Cb)()],s.prototype,"verticalLength",void 0),(0,o._)([(0,r.Cb)()],s.prototype,"area",void 0),s=(0,o._)([(0,a.j)("esri.views.interactive.sketch.Units")],s);var l=n(53257);let c=class extends i.Z{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?l.uE.RelativeBilateral:l.uE.Relative;case"absolute":return l.uE.Absolute}}get displayUnits(){return this._get("displayUnits")??new s}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new s}set inputUnits(e){this._set("inputUnits",e)}};(0,o._)([(0,r.Cb)({type:String,nonNullable:!0})],c.prototype,"directionMode",void 0),(0,o._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],c.prototype,"relativeDirectionIsBilateral",void 0),(0,o._)([(0,r.Cb)()],c.prototype,"effectiveDirectionMode",null),(0,o._)([(0,r.Cb)({type:s,nonNullable:!0})],c.prototype,"displayUnits",null),(0,o._)([(0,r.Cb)({type:s,nonNullable:!0})],c.prototype,"inputUnits",null),c=(0,o._)([(0,a.j)("esri.views.interactive.sketch.SketchValueOptions")],c)},43295:function(e,t,n){n.d(t,{Ac:function(){return a},CN:function(){return l},En:function(){return p},Ke:function(){return y},NU:function(){return s},SQ:function(){return i},b:function(){return u},hG:function(){return d},j2:function(){return r},oH:function(){return c},x:function(){return h}});var o=n(53147);const i=new o.Z("cyan"),r=1,a=.25,s=new o.Z("black"),l=.4,c=.2,p=.25,u="default",h="temporary",d=new o.Z("yellow"),y=8},96571:function(e,t,n){n.d(t,{L:function(){return r}});var o=n(74978),i=n(79860);class r{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const t in e){const n=e[t],i=new o.e(n,void 0,void 0,2,2);this._properties[t]={pool:i,acquired:[]}}this._afterDispatchHandle=(0,i.Fs)((()=>this._release()))}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const e of t.acquired)(0,i.NC)(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),n=this._properties[e];let o=n.pool.acquire();for(n.acquired.push(o);o===t;)n.acquired.push(o),o=n.pool.acquire();return o}_release(){for(const e in this._properties){const t=this._properties[e];let n=0;for(const e of t.acquired)(0,i.NC)(e)?t.acquired[n++]=e:t.pool.release(e);t.acquired.length=n}}}},53257:function(e,t,n){n.d(t,{Ci:function(){return _},LH:function(){return w},Lm:function(){return y},d3:function(){return b},ib:function(){return C},n6:function(){return g},uE:function(){return o},yd:function(){return M},zS:function(){return m}});var o,i=n(95437),r=n(1925),a=n(26636),s=n(26821),l=n(41788),c=n(24910),p=n(82846),u=n(2051),h=n(95872),d=n(8554);function y(e,t){if(null==e||null==t)return;const n=f(e,t);return null!=n?(0,r.GJ)(n,"radians","geographic"):void 0}!function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"}(o||(o={}));const f=(()=>{const e=(0,p.Ue)(),t=(0,p.Ue)();return(n,o)=>((0,c.i)(e,n.x,n.y,n.z??0),(0,c.i)(t,o.x,o.y,o.z??0),g(e,t,n.spatialReference,o.spatialReference))})(),g=(()=>{const e=(0,l.Ue)(),t=(0,p.Ue)(),n=(0,p.Ue)();return(o,i,r,p)=>{if((0,c.q)(o,i))return;const y=(0,h.Lc)(r),f=(0,h.Lc)(p);if(y&&f&&(0,d.fS)(y,f)&&(0,u.S)(o,r,t,y)&&(0,u.S)(i,p,n,f)){const{azimuth:e}=(0,h.cA)(E,t,n,y);return null!=e?(0,a.En)(e,"degrees","radians"):void 0}e[0]=i[0]-o[0],e[1]=i[1]-o[1];let g=(0,s.EU)(l.IO,e);return e[0]<0&&(g=x-g),g}})();function m(e,t,n,i=o.Absolute){if(t&&n)switch(i){case o.Absolute:return y(t,n);case o.Relative:return _(v(e,t,n),o.Relative);case o.RelativeBilateral:return _(v(e,t,n),o.RelativeBilateral)}}function v(e,t,n){if(!e||!t||!n)return;const o=f(e,t),i=f(t,n);return null!=o&&null!=i?(0,r.GJ)(i-o,"radians","geographic"):void 0}function _(e,t){if(null!=e)switch(t){case o.Absolute:return b(e);case o.Relative:{const t=M(e);let n=T.normalize(t,0,!0);return-180===n&&(n=180),(0,r.GJ)(n,"degrees","geographic")}case o.RelativeBilateral:{const t=M(e),n=Math.abs(T.normalize(t,0,!0));return(0,r.GJ)(n,"degrees","geographic")}}}function b(e){const t=M(e),n=P.normalize(t,0,!0);return(0,r.GJ)(n,"degrees","geographic")}const w=(()=>{const e=(0,p.Ue)();return(t,n,o,i,s,l="geodesic")=>{(0,c.c)(e,n);const p=M(s);if("geodesic"===l){const r=(0,h.Lc)(o);if(r&&(0,u.S)(e,o,e,r))return(0,h.TB)(t,e,p,i,r),t[2]=n[2],!!(0,u.S)(t,r,t,o)}const d=(0,r.hw)(p,"geographic","arithmetic"),y=(0,a.En)(d,"degrees","radians"),f=n[0]+i*Math.cos(y),g=n[1]+i*Math.sin(y),m=n[2];return(0,c.i)(t,f,g,m),!0}})();function M(e){if(null!=e)return(0,r.hw)(S(e),e.rotationType,"geographic")}function C(e){if(null!=e)return(0,r.hw)(S(e),e.rotationType,"arithmetic")}function S(e){return(0,a.En)(e.value,e.unit,"degrees")}const E=new h._q,x=2*Math.PI,P=i.BV,T=new i.pE(-180,180)},54074:function(e,t,n){n.d(t,{A:function(){return s}});var o=n(73799),i=n(72575);const r=e=>({autoAreaByElevationMode(t,n,i=(0,o.ln)()){if("on-the-ground"===n){const n=e.geodesicArea(t);return null!=n?n:(0,o.X)(t,i)}return(0,o.oN)(t,i)},autoArea2D(e,t=(0,o.ln)()){return this.autoAreaByElevationMode(e,"on-the-ground",t)}});let a=null;async function s(){return a||(a=r(await(0,i.g)())),a}},8316:function(e,t,n){n.d(t,{U:function(){return a}});var o=n(82846),i=n(49510),r=n(55274);async function a(){return function(e){return{autoLength2D:t=>e.geodesicLength(t)??(0,i.Sx)(t),autoDistanceBetweenPoints2D:(t,n)=>e.geodesicDistanceBetweenPoints(t,n)??(0,i.xI)(t,n),autoDistance2D:(t,n,o)=>(s[0]=t[0],s[1]=t[1],s[2]=3===t.length?t[2]:0,l[0]=n[0],l[1]=n[1],l[2]=3===n.length?n[2]:0,e.geodesicDistance(s,l,o)??(0,i.qj)(s,l,o))}}(await(0,r.H)())}const s=(0,o.Ue)(),l=(0,o.Ue)()},73799:function(e,t,n){n.d(t,{X:function(){return d},bT:function(){return v},ln:function(){return m},oN:function(){return h}});var o=n(1925),i=n(26636),r=n(38874),a=n(24910),s=n(82846),l=n(2051),c=n(77773),p=n(79012),u=n(27250);function h(e,t={positionsWorldCoords:[]}){return y(e,t)}function d(e,t={positionsWorldCoords:[]}){return y(e,t,!1)}function y(e,t,n=e.hasZ){const r=(0,u.m)(e.spatialReference),h=(0,i.oq)(r);if(null==h)return null;const d=(e,t)=>!(t.length<2||((0,a.i)(e,t[0],t[1],n&&t[2]||0),0));let y=0;for(const n of e.rings){const o=n.length;if(o<3)continue;const{positionsWorldCoords:i}=t;for(;i.length<o;)i.push((0,s.Ue)());const u=f,h=(0,a.i)(g,0,0,0),m=1/o;for(let t=0;t<o;t++){if(!d(u,n[t]))return null;if(!(0,l.S)(u,e.spatialReference,i[t],r))return null;(0,a.b)(h,h,i[t],m)}const _=(0,c.zk)(i[0],i[1],h,(0,c.re)());if(0===(0,a.k)((0,c.st)(_)))continue;for(let e=0;e<o;e++)(0,c.tx)(_,h,i[e],i[e]);const b=v(i);for(let e=0;e<b.length;e+=3)y+=(0,p.wu)(i[b[e]],i[b[e+1]],i[b[e+2]])}return(0,o.ne)(y,h)}const f=(0,s.Ue)(),g=(0,s.Ue)();function m(){return{positionsWorldCoords:[]}}function v(e){return(0,r.e)(function(e){const t=new Float64Array(2*e.length);for(let n=0;n<e.length;++n){const o=e[n],i=2*n;t[i]=o[0],t[i+1]=o[1]}return t}(e),[],2)}},72575:function(e,t,n){n.d(t,{g:function(){return s}});var o=n(1925),i=n(95872),r=n(10618);const a=e=>({geodesicArea(t){const{spatialReference:n}=t;return(0,r.T5)(n,l,(t=>function(e,t){try{return(0,o.ne)(Math.abs(e.geodesicArea(t,"square-meters")),"square-meters")}catch(e){return null}}(e,t)),t)}});async function s(){const e=await Promise.all([n.e(27093),n.e(13746)]).then(n.bind(n,13746));return a(e)}function l(e){return(0,o.ne)(Math.abs((0,i.p8)([e],"square-meters")[0]),"square-meters")}},22455:function(e,t,n){async function o(e,t){if("2d"===e.type)return e.hitTest(t);const n=await e.hitTest(t);if(0===n.results.length)return n;const o=n.results[0],r=(o.distance??0)*(1+i),a=n.results.findIndex((e=>(e.distance??0)>r));return-1!==a&&(n.results=n.results.slice(0,a)),o&&n.ground.distance>r&&(n.ground.mapPoint=null),n}n.d(t,{ZV:function(){return o},qm:function(){return a}});const i=.05;function r(e){return"graphic"===e?.type}function a(e){return e.find(r)??null}},27546:function(e,t,n){n.d(t,{Av:function(){return c},Cy:function(){return p},Dc:function(){return u},GB:function(){return l},Xi:function(){return h},_1:function(){return a},lE:function(){return d},rs:function(){return s},tl:function(){return r}});var o=n(88194),i=n(61432);function r(e){return e&&"function"==typeof e.highlight}function a(e){return e&&"function"==typeof e.maskOccludee}function s(e,t,n){return null==e||e>=n&&(0===t||e<=t)}function l(e,t){if(t&&e){const{minScale:n,maxScale:o}=e;if(c(n,o))return s(t,n,o)}return!0}function c(e,t){return null!=e&&e>0||null!=t&&t>0}function p(e){return!e?.minScale||!e.maxScale||e.minScale>=e.maxScale}const u=()=>!(0,i.Z)("disable-feature:layer-based-scale-visibility");function h(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatures"in e&&"layer"in e&&"view"in e}function d(e,t,n){return new o.Z("layerview:spatial-reference-incompatible",`The spatial reference of this ${e}${t?`(wkid:${t})`:""} is incompatible with the spatial reference of the view${n?`(wkid:${n})`:""}.`,{})}},70134:function(e,t,n){n.d(t,{Eu:function(){return a},Rw:function(){return l},Sj:function(){return r},s6:function(){return s},vT:function(){return i}});n(61432);var o=n(96094);function i(e){return(0,o.vW)(e.x,e.y)}function r(e){return(0,o.s1)(e.x,e.y)}function a(e,t){const n=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return n?(0,o.vW)(t.clientX-n.left,t.clientY-n.top):(0,o.vW)(0,0)}function s(e,t){return t instanceof Event?a(e,t):i(t)}function l(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}},67947:function(e,t,n){n.d(t,{Z:function(){return Q}});var o=n(73440),i=n(43254),r=n(88194),a=n(87833),s=n(50702),l=(n(61432),n(96711)),c=n(61100),p=n(93568),u=n(90403),h=n(17155),d=(n(83850),n(48023)),y=n(60147),f=n(47925),g=n(13132),m=n(28931),v=n(8554),_=n(53447),b=n(75428),w=n(24584),M=n(85357),C=n(89636),S=n(38096),E=n(19886),x=n(68578),P=n(85164),T=n(51413),O=n(51870);function G(e){return function(e){if(e.graphic&&"graphics"!==e.graphic.layer?.type)return{result:P.h.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:P.h.GEOMETRY_MISSING};if((0,O.XH)(e.elevationInfo))return{result:P.h.ELEVATION_MODE_UNSUPPORTED};const t=e.operations.data.type,n=e.operations.data.geometry;return"point"===t||"mesh"===t||"polyline"===t||"polygon"===t?{result:P.h.SUPPORTED,geometry:n}:{result:P.h.GEOMETRY_TYPE_UNSUPPORTED}}(e).result}var I=n(77308),k=n(96620),A=n(18753),R=n(60396),U=n(41943),D=n(69660),H=n(57440),L=n(9217),Z=n(81972),N=n(29668),z=n(54074),j=n(8316),F=n(43295),B=n(22455),V=n(70134),W=n(79487);let q=class extends a.Z.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,W.Bg)(this.activeComponent)}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}set undo(e){this._set("undo",(()=>{this.canUndo()&&e()}))}set redo(e){this._set("redo",(()=>{this.canRedo()&&e()}))}};(0,o._)([(0,h.Cb)()],q.prototype,"activeComponent",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"cancelled",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"history",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"tool",null),(0,o._)([(0,h.Cb)()],q.prototype,"type",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"canUndo",null),(0,o._)([(0,h.Cb)()],q.prototype,"canRedo",null),(0,o._)([(0,h.Cb)()],q.prototype,"onEnd",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"undo",null),(0,o._)([(0,h.Cb)()],q.prototype,"redo",null),(0,o._)([(0,h.Cb)()],q.prototype,"toggleTool",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"addToSelection",void 0),(0,o._)([(0,h.Cb)()],q.prototype,"removeFromSelection",void 0),q=(0,o._)([(0,d.j)("esri.widgets.Sketch.support.OperationHandle")],q);let Y=class extends q{};(0,o._)([(0,h.Cb)()],Y.prototype,"activeComponent",void 0),Y=(0,o._)([(0,d.j)("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],Y);let K=class extends q{};(0,o._)([(0,h.Cb)()],K.prototype,"activeComponent",void 0),K=(0,o._)([(0,d.j)("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],K);var J=n(57897);const X={defaultZ:0},$={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0,name:F.b},tool:"transform"};let Q=class extends a.Z.EventedAccessor{constructor(e){super(e),this._defaultSnappingManager=null,this._updatingHandles=new y.R,this._internalGraphicsLayer=new _.Z({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new E.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new C.Z({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new S.Z({color:[130,130,130,1],width:2}),this.meshSymbol=new M.Z({symbolLayers:new i.Z([new w.Z])}),this.updateGraphics=new i.Z,this.updateOnGraphicClick=!0,this.creationMode="single",this.vertexSymbol=new E.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new U.Z,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._sketchContinuationFlag=!1,this._originalPopupEnabled=null,this.defaultCreateOptions=X,this.defaultUpdateOptions=$,this.snappingOptions=e?.snappingManager?.options??e?.snappingOptions??new Z.Z}initialize(){this.addHandles([(0,u.on)((()=>this.view?.map?.layers),"change",(e=>{e.removed.includes(this.layer)&&this.cancel()})),(0,u.on)((()=>this.layer?.graphics),"change",(e=>{if(null!=this._operationHandle)for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())})),(0,u.YP)((()=>this.layer?.elevationInfo??null),(e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)}),u.tX),(0,u.YP)((()=>this.view),(e=>{this._defaultSnappingManager=(0,c.SC)(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new L.N({view:e,options:this.snappingOptions})),"2d"===e.type?Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(1663),n.e(52846),n.e(65204),n.e(72997),n.e(15335),n.e(28874),n.e(32100),n.e(73031)]).then(n.bind(n,78478)):"3d"===e.type&&(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(93891),n.e(79841),n.e(92273),n.e(43825),n.e(1663),n.e(35151),n.e(52846),n.e(20018),n.e(8801),n.e(65204),n.e(72997),n.e(232),n.e(20562),n.e(15335),n.e(93151),n.e(92889),n.e(37727),n.e(32502),n.e(10293),n.e(79399),n.e(23776)]).then(n.bind(n,79598)),Promise.all([n.e(64246),n.e(88534),n.e(93891),n.e(79841),n.e(44905),n.e(35151),n.e(20018),n.e(35720),n.e(20562),n.e(58968),n.e(32502),n.e(75029),n.e(19047)]).then(n.bind(n,39088))))}),u.tX),(0,u.YP)((()=>this.view?.spatialReference),((e,t)=>{e&&t&&!e.equals(t)&&this.cancel()}))]),(0,N.Ob)(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=(0,c.SC)(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this._updatingHandles.destroy(),this.emit("destroy")}get updating(){return this._updatingHandles.updating||null!=this.snappingManager&&this.snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeCreateToolDrawMode(){return"create"===this._operationHandle?.type&&this._operationHandle.activeComponent&&"mode"in this._operationHandle.activeComponent?this._operationHandle.activeComponent.mode:null}get activeTooltip(){const{activeComponent:e,destroyed:t}=this,n=!t&&e&&"tooltip"in e?e.tooltip:null;return n?.visible?n:null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return null==this.activeComponent||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{...X,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...$,...e,reshapeOptions:{...$.reshapeOptions,...e?.reshapeOptions},highlightOptions:{...$.highlightOptions,...e?.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(e){null!=this._defaultSnappingManager&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=(0,c.SC)(this._defaultSnappingManager)),this._override("snappingManager",e);else{const{view:e}=this;!this._defaultSnappingManager&&e&&(this._defaultSnappingManager=new L.N({options:this.snappingOptions,view:e})),this._clearOverride("snappingManager")}}get state(){const e=!(!this.view?.ready||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:e,map:n}=t;e&&(t.cursor=null),n?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const n="view-ready";this.removeHandles(n),e&&this.addHandles((0,u.gx)((()=>e.ready),(t=>{this.removeHandles(this._viewHandlesKey),t&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)}),u.tX),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=(0,c.IM)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,c.IM)(this._viewReadyAbortController),this._sketchContinuationFlag=!0,this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if("active"===e&&t.length){const{activeTool:e,layer:n}=this,o=t.toArray();n.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:e})}}duplicate(){if("active"===this.state&&this.updateGraphics.length){const e=this.updateGraphics.map((e=>e.clone())).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,t){this.cancel(),await this._waitViewReady();const{view:n,layer:o}=this;if(!n||"disabled"===this.state)throw o||this._logMissingLayer(),(0,p.zE)();if(null!=n.activeTool&&(n.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");(0,I.p)(n,this._internalGraphicsLayer);const i=await this._updatingHandles.addPromise(this._setupCreateOperation(e,t));if(null==i||this.destroyed)return void n.map.remove(this._internalGraphicsLayer);i.on("complete",(()=>{if(i===this._operationHandle){const n=this.createGraphic,r=this._operationHandle.cancelled;if(this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map&&this.view.map.remove(this._internalGraphicsLayer),i.cancelled||null==n||o.add(n),this._sketchContinuationFlag=!1,this.emit("create",{graphic:n,state:r?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"}),r||this._sketchContinuationFlag)return;const{creationMode:a}=this;if("continuous"===a){if(t?.geometryToPlace)return;this._updatingHandles.addPromise((0,p.R8)(this.create(e,t)))}else"update"===a&&n&&this._updatingHandles.addPromise((0,p.R8)(this.update([n])))}})),this._operationHandle=i,n.ready&&n.focus()}async place(e,t){return this.create("mesh",{mode:"click",hasZ:e.hasZ,geometryToPlace:e,...t})}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:n,view:o,state:i}=this;if(!o||"disabled"===i)throw n||this._logMissingLayer(),(0,p.zE)();null!=o.activeTool&&(o.activeTool=null);const r=Array.isArray(e)?e:[e];if(null==e||!r?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(r.some((e=>e.layer!==n?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):null==e.geometry&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0))))return;const a=await this._updatingHandles.addPromise(this._setupUpdateOperation(r,t));this.destroyed||null==a||ce(a)||((0,I.p)(o,this._internalGraphicsLayer),this._setUpdateOperationHandle(a,t),this.emit("update",{graphics:r,state:"start",aborted:!1,tool:a.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const t=this.view;if(t){e=Array.isArray(e)?e:[e];for(const n of e)null==n.geometry||"mesh"===n.geometry.type||(0,v.fS)(n.geometry.spatialReference,t.spatialReference)||((0,g.canProjectWithoutEngine)(n.geometry.spatialReference,t.spatialReference)||(0,g.isLoaded)()||await(0,g.load)(),n.geometry=(0,g.project)(n.geometry,t.spatialReference))}else this._logMissingView()}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!!this._operationHandle?.canUndo()}canRedo(){return!!this._operationHandle?.canRedo()}toggleUpdateTool(){this._operationHandle?.toggleTool()}async _getFirstHit(e){const t=this.view;if(!t)return this._logMissingView(),null;if("2d"===t.type){const n=[];t.map.allLayers.forEach((e=>{"vector-tile"!==e.type&&"imagery"!==e.type||n.push(e)}));const o=await t.hitTest(e,{exclude:n});return(0,B.qm)(o.results)}const n=[t.map.ground];t.map.allLayers.forEach((e=>{(0,b.nx)(e.type)&&n.push(e)}));const o=await t.hitTest(e,{exclude:n});if(o.results.length>0){const e=o.results[0];if(null!=e&&"graphic"===e.type&&e.graphic&&(!o.ground.mapPoint||t.map.ground.opacity<1||o.ground.distance-(e.distance??0)>-Math.min(3*o.ground.distance,"global"===t.viewingMode?(0,f.Iu)(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return e}return null}_generateViewHandles(e){return[e.on("immediate-click",(async e=>{const t="active"===this.state&&"create"===this._operationHandle?.type;"disabled"!==this.state&&!t&&this.updateOnGraphicClick&&await this._updatingHandles.addPromise(this._handleImmediateClick(e))}),k.f.WIDGET)]}async _handleImmediateClick(e){const t=await e.defer((()=>this._getFirstHit((0,V.vT)(e))));let n=null;if(null!=t){const o=t.graphic;this.updateGraphics.includes(o)||o.layer===this.layer?(e.stopPropagation(),n=o):"2d"!==this.view?.type||this._isComponentGraphic(o)||"active"!==this.state||this.cancel()}else"active"===this.state&&this.cancel();null==n||this.updateGraphics.includes(n)||await this.update([n],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}})}async _setupCreateOperation(e,t){const n=this.view;if(!n)return this._logMissingView(),null;const o={hasZ:"3d"===n.type,...this.defaultCreateOptions,...t},i=await this._setupDrawGraphicTool(e,n,o);return null==i?null:(n.tools.add(i),n.activeTool=i,this._setupCreateOperationHandle(i))}async _setupDrawGraphicTool(e,t,n){if("multipoint"===e&&"3d"===t.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;const{cursor:o,defaultZ:i,hasZ:r,geometryToPlace:a,graphicProperties:s,mode:l,preserveAspectRatio:c}=n,p=(0,J.Sk)(l,e),u=(0,J.e2)(e),h=n?.optionsPerTool?.has(e)?n.optionsPerTool.get(e):{},d=h?.preserveAspectRatio??c??"rectangle"!==e,y={centered:"rectangle"!==e&&!("circle"===e&&!d),cursor:o,defaultZ:i,forceUniformSize:d,graphicProperties:{...s,attributes:{...s?.attributes}},geometryToPlace:a,geometryType:u,mode:p,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:r,snappingManager:this.snappingManager,snapToScene:!1,view:t,...h};return"2d"===t.type?this._makeDrawGraphicTool2D(y):this._makeDrawGraphicTool3D(y)}async _makeDrawGraphicTool2D(e){const[t,o,i]=await Promise.all([this._requireModule(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(1663),n.e(52846),n.e(65204),n.e(72997),n.e(15335),n.e(28874),n.e(32100),n.e(73031)]).then(n.bind(n,78478))),(0,z.A)(),(0,j.U)()]);return ce(t)||this.destroyed?null:new t.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:ne(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:o,automaticLengthMeasurementUtils:i})}async _makeDrawGraphicTool3D(e){const[t,o,i]=await Promise.all([this._requireModule(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(93891),n.e(79841),n.e(92273),n.e(43825),n.e(1663),n.e(35151),n.e(52846),n.e(20018),n.e(8801),n.e(65204),n.e(72997),n.e(232),n.e(20562),n.e(15335),n.e(93151),n.e(92889),n.e(37727),n.e(32502),n.e(10293),n.e(79399),n.e(23776)]).then(n.bind(n,79598))),(0,z.A)(),(0,j.U)()]);if(ce(t)||this.destroyed)return null;const{elevationInfo:r}=this.layer;return new t.module.DrawGraphicTool3D({...e,elevationInfo:r,snapToScene:!0,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:o,automaticLengthMeasurementUtils:i})}_setupCreateOperationHandle(e){const t=this.view;if(!t)return this._logMissingView(),null;let n=null;const o=e.forceUniformSize,i=e.centered,r=[t.on("key-down",(t=>{if(t.key===A.Sn.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===A.Sn.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==A.Sn.vertexAdd||t.repeat)t.key===A.Sn.undo?(t.stopPropagation(),a.undo()):t.key===A.Sn.redo?(t.stopPropagation(),a.redo()):t.key!==A.Sn.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===A.Sn.center&&(t.repeat||(e.centered=!i,t.stopPropagation())):(e.forceUniformSize=!o,t.stopPropagation());else{const n=e.drawOperation.geometryType;"polyline"!==n&&"polygon"!==n&&"multipoint"!==n||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),k.f.WIDGET),t.on("key-up",(t=>{t.key===A.Sn.pan?e.enabled=!0:t.key!==A.Sn.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===A.Sn.center&&(e.centered=i,t.stopPropagation()):(e.forceUniformSize=o,t.stopPropagation())}),k.f.WIDGET),e.on("vertex-add",(t=>{switch(n=null==n?"start":"active",t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:n,tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("cursor-update",(t=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:t.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(t=>{switch(t.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:t,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}})),e.on("complete",(e=>{this._set("createGraphic",e.graphic),n="complete",e.aborted?a&&a.cancel():a&&a.complete()})),(0,u.YP)((()=>this._getGraphicSymbolFromTool(e.geometryType)),(t=>{e.graphicSymbol=t}))],a=new Y({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{(0,s.yV)(r),t.tools?.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return a}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":case"freehandPolyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":case"freehandPolygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}async _setupUpdateOperation(e,t){const{layer:n,view:o}=this;if(!o)return this._logMissingView(),null;const i={...this.defaultUpdateOptions,...t,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...t?.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...t?.highlightOptions}};let r=i.tool??$.tool;for(const t of e)n.remove(t),n.add(t);if("3d"===o.type){if(0===e.length)return null;switch(r){case"move":return this._setupMove3DOperation(e,i,o,r);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],i,o);case"transform":return this._setupGraphicTransform3DOperation(e,i,o)}}switch(r){case"move":return this._setupMove2DOperation(e,i,o);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,r,i,o);case"transform":if(1===e.length){const t=e[0].geometry?.type;"point"!==t&&"multipoint"!==t||(r="reshape")}return this._setupTransformOrReshape2DOperation(e,r,i,o)}}async _setupMove3DOperation(e,t,o,i,r=!1){const[a,l]=await Promise.all([this._requireModule(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(93891),n.e(79841),n.e(92273),n.e(43825),n.e(1663),n.e(35151),n.e(52846),n.e(20018),n.e(8801),n.e(65204),n.e(72997),n.e(232),n.e(20562),n.e(15335),n.e(93151),n.e(92889),n.e(37727),n.e(32502),n.e(10293),n.e(79399),n.e(23776)]).then(n.bind(n,79598))),(0,j.U)()]);if(ce(a))return a;const{ManipulatedObject3DGraphic:c,MoveTool3D:p}=a.module,u=new Map,h=()=>{u.forEach((e=>e.destroy())),u.clear()};for(const t of e){const e=new c({view:o,graphic:t}),n=(0,T.Y)(e);if(n!==P.h.SUPPORTED)return h(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${(0,P.O)(n)}).`),null;u.set(t,e)}const d=new p({view:o,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,autoLengthMeasurementUtils:l});o.tools.add(d),d.objects.addMany(Array.from(u.values())),r||this.updateGraphics.addMany(e);const y=[],f=new K({activeComponent:d,tool:i,type:"update",onEnd:()=>{(0,s.yV)(y),le(o,d),h()},undo:()=>{ae(this.view,d),oe(f,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{ie(f,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:e=>{this.updateGraphics.push(e);const t=new c({view:o,graphic:e});u.set(e,t),d.objects.push(t),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);if(f.history.undo.forEach((e=>e.updates.splice(t,1))),f.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0===this.updateGraphics.length)return void f.complete();const n=u.get(e);n&&(d.objects.remove(n),n.destroy(),u.delete(e))},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;if("transform"!==i)return;const e=this.updateGraphics.at(0),n=await this._setupReshape3DOperation(e,t,o,!0);n&&!ce(n)&&(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(n,t))}});return y.push(...this._getHandlesForComponent(f,t),o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(f,e,t)),k.f.WIDGET),o.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(f,e)}),k.f.WIDGET)),f}_setupGraphicTransform3DOperation(e,t,n,o=!1){if(1===e.length&&function(e){if("graphics"!==e.layer?.type)return P.h.GRAPHICS_LAYER_MISSING;if(null==e.geometry)return P.h.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return P.h.SUPPORTED;default:return P.h.GEOMETRY_TYPE_UNSUPPORTED}const t=null!=e.symbol&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return t&&t.some((e=>"object"===e.type))?"on-the-ground"!==(0,O.vu)(e)&&(0,O.Lt)(e)?P.h.ELEVATION_MODE_UNSUPPORTED:P.h.SUPPORTED:P.h.SYMBOL_TYPE_UNSUPPORTED}(e[0])===P.h.SUPPORTED){const i=e[0],r=i.geometry;if(null!=r&&("point"===r.type||"mesh"===r.type))return this._setupPointTransform3DOperation(i,t,n);if(null!=r&&("polygon"===r.type||"polyline"===r.type))return this._setupPolyTransform3DOperation(i,t,n,o)}return this._setupMove3DOperation(e,t,n,"transform",o)}async _setupPointTransform3DOperation(e,t,o){const i="transform",{enableRotation:r,enableScaling:a,enableZ:l}=t,c=await this._requireModule(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(93891),n.e(79841),n.e(92273),n.e(43825),n.e(1663),n.e(35151),n.e(52846),n.e(20018),n.e(8801),n.e(65204),n.e(72997),n.e(232),n.e(20562),n.e(15335),n.e(93151),n.e(92889),n.e(37727),n.e(32502),n.e(10293),n.e(79399),n.e(23776)]).then(n.bind(n,79598)));if(ce(c))return c;const{TransformTool3D:p,ManipulatedObject3DGraphic:u}=c.module,h=new u({graphic:e,view:o}),d=new p({object:h,view:o,enableRotation:r,enableScaling:a,enableZ:l,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});o.tools.add(d),this.updateGraphics.add(e);const y=[],f=new K({activeComponent:d,tool:i,type:"update",onEnd:()=>{(0,s.yV)(y),le(o,d),h.destroy()},undo:()=>{ae(this.view,d),oe(f,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{ie(f,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();const n=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,o,"transform",!0);ce(n)||this._setUpdateOperationHandle(n,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),f.complete()},toggleTool:()=>{}});return y.push(...this._getHandlesForComponent(f,t),o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(f,e,t)),k.f.WIDGET),o.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(f,e)}),k.f.WIDGET)),f}async _setupPolyTransform3DOperation(e,t,o,i=!1){const r="transform",{enableRotation:a,enableScaling:l,enableZ:c,preserveAspectRatio:p}=t,[u,h]=await Promise.all([this._requireModule(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(93891),n.e(79841),n.e(92273),n.e(43825),n.e(1663),n.e(35151),n.e(52846),n.e(20018),n.e(8801),n.e(65204),n.e(72997),n.e(232),n.e(20562),n.e(15335),n.e(93151),n.e(92889),n.e(37727),n.e(32502),n.e(10293),n.e(79399),n.e(23776)]).then(n.bind(n,79598))),(0,j.U)()]);if(ce(u))return u;const{ManipulatedObject3DGraphic:d,ExtentTransformTool:y}=u.module,f=this.view?.inputManager?.isModifierKeyDown(A.Sn.constraint),g=new d({view:o,graphic:e}),m=new y({object:g,view:o,enableRotation:a,enableScaling:l,enableZ:c,preserveAspectRatio:!!p!=!!f,sketchOptions:this.sketchOptions,automaticLengthMeasurementUtils:h});o.tools.add(m),i||this.updateGraphics.add(e);const v=[],_=new K({activeComponent:m,tool:r,type:"update",onEnd:()=>{(0,s.yV)(v),le(o,m),g.destroy()},canUndo:()=>!m.destroyed&&m.canUndo,undo:()=>{m.destroyed||(m.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!m.destroyed&&m.canRedo,redo:()=>{m.destroyed||(m.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),_.onEnd(),_.destroy();const n=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,o,"transform",!0);ce(n)||this._setUpdateOperationHandle(n,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),_.complete()},toggleTool:async()=>{if(1!==this.updateGraphics.length||!1===t.toggleToolOnClick)return;const n=await this._setupReshape3DOperation(e,t,o,!0);n&&!ce(n)&&(_.onEnd(),_.destroy(),this._setUpdateOperationHandle(n,t))}});return v.push(...this._getHandlesForComponent(_,t),o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(_,e,t)),k.f.WIDGET),o.on("key-down",(e=>this._getCommonUpdateOperationKeyDownHandlers(_,e)),k.f.WIDGET),o.on("key-down",(e=>{e.key!==A.Sn.constraint||e.repeat||(m.preserveAspectRatio=!m.preserveAspectRatio,e.stopPropagation())}),k.f.WIDGET),o.on("key-up",(e=>{e.key===A.Sn.constraint&&(m.preserveAspectRatio=!m.preserveAspectRatio,e.stopPropagation())}),k.f.WIDGET)),_}async _setupMove2DOperation(e,t,n){const o="move";this.updateGraphics.addMany(e),await this._updatingHandles.addPromise(this._updateSpatialReference(e));const i=await this._getGraphicMover(e,t,n);if(ce(i))return i;const r=new K({activeComponent:i,tool:o,type:"update",onEnd:()=>{this._displayDefaultCursor(),(0,s.yV)(c),(0,s.yV)(l),i.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const e=this.updateGraphics.toArray();oe(r,e),r.refreshComponent(),this._emitUndoEvent({graphics:e,tool:o})},redo:()=>{const e=this.updateGraphics.toArray();ie(r,e),r.refreshComponent(),this._emitRedoEvent({graphics:e,tool:o})},addToSelection:async e=>{await this._updatingHandles.addPromise(this._updateSpatialReference(e)),this.updateGraphics.push(e),i.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:e=>{const t=this.updateGraphics.indexOf(e);r.history.undo.forEach((e=>e.updates.splice(t,1))),r.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const n=this.updateGraphics.toArray();this.emit("update",{graphics:n,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==this.updateGraphics.length?i.graphics=n:r.complete()}});let a=!1;const l=[n.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(r,e,t)),k.f.WIDGET),n.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(r,e),e.key!==A.Sn.constraint||e.repeat||(a=!0,i.enableMoveAllGraphics=!i.enableMoveAllGraphics)}),k.f.WIDGET),n.on("key-up",(e=>{e.key===A.Sn.constraint&&a&&(a=!1,i.enableMoveAllGraphics=!i.enableMoveAllGraphics)}),k.f.WIDGET)],c=this._getHandlesForComponent(r,t);return r}async _setupReshape3DOperation(e,t,o,i=!1){const r="reshape",[a,l,c]=await Promise.all([this._requireModule(Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(18208),n.e(93891),n.e(79841),n.e(92273),n.e(43825),n.e(1663),n.e(35151),n.e(52846),n.e(20018),n.e(8801),n.e(65204),n.e(72997),n.e(232),n.e(20562),n.e(15335),n.e(93151),n.e(92889),n.e(37727),n.e(32502),n.e(10293),n.e(79399),n.e(23776)]).then(n.bind(n,79598))),(0,z.A)(),(0,j.U)()]);if(ce(a))return a;const{ManipulatedObject3DGraphic:p,ReshapeTool3D:u}=a.module,h=new p({view:o,graphic:e}),d=G(h);if(d!==P.h.SUPPORTED)return h.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${(0,P.O)(d)}).`),null;const y=t.reshapeOptions,f=new u({view:o,object:h,enableZVertex:t.enableZ&&"move"===y?.vertexOperation,enableZShape:t.enableZ&&"move"===y?.shapeOperation,enableMoveObject:"move"===y?.shapeOperation||"move-xy"===y?.shapeOperation,enableMidpoints:"split"===y?.edgeOperation,enableEdgeOffset:"offset"===y?.edgeOperation,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:l,automaticLengthMeasurementUtils:c});o.tools.add(f),i||this.updateGraphics.add(h.graphic);const g=[],m=new K({activeComponent:f,tool:r,type:"update",onEnd:()=>{(0,s.yV)(g),le(o,f),h.destroy()},canUndo:()=>!f.destroyed&&f.canUndo,undo:()=>{f.destroyed||(f.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},canRedo:()=>!f.destroyed&&f.canRedo,redo:()=>{f.destroyed||(f.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r}))},addToSelection:async e=>{this.updateGraphics.add(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"}),m.onEnd(),m.destroy();const n=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,o,"transform",!0);ce(n)||this._setUpdateOperationHandle(n,t)},removeFromSelection:e=>{this.updateGraphics.remove(e),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),m.complete()},toggleTool:async()=>{if(!1===t.toggleToolOnClick)return;m.onEnd(),m.destroy();const e=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,o,!0);ce(e)||this._setUpdateOperationHandle(e,t)}});return g.push(...this._getHandlesForComponent(m,t),o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(m,e,t)),k.f.WIDGET),o.on("key-down",(e=>{this._getCommonUpdateOperationKeyDownHandlers(m,e)}),k.f.WIDGET)),m}async _setupTransformOrReshape2DOperation(e,t,n,o){this.updateGraphics.addMany(e),await this._updatingHandles.addPromise(this._updateSpatialReference(e));const i="transform"===t?await this._getBox(e,n,o):await this._getReshape(e,n,o);if(ce(i))return i;const r=new K({activeComponent:i,type:"update",onEnd:()=>{(0,s.yV)(l),(0,s.yV)(a),r.activeComponent&&!r.activeComponent.destroyed&&r.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{oe(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},redo:()=>{ie(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},addToSelection:async e=>{let t=r.activeComponent;if("reshape"===t?.type){const t=[...this.updateGraphics,e];this.updateGraphics.removeAll(),r.onEnd(),r.destroy();const i=await this._setupTransformOrReshape2DOperation(t,"transform",n,o);if(ce(i))return;this._setUpdateOperationHandle(i,n)}else this.updateGraphics.add(e),t.graphics=this.updateGraphics.toArray(),t.refresh(),r.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async e=>{const t=this.updateGraphics.indexOf(e);r.history.undo.forEach((e=>e.updates.splice(t,1))),r.history.redo.forEach((e=>e.updates.splice(t,1))),this.updateGraphics.remove(e);const n=this.updateGraphics.toArray();if(0===n.length)r.complete();else{const e=n[0].geometry;1!==n.length||null==e||"point"!==e.type&&"multipoint"!==e.type?r.activeComponent.graphics=n:r.toggleTool()}this.emit("update",{graphics:n,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const e=this.updateGraphics.at(0),t=e.geometry;if(null!=t&&("reshape"===r.tool&&("point"===t.type||"multipoint"===t.type)||"transform"===r.tool&&"extent"===t.type))return;let i=null;"transform"===r.tool?i=await this._getReshape([e],n,o):"reshape"===r.tool&&(i=await this._getBox([e],n,o)),ce(i)||(r.activeComponent?.destroy(),r.activeComponent=i,r.activeComponent&&((0,s.yV)(l),l=this._getHandlesForComponent(r,n)))}}),a=[o.on("immediate-click",(e=>this._getCommonUpdateOperationClickHandlers(r,e,n)),k.f.WIDGET),o.on("key-down",(e=>{if(this._getCommonUpdateOperationKeyDownHandlers(r,e),e.key===A.Sn.constraint&&!e.repeat&&r){const e=r.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),k.f.WIDGET),o.on("key-up",(e=>{if(e.key===A.Sn.constraint&&r){const e=r.activeComponent;e&&"box"===e.type&&(e.preserveAspectRatio=!e.preserveAspectRatio)}}),k.f.WIDGET)];let l=this._getHandlesForComponent(r,n);return r}async _getGraphicMover(e,t,o){const{enableMoveAllGraphics:i,highlightOptions:r}=t,a=await this._requireModule(n.e(54339).then(n.bind(n,54339)));return ce(a)?a:new a.module.default({enableMoveAllGraphics:i,highlightName:r?.name,highlightsEnabled:!!r?.enabled,indicatorsEnabled:!1,graphics:e,view:o,callbacks:{onGraphicMoveStart:({dx:e,dy:t,graphic:n})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:n,type:"move-start"},type:"update"})},onGraphicMove:({dx:e,dy:t,graphic:n})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:n,type:"move"},type:"update"}),onGraphicMoveStop:({dx:e,dy:t,graphic:n})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:n,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayMoveCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,o){const{enableRotation:i,enableScaling:r,highlightOptions:a,preserveAspectRatio:s}=t,[l,c]=await Promise.all([this._requireModule(Promise.all([n.e(52846),n.e(57061),n.e(16352)]).then(n.bind(n,1499))),(0,j.U)()]);if(ce(l))return l;const p=this.view?.inputManager?.isModifierKeyDown(A.Sn.constraint);return new l.module.default({graphics:e,enableRotation:i,enableScaling:r,highlightName:a?.name,highlightsEnabled:!!a?.enabled,preserveAspectRatio:!!s!=!!p,layer:this._internalGraphicsLayer,view:o,sketchOptions:this.sketchOptions,automaticLengthMeasurementUtils:c,callbacks:{onMoveStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMove:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onMoveStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScale:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onScaleStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotate:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onRotateStop:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"})}})}async _getReshape(e,t,o){const{highlightOptions:i,reshapeOptions:r}=t,a="split"===r?.edgeOperation,s="move"===r?.shapeOperation,[l,c,p]=await Promise.all([this._requireModule(Promise.all([n.e(18208),n.e(52846),n.e(28874),n.e(57061),n.e(20607)]).then(n.bind(n,20607))),(0,z.A)(),(0,j.U)()]);return ce(l)?l:new l.module.default({enableMidpoints:a,enableMovement:s,graphic:e[0],highlightName:i?.name,highlightsEnabled:!!i?.enabled,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:c,automaticLengthMeasurementUtils:p,view:o,callbacks:{onReshapeStart:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshape:e=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e},type:"update"}),onReshapeStop:({mover:e,type:t})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e,type:t},type:"update"}),onMoveStart:({dx:e,dy:t,mover:n,type:o})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:n,type:o},type:"update"}),onMove:({dx:e,dy:t,mover:n,type:o})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:n,type:o},type:"update"}),onMoveStop:({dx:e,dy:t,mover:n,type:o})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e,dy:t,mover:n,type:o},type:"update"}),onVertexAdd:({added:e,type:t,vertices:n})=>{const o=e.map((e=>(0,m.nA)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:o,vertices:n,type:t},type:"update"})},onVertexRemove:({removed:e,type:t,vertices:n})=>{const o=e.map((e=>(0,m.nA)(e.geometry)));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:o,vertices:n,type:t},type:"update"})}}})}_getHandlesForComponent(e,t){const n=e.activeComponent;if(!n)return[];switch(n.type){case"graphic-mover":return[n.on("graphic-click",(({graphic:n,viewEvent:o})=>{o.native?.shiftKey&&t.multipleSelectionEnabled&&(o.stopPropagation(),e.removeFromSelection(n))})),n.on("graphic-move-start",(t=>e.addToHistory(se(t.allGraphics))))];case"box":return[n.on("graphic-click",(n=>this._onTransformOrReshape2DGraphicClick(e,t,n))),n.on("move-start",(t=>e.addToHistory(se(t.graphics)))),n.on("rotate-start",(t=>e.addToHistory(se(t.graphics)))),n.on("scale-start",(t=>e.addToHistory(se(t.graphics))))];case"reshape":return[n.on("graphic-click",(n=>this._onTransformOrReshape2DGraphicClick(e,t,n))),n.on("move-start",(t=>e.addToHistory(se([t.mover])))),n.on("reshape-start",(t=>e.addToHistory(se([t.graphic])))),n.on("vertex-add",(t=>e.addToHistory(se([t.oldGraphic])))),n.on("vertex-remove",(t=>e.addToHistory(se([t.oldGraphic]))))];case"move-3d":return[n.events.on("record-undo",(({updates:t})=>{e.addToHistory({updates:t})})),n.events.on("move-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-start"},type:"update"})})),n.events.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move"},type:"update"})})),n.events.on("move-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.objects.length>0?e.objects[0].graphic:null,type:"move-stop"},type:"update"})})),n.events.on("immediate-click",(n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[n.events.on("record-undo",(({updates:t})=>{e.addToHistory({updates:t})})),n.events.on("translate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),n.events.on("translate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),n.events.on("rotate-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),n.events.on("rotate-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),n.events.on("scale-start",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),n.events.on("scale-stop",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),n.events.on("translate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),n.events.on("rotate",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,angle:e.angle,type:"rotate"},type:"update"})})),n.events.on("scale",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:e.object.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),n.events.on("immediate-click",(n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[n.events.on("reshape",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e,mover:e.object.graphic},type:"update"})})),n.events.on("move",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...e,mover:e.object.graphic},type:"update"})})),n.events.on("vertex-add",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),n.events.on("vertex-remove",(e=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:e,type:"update"})})),n.events.on("immediate-click",(n=>{n.shiftKey?this._toggleSelection([n.object.graphic],e,t):e.toggleTool()}))]}}_onTransformOrReshape2DGraphicClick(e,t,n){const{graphic:o,viewEvent:i}=n;return i.native?.shiftKey&&o.layer===this.layer?(i.stopPropagation(),e.removeFromSelection(o)):t.toggleToolOnClick?(i.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;const n=this.view?.map;this._disablePopup(t);e.on("complete",(()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),i=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),n&&n.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:i,toolEventInfo:null,type:"update"})}}))}async _getCommonUpdateOperationClickHandlers(e,t,n){const o=(0,V.vT)(t),i=await t.defer((()=>this._getFirstHit(o)));null!=i&&(t.native.shiftKey&&this._toggleSelection([i.graphic],e,n)||this.updateGraphics.includes(i.graphic))?t.stopPropagation():e.complete()}_toggleSelection(e,t,n){const o=!!n.multipleSelectionEnabled;return e.some((e=>!(null==e||!o||e.layer!==this.layer||(this.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),0))))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const n=t.key;n===A.Sn.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):n===A.Sn.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):n===A.Sn.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&A.Sn.delete.includes(n)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||"update"!==this._operationHandle.type)return;const t=this.activeComponent,n=this.updateGraphics.toArray();null!=t&&("reshape"!==t.type||1===n.length&&"point"===n[0].geometry?.type)&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,c.SC)(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||null==t)&&(e.attributes?.esriSketchTool||"draw-2d"===t.type&&t.graphic===e||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}_displayPointerCursor(){this.view?.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayMoveCursor(){this.view?.container&&"move"!==this.view.cursor&&(this.view.cursor="move")}_displayDefaultCursor(){this.view?.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(e,t,n){l.Z.getLogger(this).error(new r.Z(e,t,n))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const n=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:n}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){}wait(){return(0,u.N1)((()=>!this.updating))}_disablePopupEnabled(e){return"3d"!==this.view?.type||this.updateOnGraphicClick||(e?.toggleToolOnClick??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&null==this._originalPopupEnabled&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&null!=this._originalPopupEnabled&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const e=this.view;e?((0,c.IM)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await(0,p.Hl)((0,u.N1)((()=>e?.ready)),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",te("view"))}_logMissingLayer(){this._logError(ee,te("layer"))}};(0,o._)([(0,h.Cb)()],Q.prototype,"_defaultSnappingManager",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"updating",null),(0,o._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"_updatingHandles",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"_operationHandle",void 0),(0,o._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"activeTool",null),(0,o._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"activeCreateToolDrawMode",null),(0,o._)([(0,h.Cb)()],Q.prototype,"activeTooltip",null),(0,o._)([(0,h.Cb)({types:x.LB})],Q.prototype,"activeFillSymbol",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"activeLineSymbol",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"activeVertexSymbol",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"allowDeleteKey",void 0),(0,o._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"createGraphic",null),(0,o._)([(0,h.Cb)()],Q.prototype,"defaultCreateOptions",null),(0,o._)([(0,h.Cb)()],Q.prototype,"defaultUpdateOptions",null),(0,o._)([(0,h.Cb)({type:R.Z,nonNullable:!0})],Q.prototype,"labelOptions",null),(0,o._)([(0,h.Cb)()],Q.prototype,"layer",void 0),(0,o._)([(0,h.Cb)({types:x.LB})],Q.prototype,"pointSymbol",void 0),(0,o._)([(0,h.Cb)({types:x.LB})],Q.prototype,"polygonSymbol",void 0),(0,o._)([(0,h.Cb)({types:x.LB})],Q.prototype,"polylineSymbol",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"meshSymbol",void 0),(0,o._)([(0,h.Cb)({type:Z.Z,nonNullable:!0})],Q.prototype,"snappingOptions",null),(0,o._)([(0,h.Cb)()],Q.prototype,"snappingManager",null),(0,o._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"state",null),(0,o._)([(0,h.Cb)({type:D.Z,nonNullable:!0})],Q.prototype,"tooltipOptions",null),(0,o._)([(0,h.Cb)({readOnly:!0})],Q.prototype,"updateGraphics",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"updateOnGraphicClick",void 0),(0,o._)([(0,h.Cb)()],Q.prototype,"creationMode",void 0),(0,o._)([(0,h.Cb)({type:H.Z,nonNullable:!0})],Q.prototype,"valueOptions",null),(0,o._)([(0,h.Cb)({types:x.LB})],Q.prototype,"vertexSymbol",void 0),(0,o._)([(0,h.Cb)({value:null})],Q.prototype,"view",null),(0,o._)([(0,h.Cb)({constructOnly:!0,type:U.Z})],Q.prototype,"sketchOptions",void 0),Q=(0,o._)([(0,d.j)("esri.widgets.Sketch.SketchViewModel")],Q);const ee="sketch:missing-property",te=e=>`Property '${e}' is missing on SketchViewModel.`;function ne(e){return"polygon"===e||"rectangle"===e||"circle"===e}function oe(e,t){re("undo",e.history.undo,e.history.redo,t)}function ie(e,t){re("redo",e.history.redo,e.history.undo,t)}function re(e,t,n,o){const i=t.pop();if(!i)return;const r=i.updates,a=[];o.forEach(((t,n)=>{const o=r[n];null!=o&&("geometry"in o&&null!=o.geometry&&(a.push({geometry:t.geometry}),t.geometry=o.geometry),"symbol"in o&&null!=o.symbol&&(a.push({symbol:t.symbol}),t.symbol=o.symbol),"undo"in o&&(a.push(o),o[e](t)))})),n.push({updates:a})}function ae(e,t){null!=e&&t.hasGrabbedManipulators&&(e.activeTool=null)}function se(e){return{updates:e.map((({geometry:e})=>"mesh"===e?.type?{geometry:e.cloneShallow()}:{geometry:e}))}}function le(e,t){e.tools?.remove(t),t.destroyed||t.destroy()}function ce(e){return"requireError"in e&&"aborted"===e.requireError}},57897:function(e,t,n){function o(e,t){return"freehandPolygon"===t||"freehandPolyline"===t?"freehand":e??("rectangle"===t||"circle"===t?"hybrid":"click")}function i(e){switch(e){case"freehandPolygon":return"polygon";case"freehandPolyline":return"polyline";default:return e}}var r;n.d(t,{Sk:function(){return o},e2:function(){return i},g1:function(){return r}}),function(e){e[e.ForceCollapse=-1]="ForceCollapse",e[e.Low=0]="Low",e[e.Medium=10]="Medium",e[e.High=100]="High",e[e.Max=1e3]="Max"}(r||(r={}))},79691:function(e,t,n){n.d(t,{M:function(){return c},X:function(){return s}});var o=n(99574),i=n(46512),r=n(68808),a=n(23039);function s({level:e,class:t,...n},o){const s=l(e);return(0,a.u)(`h${s}`,{...n,"aria-level":String(s),class:(0,r.Sh)(i.z.heading,t),role:"heading"},o)}function l(e){return(0,o.uZ)(Math.ceil(e),1,6)}function c(e,t=1){return l(e+t)}},29629:function(e,t,n){function o(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const n=t._delegatedEventNames,o=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);n.push(...o)}}n.d(t,{s:function(){return o}})},8403:function(e,t,n){n.d(t,{m:function(){return s}});var o=n(20803),i=n(46789),r=n(47650),a=n(90403);const s=(e,t)=>t=>c(t,e);class l extends i.lZ{#e=new Map;#t;#n;constructor(e,t){super(e,t),new r.V(e);const n=this,a=n.instance;let s=a.viewModel,l=a.visibleElements;const c=new Proxy(this.exports,{get(e,t,n){return"viewModel"===t?s:"visibleElements"===t?l:Reflect.get(e,t,n)}});if(n.#n=a,n.instance=c,n.exports=c,s){const t={component:e,get exports(){return n.instance.viewModel}};(0,i.ZJ)(n).set("viewModel","viewModel"),e.addController(t),s=(0,i.we)(e,new WeakRef(t),(0,o.Rh)(e)-1,s,n.#e)}n.instance.visibleElements&&(l=n.#o(a))}hostConnected(){this.instance=this.#n,super.hostConnected()}hostLoad(){this.#t=(0,a.YP)((()=>this.component.el.view),(e=>{const t=this.instance;"view"in t||"object"!=typeof t.viewModel?t.view=e:t.viewModel.view=e,"map"in t||"object"!=typeof t.viewModel?t.map=e?.map:t.viewModel.map=e?.map}),{sync:!0,initial:!0})}hostUpdate(e){e.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:e}=this.component;e.childElem??=document.createElement("div"),this.instance.container=e.childElem,void 0!==this.component.closed&&this.onLifecycle((()=>(0,a.YP)((()=>this.instance.visible),(e=>this.component.closed=!e),{initial:!0})))}#o(e){return new Proxy(e.visibleElements,{get:(t,n)=>{if("symbol"==typeof n||n in Promise.prototype)return t[n];const i=[n],r=this.#i(i);return(0,o.iD)(this.component,(t=>{const n=t;this.component[n]=!1;let o,r=e.visibleElements??{};for(const e of i.slice(0,-1)){if("object"!=typeof r[e]||null===r[e]){o=!!r[e];break}r=r[e]}void 0===o&&(o=!!(r[i.slice(-1)[0]]??1));const a=n.startsWith("hide")||n.startsWith("show")?n.startsWith("hide"):o;this.onUpdate((e=>{if(e.has(n)){const e=this.component[n];this.#r(i,e,a)}}))}),r)}})}#i(e){const t=new Proxy({},{get:(n,o)=>{const i=Reflect.get(n,o);return"symbol"==typeof o||o in Promise.prototype?i:(e.push(o),t)}});return t}#r(e,t,n){let o=this.instance.visibleElements??{};for(const t of e.slice(0,-1))("object"!=typeof o[t]||null===o[t])&&(o[t]={}),o=o[t];const i=!!(n?!t:t);o[e.at(-1)]=i}hostDestroy(){this.#t?.remove(),super.hostDestroy()}}const c=(0,o.j8)(l)}}]);