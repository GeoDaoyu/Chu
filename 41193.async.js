"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[41193],{615:function(e,t,n){n.d(t,{cW:function(){return a},ij:function(){return i},rM:function(){return c}});var r=n(88194),s=n(60123),u=n(13928),o=n(8971);function i(e,t,n){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:c(n.value)});return t}return c(e)}(e)}catch(e){n?.messages?.push(e)}return null}function a(e,t,n,r){try{const r=function(e){const t=(0,u.Q)(e);return t?(0,o.Cb)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);(0,s.RB)(n,r,t)}catch(e){r.messages&&r.messages.push(e)}}function c(e){if(!e?.length)return"";const t=[];for(const n of e){let e=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[l(n,"amount")];break;case"blur":e=[l(n,"radius","pt")];break;case"hue-rotate":e=[l(n,"angle","deg")];break;case"drop-shadow":e=[l(n,"xoffset","pt"),l(n,"yoffset","pt"),l(n,"blurRadius","pt"),f(n,"color")];break;case"bloom":e=[l(n,"strength"),l(n,"radius","pt"),l(n,"threshold")]}const r=`${n.type}(${e.filter(Boolean).join(" ")})`;(0,u.Q)(r),t.push(r)}return t.join(" ")}function l(e,t,n){if(null==e[t])throw new r.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function f(e,t){if(null==e[t])throw new r.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},13928:function(e,t,n){n.d(t,{Q:function(){return c}});var r=n(38461),s=n(88194),u=n(71480),o=n(8971);class i extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let n=null;const r=e.find((e=>e.source===this.location.source));r&&(n=r.text.split(/\r\n|\n|\r/g));const s=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,o=this.location.source+":"+u.line+":"+u.column;if(n){const e=this.location.end,r="".padEnd(u.line.toString().length," "),i=n[s.line-1],a=(s.line===e.line?e.column:i.length+1)-s.column||1;t+="\n --\x3e "+o+"\n"+r+" |\n"+u.line+" | "+i+"\n"+r+" | "+"".padEnd(s.column-1," ")+"".padEnd(a,"^")}else t+="\n at "+o}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(e){return r?e.replace(r,(e=>"\\u{"+n(e)+"}")):e}function u(e){return s(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}function o(e){return s(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}const i={literal:e=>'"'+u(e.text)+'"',class(e){const t=e.parts.map((e=>Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function a(e){return i[e.type](e)}return"Expected "+function(e){const t=e.map(a);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+u(e)+'"':"end of input"}(t)+" found."}}function a(e,t){const n={},r=(t=void 0!==t?t:{}).grammarSource,s={start:ae};let u=ae;const o="none",a=",",c="grad",l="turn",f=/^[ \t\n\r]/,h=/^[a-z\-]/,d=/^[0-9a-fA-F]/,p=/^[+\-]/,m=/^[0-9]/,g=se("none"),y=ne("none",!1),_=ne(")",!1),x=ne(",",!1),I=re([" ","\t","\n","\r"],!1,!1,!1),v=se("function"),b=ne("(",!1),w=se("identifier"),B=re([["a","z"],"-"],!1,!1,!1),A=se("percentage"),S=ne("%",!1),M=se("length"),E=ne("px",!1),F=ne("cm",!1),$=ne("mm",!1),C=ne("in",!1),Z=ne("pt",!1),T=ne("pc",!1),R=se("angle"),j=ne("deg",!1),L=ne("rad",!1),N=ne("grad",!1),k=ne("turn",!1),P=se("number"),Y=se("color"),O=ne("#",!1),U=re([["0","9"],["a","f"],["A","F"]],!1,!1,!1),z=re(["+","-"],!1,!1,!1),D=re([["0","9"]],!1,!1,!1),q=ne(".",!1),X=ne("e",!1);function G(e,t){return t.length>0?function(e,t,n){return[e].concat(function(e,t){return e.map((function(e){return e[t]}))}(t,n))}(e,t,3):[e]}let Q=0|t.peg$currPos,V=Q;const J=[{line:1,column:1}];let W,H=Q,K=t.peg$maxFailExpected||[],ee=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');u=s[t.startRule]}function te(){return e.substring(V,Q)}function ne(e,t){return{type:"literal",text:e,ignoreCase:t}}function re(e,t,n,r){return{type:"class",parts:e,inverted:t,ignoreCase:n,unicode:r}}function se(e){return{type:"other",description:e}}function ue(t){let n,r=J[t];if(r)return r;if(t>=J.length)n=J.length-1;else for(n=t;!J[--n];);for(r=J[n],r={line:r.line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return J[t]=r,r}function oe(e,t,n){const s=ue(e),u=ue(t);return{source:r,start:{offset:e,line:s.line,column:s.column},end:{offset:t,line:u.line,column:u.column}}}function ie(e){Q<H||(Q>H&&(H=Q,K=[]),K.push(e))}function ae(){let e;return e=ce(),e===n&&(e=function(){let e,t;if(e=[],t=le(),t!==n)for(;t!==n;)e.push(t),t=le();else e=n;return e}()),e}function ce(){let t,r;return ee++,t=Q,he(),e.substr(Q,4)===o?(r=o,Q+=4):(r=n,0===ee&&ie(y)),r!==n?(he(),V=t,t=[]):(Q=t,t=n),ee--,t===n&&0===ee&&ie(g),t}function le(){let t,r,s,u;return t=Q,he(),r=function(){let t,r,s;return ee++,t=Q,r=de(),r!==n?(40===e.charCodeAt(Q)?(s="(",Q++):(s=n,0===ee&&ie(b)),s!==n?(V=t,t=r):(Q=t,t=n)):(Q=t,t=n),ee--,t===n&&(r=n,0===ee&&ie(v)),t}(),r!==n?(he(),s=function(){let t,r,s,u,o,i,c,l;if(t=Q,r=fe(),r!==n){for(s=[],u=Q,o=he(),44===e.charCodeAt(Q)?(i=a,Q++):(i=n,0===ee&&ie(x)),i===n&&(i=null),c=he(),l=fe(),l!==n?(o=[o,i,c,l],u=o):(Q=u,u=n);u!==n;)s.push(u),u=Q,o=he(),44===e.charCodeAt(Q)?(i=a,Q++):(i=n,0===ee&&ie(x)),i===n&&(i=null),c=he(),l=fe(),l!==n?(o=[o,i,c,l],u=o):(Q=u,u=n);V=t,t=G(r,s)}else Q=t,t=n;return t}(),s===n&&(s=null),he(),41===e.charCodeAt(Q)?(u=")",Q++):(u=n,0===ee&&ie(_)),u!==n?(he(),V=t,t=function(e,t){return{type:"function",name:e,parameters:t||[]}}(r,s)):(Q=t,t=n)):(Q=t,t=n),t}function fe(){let e,t;return e=Q,t=pe(),t===n&&(t=me(),t===n&&(t=ge(),t===n&&(t=function(){let e,t;return ee++,e=Q,he(),t=_e(),t!==n?(V=e,e=function(e){return{value:e,unit:null}}(t)):(Q=e,e=n),ee--,e===n&&0===ee&&ie(P),e}()))),t!==n&&(V=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),e=t,e===n&&(e=Q,t=ye(),t!==n&&(V=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function he(){let t,r;for(ee++,t=[],r=e.charAt(Q),f.test(r)?Q++:(r=n,0===ee&&ie(I));r!==n;)t.push(r),r=e.charAt(Q),f.test(r)?Q++:(r=n,0===ee&&ie(I));return ee--,t}function de(){let t,r,s;if(ee++,t=Q,r=[],s=e.charAt(Q),h.test(s)?Q++:(s=n,0===ee&&ie(B)),s!==n)for(;s!==n;)r.push(s),s=e.charAt(Q),h.test(s)?Q++:(s=n,0===ee&&ie(B));else r=n;return r!==n&&(V=t,r=te()),t=r,ee--,t===n&&(r=n,0===ee&&ie(w)),t}function pe(){let t,r,s;return ee++,t=Q,he(),r=_e(),r!==n?(37===e.charCodeAt(Q)?(s="%",Q++):(s=n,0===ee&&ie(S)),s!==n?(V=t,t=function(e){return{value:e,unit:"%"}}(r)):(Q=t,t=n)):(Q=t,t=n),ee--,t===n&&0===ee&&ie(A),t}function me(){let t,r,s;return ee++,t=Q,he(),r=_e(),r!==n?("px"===e.substr(Q,2)?(s="px",Q+=2):(s=n,0===ee&&ie(E)),s!==n?(V=t,t=function(e){return{value:e,unit:"px"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,he(),r=_e(),r!==n?("cm"===e.substr(Q,2)?(s="cm",Q+=2):(s=n,0===ee&&ie(F)),s!==n?(V=t,t=function(e){return{value:e,unit:"cm"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,he(),r=_e(),r!==n?("mm"===e.substr(Q,2)?(s="mm",Q+=2):(s=n,0===ee&&ie($)),s!==n?(V=t,t=function(e){return{value:e,unit:"mm"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,he(),r=_e(),r!==n?("in"===e.substr(Q,2)?(s="in",Q+=2):(s=n,0===ee&&ie(C)),s!==n?(V=t,t=function(e){return{value:e,unit:"in"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,he(),r=_e(),r!==n?("pt"===e.substr(Q,2)?(s="pt",Q+=2):(s=n,0===ee&&ie(Z)),s!==n?(V=t,t=function(e){return{value:e,unit:"pt"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,he(),r=_e(),r!==n?("pc"===e.substr(Q,2)?(s="pc",Q+=2):(s=n,0===ee&&ie(T)),s!==n?(V=t,t=function(e){return{value:e,unit:"pc"}}(r)):(Q=t,t=n)):(Q=t,t=n)))))),ee--,t===n&&0===ee&&ie(M),t}function ge(){let t,r,s;return ee++,t=Q,r=_e(),r!==n?("deg"===e.substr(Q,3)?(s="deg",Q+=3):(s=n,0===ee&&ie(j)),s!==n?(V=t,t=function(e){return{value:e,unit:"deg"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,r=_e(),r!==n?("rad"===e.substr(Q,3)?(s="rad",Q+=3):(s=n,0===ee&&ie(L)),s!==n?(V=t,t=function(e){return{value:e,unit:"rad"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,r=_e(),r!==n?(e.substr(Q,4)===c?(s=c,Q+=4):(s=n,0===ee&&ie(N)),s!==n?(V=t,t=function(e){return{value:e,unit:"grad"}}(r)):(Q=t,t=n)):(Q=t,t=n),t===n&&(t=Q,r=_e(),r!==n?(e.substr(Q,4)===l?(s=l,Q+=4):(s=n,0===ee&&ie(k)),s!==n?(V=t,t=function(e){return{value:e,unit:"turn"}}(r)):(Q=t,t=n)):(Q=t,t=n)))),ee--,t===n&&(r=n,0===ee&&ie(R)),t}function ye(){let t,r,s,u;if(ee++,t=Q,35===e.charCodeAt(Q)?(r="#",Q++):(r=n,0===ee&&ie(O)),r!==n){if(s=[],u=e.charAt(Q),d.test(u)?Q++:(u=n,0===ee&&ie(U)),u!==n)for(;u!==n;)s.push(u),u=e.charAt(Q),d.test(u)?Q++:(u=n,0===ee&&ie(U));else s=n;s!==n?(V=t,t={type:"hex",value:te()}):(Q=t,t=n)}else Q=t,t=n;return t===n&&(t=Q,r=le(),r!==n&&(V=t,r=function(e){return{type:"function",value:e}}(r)),t=r,t===n&&(t=Q,r=de(),r!==n&&(V=t,r={type:"named",value:te()}),t=r)),ee--,t===n&&(r=n,0===ee&&ie(Y)),t}function _e(){let t,r,s,u,o,i,a,c;for(t=Q,r=e.charAt(Q),p.test(r)?Q++:(r=n,0===ee&&ie(z)),r===n&&(r=null),s=Q,u=[],o=e.charAt(Q),m.test(o)?Q++:(o=n,0===ee&&ie(D));o!==n;)u.push(o),o=e.charAt(Q),m.test(o)?Q++:(o=n,0===ee&&ie(D));if(46===e.charCodeAt(Q)?(o=".",Q++):(o=n,0===ee&&ie(q)),o!==n){if(i=[],a=e.charAt(Q),m.test(a)?Q++:(a=n,0===ee&&ie(D)),a!==n)for(;a!==n;)i.push(a),a=e.charAt(Q),m.test(a)?Q++:(a=n,0===ee&&ie(D));else i=n;i!==n?(u=[u,o,i],s=u):(Q=s,s=n)}else Q=s,s=n;if(s===n)if(s=[],u=e.charAt(Q),m.test(u)?Q++:(u=n,0===ee&&ie(D)),u!==n)for(;u!==n;)s.push(u),u=e.charAt(Q),m.test(u)?Q++:(u=n,0===ee&&ie(D));else s=n;if(s!==n){if(u=Q,101===e.charCodeAt(Q)?(o="e",Q++):(o=n,0===ee&&ie(X)),o!==n){if(i=e.charAt(Q),p.test(i)?Q++:(i=n,0===ee&&ie(z)),i===n&&(i=null),a=[],c=e.charAt(Q),m.test(c)?Q++:(c=n,0===ee&&ie(D)),c!==n)for(;c!==n;)a.push(c),c=e.charAt(Q),m.test(c)?Q++:(c=n,0===ee&&ie(D));else a=n;a!==n?(o=[o,i,a],u=o):(Q=u,u=n)}else Q=u,u=n;u===n&&(u=null),V=t,t=parseFloat(te())}else Q=t,t=n;return t}W=u();const xe=W!==n&&Q===e.length;function Ie(){throw W!==n&&Q<e.length&&ie({type:"end"}),function(e,t,n){return new i(i.buildMessage(e,t),e,t,n)}(K,H<e.length?function(t=Q){const n=e.codePointAt(t);return void 0===n?"":String.fromCodePoint(n)}(H):null,H<e.length?oe(H,H+1):oe(H,H))}return t.peg$library?{peg$result:W,peg$currPos:Q,peg$FAILED:n,peg$maxFailExpected:K,peg$maxFailPos:H,peg$success:xe,peg$throw:xe?void 0:Ie}:xe?W:void Ie()}function c(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=l(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new s.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:l(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!(0,o.AS)(t[e].effects,t[e+1].effects))throw new s.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,o.uF)(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function l(e){let t;if(!e)return[];try{t=a(e)}catch(t){throw new s.Z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=g(e.parameters[0])),new u.GI(e.name,t)}(e);case"opacity":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=g(e.parameters[0])),new u.Zx(t)}(e);case"hue-rotate":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=p[e.unit]))throw new s.Z("effect:type-error",`Expected <angle>, Actual: ${h(e)}`,{term:e})}(e),e.value*p[e.unit]||0}(e.parameters[0])),new u.Tq(t)}(e);case"blur":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=_(e.parameters[0]),d(t,e.parameters[0])),new u.Tj(t)}(e);case"drop-shadow":return function(e){const t=[];let n=null;for(const r of e.parameters)if("color"===r.type){if(t.length&&Object.freeze(t),n)throw new s.Z("effect:type-error","Accepts only one color",{});n=x(r)}else{const e=_(r);if(Object.isFrozen(t))throw new s.Z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&d(e,r)}if(t.length<2||t.length>3)throw new s.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new u.CE(t[0],t[1],t[2]||0,n||I("black"))}(e);case"bloom":return function(e){let t=1,n=0,r=0;return f(e.parameters,3),e.parameters[0]&&(t=g(e.parameters[0])),e.parameters[1]&&(n=_(e.parameters[1]),d(n,e.parameters[1])),e.parameters[2]&&(r=g(e.parameters[2])),new u.rk(t,n,r)}(e)}}catch(t){throw t.details.filter=e,t}throw new s.Z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function f(e,t){if(e.length>t)throw new s.Z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function h(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in m)return"<length>";if(e.unit in p)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function d(e,t){if(e<0)throw new s.Z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const p={deg:1,grad:.9,rad:180/Math.PI,turn:360};const m={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function g(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new s.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${h(e)}`,{term:e})}(e);const t=e.value;return d(t,e),"%"===e.unit?.01*t:t}function y(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new s.Z("effect:type-error",`Expected <double>, Actual: ${h(e)}`,{term:e})}(e),d(e.value,e),e.value}function _(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=m[e.unit]))throw new s.Z("effect:type-error",`Expected <length>, Actual: ${h(e)}`,{term:e})}(e),e.value*m[e.unit]||0}function x(e){switch(e.colorType){case"hex":return(0,r.a7)(e.value);case"named":return I(e.value);case"function":return function(e){if(f(e.parameters,4),v.test(e.name))return[g(e.parameters[0]),g(e.parameters[1]),g(e.parameters[2]),e.parameters[3]?g(e.parameters[3]):1];if(b.test(e.name))return(0,r.Y6)(y(e.parameters[0]),g(e.parameters[1]),g(e.parameters[2]),e.parameters[3]?g(e.parameters[3]):1);throw new s.Z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function I(e){if(!(0,r.St)(e))throw new s.Z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,r.VL)(e)}const v=/^rgba?/i,b=/^hsla?/i},70677:function(e,t,n){n.d(t,{H:function(){return a}});var r=n(61432),s=n(96946),u=n(47566);const o={minX:0,minY:0,maxX:0,maxY:0};function i(e,t,n){(function(e){o.minX=e[0],o.minY=e[1],o.maxX=e[2],o.maxY=e[3]})(t),e.search(o,n)}class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s.Q(9,(0,r.Z)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,r)=>{e[t++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,u.cS)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),i(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},95014:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(3480),s=n(88194),u=n(87833),o=n(96711),i=n(16447),a=n(47566),c=n(64246),l=n(70677),f=n(14588),h=n(80613);const d=(0,i.Ue)();class p{constructor(e){this.geometryInfo=e,this._boundsStore=new l.H,this._featuresById=new Map,this._usedMemory=0,this.events=new u.Z,this.featureAdapter=h.n}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,r,s]=this.fullBounds;return{xmin:t,ymin:n,xmax:r,ymax:s,spatialReference:(0,f.S2)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(r.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,i.JR)(d,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void o.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.Z("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let r;if(n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=(0,c.$)(null!=r?r:(0,a.Ue)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=r&&this._boundsStore.set(t,r),this._featuresById.set(t,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){const t=e?.objectId;if(null==t)return o.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.Z("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const n=this._featuresById.get(t);if(!n)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0;const{geometry:r,attributes:u}=e;for(const e in u)n.attributes[e]=u[e];return r&&(n.geometry=r,this._boundsStore.set(t,(0,c.$)((0,a.Ue)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(n)??0,n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},3849:function(e,t,n){n.d(t,{TY:function(){return s},_P:function(){return i},_k:function(){return a},l6:function(){return u},mR:function(){return r},xD:function(){return o}});const r="ESRI__ID",s="ESRI__OriginID",u="ESRI__DestID",o="ESRI__LayoutGeometry",i="ESRI__AggregationCount",a="LC.ESRI__IsSpatial"},78279:function(e,t,n){n.d(t,{Ee:function(){return u},Gr:function(){return i},UO:function(){return o}});var r=n(99574),s=n(48797);function u(e,t){return{...t,filterMode:e.mode}}function o(e,t){return a(e,t).next().value??null}function i(e,t,n){const u=function(e){if("manual"===l(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:n,maxScale:r}of e.filters)t[0]=Math.max(t[0],f(n)),t[1]=Math.min(t[1],h(r));return t}(e);if(u&&((0,r.nB)(t,u[0])||(0,r.pt)(n,u[1])))return"";const o=Array.from(a(e,t,n)),i=function(e,t,n){if(0===e.length)return!0;const s=f(e.at(0)?.minScale),u=h(e.at(-1)?.maxScale);if((0,r.pt)(s,t)||(0,r.nB)(u,n))return!0;for(let t=0;t<e.length-1;t++){const n=e[t],s=e[t+1];if((0,r.pt)(f(s.minScale),h(n.maxScale)))return!0}return!1}(o,t,n)?"1=1":o.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,s.D3)(e,t)),"");return i&&"1=1"!==i?i:""}function*a(e,t,n){if("manual"===l(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)c(r.minScale,r.maxScale,t,n)&&(yield r)}}function c(e,t,n,s){return e=f(e),n=f(n),t=h(t),!(!(0,r.W8)(n,e)&&(s??n)>e||(0,r.aR)(t,n)||void 0!==s&&(0,r.W8)(s,e))}function l(e){return"mode"in e?e.mode:e.filterMode}function f(e){return e||Number.POSITIVE_INFINITY}function h(e){return e||0}}}]);