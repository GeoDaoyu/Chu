"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[28794],{9283:function(e,n,t){t.d(n,{$A:function(){return F},Bj:function(){return r},FJ:function(){return x},JW:function(){return f},J_:function(){return y},NP:function(){return m},Qk:function(){return v},Sh:function(){return p},T4:function(){return d},US:function(){return b},_U:function(){return g},dj:function(){return i},hd:function(){return G},q2:function(){return h},tI:function(){return T},yE:function(){return S},yJ:function(){return I}});var r,i,o,l=t(11347),u=t(21201),s=t(88633),a=t(49651),c=t(87599);function f(e){return a.Z.fromJSON(e.toJSON())}function p(e){return e.toJSON?e.toJSON():e}function y(e){return e instanceof Date}function d(e){return e instanceof c.ou}function m(e){return e instanceof l.iG}function F(e){return e instanceof u.u}function g(e){return e instanceof s.n}(o=r||(r={}))[o.Standardised=0]="Standardised",o[o.StandardisedNoInterval=1]="StandardisedNoInterval",o[o.SqlServer=2]="SqlServer",o[o.Oracle=3]="Oracle",o[o.Postgres=4]="Postgres",o[o.PGDB=5]="PGDB",o[o.FILEGDB=6]="FILEGDB",o[o.NotEvaluated=7]="NotEvaluated",function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(i||(i={}));const T=1e3;const v={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},h={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},S={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function b(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function G(e,n){n||(n={}),"function"==typeof n&&(n={cmp:n});const t="boolean"==typeof n.cycles&&n.cycles,r=n.cmp&&(i=n.cmp,function(e){return function(n,t){const r={key:n,value:e[n]},o={key:t,value:e[t]};return i(r,o)}});var i;const o=[];return function e(n){if(n?.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===n)return;if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!=typeof n)return JSON.stringify(n);let i,l;if(Array.isArray(n)){for(l="[",i=0;i<n.length;i++)i&&(l+=","),l+=e(n[i])||"null";return l+"]"}if(null===n)return"null";if(o.includes(n)){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const u=o.push(n)-1,s=Object.keys(n).sort(r?.(n));for(l="",i=0;i<s.length;i++){const t=s[i],r=e(n[t]);r&&(l&&(l+=","),l+=JSON.stringify(t)+":"+r)}return o.splice(u,1),"{"+l+"}"}(e)}function x(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function I(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return x(e)}}},26593:function(e,n,t){t.r(n),t.d(n,{Dictionary:function(){return l.Z},Voxel:function(){return d},arcade:function(){return r.h},arcadeFeature:function(){return u.Z},convertFeatureLayerToFeatureSet:function(){return V},convertJsonToArcade:function(){return j},convertMapToFeatureSetCollection:function(){return $},convertServiceUrlToWorkspace:function(){return M},createExecContext:function(){return O},createFeature:function(){return _},createFunction:function(){return D},createSyntaxTree:function(){return w},dependsOnView:function(){return k},enableFeatureSetOperations:function(){return U},enableGeometryOperations:function(){return R},evalSyntaxTree:function(){return J},executeAsyncFunction:function(){return N},executeFunction:function(){return E},extractFieldNames:function(){return A},getArcadeType:function(){return I},getViewInfo:function(){return C},hasGeometryFunctions:function(){return q},hasGeometryOperations:function(){return W},hasVariable:function(){return L},loadScriptDependencies:function(){return B},updateExecContext:function(){return P}});var r=t(85954),i=t(11347),o=t(79793),l=t(92530),u=t(25112),s=t(67161),a=t(12122),c=t(92052),f=t(43462);const p="Voxel.Position",y="Voxel.LocalTime";class d{constructor(e,n){this._graphic=e,this._timeZone=n,this.arcadeDeclaredClass="esri.arcade.Voxel",this._layer=e.sourceLayer}getPosition(){return void 0!==this._position?this._position:this._position=function(e){const n=e.getAttribute(p);if("string"!=typeof n)throw new a.aV(null,a.rH.InvalidParameter,null);const t=JSON.parse(n);if(!Array.isArray(t)||"number"!=typeof t[0]||"number"!=typeof t[1]||"number"!=typeof t[2])throw new a.aV(null,a.rH.InvalidParameter,null);return new c.Z(t)}(this._graphic)}getLocalTime(){return void 0!==this._localTime?this._localTime:this._localTime=function(e,n){const t=e.getAttribute(y);if(null==t)return null;if(!(0,f.J_)(t))throw new a.aV(null,a.rH.InvalidParameter,null);return i.iG.dateJSAndZoneToArcadeDate(t,n)}(this._graphic,this._timeZone??"system")}keys(){return this._layer.fields.map((e=>e.name)).sort()}hasField(e){return this._layer.fieldsIndex.has(e)}field(e){const n=this._layer.fieldsIndex?.get(e)?.name;if(null==n)throw new a.aV(null,a.rH.FieldNotFound,null,{key:e});switch(n){case p:return this.getPosition();case y:return this.getLocalTime()}return this._graphic.attributes[n]??null}castToText(e=!1){const n={...this._graphic.attributes};n[p]=this.getPosition(),y in n&&(n[y]=this.getLocalTime());for(const e of Object.keys(n))this._layer.fieldsIndex?.has(e)||delete n[e];return(0,s.c)(n,{useNumbersForDates:e})}}var m=t(28947),F=t(21201),g=t(88633),T=t(71354),v=t(82868),h=t(60508),S=t(67764),b=t(62197);const G={vars:{$feature:"any",$view:"any"}};function x(e){return e.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function I(e){return null==e?null:(0,f.kJ)(e)||(0,s.j)(e)?"array":(0,s.e)(e)?"date":(0,f.HD)(e)?"text":(0,f.jn)(e)?"boolean":(0,f.hj)(e)?"number":e instanceof l.Z?"dictionary":(0,s.k)(e)?"feature":e instanceof h.Z?"point":e instanceof S.Z?"polygon":e instanceof b.Z?"polyline":e instanceof v.Z?"multipoint":e instanceof T.Z?"extent":e instanceof F.u?"dateOnly":e instanceof g.n?"time":(0,s.m)(e)?"featureSet":(0,s.l)(e)?"featureSetCollection":null}function w(e){if(!e)return null;try{return(0,r.p)(e)}catch(e){}return null}function D(e,n){const t="string"==typeof e?w(e):e;if(!t)return null;try{return n=n||(0,m.d9)(G),(0,r.c)(t,n)}catch(e){}return null}function O(e,n,t){return{vars:{$feature:null==e?new u.Z:u.Z.createFromGraphic(e,t),$view:n?.view},spatialReference:n?.sr,timeZone:t??null}}function _(e,n,t){return u.Z.createFromGraphicLikeObject(n,e,t,null)}function P(e,n){null!=e.vars&&(e.vars.$feature=n)}function J(e,n){let t;try{t=(0,r.e)(e,n)}catch(e){t=null}return t}function E(e,n){let t;try{t=e?e(n):null}catch(e){t=null}return t}function N(e,n){try{return e?e(n):Promise.resolve(null)}catch(e){return Promise.resolve(null)}}const Z=new Set(["$feature","$aggregatedFeatures","$voxel"].map((e=>(0,o.D)(e))));function A(e,n){if(!e)return[];const t="string"==typeof e?w(e):e;if(!t)return[];const i=(0,r.a)(t).filter((({varId:e})=>Z.has(e))).map((({memberNamePattern:e})=>e)).flatMap((e=>{if(e.includes("*")){if(null==n)return[];const t=new RegExp(`^${e.split(/\*+/).map(x).join(".*")}$`,"i");return n.filter((e=>t.test(e)))}return e.toLowerCase()}));return[...new Set(i.sort())]}function k(e){return(0,r.r)(e,"$view")}function L(e,n){return!!e&&(0,r.r)(e,n)}function C(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;let n,t;const{timeProperties:r,timeZone:o}=e;if(null!=r){const{currentStart:e,currentEnd:l}=r;null!=o?(n=null!=e?i.iG.dateJSAndZoneToArcadeDate(e,o):null,t=null!=l?i.iG.dateJSAndZoneToArcadeDate(l,o):null):(n=null!=e?i.iG.dateJSToArcadeDate(e):null,t=null!=l?i.iG.dateJSToArcadeDate(l):null)}return{view:e.viewingMode&&null!=e.scale?new l.Z({__proto__:null,viewingMode:e.viewingMode,scale:e.scale,timeProperties:null!=n||null!=t?new l.Z({__proto__:null,currentStart:n,currentEnd:t,startIncluded:!0,endIncluded:!0}):null}):null,sr:e.spatialReference}}function M({url:e,spatialReference:n,lrucache:t,interceptor:i}){const o=(0,r.f)();return o?o.createFeatureSetCollectionFromService(e,n,t,i):null}function V({layer:e,spatialReference:n,outFields:t,returnGeometry:i,lrucache:o,interceptor:l}){if(null===e)return null;const u=(0,r.f)();return u?u.constructFeatureSet(e,n,t,i??!0,o,l):null}function $(e){if(null===e?.map)return null;const n=(0,r.f)();return n?n.createFeatureSetCollectionFromMap(e.map,e.spatialReference,e.lrucache,e.interceptor):null}function j(e,n){return l.Z.convertJsonToArcade(e,n)}function B(e,n,t=[]){return(0,r.l)(e,n,t)}function R(){return(0,r.b)()}function U(){return(0,r.d)()}function z(e,n){if(!e)return!1;if("string"==typeof e)return n(e);const t=e;if(function(e){return"type"in e&&("class-breaks"===e.type||"dictionary"===e.type||"dot-density"===e.type||"pie-chart"===e.type||"simple"===e.type||"unique-value"===e.type)}(t)){if("dot-density"===t.type){const e=t.attributes?.some((e=>n(e.valueExpression)));if(e)return e}const e=t.visualVariables,r=!!e&&e.some((e=>{let t=n(e.valueExpression);return"size"===e.type&&(Q(e.minSize)&&(t=t||n(e.minSize.valueExpression)),Q(e.maxSize)&&(t=t||n(e.maxSize.valueExpression))),t}));return!(!("valueExpression"in t)||!n(t.valueExpression))||r}if(function(e){return"esri.layers.support.LabelClass"===e.declaredClass}(t)){const e=t.labelExpressionInfo?.expression;return!(!e||!n(e))||!1}return!!function(e){return"esri.PopupTemplate"===e.declaredClass}(t)&&(!!t.expressionInfos&&t.expressionInfos.some((e=>n(e.expression)))||Array.isArray(t.content)&&t.content.some((e=>"expression"===e.type&&n(e.expressionInfo?.expression))))}function H(e){const n=w(e);return!!n&&(0,r.s)(n)}function q(e){return z(e,H)}function X(e){const n=w(e);return!!n&&(0,r.g)(n)}function W(e){return z(e,X)}function Q(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}}}]);