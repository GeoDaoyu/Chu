"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[73371],{26550:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(48316),i=t(45323),c=t(19960),o=t(88801),u=t(52859),a=t(5393),s=Number.isInteger||function(e){return e<<0===e},l=t(55753);var f=(0,a.Z)((function(e,n){var t,r,i;if(null!=n)return s(e)?(r=n,i=(t=e)<0?r.length+t:t,(0,l.Z)(r)?r.charAt(i):r[i]):n[e]})),d=t(50223),v=(0,u.Z)((function(e,n,t){return(0,d.Z)(e,f(n,t))})),h=t(73193),m=t.n(h),p=t(8588),x=t(51341),y=t(4925),j="text___jM9ex",g=t(47635),Z=t(44194),k="geojson",w={title:"Earthquake Info",content:"Magnitude {mag} {type} hit {place} on {time}",fieldInfos:[{fieldName:"time",format:{dateFormat:"short-date-short-time"}}]},I={type:"simple",field:"mag",symbol:{type:"simple-marker",color:"orange",outline:{color:"white"}},visualVariables:[{type:"size",field:"mag",stops:[{value:2.5,size:"4px"},{value:8,size:"40px"}]}]},b=t(31549),C=function(){var e,n=(e=(0,r.No)((function(e){return e.view})),{add:(0,Z.useCallback)((function(){var n=new g.default({id:k,url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",copyright:"USGS Earthquakes",popupTemplate:w,renderer:I,orderBy:{field:"mag"}});e.map.add(n)}),[e]),remove:(0,Z.useCallback)((function(){var n=e.map.findLayerById(k);e.map.remove(n)}),[e])}),t=n.add,i=n.remove;return(0,b.jsx)("div",{className:j,children:(0,b.jsxs)(x.Z,{children:[(0,b.jsx)(y.ZP,{onClick:t,children:"加载图层"}),(0,b.jsx)(y.ZP,{onClick:i,children:"卸载图层"})]})})},_={left:"left___o6JaL",right:"right___VjBAI"},S=function(){var e,n=(0,r.No)((function(e){return e.view})),t=(e={view:n},[{title:"面板一",component:void 0,position:"left"},{title:"面板二",component:(0,b.jsx)(p.Dt,m()({},e)),position:"left"},{title:"面板三",component:(0,b.jsx)(p.Kh,m()({},e)),position:"left"},{title:"面板四",component:(0,b.jsx)(p.vi,m()({},e)),position:"right"},{title:"面板五",component:(0,b.jsx)(C,m()({},e)),position:"right"}]),u=(0,o.Z)(v("left","position"))(t),a=(0,o.Z)(v("right","position"))(t);return(0,b.jsxs)("div",{className:_.container,children:[(0,b.jsx)("div",{className:_.left,children:(0,b.jsx)(c.Z,{gap:"large",vertical:!0,children:u.map((function(e){var n=e.title,t=e.component;return(0,b.jsx)(i.s_,{title:n,children:t},n)}))})}),(0,b.jsx)("div",{className:_.right,children:(0,b.jsx)(c.Z,{gap:"large",vertical:!0,children:a.map((function(e){var n=e.title,t=e.component;return(0,b.jsx)(i.s_,{title:n,children:t},n)}))})})]})}},48316:function(e,n,t){t.d(n,{bh:function(){return i},No:function(){return c},kZ:function(){return u}});var r=t(25480);const i=e=>({checkedKeys:[],setCheckedKeys:n=>e({checkedKeys:n})});(0,r.U)(i);var c=(0,r.U)((e=>({view:null,initialize:n=>e({view:n})}))),o=t(70728);var u=(e,n)=>(0,r.U)((0,o.Z)(...n)(e))},45323:function(e,n,t){t.d(n,{Gv:function(){return h},s_:function(){return x},o8:function(){return Z}});var r=t(45332),i=t.n(r),c=t(44194),o=t(24462),u=t(67984),a=t(4925),s=t(31549),l=function(e){var n=e.dataSource,t=e.goTo;return(0,s.jsx)(u.Z,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){var n=e.avatar,r=e.title,i=e.description,c=e.component;return(0,s.jsx)(u.Z.Item,{actions:[(0,s.jsx)(a.ZP,{type:"link",icon:(0,s.jsx)(o.Z,{}),iconPosition:"end",disabled:!c,onClick:function(){return t(c)},children:"立即使用"},"link")],children:(0,s.jsx)(u.Z.Item.Meta,{avatar:n,title:r,description:i})})}})},f=t(55447),d=function(e){var n=e.goBack,t=e.children;return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.ZP,{type:"link",icon:(0,s.jsx)(f.Z,{}),onClick:n,children:"返回"}),t]})},v="container___PuJI4",h=function(e){var n=e.dataSource,t=(0,c.useState)(),r=i()(t,2),o=r[0],u=r[1];return(0,s.jsx)("div",{className:v,children:o?(0,s.jsx)(d,{goBack:function(){return u(null)},children:o}):(0,s.jsx)(l,{dataSource:n,goTo:u})})},m=t(86415),p=t(51282),x=function(e){var n=e.title,t=void 0===n?"":n,r=e.children;return(0,s.jsx)(m.Z,{title:t,children:r||(0,s.jsx)(p.Z,{description:!1})})},y=t(73193),j=t.n(y),g=t(53698),Z=function(e){var n=e.dataSource,t=e.insetInlineEnd,r=void 0===t?20:t;return(0,s.jsx)(g.Z.Group,{shape:"square",style:{insetInlineEnd:r},children:n.map((function(e){return(0,s.jsx)(g.Z,j()({},e),e.name)}))})}},8588:function(e,n,t){t.d(n,{Kh:function(){return ye},hw:function(){return c},VO:function(){return o},PI:function(){return ee},De:function(){return ne},zI:function(){return re},AA:function(){return ue},vi:function(){return ae},yO:function(){return se},Dt:function(){return me},R$:function(){return Y},vm:function(){return k}});t(97017);var r=t(44194),i=t(31549),c=function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.lighting.clone();return function(){n.environment.lighting=e}}),[n]),(0,i.jsx)("arcgis-daylight",{"reference-element":"view"})},o=(t(2814),function(){return(0,i.jsx)("arcgis-layer-list",{"reference-element":"view"})}),u=t(76711),a=t.n(u),s=t(73193),l=t.n(s),f=t(84176),d=t.n(f),v=t(45332),h=t.n(v),m=t(88753),p=t(36066),x=t(73917),y=t(51341),j=["title","key","children"],g=p.Z.Search,Z=x.Z.Text,k=function(e){return function(n){var t=n.treeData,c=n.getLayerInfo,o=(0,r.useState)([]),u=h()(o,2),s=u[0],f=u[1],v=(0,r.useState)(""),p=h()(v,2),x=p[0],k=p[1],w=(0,r.useState)(!0),I=h()(w,2),b=I[0],C=I[1],_=(0,r.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.title,r=n.key,c=n.children,o=d()(n,j),u=t.indexOf(x),a=t.substring(0,u),s=t.slice(u+x.length),f=u>-1?(0,i.jsx)(y.Z,{children:(0,i.jsxs)("span",{children:[a,(0,i.jsx)(Z,{type:"danger",children:x}),s]})}):(0,i.jsx)(y.Z,{children:(0,i.jsx)("span",{children:t})});return c?l()(l()({},o),{},{title:f,key:r,children:e(c)}):l()(l()({},o),{},{title:f,key:r})}))}(t)}),[t,x]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(g,{placeholder:"请输入关键词搜索",onChange:function(e){var n=e.target.value,r=[];if((0,m.Z)(n))return f(r),k(n),void C(!0);t.forEach((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(t.title.includes(n)&&r.push(i),t.children&&t.children.forEach((function(n){return e(n,t.key)})))})),f(r),k(n),C(!0)}}),(0,i.jsx)(e,{treeData:_,getLayerInfo:c,onSelect:function(e,n){var t=n.node,r=s.includes(t.key)?s.filter((function(e){return e!==t.key})):[].concat(a()(s),[t.key]);f(r)},onExpand:function(e){f(e),C(!1)},expandedKeys:s,autoExpandParent:b})]})}},w=t(98330),I=t(32499),b=t(28833),C=t(39762),_=t(60711),S=t(88763),E=function(){var e=[{label:"收藏",icon:(0,i.jsx)(C.Z,{}),key:"favorite",onClick:function(){I.ZP.success("收藏成功")}},{label:"删除",icon:(0,i.jsx)(_.Z,{}),key:"delete",onClick:function(){I.ZP.success("删除")}}];return(0,i.jsx)(b.Z,{menu:{items:e},children:(0,i.jsx)(S.Z,{})})},P=t(38209),L=t(59876),N=t(47635),z=t(53447),K=t(27998),B=t(91829),D=t(43141),A=t(57040),M=t(59259),R=t(80379);const T=new Map([["feature",L.default],["geojson",N.default],["graphics",z.Z],["imagery",K.default],["imagery-tile",B.default],["integrated-mesh-3d-tiles",D.default],["map-image",A.default],["tile",M.default],["vector-tile",R.default]]);var q=({type:e,...n})=>new(T.get(e))(n),U=t(43909),G=t(90602),O=t(47307);var V=t(48316),F="container___Az_tF",J=["children","key"],Y=function(e){return function(n){var t=n.treeData,c=n.getLayerInfo,o=(0,V.No)((function(e){return e.view})),u=(0,r.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.children,r=n.key,c=d()(n,J),u=t&&t.length?null:(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(w.Z,{onClick:function(e){e.stopPropagation(),((e,n)=>{const t=e.map.findLayerById(n);t&&e.goTo(t.fullExtent)})(o,r)}}),(0,i.jsx)(E,{})]});return u?l()(l()({},c),{},{key:r,isLeaf:!0,icon:u}):l()(l()({},c),{},{key:r,isLeaf:!1,children:e(t)})}))}(t)}),[t,o]);return(0,i.jsx)("div",{className:F,children:(0,i.jsx)(e,{treeData:u,getLayerInfo:c,showIcon:!0,blockNode:!0})})}},$=t(52362);const{view:H}=V.No.getState();var Q=e=>n=>(t,r,i)=>n(((...n)=>{const[{checkedKeys:i}]=n;if(i){const{checkedKeys:n}=r(),t=(0,$.Z)(i,n),c=(0,$.Z)(n,i);t.forEach((n=>{if(!((e,n)=>!!e.map.findLayerById(n))(H,n)){const t=e(n);(async(e,n)=>{if(!n)return;const{key:t,url:r,type:i,...c}=n,o=(0,U.Z)([[(0,G.Z)("type"),()=>q({id:t,...n})],[(0,G.Z)("url"),()=>P.Z.fromArcGISServerUrl({url:r,properties:{id:t,...c}})],[O.Z,()=>new P.Z({id:t,...c})]])(n);e.map.add(o)})(H,t)}})),c.forEach((e=>((e,n)=>{const t=e.map.findLayerById(n);e.map.remove(t)})(H,e)))}t(...n)}),r,i),W=t(82534),X=["treeData","getLayerInfo"],ee=function(e){var n=e.treeData,t=e.getLayerInfo,c=d()(e,X),o=(0,r.useMemo)((function(){return(0,V.kZ)(V.bh,[Q(t)])}),[t])(),u=o.checkedKeys,a=o.setCheckedKeys;return(0,i.jsx)(W.Z,l()(l()({},c),{},{checkable:!0,onCheck:function(e){a(e)},checkedKeys:u,treeData:n}))},ne=(t(81714),function(){return(0,i.jsx)("arcgis-legend",{"reference-element":"view"})}),te=t(73577),re=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)();return(0,r.useEffect)((function(){return t.current&&(c.current=new te.Z({view:n,container:t.current})),function(){c.current&&c.current.destroy()}}),[n]),(0,i.jsx)("div",{ref:t})},ie=t(59958),ce=t(19960),oe=t(4925),ue=function(e){var n=e.view,t=e.mediaLayerConfig,c=(0,r.useRef)(null);(0,r.useEffect)((function(){return c.current=new ie.default(t),n.map.add(c.current),function(){n.map.remove(c.current)}}),[n,t]);return(0,i.jsxs)(ce.Z,{vertical:!0,gap:"middle",children:[(0,i.jsx)(oe.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!0},children:"显示视频"}),(0,i.jsx)(oe.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!1},children:"隐藏视频"})]})},ae=(t(53553),function(){return(0,i.jsx)("arcgis-sketch",{"reference-element":"view"})}),se=(t(47692),function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.weather.clone();return function(){n.environment.weather=e}}),[n]),(0,i.jsx)("arcgis-weather",{"reference-element":"view"})}),le=t(8444),fe=t(75259),de=t(90403),ve=t(93427),he=x.Z.Text,me=function(e){var n=e.view,t=n.zoom,c=(0,r.useState)(Math.round(t)),o=h()(c,2),u=o[0],a=o[1],s=(0,r.useRef)(new ve.Z({view:n}));return(0,r.useEffect)((function(){(0,de.YP)((function(){return n.zoom}),(function(e){a(Math.round(e))}))}),[n]),(0,i.jsxs)(ce.Z,{justify:"space-between",align:"center",children:[(0,i.jsxs)(he,{children:["层级:",u]}),(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(oe.ZP,{type:"primary",icon:(0,i.jsx)(le.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomIn()}}),(0,i.jsx)(oe.ZP,{type:"primary",icon:(0,i.jsx)(fe.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomOut()}})]})]})},pe=t(24858),xe=t(70765),ye=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)(),o=(0,xe.useAccess)();return(0,r.useEffect)((function(){return t.current&&(c.current=new pe.Z({view:n,container:t.current,visibleElements:{settingsButton:o.canSeeAdmin,captureButton:o.canSeeAdmin}})),function(){c.current&&c.current.destroy()}}),[n,o]),(0,i.jsx)("div",{ref:t})}}}]);