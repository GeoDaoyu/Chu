"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[73371],{26550:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var r=t(48316),i=t(45323),c=t(19960),o=t(88801),u=t(52859),a=t(5393),s=Number.isInteger||function(e){return e<<0===e},l=t(55753);var f=(0,a.Z)((function(e,n){var t,r,i;if(null!=n)return s(e)?(r=n,i=(t=e)<0?r.length+t:t,(0,l.Z)(r)?r.charAt(i):r[i]):n[e]})),d=t(50223),v=(0,u.Z)((function(e,n,t){return(0,d.Z)(e,f(n,t))})),h=t(73193),m=t.n(h),p=t(43214),x=t(51341),j=t(33273),y="text___jM9ex",g=t(47635),Z=t(44194),k="geojson",w={title:"Earthquake Info",content:"Magnitude {mag} {type} hit {place} on {time}",fieldInfos:[{fieldName:"time",format:{dateFormat:"short-date-short-time"}}]},b={type:"simple",field:"mag",symbol:{type:"simple-marker",color:"orange",outline:{color:"white"}},visualVariables:[{type:"size",field:"mag",stops:[{value:2.5,size:"4px"},{value:8,size:"40px"}]}]},I=t(31549),S=function(){var e,n=(e=(0,r.No)((function(e){return e.view})),{add:(0,Z.useCallback)((function(){var n=new g.default({id:k,url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",copyright:"USGS Earthquakes",popupTemplate:w,renderer:b,orderBy:{field:"mag"}});e.map.add(n)}),[e]),remove:(0,Z.useCallback)((function(){var n=e.map.findLayerById(k);e.map.remove(n)}),[e])}),t=n.add,i=n.remove;return(0,I.jsx)("div",{className:y,children:(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(j.ZP,{onClick:t,children:"加载图层"}),(0,I.jsx)(j.ZP,{onClick:i,children:"卸载图层"})]})})},C={left:"left___o6JaL",right:"right___VjBAI"},E=function(){var e,n=(0,r.No)((function(e){return e.view})),t=(e={view:n},[{title:"面板一",component:void 0,position:"left"},{title:"面板二",component:(0,I.jsx)(p.Dt,m()({},e)),position:"left"},{title:"面板三",component:(0,I.jsx)(p.Kh,m()({},e)),position:"left"},{title:"面板四",component:(0,I.jsx)(p.vi,m()({},e)),position:"right"},{title:"面板五",component:(0,I.jsx)(S,m()({},e)),position:"right"}]),u=(0,o.Z)(v("left","position"))(t),a=(0,o.Z)(v("right","position"))(t);return(0,I.jsxs)("div",{className:C.container,children:[(0,I.jsx)("div",{className:C.left,children:(0,I.jsx)(c.Z,{gap:"large",vertical:!0,children:u.map((function(e){var n=e.title,t=e.component;return(0,I.jsx)(i.s_,{title:n,children:t},n)}))})}),(0,I.jsx)("div",{className:C.right,children:(0,I.jsx)(c.Z,{gap:"large",vertical:!0,children:a.map((function(e){var n=e.title,t=e.component;return(0,I.jsx)(i.s_,{title:n,children:t},n)}))})})]})}},48316:function(e,n,t){t.d(n,{bh:function(){return i},No:function(){return c},kZ:function(){return u}});var r=t(25480);const i=e=>({checkedKeys:[],setCheckedKeys:n=>e({checkedKeys:n})});(0,r.U)(i);var c=(0,r.U)((e=>({view:null,initialize:n=>e({view:n})}))),o=t(70728);var u=(e,n)=>(0,r.U)((0,o.Z)(...n)(e))},45323:function(e,n,t){t.d(n,{Gv:function(){return h},s_:function(){return x},o8:function(){return Z}});var r=t(45332),i=t.n(r),c=t(44194),o=t(24462),u=t(67984),a=t(33273),s=t(31549),l=function(e){var n=e.dataSource,t=e.goTo;return(0,s.jsx)(u.Z,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){var n=e.avatar,r=e.title,i=e.description,c=e.component;return(0,s.jsx)(u.Z.Item,{actions:[(0,s.jsx)(a.ZP,{type:"link",icon:(0,s.jsx)(o.Z,{}),iconPosition:"end",disabled:!c,onClick:function(){return t(c)},children:"立即使用"},"link")],children:(0,s.jsx)(u.Z.Item.Meta,{avatar:n,title:r,description:i})})}})},f=t(55447),d=function(e){var n=e.goBack,t=e.children;return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.ZP,{type:"link",icon:(0,s.jsx)(f.Z,{}),onClick:n,children:"返回"}),t]})},v="container___PuJI4",h=function(e){var n=e.dataSource,t=(0,c.useState)(),r=i()(t,2),o=r[0],u=r[1];return(0,s.jsx)("div",{className:v,children:o?(0,s.jsx)(d,{goBack:function(){return u(null)},children:o}):(0,s.jsx)(l,{dataSource:n,goTo:u})})},m=t(86415),p=t(51282),x=function(e){var n=e.title,t=void 0===n?"":n,r=e.children;return(0,s.jsx)(m.Z,{title:t,children:r||(0,s.jsx)(p.Z,{description:!1})})},j=t(73193),y=t.n(j),g=t(53698),Z=function(e){var n=e.dataSource,t=e.insetInlineEnd,r=void 0===t?20:t;return(0,s.jsx)(g.Z.Group,{shape:"square",style:{insetInlineEnd:r},children:n.map((function(e){return(0,s.jsx)(g.Z,y()({},e),e.name)}))})}},43214:function(e,n,t){t.d(n,{Kh:function(){return ne},hw:function(){return c},VO:function(){return o},PI:function(){return M},De:function(){return R},zI:function(){return D},AA:function(){return O},vi:function(){return V},yO:function(){return J},Dt:function(){return X}});t(97017);var r=t(44194),i=t(31549),c=function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.lighting.clone();return function(){n.environment.lighting=e}}),[n]),(0,i.jsx)("arcgis-daylight",{"reference-element":"view"})},o=(t(2814),function(){return(0,i.jsx)("arcgis-layer-list",{"reference-element":"view"})}),u=t(76711),a=t.n(u),s=t(45332),l=t.n(s),f=t(52362),d=t(38209),v=t(59876),h=t(47635),m=t(53447),p=t(27998),x=t(91829),j=t(43141),y=t(57040),g=t(59259),Z=t(80379);const k=new Map([["feature",v.default],["geojson",h.default],["graphics",m.Z],["imagery",p.default],["imagery-tile",x.default],["integrated-mesh-3d-tiles",j.default],["map-image",y.default],["tile",g.default],["vector-tile",Z.default]]);var w=({type:e,...n})=>new(k.get(e))(n),b=t(43909),I=t(90602),S=t(47307);var C=t(48316);const{view:E}=C.No.getState();var _=e=>n=>(t,r,i)=>n(((...n)=>{const[{checkedKeys:i}]=n;if(i){const{checkedKeys:n}=r(),t=(0,f.Z)(i,n),c=(0,f.Z)(n,i);t.forEach((n=>{if(!((e,n)=>!!e.map.findLayerById(n))(E,n)){const t=e(n);(async(e,n)=>{if(!n)return;const{key:t,url:r,type:i,...c}=n,o=(0,b.Z)([[(0,I.Z)("type"),()=>w({id:t,...n})],[(0,I.Z)("url"),()=>d.Z.fromArcGISServerUrl({url:r,properties:{id:t,...c}})],[S.Z,()=>new d.Z({id:t,...c})]])(n);e.map.add(o)})(E,t)}})),c.forEach((e=>((e,n)=>{const t=e.map.findLayerById(n);e.map.remove(t)})(E,e)))}t(...n)}),r,i),P=t(88753),N=t(36066),K=t(73917),z=t(51341),B=t(82534),A=N.Z.Search,L=K.Z.Text,M=function(e){var n=e.treeData,t=e.getLayerInfo,c=(0,r.useMemo)((function(){return(0,C.kZ)(C.bh,[_(t(n))])}),[n,t])(),o=c.checkedKeys,u=c.setCheckedKeys,s=(0,r.useState)([]),f=l()(s,2),d=f[0],v=f[1],h=(0,r.useState)(""),m=l()(h,2),p=m[0],x=m[1],j=(0,r.useState)(!0),y=l()(j,2),g=y[0],Z=y[1],k=(0,r.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.title,r=t.indexOf(p),c=t.substring(0,r),o=t.slice(r+p.length),u=r>-1?(0,i.jsx)(z.Z,{children:(0,i.jsxs)("span",{children:[c,(0,i.jsx)(L,{type:"danger",children:p}),o]})}):(0,i.jsx)(z.Z,{children:(0,i.jsx)("span",{children:t})});return n.children?{title:u,key:n.key,children:e(n.children)}:{title:u,key:n.key,isLeaf:!0}}))}(n)}),[n,p]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(A,{placeholder:"请输入关键词搜索",onChange:function(e){var t=e.target.value,r=[];if((0,P.Z)(t))return v(r),x(t),void Z(!0);n.forEach((function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n&&(n.title.includes(t)&&r.push(i),n.children&&n.children.forEach((function(t){return e(t,n.key)})))})),v(r),x(t),Z(!0)}}),(0,i.jsx)(B.Z,{checkable:!0,showIcon:!0,blockNode:!0,onSelect:function(e,n){var t=n.node,r=d.includes(t.key)?d.filter((function(e){return e!==t.key})):[].concat(a()(d),[t.key]);v(r)},onCheck:function(e){u(e)},checkedKeys:o,onExpand:function(e){v(e),Z(!1)},expandedKeys:d,autoExpandParent:g,treeData:k})]})},R=(t(81714),function(){return(0,i.jsx)("arcgis-legend",{"reference-element":"view"})}),q=t(73577),D=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)();return(0,r.useEffect)((function(){return t.current&&(c.current=new q.Z({view:n,container:t.current})),function(){c.current&&c.current.destroy()}}),[n]),(0,i.jsx)("div",{ref:t})},T=t(59958),U=t(19960),G=t(33273),O=function(e){var n=e.view,t=e.mediaLayerConfig,c=(0,r.useRef)(null);(0,r.useEffect)((function(){return c.current=new T.default(t),n.map.add(c.current),function(){n.map.remove(c.current)}}),[n,t]);return(0,i.jsxs)(U.Z,{vertical:!0,gap:"middle",children:[(0,i.jsx)(G.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!0},children:"显示视频"}),(0,i.jsx)(G.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!1},children:"隐藏视频"})]})},V=(t(53553),function(){return(0,i.jsx)("arcgis-sketch",{"reference-element":"view"})}),J=(t(47692),function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.weather.clone();return function(){n.environment.weather=e}}),[n]),(0,i.jsx)("arcgis-weather",{"reference-element":"view"})}),F=t(8444),Y=t(75259),H=t(90403),Q=t(93427),W=K.Z.Text,X=function(e){var n=e.view,t=n.zoom,c=(0,r.useState)(Math.round(t)),o=l()(c,2),u=o[0],a=o[1],s=(0,r.useRef)(new Q.Z({view:n}));return(0,r.useEffect)((function(){(0,H.YP)((function(){return n.zoom}),(function(e){a(Math.round(e))}))}),[n]),(0,i.jsxs)(U.Z,{justify:"space-between",align:"center",children:[(0,i.jsxs)(W,{children:["层级:",u]}),(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(G.ZP,{type:"primary",icon:(0,i.jsx)(F.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomIn()}}),(0,i.jsx)(G.ZP,{type:"primary",icon:(0,i.jsx)(Y.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomOut()}})]})]})},$=t(24858),ee=t(70765),ne=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)(),o=(0,ee.useAccess)();return(0,r.useEffect)((function(){return t.current&&(c.current=new $.Z({view:n,container:t.current,visibleElements:{settingsButton:o.canSeeAdmin,captureButton:o.canSeeAdmin}})),function(){c.current&&c.current.destroy()}}),[n,o]),(0,i.jsx)("div",{ref:t})}}}]);