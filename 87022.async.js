"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[87022],{58426:function(e,t,n){n.d(t,{$c:function(){return d},Hg:function(){return h},jW:function(){return m},xb:function(){return p}});var r=n(70880),o=n(43254),i=n(22018);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof r.Z}function a(e){return e instanceof o.Z?Object.keys(e.items):l(e)?(0,i.vw)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof o.Z?e.items[t]:e[t]}function u(e){return e?e.declaredClass:null}function f(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const r=a(e),o=a(t);if(0===r.length&&0===o.length)return;if(!r.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const i=o.filter((e=>!r.includes(e))),m=r.filter((e=>!o.includes(e))),d=r.filter((n=>o.includes(n)&&c(e,n)!==c(t,n))).concat(i,m).sort(),h=u(e);if(h&&s.has(h)&&d.length)return{type:"complete",oldValue:e,newValue:t};let p;const y=l(e)&&l(t);for(const r of d){const o=c(e,r),i=c(t,r);let s;if((y||"function"!=typeof o&&"function"!=typeof i)&&o!==i&&(null!=o||null!=i)){if(n&&n[r]&&"function"==typeof n[r])s=n[r]?.(o,i);else if(o instanceof Date&&i instanceof Date){if(o.getTime()===i.getTime())continue;s={type:"complete",oldValue:o,newValue:i}}else s="object"==typeof o&&"object"==typeof i&&u(o)===u(i)?f(o,i):{type:"complete",oldValue:o,newValue:i};null!=s&&(null!=p?p.diff[r]=s:p={type:"partial",diff:{[r]:s}})}}return p}function m(e,t){return function(e,t){if(null==e)return!1;const n=t.split(".");let r=e;for(const e of n){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}(e,t)}function d(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}function p(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!p(e))return!1;for(const e of t.removed)if(!p(e))return!1;for(const e of t.changed)if(!p(e))return!1;return!0}case"partial":for(const t in e.diff)if(!p(e.diff[t]))return!1;return!0}}},615:function(e,t,n){n.d(t,{cW:function(){return a},ij:function(){return l},rM:function(){return c}});var r=n(88194),o=n(60123),i=n(13928),s=n(8971);function l(e,t,n){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:c(n.value)});return t}return c(e)}(e)}catch(e){n?.messages?.push(e)}return null}function a(e,t,n,r){try{const r=function(e){const t=(0,i.Q)(e);return t?(0,s.Cb)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);(0,o.RB)(n,r,t)}catch(e){r.messages&&r.messages.push(e)}}function c(e){if(!e?.length)return"";const t=[];for(const n of e){let e=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[u(n,"amount")];break;case"blur":e=[u(n,"radius","pt")];break;case"hue-rotate":e=[u(n,"angle","deg")];break;case"drop-shadow":e=[u(n,"xoffset","pt"),u(n,"yoffset","pt"),u(n,"blurRadius","pt"),f(n,"color")];break;case"bloom":e=[u(n,"strength"),u(n,"radius","pt"),u(n,"threshold")]}const r=`${n.type}(${e.filter(Boolean).join(" ")})`;(0,i.Q)(r),t.push(r)}return t.join(" ")}function u(e,t,n){if(null==e[t])throw new r.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function f(e,t){if(null==e[t])throw new r.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},13928:function(e,t,n){n.d(t,{Q:function(){return c}});var r=n(38461),o=n(88194),i=n(71480),s=n(8971);class l extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let n=null;const r=e.find((e=>e.source===this.location.source));r&&(n=r.text.split(/\r\n|\n|\r/g));const o=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(o):o,s=this.location.source+":"+i.line+":"+i.column;if(n){const e=this.location.end,r="".padEnd(i.line.toString().length," "),l=n[o.line-1],a=(o.line===e.line?e.column:l.length+1)-o.column||1;t+="\n --\x3e "+s+"\n"+r+" |\n"+i.line+" | "+l+"\n"+r+" | "+"".padEnd(o.column-1," ")+"".padEnd(a,"^")}else t+="\n at "+s}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function o(e){return r?e.replace(r,(e=>"\\u{"+n(e)+"}")):e}function i(e){return o(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}function s(e){return o(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+n(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+n(e))))}const l={literal:e=>'"'+i(e.text)+'"',class(e){const t=e.parts.map((e=>Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function a(e){return l[e.type](e)}return"Expected "+function(e){const t=e.map(a);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."}}function a(e,t){const n={},r=(t=void 0!==t?t:{}).grammarSource,o={start:ae};let i=ae;const s="none",a=",",c="grad",u="turn",f=/^[ \t\n\r]/,m=/^[a-z\-]/,d=/^[0-9a-fA-F]/,h=/^[+\-]/,p=/^[0-9]/,y=oe("none"),g=ne("none",!1),b=ne(")",!1),M=ne(",",!1),C=re([" ","\t","\n","\r"],!1,!1,!1),I=oe("function"),S=ne("(",!1),w=oe("identifier"),x=re([["a","z"],"-"],!1,!1,!1),k=oe("percentage"),_=ne("%",!1),v=oe("length"),P=ne("px",!1),A=ne("cm",!1),L=ne("mm",!1),E=ne("in",!1),F=ne("pt",!1),R=ne("pc",!1),T=oe("angle"),B=ne("deg",!1),G=ne("rad",!1),z=ne("grad",!1),Z=ne("turn",!1),O=oe("number"),j=oe("color"),N=ne("#",!1),$=re([["0","9"],["a","f"],["A","F"]],!1,!1,!1),J=re(["+","-"],!1,!1,!1),Y=re([["0","9"]],!1,!1,!1),V=ne(".",!1),U=ne("e",!1);function W(e,t){return t.length>0?function(e,t,n){return[e].concat(function(e,t){return e.map((function(e){return e[t]}))}(t,n))}(e,t,3):[e]}let q=0|t.peg$currPos,D=q;const X=[{line:1,column:1}];let H,Q=q,K=t.peg$maxFailExpected||[],ee=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=o[t.startRule]}function te(){return e.substring(D,q)}function ne(e,t){return{type:"literal",text:e,ignoreCase:t}}function re(e,t,n,r){return{type:"class",parts:e,inverted:t,ignoreCase:n,unicode:r}}function oe(e){return{type:"other",description:e}}function ie(t){let n,r=X[t];if(r)return r;if(t>=X.length)n=X.length-1;else for(n=t;!X[--n];);for(r=X[n],r={line:r.line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return X[t]=r,r}function se(e,t,n){const o=ie(e),i=ie(t);return{source:r,start:{offset:e,line:o.line,column:o.column},end:{offset:t,line:i.line,column:i.column}}}function le(e){q<Q||(q>Q&&(Q=q,K=[]),K.push(e))}function ae(){let e;return e=ce(),e===n&&(e=function(){let e,t;if(e=[],t=ue(),t!==n)for(;t!==n;)e.push(t),t=ue();else e=n;return e}()),e}function ce(){let t,r;return ee++,t=q,me(),e.substr(q,4)===s?(r=s,q+=4):(r=n,0===ee&&le(g)),r!==n?(me(),D=t,t=[]):(q=t,t=n),ee--,t===n&&0===ee&&le(y),t}function ue(){let t,r,o,i;return t=q,me(),r=function(){let t,r,o;return ee++,t=q,r=de(),r!==n?(40===e.charCodeAt(q)?(o="(",q++):(o=n,0===ee&&le(S)),o!==n?(D=t,t=r):(q=t,t=n)):(q=t,t=n),ee--,t===n&&(r=n,0===ee&&le(I)),t}(),r!==n?(me(),o=function(){let t,r,o,i,s,l,c,u;if(t=q,r=fe(),r!==n){for(o=[],i=q,s=me(),44===e.charCodeAt(q)?(l=a,q++):(l=n,0===ee&&le(M)),l===n&&(l=null),c=me(),u=fe(),u!==n?(s=[s,l,c,u],i=s):(q=i,i=n);i!==n;)o.push(i),i=q,s=me(),44===e.charCodeAt(q)?(l=a,q++):(l=n,0===ee&&le(M)),l===n&&(l=null),c=me(),u=fe(),u!==n?(s=[s,l,c,u],i=s):(q=i,i=n);D=t,t=W(r,o)}else q=t,t=n;return t}(),o===n&&(o=null),me(),41===e.charCodeAt(q)?(i=")",q++):(i=n,0===ee&&le(b)),i!==n?(me(),D=t,t=function(e,t){return{type:"function",name:e,parameters:t||[]}}(r,o)):(q=t,t=n)):(q=t,t=n),t}function fe(){let e,t;return e=q,t=he(),t===n&&(t=pe(),t===n&&(t=ye(),t===n&&(t=function(){let e,t;return ee++,e=q,me(),t=be(),t!==n?(D=e,e=function(e){return{value:e,unit:null}}(t)):(q=e,e=n),ee--,e===n&&0===ee&&le(O),e}()))),t!==n&&(D=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),e=t,e===n&&(e=q,t=ge(),t!==n&&(D=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function me(){let t,r;for(ee++,t=[],r=e.charAt(q),f.test(r)?q++:(r=n,0===ee&&le(C));r!==n;)t.push(r),r=e.charAt(q),f.test(r)?q++:(r=n,0===ee&&le(C));return ee--,t}function de(){let t,r,o;if(ee++,t=q,r=[],o=e.charAt(q),m.test(o)?q++:(o=n,0===ee&&le(x)),o!==n)for(;o!==n;)r.push(o),o=e.charAt(q),m.test(o)?q++:(o=n,0===ee&&le(x));else r=n;return r!==n&&(D=t,r=te()),t=r,ee--,t===n&&(r=n,0===ee&&le(w)),t}function he(){let t,r,o;return ee++,t=q,me(),r=be(),r!==n?(37===e.charCodeAt(q)?(o="%",q++):(o=n,0===ee&&le(_)),o!==n?(D=t,t=function(e){return{value:e,unit:"%"}}(r)):(q=t,t=n)):(q=t,t=n),ee--,t===n&&0===ee&&le(k),t}function pe(){let t,r,o;return ee++,t=q,me(),r=be(),r!==n?("px"===e.substr(q,2)?(o="px",q+=2):(o=n,0===ee&&le(P)),o!==n?(D=t,t=function(e){return{value:e,unit:"px"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,me(),r=be(),r!==n?("cm"===e.substr(q,2)?(o="cm",q+=2):(o=n,0===ee&&le(A)),o!==n?(D=t,t=function(e){return{value:e,unit:"cm"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,me(),r=be(),r!==n?("mm"===e.substr(q,2)?(o="mm",q+=2):(o=n,0===ee&&le(L)),o!==n?(D=t,t=function(e){return{value:e,unit:"mm"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,me(),r=be(),r!==n?("in"===e.substr(q,2)?(o="in",q+=2):(o=n,0===ee&&le(E)),o!==n?(D=t,t=function(e){return{value:e,unit:"in"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,me(),r=be(),r!==n?("pt"===e.substr(q,2)?(o="pt",q+=2):(o=n,0===ee&&le(F)),o!==n?(D=t,t=function(e){return{value:e,unit:"pt"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,me(),r=be(),r!==n?("pc"===e.substr(q,2)?(o="pc",q+=2):(o=n,0===ee&&le(R)),o!==n?(D=t,t=function(e){return{value:e,unit:"pc"}}(r)):(q=t,t=n)):(q=t,t=n)))))),ee--,t===n&&0===ee&&le(v),t}function ye(){let t,r,o;return ee++,t=q,r=be(),r!==n?("deg"===e.substr(q,3)?(o="deg",q+=3):(o=n,0===ee&&le(B)),o!==n?(D=t,t=function(e){return{value:e,unit:"deg"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,r=be(),r!==n?("rad"===e.substr(q,3)?(o="rad",q+=3):(o=n,0===ee&&le(G)),o!==n?(D=t,t=function(e){return{value:e,unit:"rad"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,r=be(),r!==n?(e.substr(q,4)===c?(o=c,q+=4):(o=n,0===ee&&le(z)),o!==n?(D=t,t=function(e){return{value:e,unit:"grad"}}(r)):(q=t,t=n)):(q=t,t=n),t===n&&(t=q,r=be(),r!==n?(e.substr(q,4)===u?(o=u,q+=4):(o=n,0===ee&&le(Z)),o!==n?(D=t,t=function(e){return{value:e,unit:"turn"}}(r)):(q=t,t=n)):(q=t,t=n)))),ee--,t===n&&(r=n,0===ee&&le(T)),t}function ge(){let t,r,o,i;if(ee++,t=q,35===e.charCodeAt(q)?(r="#",q++):(r=n,0===ee&&le(N)),r!==n){if(o=[],i=e.charAt(q),d.test(i)?q++:(i=n,0===ee&&le($)),i!==n)for(;i!==n;)o.push(i),i=e.charAt(q),d.test(i)?q++:(i=n,0===ee&&le($));else o=n;o!==n?(D=t,t={type:"hex",value:te()}):(q=t,t=n)}else q=t,t=n;return t===n&&(t=q,r=ue(),r!==n&&(D=t,r=function(e){return{type:"function",value:e}}(r)),t=r,t===n&&(t=q,r=de(),r!==n&&(D=t,r={type:"named",value:te()}),t=r)),ee--,t===n&&(r=n,0===ee&&le(j)),t}function be(){let t,r,o,i,s,l,a,c;for(t=q,r=e.charAt(q),h.test(r)?q++:(r=n,0===ee&&le(J)),r===n&&(r=null),o=q,i=[],s=e.charAt(q),p.test(s)?q++:(s=n,0===ee&&le(Y));s!==n;)i.push(s),s=e.charAt(q),p.test(s)?q++:(s=n,0===ee&&le(Y));if(46===e.charCodeAt(q)?(s=".",q++):(s=n,0===ee&&le(V)),s!==n){if(l=[],a=e.charAt(q),p.test(a)?q++:(a=n,0===ee&&le(Y)),a!==n)for(;a!==n;)l.push(a),a=e.charAt(q),p.test(a)?q++:(a=n,0===ee&&le(Y));else l=n;l!==n?(i=[i,s,l],o=i):(q=o,o=n)}else q=o,o=n;if(o===n)if(o=[],i=e.charAt(q),p.test(i)?q++:(i=n,0===ee&&le(Y)),i!==n)for(;i!==n;)o.push(i),i=e.charAt(q),p.test(i)?q++:(i=n,0===ee&&le(Y));else o=n;if(o!==n){if(i=q,101===e.charCodeAt(q)?(s="e",q++):(s=n,0===ee&&le(U)),s!==n){if(l=e.charAt(q),h.test(l)?q++:(l=n,0===ee&&le(J)),l===n&&(l=null),a=[],c=e.charAt(q),p.test(c)?q++:(c=n,0===ee&&le(Y)),c!==n)for(;c!==n;)a.push(c),c=e.charAt(q),p.test(c)?q++:(c=n,0===ee&&le(Y));else a=n;a!==n?(s=[s,l,a],i=s):(q=i,i=n)}else q=i,i=n;i===n&&(i=null),D=t,t=parseFloat(te())}else q=t,t=n;return t}H=i();const Me=H!==n&&q===e.length;function Ce(){throw H!==n&&q<e.length&&le({type:"end"}),function(e,t,n){return new l(l.buildMessage(e,t),e,t,n)}(K,Q<e.length?function(t=q){const n=e.codePointAt(t);return void 0===n?"":String.fromCodePoint(n)}(Q):null,Q<e.length?se(Q,Q+1):se(Q,Q))}return t.peg$library?{peg$result:H,peg$currPos:q,peg$FAILED:n,peg$maxFailExpected:K,peg$maxFailPos:Q,peg$success:Me,peg$throw:Me?void 0:Ce}:Me?H:void Ce()}function c(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=u(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new o.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:u(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!(0,s.AS)(t[e].effects,t[e+1].effects))throw new o.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,s.uF)(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function u(e){let t;if(!e)return[];try{t=a(e)}catch(t){throw new o.Z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=y(e.parameters[0])),new i.GI(e.name,t)}(e);case"opacity":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=y(e.parameters[0])),new i.Zx(t)}(e);case"hue-rotate":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=h[e.unit]))throw new o.Z("effect:type-error",`Expected <angle>, Actual: ${m(e)}`,{term:e})}(e),e.value*h[e.unit]||0}(e.parameters[0])),new i.Tq(t)}(e);case"blur":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=b(e.parameters[0]),d(t,e.parameters[0])),new i.Tj(t)}(e);case"drop-shadow":return function(e){const t=[];let n=null;for(const r of e.parameters)if("color"===r.type){if(t.length&&Object.freeze(t),n)throw new o.Z("effect:type-error","Accepts only one color",{});n=M(r)}else{const e=b(r);if(Object.isFrozen(t))throw new o.Z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&d(e,r)}if(t.length<2||t.length>3)throw new o.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new i.CE(t[0],t[1],t[2]||0,n||C("black"))}(e);case"bloom":return function(e){let t=1,n=0,r=0;return f(e.parameters,3),e.parameters[0]&&(t=y(e.parameters[0])),e.parameters[1]&&(n=b(e.parameters[1]),d(n,e.parameters[1])),e.parameters[2]&&(r=y(e.parameters[2])),new i.rk(t,n,r)}(e)}}catch(t){throw t.details.filter=e,t}throw new o.Z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function f(e,t){if(e.length>t)throw new o.Z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function m(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in p)return"<length>";if(e.unit in h)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function d(e,t){if(e<0)throw new o.Z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const h={deg:1,grad:.9,rad:180/Math.PI,turn:360};const p={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function y(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new o.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${m(e)}`,{term:e})}(e);const t=e.value;return d(t,e),"%"===e.unit?.01*t:t}function g(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new o.Z("effect:type-error",`Expected <double>, Actual: ${m(e)}`,{term:e})}(e),d(e.value,e),e.value}function b(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=p[e.unit]))throw new o.Z("effect:type-error",`Expected <length>, Actual: ${m(e)}`,{term:e})}(e),e.value*p[e.unit]||0}function M(e){switch(e.colorType){case"hex":return(0,r.a7)(e.value);case"named":return C(e.value);case"function":return function(e){if(f(e.parameters,4),I.test(e.name))return[y(e.parameters[0]),y(e.parameters[1]),y(e.parameters[2]),e.parameters[3]?y(e.parameters[3]):1];if(S.test(e.name))return(0,r.Y6)(g(e.parameters[0]),y(e.parameters[1]),y(e.parameters[2]),e.parameters[3]?y(e.parameters[3]):1);throw new o.Z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function C(e){if(!(0,r.St)(e))throw new o.Z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,r.VL)(e)}const I=/^rgba?/i,S=/^hsla?/i},70677:function(e,t,n){n.d(t,{H:function(){return a}});var r=n(61432),o=n(96946),i=n(47566);const s={minX:0,minY:0,maxX:0,maxY:0};function l(e,t,n){(function(e){s.minX=e[0],s.minY=e[1],s.maxX=e[2],s.maxY=e[3]})(t),e.search(s,n)}class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new o.Q(9,(0,r.Z)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach(((n,r)=>{e[t++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((e=>this._idByBounds.has(e)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,i.cS)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),l(this._index,e,(e=>t(this._idByBounds.get(e))))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},95014:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(3480),o=n(88194),i=n(87833),s=n(96711),l=n(16447),a=n(47566),c=n(64246),u=n(70677),f=n(14588),m=n(80613);const d=(0,l.Ue)();class h{constructor(e){this.geometryInfo=e,this._boundsStore=new u.H,this._featuresById=new Map,this._usedMemory=0,this.events=new i.Z,this.featureAdapter=m.n}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,r,o]=this.fullBounds;return{xmin:t,ymin:n,xmax:r,ymax:o,spatialReference:(0,f.S2)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(r.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,l.JR)(d,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void s.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new o.Z("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let r;if(n?(e.displayId=n.displayId,r=this._boundsStore.get(t),this._boundsStore.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=(0,c.$)(null!=r?r:(0,a.Ue)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=r&&this._boundsStore.set(t,r),this._featuresById.set(t,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){const t=e?.objectId;if(null==t)return s.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new o.Z("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const n=this._featuresById.get(t);if(!n)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0;const{geometry:r,attributes:i}=e;for(const e in i)n.attributes[e]=i[e];return r&&(n.geometry=r,this._boundsStore.set(t,(0,c.$)((0,a.Ue)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(n)??0,n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},3849:function(e,t,n){n.d(t,{TY:function(){return o},_P:function(){return l},_k:function(){return a},l6:function(){return i},mR:function(){return r},xD:function(){return s}});const r="ESRI__ID",o="ESRI__OriginID",i="ESRI__DestID",s="ESRI__LayoutGeometry",l="ESRI__AggregationCount",a="LC.ESRI__IsSpatial"},78279:function(e,t,n){n.d(t,{Ee:function(){return i},Gr:function(){return l},UO:function(){return s}});var r=n(99574),o=n(48797);function i(e,t){return{...t,filterMode:e.mode}}function s(e,t){return a(e,t).next().value??null}function l(e,t,n){const i=function(e){if("manual"===u(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:n,maxScale:r}of e.filters)t[0]=Math.max(t[0],f(n)),t[1]=Math.min(t[1],m(r));return t}(e);if(i&&((0,r.nB)(t,i[0])||(0,r.pt)(n,i[1])))return"";const s=Array.from(a(e,t,n)),l=function(e,t,n){if(0===e.length)return!0;const o=f(e.at(0)?.minScale),i=m(e.at(-1)?.maxScale);if((0,r.pt)(o,t)||(0,r.nB)(i,n))return!0;for(let t=0;t<e.length-1;t++){const n=e[t],o=e[t+1];if((0,r.pt)(f(o.minScale),m(n.maxScale)))return!0}return!1}(s,t,n)?"1=1":s.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,o.D3)(e,t)),"");return l&&"1=1"!==l?l:""}function*a(e,t,n){if("manual"===u(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const r of e.filters)c(r.minScale,r.maxScale,t,n)&&(yield r)}}function c(e,t,n,o){return e=f(e),n=f(n),t=m(t),!(!(0,r.W8)(n,e)&&(o??n)>e||(0,r.aR)(t,n)||void 0!==o&&(0,r.W8)(o,e))}function u(e){return"mode"in e?e.mode:e.filterMode}function f(e){return e||Number.POSITIVE_INFINITY}function m(e){return e||0}},13878:function(e,t,n){n.d(t,{Z:function(){return b}});var r,o=n(73440),i=n(46451),s=n(41773),l=n(63255),a=n(28947),c=n(17155),u=(n(61432),n(96711),n(1194)),f=n(48023),m=n(29884),d=n(45213),h=n(90756),p=n(98842),y=n(49651);const g=new s.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let b=r=class extends l.Z{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,i.Z)}writeGeometryType(e,t,n,r){if(e)return void g.write(e,t,n,r);const{features:o}=this;if(o)for(const e of o)if(null!=e?.geometry)return void g.write(e.geometry.type,t,n,r)}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,r=(0,h.im)(e);return r&&!n&&t.spatialReference&&(r.spatialReference=d.Z.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n)for(const e of n)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new r(this.cloneProperties())}cloneProperties(){return(0,a.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const r=t.features[n];if(r.geometry){const t=e?.[n];r.geometry=t?.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,n],translate:[r,o]}=e,i=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-r)/t)),(e=>Math.round((o-e)/n)));for(let e=0,t=i.length;e<t;e++)s?.(i[e].geometry)||(i.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[r,o],scale:[i,s]}=n;let l=null,a=null;if(this.hasZ&&null!=n?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=n;l=n=>n*t+e}if(this.hasM&&null!=n?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=n;a=n=>null==n?n:n*t+e}const c=this._getHydrationFunction(e,(e=>e*i+r),(e=>o-e*s),l,a);for(const{geometry:e}of t)null!=e&&c&&c(e);return this.transform=null,this}readFeaturesWithClass(e,t,n){const r=d.Z.fromJSON(t.spatialReference),o=[];for(let t=0;t<e.length;t++){const i=e[t],s=n.fromJSON(i),l=i.geometry?.spatialReference;null==s.geometry||l||(s.geometry.spatialReference=r);const a=i.aggregateGeometries,c=s.aggregateGeometries;if(a&&null!=c)for(const e in c){const t=c[e],n=a[e]?.spatialReference;null==t||n||(t.spatialReference=r)}o.push(s)}return o}_quantizePoints(e,t,n){let r,o;const i=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(s>0){const e=t(l[0]),s=n(l[1]);e===r&&s===o||(i.push([e-r,s-o]),r=e,o=s)}else r=t(l[0]),o=n(l[1]),i.push([r,o])}return i.length>0?i:null}_getQuantizationFunction(e,t,n){return"point"===e?e=>(e.x=t(e.x),e.y=n(e.y),e):"polyline"===e||"polygon"===e?e=>{const r=(0,h.oU)(e)?e.rings:e.paths,o=[];for(let e=0,i=r.length;e<i;e++){const i=r[e],s=this._quantizePoints(i,t,n);s&&o.push(s)}return o.length>0?((0,h.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?e=>{const r=this._quantizePoints(e.points,t,n);return r&&r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,n,r,o){return"point"===e?e=>{e.x=t(e.x),e.y=n(e.y),r&&(e.z=r(e.z))}:"polyline"===e||"polygon"===e?e=>{const i=(0,h.oU)(e)?e.rings:e.paths;let s,l;for(let e=0,r=i.length;e<r;e++){const r=i[e];for(let e=0,o=r.length;e<o;e++){const o=r[e];e>0?(s+=o[0],l+=o[1]):(s=o[0],l=o[1]),o[0]=t(s),o[1]=n(l)}}if(r&&o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2]),n[3]=o(n[3])}}else if(r)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2])}}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=o(n[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),r&&null!=e.zmax&&null!=e.zmin&&(e.zmax=r(e.zmax),e.zmin=r(e.zmin)),o&&null!=e.mmax&&null!=e.mmin&&(e.mmax=o(e.mmax),e.mmin=o(e.mmin))}:"multipoint"===e?e=>{const i=e.points;let s,l;for(let e=0,r=i.length;e<r;e++){const r=i[e];e>0?(s+=r[0],l+=r[1]):(s=r[0],l=r[1]),r[0]=t(s),r[1]=n(l)}if(r&&o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=r(t[2]),t[3]=o(t[3])}else if(r)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=r(t[2])}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=o(t[2])}}:null}};(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,o._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"exceededTransferLimit",void 0),(0,o._)([(0,c.Cb)({type:[i.Z],json:{write:!0}})],b.prototype,"features",void 0),(0,o._)([(0,u.r)("features")],b.prototype,"readFeatures",null),(0,o._)([(0,c.Cb)({type:[y.Z],json:{write:!0}})],b.prototype,"fields",void 0),(0,o._)([(0,c.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],b.prototype,"geometryType",void 0),(0,o._)([(0,m.c)("geometryType")],b.prototype,"writeGeometryType",null),(0,o._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasM",void 0),(0,o._)([(0,c.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasZ",void 0),(0,o._)([(0,c.Cb)({types:p.qM,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,o._)([(0,u.r)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,o._)([(0,c.Cb)({type:d.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,o._)([(0,m.c)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,o._)([(0,c.Cb)({json:{write:!0}})],b.prototype,"transform",void 0),b=r=(0,o._)([(0,f.j)("esri.rest.support.FeatureSet")],b),b.prototype.toJSON.isDefaultToJSON=!0},6298:function(e,t,n){n.d(t,{E:function(){return o}});var r=n(44252);const o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:r.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:r.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:r.of.Loop,repeatdelay:0,easing:r.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,n){n.d(t,{$Z:function(){return w},BX:function(){return I},Cc:function(){return y},E_:function(){return l},F:function(){return x},FG:function(){return _},H1:function(){return i},J0:function(){return p},JW:function(){return A},Lb:function(){return N},Le:function(){return L},Ml:function(){return z},On:function(){return M},Qf:function(){return v},RI:function(){return g},TB:function(){return P},Ul:function(){return G},W7:function(){return S},X_:function(){return k},be:function(){return u},e0:function(){return T},gJ:function(){return h},hU:function(){return R},hf:function(){return r},k5:function(){return d},oY:function(){return c},pJ:function(){return b},qQ:function(){return s},wi:function(){return C},yL:function(){return m},yl:function(){return E},zL:function(){return f}});n(6298);function r(e,t,n,r){return function(e){return"function"==typeof e}(e)?e(t,n,r):e}function o(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function i(e,t){const n=[];let r=0,i=-1;do{if(i=e.indexOf("[",r),i>=r){if(i>r){const t=e.slice(r,i);n.push([t,null,o(t)])}if(r=i+1,i=e.indexOf("]",r),i>=r){if(i>r){const o=t[e.slice(r,i)];o&&n.push([null,o,!1])}r=i+1}}}while(-1!==i);if(r<e.length){const t=e.slice(r);n.push([t,null,o(t)])}return n}function s(e,t,n){let r="",o=null;for(const n of t){const[t,i,s]=n;if(null!=t&&""!==t)s?o=t:(null!=o&&(r+=o,o=null),r+=t);else{const t=e.readAttribute(i);null!=t&&""!==t&&(null!==o&&(r+=o,o=null),r+=t)}}return a(r,n)}function l(e,t,n,r){let o="",i=null;for(const r of t){const[t,s,l]=r;if(null!=t&&""!==t)l?i=t:(null!=i&&(o+=i,i=null),o+=t);else{let t=s;null!=n&&(t=B(s,n));const r=e.attributes[t];null!=r&&""!==r&&(null!=i&&(o+=i,i=null),o+=r)}}return a(o,r)}function a(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function c(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function u(e){return e.data?.symbol??null}function f(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function m(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function h(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const p=(e,t=0)=>null==e||isNaN(e)?t:e,y=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([n.e(27093),n.e(13323)]).then(n.bind(n,69339))}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function M(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function C(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function I(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function S(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=S(t);if(null!=e)return e}break;case"CIMTextSymbol":return S(e.symbol);case"CIMSolidFill":return e.color}return null}function w(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=w(e);if(null!=t)return t}break}case"CIMTextSymbol":return w(e.symbol);case"CIMSolidStroke":return e.color}}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=x(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function _(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function v(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const P=e=>e.includes("data:image/svg+xml");function A(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function L(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function E(e,t,n,r,o,i,s=!0){const{infos:l}=i;let a=1,c=0,u=0,f=0,m=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:n,rotation:r,size:o,frameHeight:i,rotateClockWise:d,scaleSymbolsProportionally:h}of l)m=e?1:a,u=O(t,n,c,m,u),f=Z(t,n,c,m,f),i&&(h||s)&&(a*=o/i),c=j(r,d,c);const d=O(r,o,c,m,u),h=Z(r,o,c,m,f);return{size:e*a,rotation:j(t,n,c),offsetX:d,offsetY:h}}function F(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function R(e){return e?.dashTemplate&&(e.dashTemplate=F(e.dashTemplate)),e}function T(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return T(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return T(e.symbol)}}return"Normal"}function B(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function G(e){return e.map((e=>({...e,propertyName:L(e.propertyName)})))}function z(e){const t={};for(const n in e){const r=e[n];t[L(n)]=r}return t}function Z(e,t,n,r,o){const i=n*Math.PI/180;if(i){const n=Math.cos(i);return(Math.sin(i)*e+n*t)*r+o}return t*r+o}function O(e,t,n,r,o){const i=n*Math.PI/180;return i?(Math.cos(i)*e-Math.sin(i)*t)*r+o:e*r+o}function j(e,t,n){return t?n-e:n+e}function N(e,t){return Math.max(Math.min((e??t)/100,1),0)}},27737:function(e,t,n){n.d(t,{YV:function(){return i},ZB:function(){return d},iW:function(){return a}});var r=n(53147),o=n(61421);function i(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)l(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":i(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)l(e,t)}}else null!=e.height&&(e.height*=t)}function s(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,o.gJ)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||i(r.symbol,t,!0,n)}function l(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function a(e){const t=[];return c((0,o.be)(e),t),t.length?new r.Z((0,o.oY)(t[0])):null}function c(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const e of n.symbolLayers)if(!(e.colorLocked||r&&((0,o.yL)(e)||(0,o.zL)(e)&&e.markerPlacement&&(0,o.gJ)(e.markerPlacement))))switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor&&u(t,e.tintColor);break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{c(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":u(t,e.color);break;case"CIMGradientFill":f(t,e);break;case"CIMHatchFill":c(e.lineSymbol,t)}}function u(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function f(e,t){const n=t.colorRamp?.type;switch(n){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach((t=>{"CIMLinearContinuousColorRamp"===t.type&&m(e,t)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":m(e,t.colorRamp)}}function m(e,t){t&&(t.fromColor&&u(e,t.fromColor),t.toColor&&u(e,t.toColor))}function d(e,t,n){t instanceof r.Z||(t=new r.Z(t));const i=(0,o.be)(e);i&&h(i,t,n)}function h(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const i="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const e of r.symbolLayers){if(e.colorLocked)continue;if(i)if(n){const{layersToColor:t}=n;if(((0,o.yL)(e)||(0,o.zL)(e)&&e.markerPlacement&&(0,o.gJ)(e.markerPlacement))&&"fill"===t||(0,o.k5)(e)&&"outline"===t)continue}else if((0,o.yL)(e)||(0,o.zL)(e)&&e.markerPlacement&&(0,o.gJ)(e.markerPlacement))continue;const r=t.toArray();switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor=r;break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{h(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":e.color=r;break;case"CIMGradientFill":p(e,t);break;case"CIMHatchFill":h(e.lineSymbol,t,n)}}}function p(e,t){const n=e.colorRamp?.type;switch(n){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach((e=>{"CIMLinearContinuousColorRamp"===e.type&&y(e,t)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":y(e.colorRamp,t)}}function y(e,t){if(e&&(e.fromColor&&(e.fromColor=t.toArray()),e.toColor)){const n=t.clone();n.a=0,e.toColor=n.toArray()}}},9350:function(e,t,n){n.d(t,{CJ:function(){return c},Rz:function(){return f},js:function(){return m},xA:function(){return a},z3:function(){return u}});n(61432);var r=n(89636),o=n(38096),i=n(19886),s=n(45433),l=n(54914);const a=i.Z.fromJSON(l.I4),c=o.Z.fromJSON(l.ET),u=r.Z.fromJSON(l.lF),f=s.Z.fromJSON(l.qP);function m(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return c;case"polygon":case"extent":return u}return null}i.Z.fromJSON(l.eG),o.Z.fromJSON(l.wW),r.Z.fromJSON(l.lj)},54914:function(e,t,n){n.d(t,{ET:function(){return s},I4:function(){return i},SQ:function(){return r},X1:function(){return o},eG:function(){return c},lF:function(){return l},lj:function(){return f},qP:function(){return a},wW:function(){return u}});const r=[252,146,31,255],o=[153,153,153,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},f={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},48922:function(e,t,n){n.d(t,{Ne:function(){return M},Od:function(){return p},Sp:function(){return b},_M:function(){return h},iI:function(){return g},mx:function(){return y}});var r=n(1800),o=n(53147),i=n(78619),s=n(12853),l=n(96094),a=n(27737);const c="picture-fill",u="simple-fill",f="simple-marker",m=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),d=new s.z(1e3);function h(e){const t=e.style;let n=null;if(e)switch(e.type){case f:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.V)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case c:n={type:"pattern",src:e.url,width:(0,l.F2)(e.width)*e.xscale,height:(0,l.F2)(e.height)*e.yscale,x:(0,l.F2)(e.xoffset),y:(0,l.F2)(e.yoffset)};break;case"text":n=e.color;break;case"cim":n=(0,a.iW)(e)}return n}function p(e,t){const n=e+"-"+t;return void 0!==d.get(n)?Promise.resolve(d.get(n)):(0,i.Z)(e,{responseType:"image"}).then((e=>{const r=e.data,o=r.naturalWidth,i=r.naturalHeight,s=document.createElement("canvas");s.width=o,s.height=i;const l=s.getContext("2d");l.fillStyle=t,l.fillRect(0,0,o,i),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const a=s.toDataURL();return d.put(n,a),a}))}function y(e){if(!e)return null;let t=null;switch(e.type){case u:case c:case f:t=y(e.outline);break;case"simple-line":{const n=(0,l.F2)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:b(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,l.F2)(e.miterLimit):e.join},t.dashArray=g(t).join(",")||"none");break}default:t=null}return t}function g(e){if(!e?.style)return[];const{dashArray:t,style:n,width:r}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const o=r??0,i=m.has(n)?m.get(n).map((e=>e*o)):[];if("butt"!==e.cap)for(const[e,t]of i.entries())i[e]=e%2==1?t+o:Math.max(t-o,1);return i}const b=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),M=new o.Z([128,128,128])},30903:function(e,t,n){n.d(t,{BR:function(){return x},QL:function(){return _},Y6:function(){return d},YW:function(){return h},_h:function(){return y},e3:function(){return w},nf:function(){return p},tb:function(){return b},wJ:function(){return k}});var r=n(53147),o=n(29292),i=(n(61432),n(96094)),s=n(82846),l=n(615),a=n(27737),c=n(48922),u=n(75485),f=n(68578);const m=new r.Z("white");function d(e){if(!e)return 0;if((0,f.dU)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,i.Wz)((0,c.mx)(e)?.width)}function h(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function p(e){return e.resource?.href??""}function y(e,t){if(!e)return null;let n=null;return(0,f.dU)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.Z(n):null}(e):(0,f.cT)(e)&&(n="cim"===e.type?(0,a.iW)(e):e.color?new r.Z(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.Z(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.Z(t)),(0,f.dU)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const o=e=>g(t??e??(null!=n?m:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=o(e.color);else{const t=null!=e.material?e.material.color:null,r=o(t);if(null==e.material?e.material=new u.b({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n)),"marker"in e&&null!=e.marker){const t=o(e.marker.color);e.marker.color=t}}}))}(e,t,n):(0,f.cT)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function M(e,t){const r=e.symbolLayers;r&&await(0,o.Ed)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){const n=t[2];"number"==typeof n&&(e.size=n)}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=C(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=I(t,s.hq,[e.width,void 0,e.height]);null!=n&&(e.width=S(t[0],e.width,1,n),e.height=S(t[2],e.height,1,n))}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:o}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(99795).then(n.bind(n,99795)),r=await t(e,10),{width:o,height:i,depth:s}=e,l=[o,s,i];let a=1;for(let e=0;e<3;e++){const t=l[e];if(null!=t){a=t/r[e];break}}for(let e=0;e<3;e++)null==l[e]&&(l[e]=r[e]*a);return{resourceSize:r,symbolSize:l}}(e),i=I(t,r,o);null!=i&&(e.width=S(t[0],o[0],r[0],i),e.depth=S(t[1],o[1],r[1],i),e.height=S(t[2],o[2],r[2],i))}(e,t)}}(e,t)))}function C(e){for(const t of e)if("number"==typeof t)return t;return null}function I(e,t,n){for(let r=0;r<3;r++){const o=e[r];switch(o){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(o&&t[r])return o/t[r]}}return null}function S(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function w(e,t){if(e&&t)return(0,f.dU)(e)?M(e,t):void((0,f.cT)(e)&&function(e,t){const n=C(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function x(e,t,n){if(e&&null!=t)if((0,f.dU)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,f.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function k(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,l.rM)(t)}function _(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}}}]);