"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[16814],{65475:function(t,n,e){e.d(n,{Z:function(){return d}});var r=e(73440),i=e(89314),u=e(17155),o=(e(61432),e(96711),e(83850),e(48023));let c=class extends i.Z{constructor(t){super(t),this.type="web-scene"}equals(t){return this.type===t.type}};(0,r._)([(0,u.Cb)()],c.prototype,"type",void 0),c=(0,r._)([(0,o.j)("esri.analysis.support.AnalysisOriginWebScene")],c);const s=c;var a=e(70880),l=e(15894),f=e(63255);let h=0,d=class extends(f.Z.JSONSupportMixin(i.Z.ClonableMixin(l.Z.IdentifiableMixin(a.Z)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${h++}`,this.origin=null}get parent(){return this._get("parent")}set parent(t){const n=this.parent;if(null!=n)switch(n.type){case"line-of-sight":case"dimension":case"viewshed":n.releaseAnalysis(this);break;case"2d":case"3d":n.analyses.includes(this)&&n.analyses.remove(this)}this._set("parent",t)}equals(t){return!0}};(0,r._)([(0,u.Cb)({type:String,constructOnly:!0,clonable:!1})],d.prototype,"id",void 0),(0,r._)([(0,u.Cb)({clonable:!1,value:null})],d.prototype,"parent",null),(0,r._)([(0,u.Cb)({types:{key:"type",base:null,typeMap:{"web-scene":s}}})],d.prototype,"origin",void 0),d=(0,r._)([(0,o.j)("esri.analysis.Analysis")],d)},34753:function(t,n,e){e.d(n,{Z:function(){return m}});var r=e(73440),i=e(37877),u=e(89314),o=e(95437),c=e(63255),s=e(61100),a=e(17155),l=e(90775),f=(e(61432),e(83850),e(48023)),h=e(95226),d=e(60508);let m=class extends(c.Z.JSONSupportMixin(u.Z)){constructor(t){super(t),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}get valid(){return null!=this.observer&&this.farDistance>0}equals(t){return(0,s._W)(this.observer,t.observer)&&this.farDistance===t.farDistance&&this.heading===t.heading&&this.tilt===t.tilt&&this.horizontalFieldOfView===t.horizontalFieldOfView&&this.verticalFieldOfView===t.verticalFieldOfView&&(0,i.kk)(this.feature,t.feature)}};(0,r._)([(0,a.Cb)({type:d.Z,json:{write:{isRequired:!0}}})],m.prototype,"observer",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],m.prototype,"farDistance",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,l.p)((t=>o.BV.normalize((0,h.q9)(t),void 0,!0)))],m.prototype,"heading",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],m.prototype,"tilt",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],m.prototype,"horizontalFieldOfView",void 0),(0,r._)([(0,a.Cb)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],m.prototype,"verticalFieldOfView",void 0),(0,r._)([(0,a.Cb)(i.rX)],m.prototype,"feature",void 0),(0,r._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],m.prototype,"valid",null),m=(0,r._)([(0,f.j)("esri.analysis.Viewshed")],m)},37877:function(t,n,e){e.d(n,{NS:function(){return f},kk:function(){return s},pD:function(){return a},rX:function(){return l}});var r=e(24910),i=e(82846),u=e(12659),o=e(61442),c=e(90189);function s(t,n){return a(t)===a(n)}function a(t){if(null==t)return null;const n=null!=t.layer?t.layer.id:"";let e=null;return e=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==e?null:`o-${n}-${e}`}const l={json:{write:{writer:function(t,n){null!=t?.layer?.objectIdField&&null!=t.attributes&&(n.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:function(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}}};function f(t,n,e,s){const{sceneIntersectionHelper:l}=t,{observer:f,observerFeatureId:d,targetFeatureId:g,target:M}=e;if(null==d&&null==g)return;s||(s=t=>t),(0,r.a)(p,f,M);const y=(0,r.l)(p);(0,r.b)(p,f,p,1/y);const b=(0,u.zk)(p,M,m);n.options.store=o.e.ALL,l.intersectToolIntersectorRay(b,n);let _=null,w=null,v=null,x=null;for(const e of n.results.all){const n=(0,c.tB)(e,t);if(null==n||null==e.distanceInRenderSpace)continue;const r=a(n);null!=r&&(null!=d&&r===d&&(_??=s(h(e,t,y)),e.distanceInRenderSpace-1<_&&(v=e)),null!=g&&r===g&&(w??=s(h(e,t,y)),null==x&&e.distanceInRenderSpace-1<y&&y-e.distanceInRenderSpace+1<w&&(x=e)))}const{observerAdjusted:I,targetAdjusted:O}=e;v?.getIntersectionPoint(I)?e.observerSurfaceNormal=v.getTransformedNormal((0,i.Ue)()):e.observerSurfaceNormal=null,x?.getIntersectionPoint(O)?e.targetSurfaceNormal=x.getTransformedNormal((0,i.Ue)()):e.targetSurfaceNormal=null}function h(t,n,e){if((0,c._s)(t)){const r=(0,c.VB)(t,n);if(null!=r)return Math.min(r*d,e)}return 1e-5*e}const d=.05,m=(0,u.Ue)(),p=(0,i.Ue)()},69055:function(t,n,e){e.d(n,{N:function(){return p},a:function(){return I},b:function(){return v},c:function(){return g},d:function(){return A},e:function(){return b},f:function(){return O},g:function(){return x},h:function(){return E},i:function(){return S},j:function(){return q},k:function(){return N},l:function(){return _},m:function(){return V},n:function(){return M},o:function(){return z},p:function(){return R},s:function(){return G},t:function(){return W},u:function(){return Z},w:function(){return w}});e(61432),e(96711);var r=e(99574),i=e(31865),u=e(24910),o=e(82846),c=e(73749),s=e(27583),a=e(66130),l=e(93070),f=e(12659);function h(t,n){const e=(0,u.l)(t),i=(0,r.Kt)(t[2]/e),o=Math.atan2(t[1]/e,t[0]/e);return(0,u.i)(n,e,i,o),n}var d=e(63271),m=e(69811);const p=g();function g(){return(0,s.Ue)()}const M=c.e,y=c.e;function b(t,n){return(0,c.c)(n,t)}function _(t,n){return(0,s.al)(t[0],t[1],t[2],n)}function w(t){return t}function v(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function x(t){return t[3]}function I(t){return t}function O(t,n,e,r){return(0,s.al)(t,n,e,r)}function S(t,n,e){if(null==n)return!1;if(!j(t,n,U))return!1;let{t0:r,t1:i}=U;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(e){const{origin:t,direction:i}=n;e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r}return!0}function V(t,n,e){const r=(0,f.zk)(n,e);if(!j(t,r,U))return[];const{origin:i,direction:c}=r,{t0:s,t1:l}=U,h=n=>{const e=(0,o.Ue)();return(0,u.b)(e,i,c,n),R(t,e,e)};return Math.abs(s-l)<(0,a.bn)()?[h(s)]:[h(s),h(l)]}const U={t0:0,t1:0};function j(t,n,e){const{origin:r,direction:i}=n,u=T;u[0]=r[0]-t[0],u[1]=r[1]-t[1],u[2]=r[2]-t[2];const o=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===o)return!1;const c=2*(i[0]*u[0]+i[1]*u[1]+i[2]*u[2]),s=c*c-4*o*(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]-t[3]*t[3]);if(s<0)return!1;const a=Math.sqrt(s);return e.t0=(-c-a)/(2*o),e.t1=(-c+a)/(2*o),!0}const T=(0,o.Ue)();function N(t,n){return S(t,n,null)}function q(t,n,e){const r=m.WM.get(),o=m.MP.get();(0,u.h)(r,n.origin,n.direction);const c=x(t);(0,u.h)(e,r,n.origin),(0,u.g)(e,e,1/(0,u.l)(e)*c);const s=L(t,n.origin),a=(0,d.EU)(n.origin,e);return(0,i.Us)(o,a+s,r),(0,u.t)(e,e,o),e}function A(t,n,e,r){const i=x(t),u=i*i,o=n+.5*Math.PI,c=e*e+u-2*Math.cos(o)*e*i,s=Math.sqrt(c),a=c-u;if(a<=0)return.5;const l=Math.sqrt(a),f=Math.acos(l/s)-Math.asin(i/(s/Math.sin(o)));return Math.min(1,(f+.5*r)/r)}function R(t,n,e){const r=(0,u.d)(m.WM.get(),n,t),i=(0,u.g)(m.WM.get(),r,t[3]/(0,u.l)(r));return(0,u.f)(e,i,t)}function E(t,n){const e=(0,u.d)(m.WM.get(),n,t),r=(0,u.k)(e),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))}function L(t,n){const e=(0,u.d)(m.WM.get(),n,t),i=(0,u.l)(e),o=x(t),c=o+Math.abs(o-i);return(0,r.ZF)(o/c)}const P=(0,o.Ue)();function C(t,n,e,r){const i=(0,u.d)(P,n,t);switch(e){case l.R.X:{const t=h(i,P)[2];return(0,u.i)(r,-Math.sin(t),Math.cos(t),0)}case l.R.Y:{const t=h(i,P),n=t[1],e=t[2],o=Math.sin(n);return(0,u.i)(r,-o*Math.cos(e),-o*Math.sin(e),Math.cos(n))}case l.R.Z:return(0,u.n)(r,i);default:return}}function F(t,n){const e=(0,u.d)(D,n,t);return(0,u.l)(e)-t[3]}function z(t,n){const e=(0,u.s)(t,n),r=x(t);return e<=r*r}function Z(t,n,e=(0,s.Ue)()){const r=(0,u.j)(t,n),i=t[3],o=n[3];return r+o<i?((0,c.c)(e,t),e):r+i<o?((0,c.c)(e,n),e):((0,u.m)(e,t,n,(r+o-i)/(2*r)),e[3]=(r+i+o)/2,e)}const D=(0,o.Ue)(),W=g(),G=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:p,altitudeAt:F,angleToSilhouette:L,axisAt:C,cameraFrustumCoverage:A,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return S(t,n,e)?e:((0,f.JI)(n,t,e),R(t,e,e))},closestPointOnSilhouette:q,containsPoint:z,copy:b,create:g,distanceToSilhouette:E,elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:y,exactEquals:M,fromCenterAndRadius:_,fromRadius:v,fromValues:O,getCenter:I,getExtent:function(t,n){return n},getRadius:x,intersectLine:V,intersectRay:S,intersectRayClosestSilhouette:function(t,n,e){if(S(t,n,e))return e;const r=q(t,n,m.WM.get());return(0,u.f)(e,n.origin,(0,u.g)(m.WM.get(),n.direction,(0,u.j)(n.origin,r)/(0,u.l)(n.direction))),e},intersectsRay:N,projectPoint:R,setAltitudeAt:function(t,n,e,r){const i=F(t,n),o=C(t,n,l.R.Z,D),c=(0,u.g)(D,o,e-i);return(0,u.f)(r,n,c)},setExtent:function(t,n,e){return t!==e&&b(t,e),e},tmpSphere:W,union:Z,wrap:w},Symbol.toStringTag,{value:"Module"}))},73749:function(t,n,e){e.d(n,{a:function(){return _},b:function(){return p},c:function(){return i},d:function(){return f},e:function(){return w},f:function(){return d},g:function(){return c},h:function(){return M},i:function(){return u},j:function(){return m},l:function(){return y},n:function(){return g},s:function(){return o},t:function(){return b},v:function(){return j}});var r=e(66130);function i(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function u(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function o(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t}function c(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t}function s(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function a(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function l(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function f(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function h(t,n){const e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(e*e+r*r+i*i+u*u)}function d(t,n){const e=n[0]-t[0],r=n[1]-t[1],i=n[2]-t[2],u=n[3]-t[3];return e*e+r*r+i*i+u*u}function m(t){const n=t[0],e=t[1],r=t[2],i=t[3];return Math.sqrt(n*n+e*e+r*r+i*i)}function p(t){const n=t[0],e=t[1],r=t[2],i=t[3];return n*n+e*e+r*r+i*i}function g(t,n){const e=n[0],r=n[1],i=n[2],u=n[3];let o=e*e+r*r+i*i+u*u;return o>0&&(o=1/Math.sqrt(o),t[0]=e*o,t[1]=r*o,t[2]=i*o,t[3]=u*o),t}function M(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function y(t,n,e,r){const i=n[0],u=n[1],o=n[2],c=n[3];return t[0]=i+r*(e[0]-i),t[1]=u+r*(e[1]-u),t[2]=o+r*(e[2]-o),t[3]=c+r*(e[3]-c),t}function b(t,n,e){const r=n[0],i=n[1],u=n[2],o=n[3];return t[0]=e[0]*r+e[4]*i+e[8]*u+e[12]*o,t[1]=e[1]*r+e[5]*i+e[9]*u+e[13]*o,t[2]=e[2]*r+e[6]*i+e[10]*u+e[14]*o,t[3]=e[3]*r+e[7]*i+e[11]*u+e[15]*o,t}function _(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function w(t,n){const e=t[0],i=t[1],u=t[2],o=t[3],c=n[0],s=n[1],a=n[2],l=n[3],f=(0,r.bn)();return Math.abs(e-c)<=f*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(u-a)<=f*Math.max(1,Math.abs(u),Math.abs(a))&&Math.abs(o-l)<=f*Math.max(1,Math.abs(o),Math.abs(l))}const v=s,x=a,I=l,O=h,S=d,V=m,U=p,j=Object.freeze(Object.defineProperty({__proto__:null,add:c,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},copy:i,copyVec3:u,dist:O,distance:h,div:I,divide:l,dot:M,equals:w,exactEquals:_,floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},len:V,length:m,lerp:y,max:function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},min:function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},mul:x,multiply:a,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},normalize:g,random:function(t,n=1){const e=r.FD;let i,u,o,c,s,a;do{i=2*e()-1,u=2*e()-1,s=i*i+u*u}while(s>=1);do{o=2*e()-1,c=2*e()-1,a=o*o+c*c}while(a>=1);const l=Math.sqrt((1-s)/a);return t[0]=n*i,t[1]=n*u,t[2]=n*o*l,t[3]=n*c*l,t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:f,scaleAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},set:o,sqrDist:S,sqrLen:U,squaredDistance:d,squaredLength:p,str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},sub:v,subtract:s,transformMat4:b,transformQuat:function(t,n,e){const r=n[0],i=n[1],u=n[2],o=e[0],c=e[1],s=e[2],a=e[3],l=a*r+c*u-s*i,f=a*i+s*r-o*u,h=a*u+o*i-c*r,d=-o*r-c*i-s*u;return t[0]=l*a+d*-o+f*-s-h*-c,t[1]=f*a+d*-c+h*-o-l*-s,t[2]=h*a+d*-s+l*-c-f*-o,t[3]=n[3],t}},Symbol.toStringTag,{value:"Module"}))},95437:function(t,n,e){e.d(n,{BV:function(){return a},Q4:function(){return s},c5:function(){return c},pE:function(){return i}});var r=e(99574);class i{constructor(t,n){this.min=t,this.max=n,this.range=n-t}normalize(t,n=0,e=!1){return u(this.range,this.min,this.max,t,n,e)}clamp(t,n=0){return(0,r.uZ)(t-n,this.min,this.max)+n}monotonic(t,n,e){return t<n?n:n+o(this.range,t-n,e)}minimalMonotonic(t,n,e){return u(this.range,t,t+this.range,n,e)}center(t,n,e){return n=this.monotonic(t,n,e),this.normalize((t+n)/2,e)}diff(t,n,e){return this.monotonic(t,n,e)-t}shortestSignedDiff(t,n){t=this.normalize(t);const e=(n=this.normalize(n))-t,r=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(e)<Math.abs(r)?e:r}contains(t,n,e){return n=this.minimalMonotonic(t,n),(e=this.minimalMonotonic(t,e))>t&&e<n}}function u(t,n,e,r,i=0,u=!1){return(r-=i)<n?r+=o(t,n-r):r>e&&(r-=o(t,r-e)),u&&r===e&&(r=n),r+i}function o(t,n,e=0){return Math.ceil((n-e)/t)*t+e}const c=new i(0,2*Math.PI),s=new i(-Math.PI,Math.PI),a=new i(0,360)},38949:function(t,n,e){e.d(n,{x:function(){return i}});var r=e(94413);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*u);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,u));t++)this._items.push(this._allocator())}}const u=1024},30748:function(t,n,e){function r(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function u(t,n,e,r,i,u,o,c,s){return[t,n,e,r,i,u,o,c,s]}e.d(n,{Ue:function(){return r},Wd:function(){return o},al:function(){return u},d9:function(){return i}});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,fromValues:u},Symbol.toStringTag,{value:"Module"}))},10934:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function u(t,n,e,r,i,u,o,c,s,a,l,f,h,d,m,p){return[t,n,e,r,i,u,o,c,s,a,l,f,h,d,m,p]}e.d(n,{Ue:function(){return r},Wd:function(){return o},al:function(){return u},d9:function(){return i}});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,fromValues:u},Symbol.toStringTag,{value:"Module"}))},21117:function(t,n,e){function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function u(t,n,e,r){return[t,n,e,r]}e.d(n,{Ue:function(){return r},Wd:function(){return o},al:function(){return u},d9:function(){return i}});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,fromValues:u},Symbol.toStringTag,{value:"Module"}))},41788:function(t,n,e){function r(){return[0,0]}function i(t){return[t[0],t[1]]}function u(t,n){return[t,n]}function o(t,n=[0,0]){const e=Math.min(2,t.length);for(let r=0;r<e;++r)n[r]=t[r];return n}function c(){return[0,0]}function s(){return u(1,1)}function a(){return u(1,0)}function l(){return u(0,1)}e.d(n,{AG:function(){return f},E9:function(){return d},IO:function(){return m},Ue:function(){return r},al:function(){return u},d9:function(){return i},hq:function(){return h},ll:function(){return c},nI:function(){return o}});const f=[0,0],h=s(),d=a(),m=l();Object.freeze(Object.defineProperty({__proto__:null,ONES:h,UNIT_X:d,UNIT_Y:m,ZEROS:f,clone:i,create:r,freeze:function(t,n){return[t,n]},fromArray:o,fromValues:u,ones:s,unitX:a,unitY:l,zeros:c},Symbol.toStringTag,{value:"Module"}))},27583:function(t,n,e){function r(){return[0,0,0,0]}function i(t){return[t[0],t[1],t[2],t[3]]}function u(t,n,e,r){return[t,n,e,r]}function o(t,n,e,r){return[t,n,e,r]}function c(t,n=[0,0,0,0]){const e=Math.min(4,t.length);for(let r=0;r<e;++r)n[r]=t[r];return n}function s(){return[0,0,0,0]}function a(){return u(1,1,1,1)}function l(){return u(1,0,0,0)}function f(){return u(0,1,0,0)}function h(){return u(0,0,1,0)}function d(){return u(0,0,0,1)}e.d(n,{AG:function(){return m},Ue:function(){return r},al:function(){return u},d9:function(){return i},hq:function(){return p},iU:function(){return a},nI:function(){return c},vV:function(){return o}});const m=[0,0,0,0],p=a(),g=l(),M=f(),y=h(),b=d();Object.freeze(Object.defineProperty({__proto__:null,ONES:p,UNIT_W:b,UNIT_X:g,UNIT_Y:M,UNIT_Z:y,ZEROS:m,clone:i,create:r,freeze:o,fromArray:c,fromValues:u,ones:a,unitW:d,unitX:l,unitY:f,unitZ:h,zeros:s},Symbol.toStringTag,{value:"Module"}))},96373:function(t,n,e){e.d(n,{Iu:function(){return f},Jp:function(){return l},U1:function(){return h},U_:function(){return s},XL:function(){return g},bA:function(){return d},en:function(){return m},f6:function(){return p},p4:function(){return c},t8:function(){return u},uj:function(){return a},xO:function(){return i},yR:function(){return o}});var r=e(66130);function i(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function u(t,n,e,r,i,u,o,c,s,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=u,t[5]=o,t[6]=c,t[7]=s,t[8]=a,t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function c(t,n){if(t===n){const e=n[1],r=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function s(t,n){const e=n[0],r=n[1],i=n[2],u=n[3],o=n[4],c=n[5],s=n[6],a=n[7],l=n[8],f=l*o-c*a,h=-l*u+c*s,d=a*u-o*s;let m=e*f+r*h+i*d;return m?(m=1/m,t[0]=f*m,t[1]=(-l*r+i*a)*m,t[2]=(c*r-i*o)*m,t[3]=h*m,t[4]=(l*e-i*s)*m,t[5]=(-c*e+i*u)*m,t[6]=d*m,t[7]=(-a*e+r*s)*m,t[8]=(o*e-r*u)*m,t):null}function a(t,n){const e=n[0],r=n[1],i=n[2],u=n[3],o=n[4],c=n[5],s=n[6],a=n[7],l=n[8];return t[0]=o*l-c*a,t[1]=i*a-r*l,t[2]=r*c-i*o,t[3]=c*s-u*l,t[4]=e*l-i*s,t[5]=i*u-e*c,t[6]=u*a-o*s,t[7]=r*s-e*a,t[8]=e*o-r*u,t}function l(t,n,e){const r=n[0],i=n[1],u=n[2],o=n[3],c=n[4],s=n[5],a=n[6],l=n[7],f=n[8],h=e[0],d=e[1],m=e[2],p=e[3],g=e[4],M=e[5],y=e[6],b=e[7],_=e[8];return t[0]=h*r+d*o+m*a,t[1]=h*i+d*c+m*l,t[2]=h*u+d*s+m*f,t[3]=p*r+g*o+M*a,t[4]=p*i+g*c+M*l,t[5]=p*u+g*s+M*f,t[6]=y*r+b*o+_*a,t[7]=y*i+b*c+_*l,t[8]=y*u+b*s+_*f,t}function f(t,n,e){const r=n[0],i=n[1],u=n[2],o=n[3],c=n[4],s=n[5],a=n[6],l=n[7],f=n[8],h=e[0],d=e[1];return t[0]=r,t[1]=i,t[2]=u,t[3]=o,t[4]=c,t[5]=s,t[6]=h*r+d*o+a,t[7]=h*i+d*c+l,t[8]=h*u+d*s+f,t}function h(t,n,e){const r=n[0],i=n[1],u=n[2],o=n[3],c=n[4],s=n[5],a=n[6],l=n[7],f=n[8],h=Math.sin(e),d=Math.cos(e);return t[0]=d*r+h*o,t[1]=d*i+h*c,t[2]=d*u+h*s,t[3]=d*o-h*r,t[4]=d*c-h*i,t[5]=d*s-h*u,t[6]=a,t[7]=l,t[8]=f,t}function d(t,n,e){const r=e[0],i=e[1],u=e[2];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=u*n[6],t[7]=u*n[7],t[8]=u*n[8],t}function m(t,n){const e=n[0],r=n[1],i=n[2],u=n[3],o=e+e,c=r+r,s=i+i,a=e*o,l=r*o,f=r*c,h=i*o,d=i*c,m=i*s,p=u*o,g=u*c,M=u*s;return t[0]=1-f-m,t[3]=l-M,t[6]=h+g,t[1]=l+M,t[4]=1-a-m,t[7]=d-p,t[2]=h-g,t[5]=d+p,t[8]=1-a-f,t}function p(t,n){const e=n[0],r=n[1],i=n[2],u=n[4],o=n[5],c=n[6],s=n[8],a=n[9],l=n[10],f=l*o-c*a,h=-l*u+c*s,d=a*u-o*s,m=e*f+r*h+i*d;if(!m)return null;const p=1/m;return t[0]=f*p,t[1]=(-l*r+i*a)*p,t[2]=(c*r-i*o)*p,t[3]=h*p,t[4]=(l*e-i*s)*p,t[5]=(-c*e+i*u)*p,t[6]=d*p,t[7]=(-a*e+r*s)*p,t[8]=(o*e-r*u)*p,t}function g(t,n){const e=n[0],r=n[1],i=n[2],u=n[3],o=n[4],c=n[5],s=n[6],a=n[7],l=n[8],f=n[9],h=n[10],d=n[11],m=n[12],p=n[13],g=n[14],M=n[15],y=e*c-r*o,b=e*s-i*o,_=e*a-u*o,w=r*s-i*c,v=r*a-u*c,x=i*a-u*s,I=l*p-f*m,O=l*g-h*m,S=l*M-d*m,V=f*g-h*p,U=f*M-d*p,j=h*M-d*g;let T=y*j-b*U+_*V+w*S-v*O+x*I;return T?(T=1/T,t[0]=(c*j-s*U+a*V)*T,t[1]=(s*S-o*j-a*O)*T,t[2]=(o*U-c*S+a*I)*T,t[3]=(i*U-r*j-u*V)*T,t[4]=(e*j-i*S+u*O)*T,t[5]=(r*S-e*U-u*I)*T,t[6]=(p*x-g*v+M*w)*T,t[7]=(g*_-m*x-M*b)*T,t[8]=(m*v-p*_+M*y)*T,t):null}function M(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}const y=l,b=M;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},adjoint:a,copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},determinant:function(t){const n=t[0],e=t[1],r=t[2],i=t[3],u=t[4],o=t[5],c=t[6],s=t[7],a=t[8];return n*(a*u-o*s)+e*(-a*i+o*c)+r*(s*i-u*c)},equals:function(t,n){const e=t[0],i=t[1],u=t[2],o=t[3],c=t[4],s=t[5],a=t[6],l=t[7],f=t[8],h=n[0],d=n[1],m=n[2],p=n[3],g=n[4],M=n[5],y=n[6],b=n[7],_=n[8],w=(0,r.bn)();return Math.abs(e-h)<=w*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(i-d)<=w*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-m)<=w*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(o-p)<=w*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(c-g)<=w*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(s-M)<=w*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(a-y)<=w*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-b)<=w*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-_)<=w*Math.max(1,Math.abs(f),Math.abs(_))},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},fromMat2d:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},fromMat4:i,fromQuat:m,fromRotation:function(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},identity:o,invert:s,isOrthoNormal:function(t){const n=(0,r.bn)(),e=t[0],i=t[1],u=t[2],o=t[3],c=t[4],s=t[5],a=t[6],l=t[7],f=t[8];return Math.abs(1-(e*e+o*o+a*a))<=n&&Math.abs(1-(i*i+c*c+l*l))<=n&&Math.abs(1-(u*u+s*s+f*f))<=n},mul:y,multiply:l,multiplyScalar:function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},multiplyScalarAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},normalFromMat4:g,normalFromMat4Legacy:p,projection:function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},rotate:h,scale:d,scaleByVec2:function(t,n,e){const r=e[0],i=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t},set:u,str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},sub:b,subtract:M,translate:f,transpose:c},Symbol.toStringTag,{value:"Module"}))},60199:function(t,n,e){e.d(n,{QZ:function(){return u},Rq:function(){return o},bg:function(){return i}});var r=e(59384);function i(t,n=!1){return t<=r.c8?n?new Array(t).fill(0):new Array(t):new Float64Array(t)}function u(t){return((0,r.fU)(t)?t.byteLength/8:t.length)<=r.c8?Array.from(t):new Float64Array(t)}function o(t,n,e){return Array.isArray(t)?t.slice(n,n+e):t.subarray(n,n+e)}},16447:function(t,n,e){e.d(n,{BD:function(){return O},Cb:function(){return w},FY:function(){return s},G1:function(){return g},G_:function(){return B},HH:function(){return f},I7:function(){return j},JR:function(){return C},KE:function(){return q},TC:function(){return d},Tn:function(){return R},Ue:function(){return o},VK:function(){return m},Wi:function(){return M},Ye:function(){return _},Zp:function(){return U},al:function(){return c},bA:function(){return N},bM:function(){return Y},bZ:function(){return F},be:function(){return x},bf:function(){return b},cS:function(){return L},cv:function(){return T},dp:function(){return I},eZ:function(){return l},fS:function(){return D},gy:function(){return G},is:function(){return z},kK:function(){return V},nX:function(){return h},op:function(){return A},pp:function(){return p},r3:function(){return S},re:function(){return W},sU:function(){return y},t8:function(){return E},wp:function(){return Z},wq:function(){return a},wz:function(){return v},y8:function(){return P}});var r=e(71354),i=e(47566),u=e(60199);function o(t=Y){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function c(t,n,e,r,i,u,c=o()){return c[0]=t,c[1]=n,c[2]=e,c[3]=r,c[4]=i,c[5]=u,c}function s(t,n=o()){return a(t,0,t.length/3,n)}function a(t,n,e,r=o()){return E(r,B),g(r,t,n,e),r}function l(t,n=(0,u.bg)(24)){const[e,r,i,o,c,s]=t;return n[0]=e,n[1]=r,n[2]=i,n[3]=e,n[4]=r,n[5]=s,n[6]=e,n[7]=c,n[8]=i,n[9]=e,n[10]=c,n[11]=s,n[12]=o,n[13]=r,n[14]=i,n[15]=o,n[16]=r,n[17]=s,n[18]=o,n[19]=c,n[20]=i,n[21]=o,n[22]=c,n[23]=s,n}function f(t,n){const e=isFinite(t[2])||isFinite(t[5]);return new r.Z(e?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:n}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:n})}function h(t,n,e=o()){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=n[0],e[4]=n[1],e[5]=n[2],e}function d(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[2]=Math.min(t[2],n[2]),t[3]=Math.max(t[3],n[3]),t[4]=Math.max(t[4],n[4]),t[5]=Math.max(t[5],n[5])}function m(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[3]=Math.max(t[3],n[2]),t[4]=Math.max(t[4],n[3])}function p(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[2]=Math.min(t[2],n[2]),t[3]=Math.max(t[3],n[0]),t[4]=Math.max(t[4],n[1]),t[5]=Math.max(t[5],n[2])}function g(t,n,e=0,r=n.length/3){let i=t[0],u=t[1],o=t[2],c=t[3],s=t[4],a=t[5];for(let t=0;t<r;t++)i=Math.min(i,n[e+3*t]),u=Math.min(u,n[e+3*t+1]),o=Math.min(o,n[e+3*t+2]),c=Math.max(c,n[e+3*t]),s=Math.max(s,n[e+3*t+1]),a=Math.max(a,n[e+3*t+2]);t[0]=i,t[1]=u,t[2]=o,t[3]=c,t[4]=s,t[5]=a}function M(t,n,e){const r=n.length;let i=t[0],u=t[1],o=t[2],c=t[3],s=t[4],a=t[5];if(e)for(let t=0;t<r;t++){const e=n[t];i=Math.min(i,e[0]),u=Math.min(u,e[1]),o=Math.min(o,e[2]),c=Math.max(c,e[0]),s=Math.max(s,e[1]),a=Math.max(a,e[2])}else for(let t=0;t<r;t++){const e=n[t];i=Math.min(i,e[0]),u=Math.min(u,e[1]),c=Math.max(c,e[0]),s=Math.max(s,e[1])}t[0]=i,t[1]=u,t[2]=o,t[3]=c,t[4]=s,t[5]=a}function y(t){for(let n=0;n<6;n++)if(!isFinite(t[n]))return!1;return!0}function b(t){return t[0]>=t[3]?0:t[3]-t[0]}function _(t){return t[1]>=t[4]?0:t[4]-t[1]}function w(t){return t[2]>=t[5]?0:t[5]-t[2]}function v(t){const n=b(t),e=w(t),r=_(t);return Math.sqrt(n*n+e*e+r*r)}function x(t,n=[0,0,0]){return n[0]=t[0]+b(t)/2,n[1]=t[1]+_(t)/2,n[2]=t[2]+w(t)/2,n}function I(t,n=[0,0,0]){return n[0]=b(t),n[1]=_(t),n[2]=w(t),n}function O(t,n){return n[0]>=t[0]&&n[1]>=t[1]&&n[2]>=t[2]&&n[0]<=t[3]&&n[1]<=t[4]&&n[2]<=t[5]}function S(t,n){return n[0]>=t[0]&&n[1]>=t[1]&&n[2]>=t[2]&&n[3]<=t[3]&&n[4]<=t[4]&&n[5]<=t[5]}function V(t,n){return Math.max(n[0],t[0])<=Math.min(n[3],t[3])&&Math.max(n[1],t[1])<=Math.min(n[4],t[4])&&Math.max(n[2],t[2])<=Math.min(n[5],t[5])}function U(t,n){return null==n||V(t,n)}function j(t,n,e){let r=0,i=1;for(let u=0;u<3;++u){const o=t[u],c=t[u+3],s=n[u],a=e[u],l=a<s,f=l?a:s,h=l?s:a,d=Math.max(o,f),m=Math.min(c,h);if(d>m)return!1;if(h===f)break;const p=h-f,g=(d-f)/p,M=(m-f)/p;if(r=Math.max(r,l?1-M:g),i=Math.min(i,l?1-g:M),r>i)return!1}return!0}function T(t,n,e,r,i=t){return i[0]=t[0]+n,i[1]=t[1]+e,i[2]=t[2]+r,i[3]=t[3]+n,i[4]=t[4]+e,i[5]=t[5]+r,i}function N(t,n,e=t){const r=t[0]+b(t)/2,i=t[1]+_(t)/2,u=t[2]+w(t)/2;return e[0]=r+(t[0]-r)*n,e[1]=i+(t[1]-i)*n,e[2]=u+(t[2]-u)*n,e[3]=r+(t[3]-r)*n,e[4]=i+(t[4]-i)*n,e[5]=u+(t[5]-u)*n,e}function q(t,n){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function A(t,n,e=t){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e!==t&&(e[3]=t[3],e[4]=t[4],e[5]=t[5]),e}function R(t,n,e=t){return e[3]=n[0],e[4]=n[1],e[5]=n[2],e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),t}function E(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function L(t){return t?E(t,B):o(B)}function P(t,n){return n||(n=(0,i.Ue)()),n[0]=t[0],n[1]=t[1],n[2]=t[3],n[3]=t[4],n}function C(t,n){return t[0]=n[0],t[1]=n[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=n[2],t[4]=n[3],t[5]=Number.POSITIVE_INFINITY,t}function F(t,n,e,r,i){return t[0]=n,t[1]=e,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=i,t[5]=Number.POSITIVE_INFINITY,t}function z(t){return 6===t.length}function Z(t){return 0===b(t)&&0===_(t)&&0===w(t)}function D(t,n,e){if(null==t||null==n)return t===n;if(!z(t)||!z(n))return!1;if(e){for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1}else for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function W(t,n,e,r,i,u){return c(t,n,e,r,i,u,k)}const G=[-1/0,-1/0,-1/0,1/0,1/0,1/0],B=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Y=[0,0,0,0,0,0],k=o()},12659:function(t,n,e){e.d(n,{JG:function(){return m},JI:function(){return y},Jk:function(){return M},Ue:function(){return l},_w:function(){return b},al:function(){return g},fS:function(){return h},re:function(){return d},zk:function(){return p}});var r=e(3480),i=e(38949),u=e(96373),o=e(30748),c=e(24910),s=e(82846),a=e(69811);function l(t){return t?f((0,s.d9)(t.origin),(0,s.d9)(t.direction)):f((0,s.Ue)(),(0,s.Ue)())}function f(t,n){return{origin:t,direction:n}}function h(t,n){return(0,r.fS)(t.origin,n.origin)&&(0,r.fS)(t.direction,n.direction)}function d(t,n){const e=_.get();return e.origin=t,e.direction=n,e}function m(t,n=l()){return g(t.origin,t.direction,n)}function p(t,n,e=l()){return(0,c.c)(e.origin,t),(0,c.d)(e.direction,n,t),e}function g(t,n,e=l()){return(0,c.c)(e.origin,t),(0,c.c)(e.direction,n),e}function M(t,n){const e=(0,c.h)(a.WM.get(),(0,c.n)(a.WM.get(),t.direction),(0,c.d)(a.WM.get(),n,t.origin));return(0,c.e)(e,e)}function y(t,n,e){const r=(0,c.e)(t.direction,(0,c.d)(e,n,t.origin));return(0,c.f)(e,t.origin,(0,c.g)(e,t.direction,r)),e}function b(t,n,e,r){const i=t.origin,o=n.origin,s=t.direction,a=n.direction,l=(0,c.e)((0,c.n)(v,s),(0,c.n)(x,a));if(Math.abs(l)>=1)return null;const f=(0,c.h)(v,s,a),h=(0,c.a)(w,o,i),d=(0,u.t8)(I,s[0],s[1],s[2],-a[0],-a[1],-a[2],f[0],f[1],f[2]),m=(0,u.U_)(I,d);if(null==m)return[e,r];const p=(0,c.e)((0,c.i)(v,m[0],m[3],m[6]),h),g=(0,c.e)((0,c.i)(x,m[1],m[4],m[7]),h);return(0,c.f)(e,i,(0,c.g)(w,s,p)),(0,c.f)(r,o,(0,c.g)(w,a,g)),[e,r]}const _=new i.x((()=>l())),w=(0,s.Ue)(),v=(0,s.Ue)(),x=(0,s.Ue)(),I=(0,o.Ue)()},63271:function(t,n,e){e.d(n,{EU:function(){return s},SR:function(){return c},cp:function(){return a},nF:function(){return o}});var r=e(99574),i=e(24910),u=e(82846);function o(t,n,e){const r=(0,i.e)(t,n)/(0,i.e)(t,t);return(0,i.g)(e,t,r)}function c(t,n){return(0,i.e)(t,n)/(0,i.l)(t)}function s(t,n){const e=(0,i.e)(t,n)/((0,i.l)(t)*(0,i.l)(n));return-(0,r.ZF)(e)}function a(t,n,e){(0,i.n)(l,t),(0,i.n)(f,n);const u=(0,i.e)(l,f),o=(0,r.ZF)(u),c=(0,i.h)(l,l,f);return(0,i.e)(c,e)<0?2*Math.PI-o:o}const l=(0,u.Ue)(),f=(0,u.Ue)()},69811:function(t,n,e){e.d(n,{MP:function(){return m},vD:function(){return p},qW:function(){return f},WM:function(){return h},o6:function(){return d}});e(61432);var r=e(94413),i=e(30748),u=e(10934),o=e(21117),c=e(41788),s=e(82846),a=e(27583);class l{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new l(c.Ue)}static createVec3f64(){return new l(s.Ue)}static createVec4f64(){return new l(a.Ue)}static createMat3f64(){return new l(i.Ue)}static createMat4f64(){return new l(u.Ue)}static createQuatf64(){return new l(o.Ue)}get test(){}}const f=l.createVec2f64(),h=l.createVec3f64(),d=l.createVec4f64(),m=(l.createMat3f64(),l.createMat4f64()),p=l.createQuatf64()},16814:function(t,n,e){e.r(n),e.d(n,{default:function(){return O}});var r=e(73440),i=e(34753),u=e(65475),o=e(3480),c=e(43254),s=e(41145),a=e(95437),l=e(99574),f=e(90403),h=e(17155),d=(e(61432),e(96711),e(48023)),m=e(71354),p=e(13132);const g=c.Z.ofType(i.Z);let M=class extends u.Z{constructor(t){super(t),this.type="viewshed",this._extent=null}initialize(){this.addHandles((0,f.YP)((()=>this._computeExtent()),(t=>{null==t.pending&&(this._extent=t.extent)}),f.tX))}get viewsheds(){return this._get("viewsheds")||new g}set viewsheds(t){this._set("viewsheds",(0,s.Z)(t,this.viewsheds,g))}get spatialReference(){for(const t of this.viewsheds)if(null!=t.observer)return t.observer.spatialReference;return null}get extent(){return this._extent}get valid(){return this.viewsheds.every((t=>t.valid))}async waitComputeExtent(){const t=this._computeExtent();null!=t.pending&&await t.pending}_computeExtent(){const{spatialReference:t}=this;if(null==t)return{pending:null,extent:null};const n=this.viewsheds.filter((t=>null!=t.observer)),e=n.map((t=>t.observer)).toArray(),r=(0,p.projectOrLoadMany)(e,t);return null!=r.pending?{pending:r.pending,extent:null}:{pending:null,extent:r.geometries.map(((t,e)=>{const r=n.at(e);return null!=t&&null!=r?this._computeViewshedExtent(this.viewsheds.at(e),t):null})).filter((t=>null!=t)).reduce(((t,n)=>function(t,n){return null==t?n:null==n?t:t.union(n)}(t,n)),null)}}_computeViewshedExtent(t,n){const{farDistance:e,heading:r,tilt:i,horizontalFieldOfView:u,verticalFieldOfView:o}=t,{spatialReference:c}=n,s=u/2,f=o/2,h=e/c.metersPerUnit,d=[a.BV.normalize(r-s),r,a.BV.normalize(r+s)],p=m.Z.fromPoint(n),g=t=>{const n=d.map((n=>a.BV.normalize(n-t)));if(n[0]>n[2]||360===u)return h;const e=n.map((t=>Math.abs(t>180?360-t:t))).reduce(((t,n)=>t>n?n:t));return e>90?0:h*Math.cos((0,l.Vl)(e))};p.xmax+=g(90),p.xmin-=g(-90),p.ymax+=g(0),p.ymin-=g(180);const M=n.z;if(null!=M){let t=M,n=M;const r=i-90,u=(0,l.uZ)(r+f,-90,90),o=(0,l.uZ)(r-f,-90,90),a=c?.isGeographic?e:h;t+=a*b(u),n+=a*b(o);const d=y(f)*a,m=b(r)*d*(1-y(s));i<90&&(t-=m),i>90&&(n-=m),p.zmax=Math.max(t,M),p.zmin=Math.min(n,M)}return p}equals(t){return this===t||super.equals(t)&&(0,o.fS)(this.viewsheds.toArray(),t.viewsheds.toArray(),((t,n)=>t.equals(n)))}clear(){this.viewsheds.removeAll()}};function y(t){return Math.cos((0,l.Vl)(t))}function b(t){return Math.sin((0,l.Vl)(t))}(0,r._)([(0,h.Cb)({type:["viewshed"]})],M.prototype,"type",void 0),(0,r._)([(0,h.Cb)({cast:s.R,type:g,nonNullable:!0})],M.prototype,"viewsheds",null),(0,r._)([(0,h.Cb)({readOnly:!0})],M.prototype,"spatialReference",null),(0,r._)([(0,h.Cb)()],M.prototype,"_extent",void 0),(0,r._)([(0,h.Cb)()],M.prototype,"extent",null),(0,r._)([(0,h.Cb)({readOnly:!0})],M.prototype,"valid",null),M=(0,r._)([(0,d.j)("esri.analysis.ViewshedAnalysis")],M);var _=e(84060),w=(e(83850),e(29884)),v=e(38209),x=e(85330);let I=class extends((0,x.q)((0,_.R)(v.Z))){constructor(t){super(t),this.type="viewshed",this.operationalLayerType="ViewshedLayer",this.source=new M,this.opacity=1}initialize(){this.addHandles((0,f.YP)((()=>this.source),((t,n)=>{null!=n&&n.parent===this&&(n.parent=null),null!=t&&(t.parent=this)}),f.tX))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(t){this.source===t&&(this.source=new M)}get analysis(){return this.source}set analysis(t){this.source=t}get viewsheds(){return this.source.viewsheds}set viewsheds(t){this.source.viewsheds=t}writeViewsheds(t,n,e,r){n.viewsheds=t.filter((t=>t.valid)).toJSON(r)}};(0,r._)([(0,h.Cb)({json:{read:!1},readOnly:!0})],I.prototype,"type",void 0),(0,r._)([(0,h.Cb)({type:["ViewshedLayer"]})],I.prototype,"operationalLayerType",void 0),(0,r._)([(0,h.Cb)({type:M,nonNullable:!0})],I.prototype,"source",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],I.prototype,"spatialReference",null),(0,r._)([(0,h.Cb)({readOnly:!0})],I.prototype,"fullExtent",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],I.prototype,"opacity",void 0),(0,r._)([(0,h.Cb)({type:["show","hide"]})],I.prototype,"listMode",void 0),(0,r._)([(0,h.Cb)({type:c.Z.ofType(i.Z),json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{ignoreOrigin:!0}}}}})],I.prototype,"viewsheds",null),(0,r._)([(0,w.c)("web-scene","viewsheds")],I.prototype,"writeViewsheds",null),I=(0,r._)([(0,d.j)("esri.layers.ViewshedLayer")],I);const O=I},94744:function(t,n,e){e.d(n,{A8:function(){return h},AK:function(){return o},BF:function(){return d},DI:function(){return a},GS:function(){return f},a8:function(){return c},f9:function(){return s},lt:function(){return l}});var r=e(32033),i=e(31856),u=e(19821);class o extends i.D{constructor(t,n,e,r){super(n,e),this.point=t,this.createGraphic=r}}function c(t){return(0,r.n)(t)&&t.intersector===u.q.PCL&&!!t.target}class s extends i.Z{constructor(t,n,e,r,i){super(t),this.layerViewUid=t,this.sublayerId=n,this.nodeIndex=e,this.componentIndex=r,this.triangleNr=i}}class a extends i.D{constructor(t,n,e){super(n,null),this.point=t,this.createVoxelGraphic=e}}class l extends i.D{constructor(t,n){super(t,null),this.createTiles3DGraphic=n}}function f(t){return(0,r.n)(t)&&t.intersector===u.q.I3S&&!!t.target}function h(t){return(0,r.n)(t)&&t.intersector===u.q.VOXEL&&!!t.target}function d(t){return(0,r.n)(t)&&t.intersector===u.q.TILES3D&&!!t.target}},38142:function(t,n,e){e.d(n,{T6:function(){return c},TX:function(){return o},j9:function(){return s}});var r=e(32033),i=e(31856),u=e(19821);function o(t){return(0,r.n)(t)&&t.intersector===u.q.TERRAIN&&!!t.target}class c extends i.D{constructor(t,n,e){super(t,n),this.triangleNr=e}}function s(t){return(0,r.n)(t)&&t.intersector===u.q.OVERLAY&&!!t.target}},92181:function(t,n,e){e.d(n,{i_:function(){return c},w0:function(){return s},Wd:function(){return a}});var r=e(82846),i=e(32033),u=e(19821);class o{constructor(t,n,e){this.object=t,this.geometryId=n,this.primitiveIndex=e}}class c extends i.x{constructor(){super(...arguments),this.intersector=u.q.HUD}}class s extends o{constructor(t,n){super(t.object,t.geometryId,t.primitiveIndex),this.center=(0,r.d9)(n)}}function a(t){return(0,i.n)(t)&&t.intersector===u.q.HUD&&!!t.target&&"center"in t.target}},61442:function(t,n,e){e.d(n,{e:function(){return i},o:function(){return r}});class r{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerViewUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}var i;!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(i||(i={}))},32033:function(t,n,e){e.d(n,{n:function(){return h},x:function(){return f}});var r=e(31865),i=e(10934),u=e(24910),o=e(82846),c=e(73749),s=e(27583),a=e(12659),l=e(19821);class f{get ray(){return this._ray}get distanceInRenderSpace(){return null==this.distance?null:((0,u.g)(d,this.ray.direction,this.distance),(0,u.l)(d))}withinDistance(t){return!!h(this)&&this.distanceInRenderSpace<=t}getIntersectionPoint(t){return!!h(this)&&((0,u.g)(d,this.ray.direction,this.distance),(0,u.f)(t,this.ray.origin,d),!0)}getTransformedNormal(t){return(0,u.c)(m,this.normal),m[3]=0,(0,c.t)(m,m,this.transformation),(0,u.c)(t,m),(0,u.n)(t,t)}constructor(t){this.intersector=l.q.OBJECT,this.normal=(0,o.Ue)(),this.transformation=(0,i.Ue)(),this._ray=(0,a.Ue)(),this.init(t)}init(t){this.distance=this.target=this.drapedLayerOrder=this.renderPriority=null,this.intersector=l.q.OBJECT,(0,a.JG)(t,this._ray)}set(t,n,e,c,s,a,l){this.intersector=t,this.distance=e,(0,u.c)(this.normal,c??o.eG),(0,r.JG)(this.transformation,s??i.Wd),this.target=n,this.drapedLayerOrder=a,this.renderPriority=l}copy(t){(0,a.JG)(t.ray,this._ray),this.intersector=t.intersector,this.distance=t.distance,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.renderPriority=t.renderPriority,(0,u.c)(this.normal,t.normal),(0,r.JG)(this.transformation,t.transformation)}}function h(t){return null!=t?.distance}const d=(0,o.Ue)(),m=(0,s.Ue)()},31856:function(t,n,e){e.d(n,{D:function(){return i},Z:function(){return r}});class r{constructor(t){this.layerViewUid=t}}class i extends r{constructor(t,n){super(t),this.graphicUid=n}}},19821:function(t,n,e){var r;e.d(n,{q:function(){return r}}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(r||(r={}))},90189:function(t,n,e){e.d(n,{VB:function(){return _},_s:function(){return w},tB:function(){return p},bK:function(){return g},J4:function(){return m}});var r=e(31865),i=e(82846),u=e(16447),o=e(69055),c=e(94744),s=e(38142),a=e(92181),l=e(32033),f=e(19821);function h(t){return(0,l.n)(t)&&t.intersector===f.q.OBJECT&&!!t.target}var d=e(32176);function m(t,n){return h(t)||(0,a.Wd)(t)?b(t.target?.object,n):(0,s.TX)(t)?n.map?.ground:(0,c.a8)(t)||(0,c.GS)(t)||(0,s.j9)(t)||(0,c.A8)(t)?b(t.target,n):null}function p(t,n){const e=g(t,n);return"graphic"===e?.type?e.graphic:null}function g(t,n,e={}){if(null==t)return null;if(h(t)||(0,a.Wd)(t))return M(t.target?.object,n,e);if((0,c.a8)(t)){const n=t.target.createGraphic();return{type:"graphic",graphic:n,layer:n.layer}}if((0,c.A8)(t)){const n=t.target.createVoxelGraphic();return{type:"graphic",graphic:n,layer:n.layer}}if((0,c.BF)(t)){const n=t.target.createTiles3DGraphic();return{type:"graphic",graphic:n,layer:n.layer}}return(0,s.j9)(t)||(0,d.w)(t)?M(t.target,n,e):(0,c.GS)(t)?function(t,n,e){const r=b(t,n);if(null==r)return null;const i=n.allLayerViews.find((t=>t.layer===r));if(!i||i.suspended||!("getGraphicFromIntersectorTarget"in i))return null;const u=e.defer;return y(i.getGraphicFromIntersectorTarget(t,{defer:u?async t=>u((async()=>y(await t()))):void 0}))}(t.target,n,e):null}function M(t,n,e){if(null==t?.graphicUid)return null;const r=b(t,n);if(null==r)return null;if(r===n.graphics)return null==n.graphicsView||"number"!=typeof t.graphicUid?null:n.graphicsView.getHit(t.graphicUid,e);const i=n.allLayerViews.find((t=>t.layer===r));return!i||i.suspended||null==t.graphicUid?null:"getHit"in i?i.getHit(t.graphicUid,e):null}function y(t){return null!=t?{type:"graphic",graphic:t,layer:t.layer}:null}function b(t,n){return null==t?.layerViewUid?null:null!=n.graphicsView&&t.layerViewUid===n.graphicsView.uid?n.graphics:n.allLayerViews.find((n=>n.uid===t.layerViewUid))?.layer}function _(t,n){if(h(t)||(0,a.Wd)(t))return(0,o.g)(t.target.object.boundingVolumeWorldSpace.bounds);if((0,d.w)(t)){(0,r.yZ)(v,t.transformation);const n=Math.max(v[0],v[1],v[2]);return t.target.baseBoundingSphere.radius*n}if((0,c.GS)(t)){const e=function(t,n){const e=b(t,n);if(null==e)return null;const r=n.allLayerViews.find((t=>t.layer===e));return r&&!r.suspended&&"getAABBFromIntersectorTarget"in r?r.getAABBFromIntersectorTarget(t):null}(t.target,n);return e?.5*(0,u.wz)(e):null}return null}function w(t){return!h(t)&&!(0,a.Wd)(t)&&((0,d.w)(t)?t.target.numLodLevels>1:!!(0,c.GS)(t))}const v=(0,i.Ue)()},32176:function(t,n,e){e.d(n,{w:function(){return c},x:function(){return o}});var r=e(32033),i=e(31856),u=e(19821);class o extends i.D{constructor(t,n,e,r,i){super(t,n),this.layerViewUid=t,this.graphicUid=n,this.triangleNr=e,this.baseBoundingSphere=r,this.numLodLevels=i}}function c(t){return(0,r.n)(t)&&t.intersector===u.q.LOD&&!!t.target}}}]);