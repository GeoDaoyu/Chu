"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58217],{43989:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(48316),i=t(45323),c=t(19960),a=t(73193),u=t.n(a),o=t(95051),s=t(44194),l={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M548 818v126a16 16 0 01-16 16h-40a16 16 0 01-16-16V818c15.85 1.64 27.84 2.46 36 2.46 8.15 0 20.16-.82 36-2.46m205.25-115.66l89.1 89.1a16 16 0 010 22.62l-28.29 28.29a16 16 0 01-22.62 0l-89.1-89.1c12.37-10.04 21.43-17.95 27.2-23.71 5.76-5.77 13.67-14.84 23.71-27.2m-482.5 0c10.04 12.36 17.95 21.43 23.71 27.2 5.77 5.76 14.84 13.67 27.2 23.71l-89.1 89.1a16 16 0 01-22.62 0l-28.29-28.29a16 16 0 010-22.63zM512 278c129.24 0 234 104.77 234 234S641.24 746 512 746 278 641.24 278 512s104.77-234 234-234m0 72c-89.47 0-162 72.53-162 162s72.53 162 162 162 162-72.53 162-162-72.53-162-162-162M206 476c-1.64 15.85-2.46 27.84-2.46 36 0 8.15.82 20.16 2.46 36H80a16 16 0 01-16-16v-40a16 16 0 0116-16zm738 0a16 16 0 0116 16v40a16 16 0 01-16 16H818c1.64-15.85 2.46-27.84 2.46-36 0-8.15-.82-20.16-2.46-36zM814.06 180.65l28.29 28.29a16 16 0 010 22.63l-89.1 89.09c-10.04-12.37-17.95-21.43-23.71-27.2-5.77-5.76-14.84-13.67-27.2-23.71l89.1-89.1a16 16 0 0122.62 0m-581.5 0l89.1 89.1c-12.37 10.04-21.43 17.95-27.2 23.71-5.76 5.77-13.67 14.84-23.71 27.2l-89.1-89.1a16 16 0 010-22.62l28.29-28.29a16 16 0 0122.62 0M532 64a16 16 0 0116 16v126c-15.85-1.64-27.84-2.46-36-2.46-8.15 0-20.16.82-36 2.46V80a16 16 0 0116-16z"}}]},name:"sun",theme:"outlined"},f=t(43638),d=function(e,n){return s.createElement(f.Z,(0,o.Z)({},e,{ref:n,icon:l}))};var v=s.forwardRef(d),h=t(45703),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},x=function(e,n){return s.createElement(f.Z,(0,o.Z)({},e,{ref:n,icon:m}))};var y=s.forwardRef(x),j=t(8588),p=t(31549),Z=function(e){return[{key:"1",title:"日照分析",avatar:(0,p.jsx)(v,{}),description:"我是日照分析",component:(0,p.jsx)(j.hw,u()({},e))},{key:"2",title:"视线分析",avatar:(0,p.jsx)(h.Z,{}),description:"我是视线分析",component:(0,p.jsx)(j.zI,u()({},e))},{key:"3",title:"视域分析",avatar:(0,p.jsx)(y,{}),description:"我是视域分析",component:void 0}]},g={left:"left___s82D3",right:"right___FwZEY"},k=function(){var e=(0,r.No)((function(e){return e.view})),n=Z({view:e});return(0,p.jsxs)("div",{className:g.container,children:[(0,p.jsx)("div",{className:g.left,children:(0,p.jsx)(c.Z,{gap:"large",vertical:!0})}),(0,p.jsx)("div",{className:g.right,children:(0,p.jsx)(c.Z,{gap:"large",vertical:!0,children:(0,p.jsx)(i.s_,{title:"空间分析",children:(0,p.jsx)(i.Gv,{dataSource:n})})})})]})}},48316:function(e,n,t){t.d(n,{bh:function(){return i},No:function(){return c},kZ:function(){return u}});var r=t(25480);const i=e=>({checkedKeys:[],setCheckedKeys:n=>e({checkedKeys:n})});(0,r.U)(i);var c=(0,r.U)((e=>({view:null,initialize:n=>e({view:n})}))),a=t(70728);var u=(e,n)=>(0,r.U)((0,a.Z)(...n)(e))},45323:function(e,n,t){t.d(n,{Gv:function(){return h},s_:function(){return y},o8:function(){return g}});var r=t(45332),i=t.n(r),c=t(44194),a=t(24462),u=t(67984),o=t(4925),s=t(31549),l=function(e){var n=e.dataSource,t=e.goTo;return(0,s.jsx)(u.Z,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){var n=e.avatar,r=e.title,i=e.description,c=e.component;return(0,s.jsx)(u.Z.Item,{actions:[(0,s.jsx)(o.ZP,{type:"link",icon:(0,s.jsx)(a.Z,{}),iconPosition:"end",disabled:!c,onClick:function(){return t(c)},children:"立即使用"},"link")],children:(0,s.jsx)(u.Z.Item.Meta,{avatar:n,title:r,description:i})})}})},f=t(55447),d=function(e){var n=e.goBack,t=e.children;return(0,s.jsxs)("div",{children:[(0,s.jsx)(o.ZP,{type:"link",icon:(0,s.jsx)(f.Z,{}),onClick:n,children:"返回"}),t]})},v="container___PuJI4",h=function(e){var n=e.dataSource,t=(0,c.useState)(),r=i()(t,2),a=r[0],u=r[1];return(0,s.jsx)("div",{className:v,children:a?(0,s.jsx)(d,{goBack:function(){return u(null)},children:a}):(0,s.jsx)(l,{dataSource:n,goTo:u})})},m=t(86415),x=t(51282),y=function(e){var n=e.title,t=void 0===n?"":n,r=e.children;return(0,s.jsx)(m.Z,{title:t,children:r||(0,s.jsx)(x.Z,{description:!1})})},j=t(73193),p=t.n(j),Z=t(53698),g=function(e){var n=e.dataSource,t=e.insetInlineEnd,r=void 0===t?20:t;return(0,s.jsx)(Z.Z.Group,{shape:"square",style:{insetInlineEnd:r},children:n.map((function(e){return(0,s.jsx)(Z.Z,p()({},e),e.name)}))})}},8588:function(e,n,t){t.d(n,{Kh:function(){return je},hw:function(){return c},VO:function(){return a},PI:function(){return ee},De:function(){return ne},zI:function(){return re},AA:function(){return ue},vi:function(){return oe},yO:function(){return se},Dt:function(){return me},R$:function(){return q},vm:function(){return k}});t(97017);var r=t(44194),i=t(31549),c=function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.lighting.clone();return function(){n.environment.lighting=e}}),[n]),(0,i.jsx)("arcgis-daylight",{"reference-element":"view"})},a=(t(2814),function(){return(0,i.jsx)("arcgis-layer-list",{"reference-element":"view"})}),u=t(76711),o=t.n(u),s=t(73193),l=t.n(s),f=t(84176),d=t.n(f),v=t(45332),h=t.n(v),m=t(88753),x=t(36066),y=t(73917),j=t(51341),p=["title","key","children"],Z=x.Z.Search,g=y.Z.Text,k=function(e){return function(n){var t=n.treeData,c=n.getLayerInfo,a=(0,r.useState)([]),u=h()(a,2),s=u[0],f=u[1],v=(0,r.useState)(""),x=h()(v,2),y=x[0],k=x[1],w=(0,r.useState)(!0),I=h()(w,2),C=I[0],E=I[1],S=(0,r.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.title,r=n.key,c=n.children,a=d()(n,p),u=t.indexOf(y),o=t.substring(0,u),s=t.slice(u+y.length),f=u>-1?(0,i.jsx)(j.Z,{children:(0,i.jsxs)("span",{children:[o,(0,i.jsx)(g,{type:"danger",children:y}),s]})}):(0,i.jsx)(j.Z,{children:(0,i.jsx)("span",{children:t})});return c?l()(l()({},a),{},{title:f,key:r,children:e(c)}):l()(l()({},a),{},{title:f,key:r})}))}(t)}),[t,y]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(Z,{placeholder:"请输入关键词搜索",onChange:function(e){var n=e.target.value,r=[];if((0,m.Z)(n))return f(r),k(n),void E(!0);t.forEach((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(t.title.includes(n)&&r.push(i),t.children&&t.children.forEach((function(n){return e(n,t.key)})))})),f(r),k(n),E(!0)}}),(0,i.jsx)(e,{treeData:S,getLayerInfo:c,onSelect:function(e,n){var t=n.node,r=s.includes(t.key)?s.filter((function(e){return e!==t.key})):[].concat(o()(s),[t.key]);f(r)},onExpand:function(e){f(e),E(!1)},expandedKeys:s,autoExpandParent:C})]})}},w=t(98330),I=t(32499),C=t(28833),E=t(39762),S=t(60711),b=t(88763),_=function(){var e=[{label:"收藏",icon:(0,i.jsx)(E.Z,{}),key:"favorite",onClick:function(){I.ZP.success("收藏成功")}},{label:"删除",icon:(0,i.jsx)(S.Z,{}),key:"delete",onClick:function(){I.ZP.success("删除")}}];return(0,i.jsx)(C.Z,{menu:{items:e},children:(0,i.jsx)(b.Z,{})})},z=t(38209),L=t(59876),P=t(47635),M=t(53447),D=t(27998),K=t(91829),N=t(43141),B=t(57040),R=t(59259),A=t(80379);const T=new Map([["feature",L.default],["geojson",P.default],["graphics",M.Z],["imagery",D.default],["imagery-tile",K.default],["integrated-mesh-3d-tiles",N.default],["map-image",B.default],["tile",R.default],["vector-tile",A.default]]);var G=({type:e,...n})=>new(T.get(e))(n),O=t(43909),U=t(90602),V=t(47307);var F=t(48316),H="container___Az_tF",Y=["children","key"],q=function(e){return function(n){var t=n.treeData,c=n.getLayerInfo,a=(0,F.No)((function(e){return e.view})),u=(0,r.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.children,r=n.key,c=d()(n,Y),u=t&&t.length?null:(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(w.Z,{onClick:function(e){e.stopPropagation(),((e,n)=>{const t=e.map.findLayerById(n);t&&e.goTo(t.fullExtent)})(a,r)}}),(0,i.jsx)(_,{})]});return u?l()(l()({},c),{},{key:r,isLeaf:!0,icon:u}):l()(l()({},c),{},{key:r,isLeaf:!1,children:e(t)})}))}(t)}),[t,a]);return(0,i.jsx)("div",{className:H,children:(0,i.jsx)(e,{treeData:u,getLayerInfo:c,showIcon:!0,blockNode:!0})})}},J=t(52362);const{view:$}=F.No.getState();var Q=e=>n=>(t,r,i)=>n(((...n)=>{const[{checkedKeys:i}]=n;if(i){const{checkedKeys:n}=r(),t=(0,J.Z)(i,n),c=(0,J.Z)(n,i);t.forEach((n=>{if(!((e,n)=>!!e.map.findLayerById(n))($,n)){const t=e(n);(async(e,n)=>{if(!n)return;const{key:t,url:r,type:i,...c}=n,a=(0,O.Z)([[(0,U.Z)("type"),()=>G({id:t,...n})],[(0,U.Z)("url"),()=>z.Z.fromArcGISServerUrl({url:r,properties:{id:t,...c}})],[V.Z,()=>new z.Z({id:t,...c})]])(n);e.map.add(a)})($,t)}})),c.forEach((e=>((e,n)=>{const t=e.map.findLayerById(n);e.map.remove(t)})($,e)))}t(...n)}),r,i),W=t(82534),X=["treeData","getLayerInfo"],ee=function(e){var n=e.treeData,t=e.getLayerInfo,c=d()(e,X),a=(0,r.useMemo)((function(){return(0,F.kZ)(F.bh,[Q(t)])}),[t])(),u=a.checkedKeys,o=a.setCheckedKeys;return(0,i.jsx)(W.Z,l()(l()({},c),{},{checkable:!0,onCheck:function(e){o(e)},checkedKeys:u,treeData:n}))},ne=(t(81714),function(){return(0,i.jsx)("arcgis-legend",{"reference-element":"view"})}),te=t(73577),re=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)();return(0,r.useEffect)((function(){return t.current&&(c.current=new te.Z({view:n,container:t.current})),function(){c.current&&c.current.destroy()}}),[n]),(0,i.jsx)("div",{ref:t})},ie=t(59958),ce=t(19960),ae=t(4925),ue=function(e){var n=e.view,t=e.mediaLayerConfig,c=(0,r.useRef)(null);(0,r.useEffect)((function(){return c.current=new ie.default(t),n.map.add(c.current),function(){n.map.remove(c.current)}}),[n,t]);return(0,i.jsxs)(ce.Z,{vertical:!0,gap:"middle",children:[(0,i.jsx)(ae.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!0},children:"显示视频"}),(0,i.jsx)(ae.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!1},children:"隐藏视频"})]})},oe=(t(53553),function(){return(0,i.jsx)("arcgis-sketch",{"reference-element":"view"})}),se=(t(47692),function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.weather.clone();return function(){n.environment.weather=e}}),[n]),(0,i.jsx)("arcgis-weather",{"reference-element":"view"})}),le=t(8444),fe=t(75259),de=t(90403),ve=t(93427),he=y.Z.Text,me=function(e){var n=e.view,t=n.zoom,c=(0,r.useState)(Math.round(t)),a=h()(c,2),u=a[0],o=a[1],s=(0,r.useRef)(new ve.Z({view:n}));return(0,r.useEffect)((function(){(0,de.YP)((function(){return n.zoom}),(function(e){o(Math.round(e))}))}),[n]),(0,i.jsxs)(ce.Z,{justify:"space-between",align:"center",children:[(0,i.jsxs)(he,{children:["层级:",u]}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(ae.ZP,{type:"primary",icon:(0,i.jsx)(le.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomIn()}}),(0,i.jsx)(ae.ZP,{type:"primary",icon:(0,i.jsx)(fe.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomOut()}})]})]})},xe=t(24858),ye=t(70765),je=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)(),a=(0,ye.useAccess)();return(0,r.useEffect)((function(){return t.current&&(c.current=new xe.Z({view:n,container:t.current,visibleElements:{settingsButton:a.canSeeAdmin,captureButton:a.canSeeAdmin}})),function(){c.current&&c.current.destroy()}}),[n,a]),(0,i.jsx)("div",{ref:t})}}}]);