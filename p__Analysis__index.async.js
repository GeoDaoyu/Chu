"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58217],{43989:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(48316),i=t(45323),c=t(19960),a=t(73193),u=t.n(a),o=t(95051),s=t(44194),l={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M548 818v126a16 16 0 01-16 16h-40a16 16 0 01-16-16V818c15.85 1.64 27.84 2.46 36 2.46 8.15 0 20.16-.82 36-2.46m205.25-115.66l89.1 89.1a16 16 0 010 22.62l-28.29 28.29a16 16 0 01-22.62 0l-89.1-89.1c12.37-10.04 21.43-17.95 27.2-23.71 5.76-5.77 13.67-14.84 23.71-27.2m-482.5 0c10.04 12.36 17.95 21.43 23.71 27.2 5.77 5.76 14.84 13.67 27.2 23.71l-89.1 89.1a16 16 0 01-22.62 0l-28.29-28.29a16 16 0 010-22.63zM512 278c129.24 0 234 104.77 234 234S641.24 746 512 746 278 641.24 278 512s104.77-234 234-234m0 72c-89.47 0-162 72.53-162 162s72.53 162 162 162 162-72.53 162-162-72.53-162-162-162M206 476c-1.64 15.85-2.46 27.84-2.46 36 0 8.15.82 20.16 2.46 36H80a16 16 0 01-16-16v-40a16 16 0 0116-16zm738 0a16 16 0 0116 16v40a16 16 0 01-16 16H818c1.64-15.85 2.46-27.84 2.46-36 0-8.15-.82-20.16-2.46-36zM814.06 180.65l28.29 28.29a16 16 0 010 22.63l-89.1 89.09c-10.04-12.37-17.95-21.43-23.71-27.2-5.77-5.76-14.84-13.67-27.2-23.71l89.1-89.1a16 16 0 0122.62 0m-581.5 0l89.1 89.1c-12.37 10.04-21.43 17.95-27.2 23.71-5.76 5.77-13.67 14.84-23.71 27.2l-89.1-89.1a16 16 0 010-22.62l28.29-28.29a16 16 0 0122.62 0M532 64a16 16 0 0116 16v126c-15.85-1.64-27.84-2.46-36-2.46-8.15 0-20.16.82-36 2.46V80a16 16 0 0116-16z"}}]},name:"sun",theme:"outlined"},f=t(43638),d=function(e,n){return s.createElement(f.Z,(0,o.Z)({},e,{ref:n,icon:l}))};var v=s.forwardRef(d),h=t(45703),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},x=function(e,n){return s.createElement(f.Z,(0,o.Z)({},e,{ref:n,icon:m}))};var p=s.forwardRef(x),j=t(43214),y=t(31549),Z=function(e){return[{key:"1",title:"日照分析",avatar:(0,y.jsx)(v,{}),description:"我是日照分析",component:(0,y.jsx)(j.hw,u()({},e))},{key:"2",title:"视线分析",avatar:(0,y.jsx)(h.Z,{}),description:"我是视线分析",component:(0,y.jsx)(j.zI,u()({},e))},{key:"3",title:"视域分析",avatar:(0,y.jsx)(p,{}),description:"我是视域分析",component:void 0}]},g={left:"left___s82D3",right:"right___FwZEY"},k=function(){var e=(0,r.No)((function(e){return e.view})),n=Z({view:e});return(0,y.jsxs)("div",{className:g.container,children:[(0,y.jsx)("div",{className:g.left,children:(0,y.jsx)(c.Z,{gap:"large",vertical:!0})}),(0,y.jsx)("div",{className:g.right,children:(0,y.jsx)(c.Z,{gap:"large",vertical:!0,children:(0,y.jsx)(i.s_,{title:"空间分析",children:(0,y.jsx)(i.Gv,{dataSource:n})})})})]})}},48316:function(e,n,t){t.d(n,{bh:function(){return i},No:function(){return c},kZ:function(){return u}});var r=t(25480);const i=e=>({checkedKeys:[],setCheckedKeys:n=>e({checkedKeys:n})});(0,r.U)(i);var c=(0,r.U)((e=>({view:null,initialize:n=>e({view:n})}))),a=t(70728);var u=(e,n)=>(0,r.U)((0,a.Z)(...n)(e))},45323:function(e,n,t){t.d(n,{Gv:function(){return h},s_:function(){return p},o8:function(){return g}});var r=t(45332),i=t.n(r),c=t(44194),a=t(24462),u=t(67984),o=t(33273),s=t(31549),l=function(e){var n=e.dataSource,t=e.goTo;return(0,s.jsx)(u.Z,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){var n=e.avatar,r=e.title,i=e.description,c=e.component;return(0,s.jsx)(u.Z.Item,{actions:[(0,s.jsx)(o.ZP,{type:"link",icon:(0,s.jsx)(a.Z,{}),iconPosition:"end",disabled:!c,onClick:function(){return t(c)},children:"立即使用"},"link")],children:(0,s.jsx)(u.Z.Item.Meta,{avatar:n,title:r,description:i})})}})},f=t(55447),d=function(e){var n=e.goBack,t=e.children;return(0,s.jsxs)("div",{children:[(0,s.jsx)(o.ZP,{type:"link",icon:(0,s.jsx)(f.Z,{}),onClick:n,children:"返回"}),t]})},v="container___PuJI4",h=function(e){var n=e.dataSource,t=(0,c.useState)(),r=i()(t,2),a=r[0],u=r[1];return(0,s.jsx)("div",{className:v,children:a?(0,s.jsx)(d,{goBack:function(){return u(null)},children:a}):(0,s.jsx)(l,{dataSource:n,goTo:u})})},m=t(86415),x=t(51282),p=function(e){var n=e.title,t=void 0===n?"":n,r=e.children;return(0,s.jsx)(m.Z,{title:t,children:r||(0,s.jsx)(x.Z,{description:!1})})},j=t(73193),y=t.n(j),Z=t(53698),g=function(e){var n=e.dataSource,t=e.insetInlineEnd,r=void 0===t?20:t;return(0,s.jsx)(Z.Z.Group,{shape:"square",style:{insetInlineEnd:r},children:n.map((function(e){return(0,s.jsx)(Z.Z,y()({},e),e.name)}))})}},43214:function(e,n,t){t.d(n,{Kh:function(){return ne},hw:function(){return c},VO:function(){return a},PI:function(){return L},De:function(){return A},zI:function(){return G},AA:function(){return V},vi:function(){return H},yO:function(){return Y},Dt:function(){return X}});t(97017);var r=t(44194),i=t(31549),c=function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.lighting.clone();return function(){n.environment.lighting=e}}),[n]),(0,i.jsx)("arcgis-daylight",{"reference-element":"view"})},a=(t(2814),function(){return(0,i.jsx)("arcgis-layer-list",{"reference-element":"view"})}),u=t(76711),o=t.n(u),s=t(45332),l=t.n(s),f=t(52362),d=t(38209),v=t(59876),h=t(47635),m=t(53447),x=t(27998),p=t(91829),j=t(43141),y=t(57040),Z=t(59259),g=t(80379);const k=new Map([["feature",v.default],["geojson",h.default],["graphics",m.Z],["imagery",x.default],["imagery-tile",p.default],["integrated-mesh-3d-tiles",j.default],["map-image",y.default],["tile",Z.default],["vector-tile",g.default]]);var w=({type:e,...n})=>new(k.get(e))(n),S=t(43909),E=t(90602),b=t(47307);var C=t(48316);const{view:I}=C.No.getState();var z=e=>n=>(t,r,i)=>n(((...n)=>{const[{checkedKeys:i}]=n;if(i){const{checkedKeys:n}=r(),t=(0,f.Z)(i,n),c=(0,f.Z)(n,i);t.forEach((n=>{if(!((e,n)=>!!e.map.findLayerById(n))(I,n)){const t=e(n);(async(e,n)=>{if(!n)return;const{key:t,url:r,type:i,...c}=n,a=(0,S.Z)([[(0,E.Z)("type"),()=>w({id:t,...n})],[(0,E.Z)("url"),()=>d.Z.fromArcGISServerUrl({url:r,properties:{id:t,...c}})],[b.Z,()=>new d.Z({id:t,...c})]])(n);e.map.add(a)})(I,t)}})),c.forEach((e=>((e,n)=>{const t=e.map.findLayerById(n);e.map.remove(t)})(I,e)))}t(...n)}),r,i),M=t(88753),P=t(36066),_=t(73917),K=t(51341),B=t(82534),N=P.Z.Search,R=_.Z.Text,L=function(e){var n=e.treeData,t=e.getLayerInfo,c=(0,r.useMemo)((function(){return(0,C.kZ)(C.bh,[z(t(n))])}),[n,t])(),a=c.checkedKeys,u=c.setCheckedKeys,s=(0,r.useState)([]),f=l()(s,2),d=f[0],v=f[1],h=(0,r.useState)(""),m=l()(h,2),x=m[0],p=m[1],j=(0,r.useState)(!0),y=l()(j,2),Z=y[0],g=y[1],k=(0,r.useMemo)((function(){return function e(n){return n.map((function(n){var t=n.title,r=t.indexOf(x),c=t.substring(0,r),a=t.slice(r+x.length),u=r>-1?(0,i.jsx)(K.Z,{children:(0,i.jsxs)("span",{children:[c,(0,i.jsx)(R,{type:"danger",children:x}),a]})}):(0,i.jsx)(K.Z,{children:(0,i.jsx)("span",{children:t})});return n.children?{title:u,key:n.key,children:e(n.children)}:{title:u,key:n.key,isLeaf:!0}}))}(n)}),[n,x]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(N,{placeholder:"请输入关键词搜索",onChange:function(e){var t=e.target.value,r=[];if((0,M.Z)(t))return v(r),p(t),void g(!0);n.forEach((function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n&&(n.title.includes(t)&&r.push(i),n.children&&n.children.forEach((function(t){return e(t,n.key)})))})),v(r),p(t),g(!0)}}),(0,i.jsx)(B.Z,{checkable:!0,showIcon:!0,blockNode:!0,onSelect:function(e,n){var t=n.node,r=d.includes(t.key)?d.filter((function(e){return e!==t.key})):[].concat(o()(d),[t.key]);v(r)},onCheck:function(e){u(e)},checkedKeys:a,onExpand:function(e){v(e),g(!1)},expandedKeys:d,autoExpandParent:Z,treeData:k})]})},A=(t(81714),function(){return(0,i.jsx)("arcgis-legend",{"reference-element":"view"})}),D=t(73577),G=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)();return(0,r.useEffect)((function(){return t.current&&(c.current=new D.Z({view:n,container:t.current})),function(){c.current&&c.current.destroy()}}),[n]),(0,i.jsx)("div",{ref:t})},O=t(59958),T=t(19960),U=t(33273),V=function(e){var n=e.view,t=e.mediaLayerConfig,c=(0,r.useRef)(null);(0,r.useEffect)((function(){return c.current=new O.default(t),n.map.add(c.current),function(){n.map.remove(c.current)}}),[n,t]);return(0,i.jsxs)(T.Z,{vertical:!0,gap:"middle",children:[(0,i.jsx)(U.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!0},children:"显示视频"}),(0,i.jsx)(U.ZP,{type:"primary",block:!0,onClick:function(){c.current.visible=!1},children:"隐藏视频"})]})},H=(t(53553),function(){return(0,i.jsx)("arcgis-sketch",{"reference-element":"view"})}),Y=(t(47692),function(e){var n=e.view;return(0,r.useEffect)((function(){var e=n.environment.weather.clone();return function(){n.environment.weather=e}}),[n]),(0,i.jsx)("arcgis-weather",{"reference-element":"view"})}),q=t(8444),F=t(75259),J=t(90403),Q=t(93427),W=_.Z.Text,X=function(e){var n=e.view,t=n.zoom,c=(0,r.useState)(Math.round(t)),a=l()(c,2),u=a[0],o=a[1],s=(0,r.useRef)(new Q.Z({view:n}));return(0,r.useEffect)((function(){(0,J.YP)((function(){return n.zoom}),(function(e){o(Math.round(e))}))}),[n]),(0,i.jsxs)(T.Z,{justify:"space-between",align:"center",children:[(0,i.jsxs)(W,{children:["层级:",u]}),(0,i.jsxs)(K.Z,{children:[(0,i.jsx)(U.ZP,{type:"primary",icon:(0,i.jsx)(q.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomIn()}}),(0,i.jsx)(U.ZP,{type:"primary",icon:(0,i.jsx)(F.Z,{}),onClick:function(){var e;null===(e=s.current)||void 0===e||e.zoomOut()}})]})]})},$=t(24858),ee=t(70765),ne=function(e){var n=e.view,t=(0,r.useRef)(),c=(0,r.useRef)(),a=(0,ee.useAccess)();return(0,r.useEffect)((function(){return t.current&&(c.current=new $.Z({view:n,container:t.current,visibleElements:{settingsButton:a.canSeeAdmin,captureButton:a.canSeeAdmin}})),function(){c.current&&c.current.destroy()}}),[n,a]),(0,i.jsx)("div",{ref:t})}}}]);