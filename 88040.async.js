"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[88040],{55838:function(e,t,i){i.d(t,{M:function(){return c},b:function(){return d}});var n=i(96541),s=i(2013),a=i(85119),r=i(48857),o=i(52061),l=i(15150),u=i(64801);function d(e){const t=new l.kG,{vertex:i,fragment:d}=t;(0,n.Sv)(i,e),i.uniforms.add(new a.p("width",(e=>e.width))),t.attributes.add(o.T.POSITION,"vec3"),t.attributes.add(o.T.NORMAL,"vec3"),t.attributes.add(o.T.UV0,"vec2"),t.attributes.add(o.T.LENGTH,"float"),t.varyings.add("vtc","vec2"),t.varyings.add("vlength","float"),t.varyings.add("vradius","float"),i.main.add(r.H`vec3 bitangent = normal;
vtc = uv0;
vlength = length;
vradius = 0.5 * width;
vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);
gl_Position = proj * pos;`),d.uniforms.add(new a.p("outlineSize",(e=>e.outlineSize)),new s.N("outlineColor",(e=>e.outlineColor)),new a.p("stripeLength",(e=>e.stripeLength)),new s.N("stripeEvenColor",(e=>e.stripeEvenColor)),new s.N("stripeOddColor",(e=>e.stripeOddColor)));const c=1/Math.sqrt(2);return d.code.add(r.H`
    const float INV_SQRT2 = ${r.H.float(c)};

    vec4 arrowColor(vec2 tc, float len) {
      float d = INV_SQRT2 * (tc.x - abs(tc.y));
      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));
      d = min(d, 1.0 - abs(tc.y));

      if (d < 0.0) {
        return vec4(0.0);
      }
      if (d < outlineSize) {
        return outlineColor;
      }
      return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;
    }`),d.main.add(r.H`
    vec2 ntc = vec2(vtc.x / vradius, vtc.y);
    vec4 color = arrowColor(ntc, vlength / vradius);
    if (color.a < ${r.H.float(u.e)}) {
      discard;
    }
    fragColor = color;`),t}const c=Object.freeze(Object.defineProperty({__proto__:null,build:d},Symbol.toStringTag,{value:"Module"}))},88040:function(e,t,i){i.r(t),i.d(t,{default:function(){return ot}});var n=i(73440),s=i(70880),a=(i(61432),i(61100)),r=i(17155),o=i(96711),l=(i(83850),i(48023)),u=i(5826),d=i(11674),c=i(73273),h=i(1925),g=i(90403),p=i(26636),_=i(1505),v=i(49510);let m=class extends s.Z{constructor(e){super(e)}initialize(){this.addHandles([(0,g.YP)((()=>({viewData:this.viewData,startPoint:this.analysis.startPoint})),(({viewData:e,startPoint:t})=>{e.elevationAlignedStartPoint=this._applyProjectionAndElevationAlignment(t)}),g.tX),(0,g.YP)((()=>({viewData:this.viewData,endPoint:this.analysis.endPoint})),(({viewData:e,endPoint:t})=>{e.elevationAlignedEndPoint=this._applyProjectionAndElevationAlignment(t)}),g.tX),(0,g.YP)((()=>({result:this._computedResult,viewData:this.viewData})),(({result:e,viewData:t})=>{t.result=e}),g.tX)])}_applyProjectionAndElevationAlignment(e){if(null==e)return e;const{spatialReference:t,elevationProvider:i}=this.view;return(0,_.G)(e,t,i)??((0,_.e)(this.analysis,e.spatialReference,o.Z.getLogger(this)),null)}get _computedResult(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,measurementMode:i,unit:n}=this.viewData;if(null==e||null==t)return null;const s=(0,v.Uy)(e,t),a=this.geodesicLengthMeasurementUtils.geodesicDistanceBetweenPoints(e,t);if(null==s)return null;let r,o;switch(i){case c.e.Auto:o=null!=a?"geodesic":"euclidean",r=a??s.horizontal;break;case c.e.Geodesic:if(null==a)return null;o="geodesic",r=a;break;case c.e.Euclidean:o="euclidean",r=s.horizontal}let l=s.direct,u=s.vertical;const d=(0,p.wd)(l.value,l.unit,n),g=(0,p.wd)(r.value,r.unit,n),_=(0,p.yv)(u.value,u.unit,n);return l=(0,h.nn)(l,d),r=(0,h.nn)(r,g),u=(0,h.nn)(u,_),{mode:o,directDistance:l,horizontalDistance:r,verticalDistance:u}}};(0,n._)([(0,r.Cb)({constructOnly:!0})],m.prototype,"view",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],m.prototype,"analysis",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],m.prototype,"viewData",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],m.prototype,"geodesicLengthMeasurementUtils",void 0),(0,n._)([(0,r.Cb)()],m.prototype,"_computedResult",null),m=(0,n._)([(0,l.j)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController")],m);i(55214);var b,y,w,C=i(92643),P=i(99574),f=i(55430),L=i(96094),S=i(26821),M=i(24910),O=i(82846);(w=b||(b={}))[w.None=0]="None",w[w.Direct=1]="Direct",w[w.Triangle=2]="Triangle",w[w.ProjectedGeodesic=3]="ProjectedGeodesic",function(e){e[e.Auto=0]="Auto",e[e.AboveSegment=1]="AboveSegment",e[e.BelowSegment=2]="BelowSegment"}(y||(y={}));var V=i(11480),A=i(36158),D=i(80075),E=i(12818),T=i(10934),z=i(73749),x=i(27583),H=i(69811),G=i(49102),R=i(69892),U=i(59758),j=i(86026),I=i(19596),k=i(52890),N=i(41044),W=i(59797),Y=i(948),X=i(52061),Z=i(58257),B=i(29107),q=i(61536),F=i(55838),Q=i(65650),K=i(51135);class $ extends B.A{constructor(e,t){super(e,t,new Z.J(F.M,(()=>i.e(41284).then(i.bind(i,41284)))),J),this.primitiveType=Q.MX.TRIANGLE_STRIP}initializePipeline(e){return(0,K.sm)({blending:e.transparent?(0,q.Wo)(e.oitPass):null,polygonOffset:e.polygonOffsetEnabled?{factor:0,units:-4}:null,depthTest:{func:Q.wb.LESS},depthWrite:K.ck,colorWrite:K.gf})}}const J=new Map([[X.T.POSITION,0],[X.T.NORMAL,1],[X.T.UV0,2],[X.T.LENGTH,3]]);var ee=i(83046),te=i(91041);class ie extends te.W{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1}}(0,n._)([(0,ee.o)()],ie.prototype,"polygonOffsetEnabled",void 0),(0,n._)([(0,ee.o)()],ie.prototype,"transparent",void 0);var ne=i(64801);class se extends I.F5{constructor(e){super(e,re),this._configuration=new ie,this.vertexAttributeLocations=J,this.intersectDraped=void 0,this.produces=new Map([[Y.r.OPAQUE_MATERIAL,e=>!this._transparent&&(0,N.c1)(e)],[Y.r.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>this._transparent&&(0,N.c1)(e)]])}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset,this._configuration.transparent=this._transparent,this._configuration.oitPass=t.oitPass,this._configuration}get visible(){const{outlineColor:e,stripeEvenColor:t,stripeOddColor:i}=this.parameters;return e[3]>=ne.e||t[3]>=ne.e||i[3]>=ne.e}intersect(){}createGLMaterial(e){return new ae(e)}createBufferWriter(){return new ge}get _transparent(){const{parameters:e}=this;return e.outlineColor[3]<1||e.stripeEvenColor[3]<1||e.stripeOddColor[3]<1}}class ae extends W.Z{beginSlot(e){return this.getTechnique($,e)}}class re extends I.Mt{constructor(){super(...arguments),this.width=32,this.outlineSize=.2,this.outlineColor=(0,x.al)(1,.5,0,1),this.stripeEvenColor=(0,x.al)(1,1,1,1),this.stripeOddColor=(0,x.al)(1,.5,0,1),this.stripeLength=1,this.polygonOffset=!1}}const oe=(0,k.U$)().vec3f(X.T.POSITION).vec3f(X.T.NORMAL).vec2f(X.T.UV0).f32(X.T.LENGTH),le=(0,O.Ue)(),ue=(0,O.Ue)(),de=(0,O.Ue)(),ce=(0,O.Ue)(),he=(0,O.Ue)();class ge{constructor(){this.vertexBufferLayout=oe}elementCount(e){return 2*(e.get(X.T.POSITION).indices.length/2+1)}write(e,t,i,n,s,a){const{data:r,indices:o}=i.get(X.T.POSITION),l=i.get(X.T.NORMAL).data,u=r.length/3;o&&o.length!==2*(u-1)&&console.warn("MeasurementArrowMaterial does not support indices");const d=le,c=ue,h=de,g=ce,p=he,_=s.position,v=s.normal,m=s.uv0;let b=0;for(let i=0;i<u;++i){const n=3*i;if((0,M.i)(d,r[n],r[n+1],r[n+2]),i<u-1){const e=3*(i+1);(0,M.i)(c,r[e],r[e+1],r[e+2]),(0,M.i)(p,l[e],l[e+1],l[e+2]),(0,M.n)(p,p),(0,M.d)(h,c,d),(0,M.n)(h,h),(0,M.h)(g,p,h),(0,M.n)(g,g)}const s=(0,M.j)(d,c);e&&t&&((0,M.t)(d,d,e),(0,M.t)(c,c,e),(0,M.t)(g,g,t));const o=a+2*i,y=o+1;_.setVec(o,d),_.setVec(y,d),v.setVec(o,g),v.setVec(y,g),m.set(o,0,b),m.set(o,1,-1),m.set(y,0,b),m.set(y,1,1),i<u-1&&(b+=s)}const y=s.length;for(let e=0;e<2*u;++e)y.set(a+e,b);return null}}class pe extends G._{constructor(e){super(e),this._arrowWidth=16,this._arrowSubdivisions=128,this._origin=(0,O.Ue)(),this._originTransform=(0,T.Ue)(),this._arrowCenter=(0,O.Ue)(),this._renderOccluded=I.yD.OccludeAndTransparent,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._color=(0,x.Ue)(),this._contrastColor=(0,x.Ue)(),this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial?.setParameters({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._contrastColor:this._color;this._arrowMaterial.setParameters({stripeEvenColor:e})}}get color(){return this._color}set color(e){(0,C.Ht)(e,this._color)||((0,z.c)(this._color,e),this._updateArrowColor())}get contrastColor(){return this._contrastColor}set contrastColor(e){(0,C.Ht)(e,this._color)||((0,z.c)(this._contrastColor,e),this._updateArrowColor())}createExternalResources(){const e=this._color,t=this._contrastColor,i=this._stripesEnabled?t:e;this._arrowMaterial=new se({outlineColor:e,stripeEvenColor:i,stripeOddColor:e,renderOccluded:this.renderOccluded,polygonOffset:!0,isDecoration:this.isDecoration}),this._handles=new E.Z,this._handles.add((0,g.YP)((()=>this.view.state.camera),(()=>{this._viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles=(0,a.SC)(this._handles)}forEachMaterial(e){e(this._arrowMaterial)}createGeometries(e){if(null==this._geometry?.startRenderSpace||null==this._geometry.endRenderSpace)return;const t=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);t.transformation=this._originTransform,e.addGeometry(t),this._viewChanged()}_createArrowGeometry(e,t,i,n){const s=this.view,a=s.renderCoordsHelper,r=[],o=[],l=(e,t)=>{const n=H.WM.get();(0,M.d)(n,e,i),r.push(n),o.push(t)};if("euclidean"===n.type){n.eval(.5,this._arrowCenter);const i=H.WM.get();if(a.worldUpAtPosition(this._arrowCenter,i),function(e,t,i){const n=(0,M.a)(_e,t,e),s=(0,M.h)(_e,n,i);return 0===(0,M.H)(s)}(e,t,i)){const{heading:t,tilt:n}=s.camera,{direction:a}=(0,R.kE)(s,e,t,n,ve);(0,M.c)(i,a)}l(e,i),l(t,i)}else{n.eval(.5,this._arrowCenter);const e=this._arrowSubdivisions+1&-2;for(let t=0;t<e;++t){const i=t/(e-1),s=H.WM.get(),r=H.WM.get();n.eval(i,s),a.worldUpAtPosition(s,r),l(s,r)}}return(0,j.rh)(this._arrowMaterial,r,o)}_geometryChanged(){this.recreateGeometry()}_viewChanged(){if(this.view.ready&&this.attached&&null!=this._geometry){const e=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._arrowWidth*e})}}_updateArrowColor(){if(!this.attached)return;const e=this._color,t=this._contrastColor,i=this._stripesEnabled?t:e,n=e,s=e;this._arrowMaterial.setParameters({stripeEvenColor:i,outlineColor:n,stripeOddColor:s})}}const _e=(0,O.Ue)(),ve=(0,U.dp)();var me=i(47098),be=i(16374),ye=i(85590),we=i(10618),Ce=i(74765),Pe=i(12816);let fe=class extends s.Z{get _parameters(){const e=this.view.effectiveTheme,{accentColor:t,textColor:i}=e,n=(0,C.O)(t),s=(0,C.Ch)(t,.75),a=(0,C.O)((0,C.mj)(t)),r=(0,C.mj)(i,C.K6.Low);return{accentColor:n,contrastColor:a,translucentAccentColor:s,triangleLineWidth:3,geodesicProjectionLineWidth:2,guideLineWidth:2,guideStippleLengthPixels:3,directLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12,textColor:i,textBackgroundColor:(0,C.G)(r,.6),textCalloutColor:(0,C.G)(r,.5)}}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(null==e||null==t||e.equals(t))return b.None;const i=this.analysisView.result;if(null==i)return b.Direct;if("geodesic"===this.actualVisualizedMeasurement)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?b.ProjectedGeodesic:b.Direct;const{verticalDistance:n,horizontalDistance:s}=i,a=(0,h.nn)(n,"meters").value,r=(0,h.nn)(s,"meters").value;return Math.min(a/r,r/a)<this.triangleCollapseRatioThreshold?b.Direct:b.Triangle}get actualVisualizedMeasurement(){const{measurementMode:e,result:t}=this.analysisView;switch(e){case c.e.Auto:return null!=t&&(0,h.nn)(t.horizontalDistance,"meters").value>we.Yo?"geodesic":"euclidean";case c.e.Euclidean:return"euclidean";case c.e.Geodesic:return"geodesic"}}get allowVisualElementsOrientationChange(){return null==this._triangleOrientationOverride}set allowVisualElementsOrientationChange(e){null==this._triangleOrientationOverride!==e&&(null==this._triangleOrientationOverride?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){return"geodesic"===this.actualVisualizedMeasurement?{direct:null,horizontal:this._segmentLabel,vertical:this._verticalLabel}:{direct:this._segmentLabel,horizontal:this._horizontalLabel,vertical:this._verticalLabel}}constructor(e){super(e),this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=(0,O.Ue)(),this._endPosition=(0,O.Ue)(),this._cornerPosition=(0,O.Ue)(),this._startPositionAtSeaLevel=(0,O.Ue)(),this._endPositionAtSeaLevel=(0,O.Ue)(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=y.Auto,this.triangleCollapseRatioThreshold=.03}initialize(){const e={attached:!0,view:this.view,isDecoration:!0},{guideLineWidth:t,guideStippleLengthPixels:i,triangleLineWidth:n,geodesicProjectionLineWidth:s,directLabelFontSize:a,verticalLabelFontSize:r,horizontalLabelFontSize:o}=this._parameters;this._segmentVisualElement=new pe({...e,geometry:null,renderOccluded:I.yD.OccludeAndTransparent}),this._triangleVisualElement=new D.r({...e,width:n,renderOccluded:I.yD.OccludeAndTransparent}),this._rightAngleQuad=new me.R({...e,renderOccluded:I.yD.OccludeAndTransparent});const l={...e,polygonOffset:!0,renderOccluded:I.yD.OccludeAndTransparent};this._projectedGeodesicLine=new D.r({...l,width:s,stipplePattern:(0,ye.z5)(i)}),this._geodesicStartHint=new D.r({...l,width:t,stipplePattern:(0,ye.z5)(i)}),this._geodesicEndHint=new D.r({...l,width:t,stipplePattern:(0,ye.z5)(i)}),this._segmentLabel=new A.K({...e,fontSize:a}),this._verticalLabel=new A.K({...e,fontSize:r}),this._horizontalLabel=new A.K({...e,fontSize:o}),this.addHandles([(0,g.YP)((()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}}),(e=>this._updateGeometryAndViewMode(e)),g.tX),(0,g.YP)((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateVisualElementVisibility(e)),g.tX),(0,g.YP)((()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement})),(e=>this._updateLabelText(e)),g.tX),(0,g.YP)((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateLabelVisibility(e)),g.tX),(0,g.YP)((()=>this._measurementArrowStripeLength),(e=>this._updateSegmentStripeLength(e)),g.tX),(0,Ce.qe)((async()=>this._updateMessageBundle())),(0,g.YP)((()=>this._parameters),(({textBackgroundColor:e,textCalloutColor:t,textColor:i,translucentAccentColor:n,accentColor:s,contrastColor:a})=>{const{_segmentLabel:r,_verticalLabel:o,_horizontalLabel:l,_triangleVisualElement:u,_rightAngleQuad:d,_projectedGeodesicLine:c,_geodesicStartHint:h,_geodesicEndHint:g,_segmentVisualElement:p}=this;r.backgroundColor=e,r.calloutColor=t,r.textColor=i,o.backgroundColor=e,o.calloutColor=t,o.textColor=i,l.backgroundColor=e,l.calloutColor=t,l.textColor=i,u.color=n,d.color=n,c.color=n,h.color=n,g.color=n,p.color=s,p.contrastColor=a}),g.nn)]),this._updateMessageBundle()}destroy(){this._segmentVisualElement=(0,a.SC)(this._segmentVisualElement),this._triangleVisualElement=(0,a.SC)(this._triangleVisualElement),this._rightAngleQuad=(0,a.SC)(this._rightAngleQuad),this._projectedGeodesicLine=(0,a.SC)(this._projectedGeodesicLine),this._geodesicStartHint=(0,a.SC)(this._geodesicStartHint),this._geodesicEndHint=(0,a.SC)(this._geodesicEndHint),this._segmentLabel=(0,a.SC)(this._segmentLabel),this._verticalLabel=(0,a.SC)(this._verticalLabel),this._horizontalLabel=(0,a.SC)(this._horizontalLabel),this.set("view",null)}_updateVisualElementVisibility({visible:e,viewMode:t}){if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(t){case b.None:break;case b.Direct:this._segmentVisualElement.visible=!0;break;case b.Triangle:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case b.ProjectedGeodesic:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode({view:e,camera:t,viewMode:i,elevationAlignedStartPoint:n,elevationAlignedEndPoint:s,orientation:a,visualizedMeasurement:r,stripeLength:o}){const l=e.renderCoordsHelper;if(null==l||null==n||null==s||n.equals(s))return;let u=this._startPosition,d=this._endPosition;l.toRenderCoords(n,u),l.toRenderCoords(s,d);const c=a===y.AboveSegment?1:-1,h=c*(l.getAltitude(d)-l.getAltitude(u));h<0&&(u=this._endPosition,d=this._startPosition);const g="geodesic"===r?new be.u(this._startPosition,this._endPosition,l.spatialReference):new be.y(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(o),i){case b.Direct:this._updateSegment(g,a);break;case b.Triangle:this._updateSegmentAndTriangle({view:e,camera:t,segment:g,orientation:a,startPosition:u,endPosition:d,deltaSign:c,altitudeDelta:h});break;case b.ProjectedGeodesic:this._updateSegmentAndProjection({view:e,orientation:a,startPosition:u,endPosition:d})}}_updateSegment(e,t){this._segmentLabel.anchor=t===y.AboveSegment?"top":"bottom",this._segmentLabel.geometry={type:"segment",segment:e,sampleLocation:"center"}}_updateSegmentAndTriangle({view:{renderCoordsHelper:e},camera:t,segment:i,orientation:n,startPosition:s,endPosition:a,deltaSign:r,altitudeDelta:o}){const l=this._cornerPosition;e.worldUpAtPosition(s,l),(0,M.g)(l,l,r*Math.abs(o)),(0,M.f)(l,l,s),this._triangleVisualElement.geometry=[[[s[0],s[1],s[2]],[l[0],l[1],l[2]],[a[0],a[1],a[2]]]],this._rightAngleQuad.geometry={previous:s,center:l,next:a};const u=new be.y(s,l),d=new be.y(l,a),c=function(e,t,i,n,s){const a=Se,r=Me;s.projectToRenderScreen(i,a),s.projectToRenderScreen(t,r);const o={segment:"bottom",horizontal:"top",vertical:a[0]<r[0]?"left":"right"};{const n=Oe,a=Ve;if((0,V.C)(e,i,s,n),(0,V.C)(e,t,s,a),(0,S.AK)(n,a)>=Le){const e=Math.sign(n[1])===Math.sign(a[1]);o.segment=e?(0,A.j)(o.vertical):o.vertical}else{const e=Ae;(0,V.C)(i,t,s,e),(0,S.AK)(e,a)>=Le&&(o.segment=Math.sign(e[0])===Math.sign(a[0])?(0,A.j)(o.horizontal):o.horizontal)}}if(n===y.BelowSegment){const e=e=>"top"===e?"bottom":"top";o.segment=e(o.segment),o.horizontal=e(o.horizontal),o.vertical=e(o.vertical)}return o}(s,a,l,n,t);this._segmentLabel.anchor=c.segment,this._segmentLabel.geometry={type:"segment",segment:i,sampleLocation:"center"},this._verticalLabel.geometry={type:"segment",segment:u,sampleLocation:"center"},this._verticalLabel.anchor=c.vertical,this._horizontalLabel.geometry={type:"segment",segment:d,sampleLocation:"center"},this._horizontalLabel.anchor=c.horizontal}_updateSegmentAndProjection({view:{renderCoordsHelper:e},orientation:t,startPosition:i,endPosition:n}){e.setAltitude(this._startPositionAtSeaLevel,0,i),e.setAltitude(this._endPositionAtSeaLevel,0,n);const s=new be.u(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(s),this._geodesicStartHint.setGeometryFromSegment(new be.y(this._startPositionAtSeaLevel,i)),this._geodesicEndHint.setGeometryFromSegment(new be.y(this._endPositionAtSeaLevel,n)),this._segmentLabel.geometry={type:"segment",segment:s,sampleLocation:"center"},this._segmentLabel.anchor=t===y.AboveSegment?"top":"bottom"}_updateLabelText({text:e,visualizedMeasurement:t}){null!=e?(this._segmentLabel.text="euclidean"===t?e.directDistance:e.horizontalDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange("labels")}_updateLabelVisibility({visible:e,viewMode:t}){const i=this._segmentLabel,n=this._horizontalLabel,s=this._verticalLabel;if(i.visible=!1,n.visible=!1,s.visible=!1,e)switch(t){case b.Direct:i.visible=!0;break;case b.Triangle:i.visible=!0,n.visible=!0,s.visible=!0;break;case b.ProjectedGeodesic:i.visible=!0;case b.None:}}get _labelsText(){if(this.destroyed)return null;const e=this.messages,t=this.analysisView.result;if(null==t||null==e)return null;const{directDistance:i,horizontalDistance:n,verticalDistance:s}=t,a=this.analysisView.unit,r=e=>({directDistance:"",horizontalDistance:"",verticalDistance:"",...e});switch(a){case"metric":return r({directDistance:i&&(0,f.Rd)(e,i),horizontalDistance:n&&(0,f.Rd)(e,n),verticalDistance:s&&(0,f.Wv)(e,s)});case"imperial":return r({directDistance:i&&(0,f.Ud)(e,i),horizontalDistance:n&&(0,f.Ud)(e,n),verticalDistance:s&&(0,f.Zv)(e,s)});default:return r({directDistance:i&&(0,f.VG)(e,i,a),horizontalDistance:n&&(0,f.VG)(e,n,a),verticalDistance:s&&(0,f.VG)(e,s,a)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;null!=e?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(null!=this._triangleOrientationOverride)return this._triangleOrientationOverride;const e=this.visualElementOrientation;return e===y.Auto?this.view.state.camera.aboveGround?y.AboveSegment:y.BelowSegment:e}_requiresGeodesicGuideAt(e){const t=this.view;if(!t?.state)return!1;const i=t.state.camera,n=t.renderCoordsHelper;if(!n)return!1;const s=i.computeScreenPixelSizeAt(e);return n.getAltitude(e)/s>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(null==e)return null;let i=null;const n=e.directDistance;switch(t){case"metric":i=n&&(0,h.nn)(n,"meters");break;case"imperial":i=n&&(0,h.nn)(n,(0,p.Q7)(n.value,n.unit));break;default:i=n&&(0,h.nn)(n,t)}return null==i?null:(0,P.sk)(i.value/30)*(0,p.En)(1,i.unit,"meters")}_updateMessageBundle(){this.loadingMessages=!0,(0,Pe.ME)("esri/core/t9n/Units").then((e=>{this.messages=e})).finally((()=>{this.loadingMessages=!1}))}get testData(){}};(0,n._)([(0,r.Cb)()],fe.prototype,"_parameters",null),(0,n._)([(0,r.Cb)()],fe.prototype,"_triangleOrientationOverride",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"messages",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"view",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"analysis",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"analysisView",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"loadingMessages",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"visible",null),(0,n._)([(0,r.Cb)()],fe.prototype,"viewMode",null),(0,n._)([(0,r.Cb)()],fe.prototype,"actualVisualizedMeasurement",null),(0,n._)([(0,r.Cb)()],fe.prototype,"visualElementOrientation",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"triangleCollapseRatioThreshold",void 0),(0,n._)([(0,r.Cb)()],fe.prototype,"allowVisualElementsOrientationChange",null),(0,n._)([(0,r.Cb)()],fe.prototype,"labels",null),(0,n._)([(0,r.Cb)()],fe.prototype,"_labelsText",null),(0,n._)([(0,r.Cb)()],fe.prototype,"_actualVisualElementsOrientation",null),(0,n._)([(0,r.Cb)()],fe.prototype,"_measurementArrowStripeLength",null),fe=(0,n._)([(0,l.j)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization")],fe);const Le=Math.cos((0,P.Vl)(12)),Se=(0,L.J$)(),Me=(0,L.J$)(),Oe=(0,L.gX)(),Ve=(0,L.gX)(),Ae=(0,L.gX)();var De,Ee=i(30062),Te=i(60147),ze=i(60508),xe=i(74774),He=i(62520),Ge=i(18036),Re=i(23857),Ue=i(53147),je=i(88970),Ie=i(3682),ke=i(77811),Ne=i(23496),We=i(82845);!function(e){e.Manipulators="manipulators",e.AnalysisViewDestroyed="analysis-view-destroyed",e.AnalysisView="analysis-view"}(De||(De={}));let Ye=class extends s.Z{constructor(e){super(e),this.cursorPoint=null,this._visible=!1,this._laserLine=null,this.laserLineEnabled=!0,this._lastDraggedHandle=null}initialize(){this._laserLine=new We.W({view:this.view,attached:!0,isDecoration:!0}),this._updateVisibility(this._visible),this._connectToAnalysisView(),this.addHandles((0,g.YP)((()=>this._params),(({laserLineGlowColor:e,laserLineInnerColor:t,laserLineGlobalAlpha:i})=>{const n=this._laserLine,s=n.style;n.style={...s,innerColor:t,glowColor:e,globalAlpha:i}})))}destroy(){this._laserLine=(0,a.SC)(this._laserLine)}get _params(){const{accentColor:e}=this.view.effectiveTheme;return{laserLineGlowColor:Ue.Z.toUnitRGB(e),laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:Ue.Z.toUnitRGB((0,C.mj)(e)),laserLineInnerWidth:.75,laserLineGlobalAlpha:.75*e.a,handleColor:(0,C.Ch)(e,.5),handleRadius:5}}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get testData(){}get _cursorPosition(){const e=(0,O.Ue)(),t=this.cursorPoint;return t&&this.view.renderCoordsHelper.toRenderCoords(t,e),e}get _startPosition(){const e=(0,O.Ue)(),t=this.analysis.startPoint;return t&&this.view.renderCoordsHelper.toRenderCoords(t,e),e}get _endPosition(){const e=(0,O.Ue)(),t=this.analysis.endPoint;return t&&this.view.renderCoordsHelper.toRenderCoords(t,e),e}get _laserLineParams(){const e=this._focusPosition,{active:t,lineState:i}=this.toolState,n=this.analysisViewData,s=this.laserLineEnabled&&!!e&&"measured"!==i&&t;if(!s||!this.visible||null==n||n.destroyed)return{heightManifoldTarget:null,pointDistanceLine:null,lineVerticalPlaneSegment:null};const a=n.actualVisualizedMeasurement,r="local"!==this.view.viewingMode&&s&&!!this.analysis.startPoint&&"geodesic"===a,o=s&&n.viewMode===b.Triangle;return{heightManifoldTarget:"euclidean"===a?e:null,pointDistanceLine:r?this._pointDistanceLine:null,lineVerticalPlaneSegment:o?(0,je.zk)(this._startPosition,this._endPosition):null}}get _focusPosition(){const{lineState:e}=this.toolState,t=this.analysisViewData,i=null!=t&&!t.destroyed&&t.measurementMode===c.e.Euclidean&&t.viewMode===b.Direct;switch(e){case"drawing":return i?this._startPosition:this.analysis.endPoint?this._endPosition:this._startPosition;case"editing":return i?"start"===this._lastDraggedHandle?this._endPosition:this._startPosition:"start"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return null!=this.cursorPoint?this._cursorPosition:null}}get _pointDistanceLine(){return{origin:"drawing"===this.toolState.lineState||"end"===this._lastDraggedHandle?this._startPosition:this._endPosition,target:this._focusPosition}}createManipulators(){const e=this._params,{view:t}=this,i=()=>{const i=(0,ke.EA)(e.handleColor),n=[new Ne.r((0,j.PI)(i,1,32,32))],s=new Ie.Z({view:t,renderObjects:n});return s.available=!1,s.radius=e.handleRadius,[s,i]},[n,s]=i(),[a,r]=i(),o=new Ie.Z({view:this.view,available:!1,interactive:!1});null!=this.analysis.startPoint&&(n.location=this.analysis.startPoint,n.available=!0),null!=this.analysis.endPoint&&(a.location=this.analysis.endPoint,a.available=!0);const l=()=>{let e=this._lastDraggedHandle;n.grabbing&&!a.grabbing&&(e="start"),a.grabbing&&!n.grabbing&&(e="end"),n.grabbing||a.grabbing||(e=null),this._lastDraggedHandle=e},u=n.events.on("grab-changed",l),d=a.events.on("grab-changed",l);return this.addHandles([u,d,(0,g.YP)((()=>(0,C.gp)(this._params.handleColor)),(e=>{s.setParameters({color:e}),r.setParameters({color:e})}),{equals:C.Ht})],De.Manipulators),{start:n,end:a,cursor:o}}show(){this.destroyed||this._visible||this._updateVisibility(!0)}hide(){!this.destroyed&&this._visible&&this._updateVisibility(!1)}_connectToAnalysisView(){this.removeHandles(De.AnalysisView),this.addHandles([(0,g.YP)((()=>this.analysisViewData?.destroyed),(e=>{e&&this.removeHandles(De.AnalysisView)}),g.nn),(0,g.YP)((()=>["measured"===this.toolState.lineState,this.analysisViewData]),(([e,t])=>{null==t||t.destroyed||(t.allowVisualElementsOrientationChange=!e)}),g.nn),(0,g.YP)((()=>this._laserLineParams),(e=>{const t=this._laserLine;t.heightManifoldTarget=e.heightManifoldTarget,t.pointDistanceLine=e.pointDistanceLine,t.lineVerticalPlaneSegment=e.lineVerticalPlaneSegment}),g.nn)],De.AnalysisView)}_updateVisibility(e){this.initialized&&(this._visible=e,e?this._laserLine.style={innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,globalAlpha:this._params.laserLineGlobalAlpha}:this.view.cursor=null,this._laserLine.visible=e)}};(0,n._)([(0,r.Cb)({constructOnly:!0})],Ye.prototype,"view",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"_params",null),(0,n._)([(0,r.Cb)({constructOnly:!0})],Ye.prototype,"analysis",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],Ye.prototype,"analysisViewData",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"cursorPoint",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"toolState",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"visible",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"testData",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"_visible",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"_laserLine",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],Ye.prototype,"laserLineEnabled",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"_cursorPosition",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"_startPosition",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"_endPosition",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"_lastDraggedHandle",void 0),(0,n._)([(0,r.Cb)()],Ye.prototype,"_laserLineParams",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"_focusPosition",null),(0,n._)([(0,r.Cb)()],Ye.prototype,"_pointDistanceLine",null),Ye=(0,n._)([(0,l.j)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView")],Ye);var Xe=i(90494),Ze=i(86227),Be=i(16171),qe=i(69880),Fe=i(61722),Qe=i(18208),Ke=i(39018),$e=i(23111),Je=i(42888),et=i(29668),tt=i(70134);let it=class extends Ze.f{constructor(e){super(e),this._updatingHandles=new Te.R,this._emulatedDrag=null,this.lineState="initial",this.removeIncompleteOnCancel=!1,this.startPointSurfaceLocation=null,this.endPointSurfaceLocation=null,this.cursorPointSurfaceLocation=null,this.startManipulator=null,this.endManipulator=null,this.cursorManipulator=null,this._getSnappingContext=(0,Ee.H)((e=>new Ke.N({elevationInfo:{mode:"absolute-height",offset:0},pointer:e,editGeometryOperations:new Qe.c(new Fe.XE("point",(0,Be.Y6)(!0,!1,this.view.spatialReference)),this.view.state.viewingMode),visualizer:new Ge._})))}initialize(){const{view:e,analysis:t,analysisViewData:i,visible:n}=this;this.measurementView=new Ye({toolState:this,view:e,analysis:t,analysisViewData:i,visible:n});const s=(0,Je.u)(e);this._snappingManagerResult=s,this.addHandles(s);const{start:a,end:r,cursor:o}=this.measurementView.createManipulators(),l=(e,t,i)=>{const n=(0,qe.Xd)(e,((e,n,s,a)=>{const r=(0,Re.J4)(e),o=this._snappingManager,l=this._getSnappingContext(a),u=this._updatingHandles,{lineState:d}=this;s=s.next(r).next((0,qe.di)(this,[i,t])).next((i=>{if("cursorPoint"!==t){const i=this.analysis[t];null!=i&&(e.location=i)}return i}));const c=(0,Re.gv)(this.view);let h=n.next(r).next((e=>{const n=c(e);return n||"drawing"!==this.lineState&&"initial"!==this.lineState||(this[t]=null,this[i]=null),n}));if("touch"!==a||"editing"===d){const{snappingStep:e,cancelSnapping:t}=(0,$e.W)({snappingManager:o,snappingContext:l,updatingHandles:u});s=s.next(t),h=h.next(...e)}h.next((e=>"start"!==e.action?e:null)).next((n=>{const s=(0,xe.WG)(n.mapEnd,new ze.Z);this[t]=s,e.location=s,this[i]=this._surfaceLocation(s,n.surfaceType)}))}));return"cursorPoint"===t?[n]:[n,e.events.on("grab-changed",(()=>{const e=a.grabbing||r.grabbing;this.lineState=e?"editing":"measured"})),(0,g.YP)((()=>this.analysis[t]),(t=>{t&&(e.location=t)}))]};this.startManipulator=a,this.endManipulator=r,this.cursorManipulator=o,this.manipulators.add(a),this.manipulators.add(r),this.manipulators.add(o),this.addHandles([...l(a,"startPoint","startPointSurfaceLocation"),...l(r,"endPoint","endPointSurfaceLocation"),...l(o,"cursorPoint","cursorPointSurfaceLocation"),(0,g.gx)((()=>"measured"===this.state),(()=>{this.finishToolCreation(),this.active&&(this.view.activeTool=null)}),g.tX),(0,g.YP)((()=>({startPointAvailable:null!=this.startPoint,endPointAvailable:null!=this.endPoint})),(({startPointAvailable:e,endPointAvailable:t})=>{this.startManipulator.available=e,this.endManipulator.available=t}),g.tX)]),(0,et.Ob)(this)}destroy(){this._updatingHandles=(0,a.SC)(this._updatingHandles),this.measurementView=(0,a.SC)(this.measurementView)}get _snappingManager(){return this._snappingManagerResult.snappingManager}get state(){const{analysis:e}=this;if(null==e.startPoint&&null==e.endPoint)return"ready";const{lineState:t}=this;return this.validMeasurement&&"editing"!==t&&"drawing"!==t?"measured":"measuring"}get cursor(){return!this.active||"ready"!==this.state&&"measured"===this.lineState?null:"crosshair"}get startPoint(){return this.analysis.startPoint}set startPoint(e){this.analysis.startPoint=e}get endPoint(){return this.analysis.endPoint}set endPoint(e){this.analysis.endPoint=e}get cursorPoint(){return this.measurementView.cursorPoint}set cursorPoint(e){this.measurementView.cursorPoint=e}get snappingOptions(){return this._snappingManager.options}get validMeasurement(){return null!=this.analysis.startPoint&&null!=this.analysis.endPoint}get updating(){return this._updatingHandles.updating||this._snappingManager.updating}resetCreated(){super.resetCreated(),this.lineState="initial",this.cursorPoint=null,"measured"===this.state&&this.finishToolCreation()}onShow(){this.measurementView.show()}onHide(){this.measurementView.hide()}onDeactivate(){this._emulatedDrag?.cancel(),this._emulatedDrag=null}onInputEvent(e){switch(e.type){case"immediate-click":this._handleImmediateClick(e);break;case"pointer-move":this._handlePointerMove(e)}}_handlePointerMove(e){if(!this.active||this.view.navigating)return;const{pointerType:t}=e;if("mouse"!==t)return;const i=(0,tt.vT)(e),{lineState:n,cursorManipulator:s,endManipulator:a}=this;let r=!1;null==this.cursorPoint&&(this._emulatedDrag?.cancel(),this._emulatedDrag=nt(s,t,i),r=!0),"initial"===n&&(this._emulatedDrag?.update(i),r=!0),"drawing"===n&&(a.events.emit("drag",{action:"update",start:i,screenPoint:i}),r=!0),r&&e.stopPropagation()}_handleImmediateClick(e){if(!this.active||!(0,He.y1)(e))return;const t=(0,tt.vT)(e),{pointerType:i}=e,{cursorManipulator:n,startManipulator:s,endManipulator:a,lineState:r}=this;let o=!1;switch(null==this.cursorPoint&&(this._emulatedDrag?.cancel(),this._emulatedDrag=nt(n,i,t)),r){case"initial":if(this._emulatedDrag?.update(t),null!=this.cursorPoint){this._emulatedDrag?.end(t),this._emulatedDrag=null,this.endPoint=null;const{cursorPoint:e}=this;this.startPoint=e,this.startPointSurfaceLocation=this.cursorPointSurfaceLocation,s.location=e,s.interactive=!1,a.interactive=!1,this.lineState="drawing",this._emulatedDrag=nt(a,i,t),o=!0}break;case"drawing":this._emulatedDrag?.update(t),null!=this.endPoint&&(this._emulatedDrag?.end(t),this._emulatedDrag=null,s.interactive=!0,a.interactive=!0,this.lineState="measured",o=!0)}o&&e.stopPropagation()}_surfaceLocation(e,t){return t===Re.cx.GROUND?"on-the-surface":(e.z??0)>=this._getElevation(e)?"above-the-surface":"below-the-surface"}_getElevation(e){return this.view.basemapTerrain.ready?(0,Xe.KO)(this.view.elevationProvider,e)??0:0}get test(){}};function nt(e,t,i){return e.events.emit("drag",{action:"start",pointerType:t,start:i,screenPoint:i}),{update:t=>e.events.emit("drag",{action:"update",start:t,screenPoint:t}),end:t=>e.events.emit("drag",{action:"end",start:t,screenPoint:t}),cancel:()=>e.events.emit("drag",{action:"cancel"})}}(0,n._)([(0,r.Cb)({readOnly:!0})],it.prototype,"state",null),(0,n._)([(0,r.Cb)()],it.prototype,"lineState",void 0),(0,n._)([(0,r.Cb)({readOnly:!0})],it.prototype,"cursor",null),(0,n._)([(0,r.Cb)()],it.prototype,"startPoint",null),(0,n._)([(0,r.Cb)()],it.prototype,"endPoint",null),(0,n._)([(0,r.Cb)()],it.prototype,"cursorPoint",null),(0,n._)([(0,r.Cb)({constructOnly:!0})],it.prototype,"analysis",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],it.prototype,"analysisViewData",void 0),(0,n._)([(0,r.Cb)()],it.prototype,"measurementView",void 0),(0,n._)([(0,r.Cb)()],it.prototype,"removeIncompleteOnCancel",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0})],it.prototype,"view",void 0),(0,n._)([(0,r.Cb)({readOnly:!0})],it.prototype,"validMeasurement",null),(0,n._)([(0,r.Cb)({value:null})],it.prototype,"startPointSurfaceLocation",void 0),(0,n._)([(0,r.Cb)({value:null})],it.prototype,"endPointSurfaceLocation",void 0),(0,n._)([(0,r.Cb)({value:null})],it.prototype,"cursorPointSurfaceLocation",void 0),(0,n._)([(0,r.Cb)()],it.prototype,"updating",null),it=(0,n._)([(0,l.j)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")],it);var st=i(24468),at=i(55274);let rt=class extends((0,d.p)(s.Z)){constructor(e){super(e),this.type="direct-line-measurement-view-3d",this.analysis=null,this.tool=null,this.result=null,this.measurementMode=c.e.Auto,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null,this.userOperation=null}initialize(){const{analysis:e,view:t}=this;this._analysisVisualization=new fe({view:t,analysis:e,analysisView:this}),this.addResolvingPromise((0,at.H)().then((i=>{this.destroyed||(this._analysisController=new m({view:t,analysis:e,viewData:this,geodesicLengthMeasurementUtils:i}))}))),this.addHandles((0,st.Lp)(this,it))}destroy(){(0,st.Yq)(this),this.userOperation=(0,a.IM)(this.userOperation),this._analysisController=(0,a.SC)(this._analysisController),this._analysisVisualization=(0,a.SC)(this._analysisVisualization)}get updating(){return!!this._analysisVisualization?.loadingMessages}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(e){this._analysisVisualization.visualElementOrientation=e}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(e){this._analysisVisualization.allowVisualElementsOrientationChange=e}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._analysisVisualization.triangleCollapseRatioThreshold=e}get directLabelText(){return this._analysisVisualization.labels.direct?.text??""}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal?.text??""}get verticalLabelText(){return this._analysisVisualization.labels.vertical?.text??""}get unit(){return this.analysis.unit??(0,u.R)(this.view)}get testData(){}place(e){return(0,st.tq)(this,{placementOptions:e})}};(0,n._)([(0,r.Cb)()],rt.prototype,"_analysisVisualization",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"_analysisController",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"updating",null),(0,n._)([(0,r.Cb)({readOnly:!0})],rt.prototype,"type",void 0),(0,n._)([(0,r.Cb)({constructOnly:!0,nonNullable:!0})],rt.prototype,"analysis",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"tool",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"result",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"measurementMode",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"elevationAlignedStartPoint",void 0),(0,n._)([(0,r.Cb)()],rt.prototype,"elevationAlignedEndPoint",void 0),(0,n._)([(0,r.Cb)({readOnly:!0})],rt.prototype,"viewMode",null),(0,n._)([(0,r.Cb)({readOnly:!0})],rt.prototype,"actualVisualizedMeasurement",null),(0,n._)([(0,r.Cb)()],rt.prototype,"visualElementOrientation",null),(0,n._)([(0,r.Cb)()],rt.prototype,"allowVisualElementsOrientationChange",null),(0,n._)([(0,r.Cb)()],rt.prototype,"triangleCollapseRatioThreshold",null),(0,n._)([(0,r.Cb)({readOnly:!0})],rt.prototype,"directLabelText",null),(0,n._)([(0,r.Cb)({readOnly:!0})],rt.prototype,"horizontalLabelText",null),(0,n._)([(0,r.Cb)({readOnly:!0})],rt.prototype,"verticalLabelText",null),(0,n._)([(0,r.Cb)()],rt.prototype,"unit",null),(0,n._)([(0,r.Cb)()],rt.prototype,"userOperation",void 0),rt=(0,n._)([(0,l.j)("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],rt);const ot=rt},73273:function(e,t,i){var n;i.d(t,{e:function(){return n}}),function(e){e[e.Auto=0]="Auto",e[e.Euclidean=1]="Euclidean",e[e.Geodesic=2]="Geodesic"}(n||(n={}))},62520:function(e,t,i){i.d(t,{D1:function(){return d},Ue:function(){return l},fq:function(){return c},l:function(){return u},wE:function(){return h},y1:function(){return g}});var n=i(24910),s=i(82846),a=i(67764),r=i(69055),o=i(22365);function l(e,t){const i=(0,r.a)(t);(0,n.i)(i,0,0,0);for(let t=0;t<e.length;++t)(0,n.f)(i,i,e[t]);(0,n.g)(i,i,1/e.length);let s=0;for(let t=0;t<e.length;++t)s=Math.max(s,(0,n.s)(i,e[t]));t[3]=Math.sqrt(s)}function u(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");(0,o.pG)(e[0],e[1],e[2],t)}function d(e,t){return(0,n.e)(e,t)+e[3]}function c(e,t,i,s,{geodesicArea:a}){const r=p;return(0,n.c)(r.rings[0][0],e),(0,n.c)(r.rings[0][1],t),(0,n.c)(r.rings[0][2],i),(0,n.c)(r.rings[0][3],e),r.spatialReference=s,r.clearCache(),a(r)}function h(e,t=null,i=!0){const s=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let i=0;i<e.length;++i)if((0,n.e)(t,e[i])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&(0,n.c)(t,e[0]),!0;(0,n.i)(_,0,0,0);for(let t=0;t<e.length;++t)(0,n.f)(_,_,e[t]);if((0,n.n)(_,_),s(e,_))return t&&(0,n.c)(t,_),!0;if(!i)return!1;for(let i=0;i<e.length;++i)for(let a=0;a<e.length;++a)if(i!==a&&((0,n.h)(_,e[i],e[a]),(0,n.n)(_,_),s(e,_)))return t&&(0,n.c)(t,_),!0;return!1}function g(e){return"mouse"!==e.pointerType||0===e.button}const p=new a.Z({hasM:!1,hasZ:!0,rings:[[(0,s.Ue)(),(0,s.Ue)(),(0,s.Ue)(),(0,s.Ue)()]],spatialReference:null}),_=(0,s.Ue)()}}]);