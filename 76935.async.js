"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[76935,41819],{76935:function(e,n,t){t.r(n),t.d(n,{executeScript:function(){return $},extend:function(){return W}});var r=t(79793),a=t(30606),o=t(60835),i=t(5690),l=t(92530),c=t(12122),s=t(25112),u=t(25464),f=t(67161),d=t(17095),w=t(12579),p=t(69220),h=t(9667),g=t(84391),y=t(41819),m=t(78865),v=t(76952),S=t(15458),b=t(41298),H=(t(61432),t(82890)),V=t(45213),O=t(43462);async function N(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(await J(e,n.arguments[r]));return t}async function I(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await N(e,n))}class F extends u.Rm{constructor(e,n){super(),this.definition=null,this.context=null,this.definition=e,this.context=n}createFunction(e){return(...n)=>{const t={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,services:this.context.services,abortSignal:this.context.abortSignal,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(t.depthCounter.depth>64)throw new c.aV(e,c.rH.MaximumCallDepth,null);return Z(this.definition,t,n,null)}}call(e,n){return A(e,n,((t,r,a)=>{const o={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(o.depthCounter.depth>64)throw new c.aV(e,c.rH.MaximumCallDepth,n);return Z(this.definition,o,a,n)}))}marshalledCall(e,n,t,r){return r(e,n,(async(a,o,i)=>{const l={spatialReference:e.spatialReference,services:e.services,globalScope:t.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return i=i.map((n=>!(0,f.i)(n)||n instanceof u.Vg?n:(0,u.aq)(n,e,r))),(0,u.aq)(await Z(this.definition,l,i,n),t,r)}))}}async function Z(e,n,t,a){const o=e.body;if(t.length!==e.params.length)throw new c.aV(n,c.rH.WrongNumberOfParameters,null);for(let a=0;a<t.length;a++){const o=e.params[a];"Identifier"===o.type&&null!=n.localScope&&(n.localScope[(0,r.D)(o)]={value:t[a]})}const i=await C(n,o);if(i instanceof f.R)return i.value;if(i===f.q)throw new c.aV(n,c.rH.UnexpectedToken,a);if(i===f.r)throw new c.aV(n,c.rH.UnexpectedToken,a);return i instanceof f.I?i.value:i}class x extends a.P{constructor(e){super(),this.source=e}global(e){const n=this.executingContext.globalScope[(0,r.D)(e)];if((0,f.i)(n.value)&&!(n.value instanceof u.Vg)){const t=new u.Vg;return t.fn=n.value,t.parameterEvaluator=A,t.context=this.executingContext,this.executingContext.globalScope[(0,r.D)(e)]={value:t},t}return n.value}setGlobal(e,n){if((0,f.i)(n))throw new c.aV(null,c.rH.AssignModuleFunction,null);this.executingContext.globalScope[(0,r.D)(e)]={value:n}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=(0,r.D)(e)),void 0!==this.executingContext.exports[e]}async loadModule(e){const n=e.spatialReference??V.Z.WebMercator;this.moduleScope=_(null,null,e.timeZone),this.executingContext={spatialReference:n,services:e.services,libraryResolver:new o.s(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:e.abortSignal??r.j,globalScope:this.moduleScope,console:e.console??Y,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await B(this.executingContext,this.source.syntax)}}async function A(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await N(e,n))}async function J(e,n){n.breakpoint&&await n.breakpoint();try{switch(n.type){case"UpdateExpression":return await async function(e,n){const t=n.argument;if("CallExpression"===t.type)throw new c.aV(e,c.rH.NeverReach,n);if("MemberExpression"===t.type){const r=await J(e,t.object);let a,o;if(!0===t.computed)a=await J(e,t.property);else{if("Identifier"!==t.property.type)throw new c.aV(e,c.rH.Unrecognized,n);a=t.property.name}if((0,O.kJ)(r)){if(!(0,O.hj)(a))throw new c.aV(e,c.rH.ArrayAccessorMustBeNumber,n);if(a<0&&(a=r.length+a),a<0||a>=r.length)throw new c.aV(e,c.rH.OutOfBounds,n);o=(0,f.u)(r[a]),r[a]="++"===n.operator?o+1:o-1}else if(r instanceof l.Z){if(!1===(0,O.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0!==r.hasField(a))throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});o=(0,f.u)(r.field(a)),r.setField(a,"++"===n.operator?o+1:o-1)}else if(r instanceof x){if(!1===(0,O.HD)(a))throw new c.aV(e,c.rH.ModuleAccessorMustBeString,n);if(!0!==r.hasGlobal(a))throw new c.aV(e,c.rH.ModuleExportNotFound,n);o=(0,f.u)(r.global(a)),r.setGlobal(a,"++"===n.operator?o+1:o-1)}else{if(!(0,f.k)(r))throw(0,f.j)(r)?new c.aV(e,c.rH.Immutable,n):new c.aV(e,c.rH.InvalidParameter,n);if(!1===(0,O.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0!==r.hasField(a))throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});o=(0,f.u)(r.field(a)),r.setField(a,"++"===n.operator?o+1:o-1)}return!1===n.prefix?o:"++"===n.operator?o+1:o-1}const a=(0,r.D)(t);let o;if(null!=e.localScope&&void 0!==e.localScope[a])return o=(0,f.u)(e.localScope[a].value),e.localScope[a]={value:"++"===n.operator?o+1:o-1},!1===n.prefix?o:"++"===n.operator?o+1:o-1;if(void 0!==e.globalScope[a])return o=(0,f.u)(e.globalScope[a].value),e.globalScope[a]={value:"++"===n.operator?o+1:o-1},!1===n.prefix?o:"++"===n.operator?o+1:o-1;throw new c.aV(e,c.rH.InvalidIdentifier,n)}(e,n);case"AssignmentExpression":return await async function(e,n){const t=n.left;if("MemberExpression"===t.type){const r=await J(e,t.object);let a;if(!0===t.computed)a=await J(e,t.property);else{if("Identifier"!==t.property.type)throw new c.aV(e,c.rH.InvalidIdentifier,n);a=t.property.name}const o=await J(e,n.right);if((0,O.kJ)(r)){if(!(0,O.hj)(a))throw new c.aV(e,c.rH.ArrayAccessorMustBeNumber,n);if(a<0&&(a=r.length+a),a<0||a>r.length)throw new c.aV(e,c.rH.OutOfBounds,n);if(a===r.length){if("="!==n.operator)throw new c.aV(e,c.rH.OutOfBounds,n);r[a]=k(o,n.operator,r[a],n,e)}else r[a]=k(o,n.operator,r[a],n,e)}else if(r instanceof l.Z){if(!1===(0,O.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0===r.hasField(a))r.setField(a,k(o,n.operator,r.field(a),n,e));else{if("="!==n.operator)throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});r.setField(a,k(o,n.operator,null,n,e))}}else if(r instanceof x){if(!1===(0,O.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0!==r.hasGlobal(a))throw new c.aV(e,c.rH.ModuleExportNotFound,n);r.setGlobal(a,k(o,n.operator,r.global(a),n,e))}else{if(!(0,f.k)(r))throw(0,f.j)(r)?new c.aV(e,c.rH.Immutable,n):new c.aV(e,c.rH.InvalidParameter,n);if(!1===(0,O.HD)(a))throw new c.aV(e,c.rH.KeyAccessorMustBeString,n);if(!0===r.hasField(a))r.setField(a,k(o,n.operator,r.field(a),n,e));else{if("="!==n.operator)throw new c.aV(e,c.rH.FieldNotFound,n,{key:a});r.setField(a,k(o,n.operator,null,n,e))}}return f.v}const a=(0,r.D)(t);if(null!=e.localScope&&void 0!==e.localScope[a]){const t=await J(e,n.right);return e.localScope[a]={value:k(t,n.operator,e.localScope[a].value,n,e)},f.v}if(void 0!==e.globalScope[a]){const t=await J(e,n.right);return e.globalScope[a]={value:k(t,n.operator,e.globalScope[a].value,n,e)},f.v}throw new c.aV(e,c.rH.InvalidIdentifier,n)}(e,n);case"TemplateLiteral":return await async function(e,n){let t="",r=0;for(const a of n.quasis)if(t+=a.value?a.value.cooked:"",!1===a.tail){if(n.expressions[r]){const a=await J(e,n.expressions[r]);if((0,f.i)(a))throw new c.aV(e,c.rH.NoFunctionInTemplateLiteral,n);t+=(0,f.w)(a)}r++}return t}(e,n);case"Identifier":return E(e,n);case"MemberExpression":return await async function(e,n){const t=await J(e,n.object);if(null===t)throw new c.aV(e,c.rH.MemberOfNull,n);if(!1===n.computed){if("Identifier"===n.property.type){if(t instanceof l.Z||(0,f.s)(t))return t.field(n.property.name);if(t instanceof H.Z)return(0,i.Zg)(t,n.property.name,e,n);if(t instanceof x){if(!t.hasGlobal(n.property.name))throw new c.aV(e,c.rH.InvalidIdentifier,n);return t.global(n.property.name)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}let r=await J(e,n.property);if(t instanceof l.Z||(0,f.s)(t)){if((0,O.HD)(r))return t.field(r);throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if(t instanceof x){if((0,O.HD)(r))return t.global(r);throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if(t instanceof H.Z){if((0,O.HD)(r))return(0,i.Zg)(t,r,e,n);throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if((0,O.kJ)(t)){if((0,O.hj)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new c.aV(e,c.rH.OutOfBounds,n);return t[r]}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if((0,f.j)(t)){if((0,O.hj)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new c.aV(e,c.rH.OutOfBounds,n);return t.get(r)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}if((0,O.HD)(t)){if((0,O.hj)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new c.aV(e,c.rH.OutOfBounds,n);return t[r]}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}throw new c.aV(e,c.rH.InvalidMemberAccessKey,n)}(e,n);case"Literal":return n.value;case"CallExpression":return await async function(e,n){if("MemberExpression"===n.callee.type){const t=await J(e,n.callee.object);if(!(t instanceof x))throw new c.aV(e,c.rH.FunctionNotFound,n);const r=!1===n.callee.computed?n.callee.property.name:await J(e,n.callee.property);if(!t.hasGlobal(r))throw new c.aV(e,c.rH.FunctionNotFound,n);const a=t.global(r);if(!(0,f.i)(a))throw new c.aV(e,c.rH.CallNonFunction,n);return a.call(e,n)}if("Identifier"!==n.callee.type)throw new c.aV(e,c.rH.FunctionNotFound,n);const t=(0,r.D)(n.callee);if(null!=e.localScope&&void 0!==e.localScope[t]){const r=e.localScope[t];if((0,f.i)(r.value))return r.value.call(e,n);throw new c.aV(e,c.rH.CallNonFunction,n)}if(void 0!==e.globalScope[t]){const r=e.globalScope[t];if((0,f.i)(r.value))return r.value.call(e,n);throw new c.aV(e,c.rH.CallNonFunction,n)}throw new c.aV(e,c.rH.FunctionNotFound,n)}(e,n);case"UnaryExpression":return await async function(e,n){const t=await J(e,n.argument);if((0,O.jn)(t)){if("!"===n.operator)return!t;if("-"===n.operator)return-1*(0,f.u)(t);if("+"===n.operator)return 1*(0,f.u)(t);if("~"===n.operator)return~(0,f.u)(t);throw new c.aV(e,c.rH.UnsupportedUnaryOperator,n)}if("-"===n.operator)return-1*(0,f.u)(t);if("+"===n.operator)return 1*(0,f.u)(t);if("~"===n.operator)return~(0,f.u)(t);throw new c.aV(e,c.rH.UnsupportedUnaryOperator,n)}(e,n);case"BinaryExpression":return await async function(e,n){const t=await J(e,n.left),r=await J(e,n.right);switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,f.z)((0,f.u)(t),(0,f.u)(r),n.operator);case"==":return(0,f.y)(t,r);case"!=":return!(0,f.y)(t,r);case"<":case">":case"<=":case">=":return(0,f.x)(t,r,n.operator);case"+":return(0,O.HD)(t)||(0,O.HD)(r)?(0,f.w)(t)+(0,f.w)(r):(0,f.u)(t)+(0,f.u)(r);case"-":return(0,f.u)(t)-(0,f.u)(r);case"*":return(0,f.u)(t)*(0,f.u)(r);case"/":return(0,f.u)(t)/(0,f.u)(r);case"%":return(0,f.u)(t)%(0,f.u)(r);default:throw new c.aV(e,c.rH.UnsupportedOperator,n)}}(e,n);case"LogicalExpression":return await async function(e,n){const t=await J(e,n.left);if(!(0,O.jn)(t))throw new c.aV(e,c.rH.LogicalExpressionOnlyBoolean,n);switch(n.operator){case"||":{if(!0===t)return t;const r=await J(e,n.right);if((0,O.jn)(r))return r;throw new c.aV(e,c.rH.LogicExpressionOrAnd,n)}case"&&":{if(!1===t)return t;const r=await J(e,n.right);if((0,O.jn)(r))return r;throw new c.aV(e,c.rH.LogicExpressionOrAnd,n)}default:throw new c.aV(e,c.rH.LogicExpressionOrAnd,n)}}(e,n);case"ArrayExpression":return await async function(e,n){const t=[];for(let r=0;r<n.elements.length;r++)t.push(await J(e,n.elements[r]));for(let r=0;r<t.length;r++){if((0,f.i)(t[r]))throw new c.aV(e,c.rH.NoFunctionInArray,n);t[r]===f.v&&(t[r]=null)}return t}(e,n);case"ObjectExpression":return await async function(e,n){const t=[];for(let r=0;r<n.properties.length;r++){const a=n.properties[r],o=await J(e,a.value),i="Identifier"===a.key.type?a.key.name:await J(e,a.key);t[r]={key:i,value:o}}const r=Object.create(null),a=new Map;for(let o=0;o<t.length;o++){const i=t[o];if((0,f.i)(i.value))throw new c.aV(e,c.rH.NoFunctionInDictionary,n);if(!1===(0,O.HD)(i.key))throw new c.aV(e,c.rH.KeyMustBeString,n);let l=i.key.toString();const s=l.toLowerCase();a.has(s)?l=a.get(s):a.set(s,l),i.value===f.v?r[l]=null:r[l]=i.value}const o=new l.Z(r);return o.immutable=!1,o}(e,n);default:throw new c.aV(e,c.rH.Unrecognized,n)}}catch(t){throw(0,c.VO)(e,n,t)}}async function C(e,n){n.breakpoint&&await n.breakpoint();try{switch(n.type){case"ImportDeclaration":return await async function(e,n){const t=(0,r.D)(n.specifiers[0].local),a=e.libraryResolver.loadLibrary(t);let o;return e.libraryResolver._moduleSingletons?.has(a.uri)?o=e.libraryResolver._moduleSingletons.get(a.uri):(o=new x(a),await o.loadModule(e),e.libraryResolver._moduleSingletons?.set(a.uri,o)),e.globalScope[t]={value:o},f.v}(e,n);case"ExportNamedDeclaration":return await async function(e,n){if(await C(e,n.declaration),"FunctionDeclaration"===n.declaration.type)e.exports[(0,r.D)(n.declaration.id)]="function";else if("VariableDeclaration"===n.declaration.type)for(const t of n.declaration.declarations)e.exports[(0,r.D)(t.id)]="variable";return f.v}(e,n);case"VariableDeclaration":return await M(e,n,0);case"BlockStatement":return await B(e,n);case"FunctionDeclaration":return await async function(e,n){const t=(0,r.D)(n.id);return e.globalScope[t]={value:new F(n,e)},f.v}(e,n);case"ReturnStatement":return await async function(e,n){if(null===n.argument)return new f.R(f.v);const t=await J(e,n.argument);return new f.R(t)}(e,n);case"IfStatement":return await async function(e,n){const t=await J(e,n.test);if(!0===t)return C(e,n.consequent);if(!1===t)return null!==n.alternate?C(e,n.alternate):f.v;throw new c.aV(e,c.rH.BooleanConditionRequired,n)}(e,n);case"ExpressionStatement":return await async function(e,n){const t=await J(e,n.expression);return t===f.v?f.v:new f.I(t)}(e,n);case"ForStatement":return await async function(e,n){try{for(null!==n.init&&("VariableDeclaration"===n.init.type?await C(e,n.init):await J(e,n.init));;){if(null!==n.test){const t=await J(e,n.test);if(!0===e.abortSignal?.aborted)throw new c.aV(e,c.rH.Cancelled,n);if(!1===t)break;if(!0!==t)throw new c.aV(e,c.rH.BooleanConditionRequired,n)}const t=await C(e,n.body);if(t===f.q)break;if(t instanceof f.R)return t;null!==n.update&&await J(e,n.update)}return f.v}catch(e){throw e}}(e,n);case"WhileStatement":return await async function(e,n){let t=await J(e,n.test);if(!1===t)return f.v;if(!0!==t)throw new c.aV(e,c.rH.BooleanConditionRequired,n);for(;!0===t;){const r=await C(e,n.body);if(r===f.q)break;if(r instanceof f.R)return r;if(t=await J(e,n.test),!0!==t&&!1!==t)throw new c.aV(e,c.rH.BooleanConditionRequired,n)}return f.v}(e,n);case"ForInStatement":return await async function(e,n){const t=await J(e,n.right);"VariableDeclaration"===n.left.type&&await C(e,n.left);const a=(0,r.D)("VariableDeclaration"===n.left.type?n.left.declarations[0].id:n.left);let o=null;if(null!=e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]){const n=e.globalScope[a].value;o=e.globalScope[a]={value:n}}if(null===o)throw new c.aV(e,c.rH.InvalidIdentifier,n);return(0,O.kJ)(t)||(0,O.HD)(t)?await R(e,n,t,o):(0,f.j)(t)?await P(e,n,t,o):t instanceof l.Z||(0,f.s)(t)?await R(e,n,t.keys(),o,"k"):(0,f.m)(t)?await D(e,n,t,o):(0,f.h)(t)?await R(e,n,(0,i.mw)(t),o,"k"):f.v}(e,n);case"ForOfStatement":return await async function(e,n){const t=await J(e,n.right);"VariableDeclaration"===n.left.type&&await C(e,n.left);const a=(0,r.D)("VariableDeclaration"===n.left.type?n.left.declarations[0].id:n.left);let o=null;if(null!=e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]){const n=e.globalScope[a].value;o=e.globalScope[a]={value:n}}if(null===o)throw new c.aV(e,c.rH.InvalidIdentifier,n);return(0,O.kJ)(t)||(0,O.HD)(t)?await R(e,n,t,o,"k"):(0,f.j)(t)?await P(e,n,t,o,"k"):t instanceof l.Z||(0,f.s)(t)?await async function(e,n,t,r){for(const a of t.keys()){const o=t.field(a);r.value=l.Z.containerEntry(a,o);const i=await C(e,n.body);if(i===f.q)break;if(i instanceof f.R)return i}return f.v}(e,n,t,o):(0,f.m)(t)?await D(e,n,t,o):(0,f.h)(t)?await async function(e,n,t,r){for(const a of(0,i.mw)(t)){const o=(0,i.Zg)(t,a,e,n,1);r.value=l.Z.containerEntry(a,o);const c=await C(e,n.body);if(c===f.q)break;if(c instanceof f.R)return c}return f.v}(e,n,t,o):f.v}(e,n);case"BreakStatement":return f.q;case"EmptyStatement":return f.v;case"ContinueStatement":return f.r;default:throw new c.aV(e,c.rH.Unrecognized,n)}}catch(t){throw(0,c.VO)(e,n,t)}}async function R(e,n,t,r,a="i"){const o=t.length;for(let i=0;i<o;i++){if("k"===a){if(i>=t.length)throw new c.aV(e,c.rH.OutOfBounds,n);r.value=t[i]}else r.value=i;const o=await C(e,n.body);if(o===f.q)break;if(o instanceof f.R)return o}return f.v}async function P(e,n,t,r,a="i"){const o=t.length();for(let i=0;i<o;i++){r.value="k"===a?t.get(i):i;const o=await C(e,n.body);if(o===f.q)break;if(o instanceof f.R)return o}return f.v}async function D(e,n,t,r){const a=t.iterator(e.abortSignal);let o;for(;null!=(o=await a.next());){const a=s.Z.createFromGraphicLikeObject(o.geometry,o.attributes,t,e.timeZone);a._underlyingGraphic=o,r.value=a;const i=await C(e,n.body);if(i===f.q)break;if(i instanceof f.R)return i}return f.v}function k(e,n,t,r,a){switch(n){case"=":return e===f.v?null:e;case"/=":return(0,f.u)(t)/(0,f.u)(e);case"*=":return(0,f.u)(t)*(0,f.u)(e);case"-=":return(0,f.u)(t)-(0,f.u)(e);case"+=":return(0,O.HD)(t)||(0,O.HD)(e)?(0,f.w)(t)+(0,f.w)(e):(0,f.u)(t)+(0,f.u)(e);case"%=":return(0,f.u)(t)%(0,f.u)(e);default:throw new c.aV(a,c.rH.UnsupportedOperator,r)}}async function B(e,n){return j(e,n,0)}async function j(e,n,t){if(t>=n.body.length)return f.v;const r=await C(e,n.body[t]);return r instanceof f.R||r===f.q||r===f.r||t===n.body.length-1?r:j(e,n,t+1)}async function M(e,n,t){return t>=n.declarations.length||(await async function(e,n){let t=null;if(t=null===n.init?null:await J(e,n.init),null!==e.localScope){if(t===f.v&&(t=null),"Identifier"!==n.id.type)throw new c.aV(e,c.rH.InvalidIdentifier,n);const a=(0,r.D)(n.id);return void(null!=e.localScope&&(e.localScope[a]={value:t}))}if("Identifier"!==n.id.type)throw new c.aV(e,c.rH.InvalidIdentifier,n);const a=(0,r.D)(n.id);t===f.v&&(t=null),e.globalScope[a]={value:t}}(e,n.declarations[t]),t===n.declarations.length-1||await M(e,n,t+1)),f.v}function E(e,n){const t=(0,r.D)(n);if(null!=e.localScope&&void 0!==e.localScope[t])return e.localScope[t].value;if(void 0!==e.globalScope[t])return e.globalScope[t].value;throw new c.aV(e,c.rH.InvalidIdentifier,n)}async function q(e,n){(0,f.B)(null===n.arguments?[]:n.arguments,3,3,e,n);const t=await J(e,n.arguments[0]);if(!1===(0,O.jn)(t))throw new c.aV(e,c.rH.BooleanConditionRequired,n);return J(e,t?n.arguments[1]:n.arguments[2])}async function L(e,n){(0,f.B)(null===n.arguments?[]:n.arguments,2,3,e,n);const t=await J(e,n.arguments[0]);if(3===n.arguments.length){const r=await J(e,n.arguments[1]),a=(0,i.uV)(t,r);return null!=a&&""!==a?a:J(e,n.arguments[2])}return null==t||""===t?J(e,n.arguments[1]):t}async function K(e,n){if(n.arguments.length<2)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);if(2===n.arguments.length)return J(e,n.arguments[1]);if((n.arguments.length-1)%2==0)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);return U(e,n,1,await J(e,n.arguments[0]))}async function U(e,n,t,r){const a=await J(e,n.arguments[t]);if((0,f.y)(a,r))return J(e,n.arguments[t+1]);const o=n.arguments.length-t;return 1===o?J(e,n.arguments[t]):2===o?null:3===o?J(e,n.arguments[t+2]):U(e,n,t+2,r)}async function G(e,n){if(n.arguments.length<3)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);if(n.arguments.length%2==0)throw new c.aV(e,c.rH.WrongNumberOfParameters,n);const t=await J(e,n.arguments[0]);if(!1===(0,O.jn)(t))throw new c.aV(e,c.rH.BooleanConditionRequired,n.arguments[0]);return T(e,n,0,t)}async function T(e,n,t,r){if(!0===r)return J(e,n.arguments[t+1]);if(3==n.arguments.length-t)return J(e,n.arguments[t+2]);const a=await J(e,n.arguments[t+2]);if(!1===(0,O.jn)(a))throw new c.aV(e,c.rH.ModuleExportNotFound,n.arguments[t+2]);return T(e,n,t+2,a)}const z=function(){const e=Object.create(null);(0,h.r)(e,I),(0,b.r)(e,I),(0,g.r)(e,I,E),(0,v.r)(e,I),(0,m.r)(e,I),(0,S.r)(e,I),(0,y.registerFunctions)({functions:e,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:I,standardFunctionAsync:A}),e.iif=q,e.defaultvalue=L,e.decode=K,e.when=G;const n=function(){this.textformatting={value:l.Z.textFormatting()}};(n.prototype=Object.create(null)).infinity=Object.freeze({value:Number.POSITIVE_INFINITY}),n.prototype.pi=Object.freeze({value:Math.PI});for(const[t,r]of Object.entries(e))n.prototype[t]=Object.freeze({value:new u.Bx(r)});return n}();function W(e){const n={mode:"async",compiled:!1,functions:Object.create(null),signatures:[],standardFunction:I,standardFunctionAsync:A,evaluateIdentifier:E};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const[e,t]of Object.entries(n.functions))z.prototype[e]=Object.freeze({value:new u.Bx(t)});for(let e=0;e<n.signatures.length;e++)(0,d.gW)(n.signatures[e],"async")}function _(e,n,t){const r=new z;null==e&&(e={}),null==n&&(n={});for(const e in n)r[e]={value:new u.Bx(n[e])};for(const n in e)r[n]={value:(0,O.Kf)(e[n])?s.Z.createFromGraphic(e[n],t):e[n]};return r}function Y(e){console.log(e)}async function $(e,n){const t=n.spatialReference??V.Z.WebMercator;let a=null;e.usesModules&&(a=new o.s(new Map,e.loadedModules));const i=_(n.vars,n.customfunctions,n.timeZone),l={spatialReference:t,services:n.services,exports:{},libraryResolver:a,abortSignal:n.abortSignal??r.j,globalScope:i,console:n.console??Y,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:{depth:1}},s=await B(l,e);if(s instanceof f.R||s instanceof f.I){const e=s.value;if((0,f.A)(e))return null;if((0,f.i)(e))throw new c.aV(l,c.rH.IllegalResult,null);return e}if((0,f.A)(s))return null;if(s===f.q)throw new c.aV(l,c.rH.IllegalResult,null);if(s===f.r)throw new c.aV(l,c.rH.IllegalResult,null);throw new c.aV(l,c.rH.NeverReach,null)}W([p.A]),W([w.A])},41819:function(e,n,t){t.r(n),t.d(n,{registerFunctions:function(){return N}});var r=t(57829),a=t(92530),o=t(12122),i=t(80095),l=t(67161),c=t(10921),s=t(78608),u=t(9079),f=t(3480),d=t(71354),w=t(82890),p=t(82868),h=t(60508),g=t(67764),y=t(62197),m=t(90756),v=t(77601),S=t(10218),b=t(78619);async function H(e,n,t){const r=S.id?.findCredential(e.restUrl);if(!r)return null;if("loaded"===e.loadStatus&&""===n&&e.user?.sourceJSON&&!1===t)return e.user.sourceJSON;const a={responseType:"json",query:{f:"json"}};if(t&&(a.query.returnUserLicenseTypeExtensions=!0),""===n){const n=await(0,b.Z)(e.restUrl+"/community/self",a);if(n.data){const e=n.data;if(e?.username)return e}return null}const o=await(0,b.Z)(e.restUrl+"/community/users/"+n,a);if(o.data){const e=o.data;return e.error?null:e}return null}var V=t(43462);function O(e){if(null==e)return e;switch(typeof e){case"string":case"number":return e;default:throw new o.aV(null,o.rH.InvalidParameter,null)}}function N(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null===a[0]||null===a[1]||(0,u.c)("disjoint",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("intersects",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("touches",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("crosses",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("within",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("contains",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null!==a[0]&&null!==a[1]&&(0,u.c)("overlaps",[a[0].toJSON(),a[1].toJSON()]))))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>((0,l.B)(a,2,2,n,t),a[0]===a[1]||(a[0]instanceof w.Z&&a[1]instanceof w.Z?(0,u.c)("equals",[a[0].toJSON(),a[1].toJSON()]):((0,l.e)(a[0])&&(0,l.e)(a[1])||!!((0,l.g)(a[0])&&(0,l.g)(a[1])||(0,l.f)(a[0])&&(0,l.f)(a[1])))&&a[0].equals(a[1])))))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,3,3,n,t),a[0]instanceof w.Z&&a[1]instanceof w.Z)return(0,u.c)("relate",[a[0].toJSON(),a[1].toJSON(),(0,l.w)(a[2])]);if(a[0]instanceof w.Z&&null===a[1])return!1;if(a[1]instanceof w.Z&&null===a[0])return!1;if(null===a[0]&&null===a[1])return!1;throw new o.aV(n,o.rH.InvalidParameter,t)}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null===a[0]||null===a[1]?null:(0,m.im)(await(0,u.c)("intersection",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(0===(a=(0,l.C)(a)).length)throw new o.aV(n,o.rH.WrongNumberOfParameters,t);const c=[];if(1===a.length)if((0,V.kJ)(a[0])){for(const e of(0,l.C)(a[0]))if(null!==e){if(!(e instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);c.push(e.toJSON())}}else{if(!(0,l.j)(a[0])){if(a[0]instanceof w.Z)return(0,l.D)((0,i.r1)(a[0]),n.spatialReference);if(null===a[0])return null;throw new o.aV(n,o.rH.InvalidParameter,t)}for(const e of(0,l.C)(a[0].toArray()))if(null!==e){if(!(e instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);c.push(e.toJSON())}}else for(const e of a)if(null!==e){if(!(e instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);c.push(e.toJSON())}return 0===c.length?null:(0,m.im)(await(0,u.c)("union",[c]))}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null===a[0]?null:null===a[1]?(0,i.r1)(a[0]):(0,m.im)(await(0,u.c)("difference",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,l.C)(a),(0,s.A9)(a,n,t),null===a[0]&&null===a[1]?null:null===a[0]?(0,i.r1)(a[1]):null===a[1]?(0,i.r1)(a[0]):(0,m.im)(await(0,u.c)("symmetricDifference",[a[0].toJSON(),a[1].toJSON()])))))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,2,n,t),!(a[1]instanceof d.Z)&&null!==a[1])throw new o.aV(n,o.rH.InvalidParameter,t);if(null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return null===a[1]?null:(0,m.im)(await(0,u.c)("clip",[a[0].toJSON(),a[1].toJSON()]))}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,2,n,t),!(a[1]instanceof y.Z)&&null!==a[1])throw new o.aV(n,o.rH.InvalidParameter,t);if(null===a[0])return[];if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return null===a[1]?[(0,i.r1)(a[0])]:(await(0,u.c)("cut",[a[0].toJSON(),a[1].toJSON()])).map((e=>(0,m.im)(e)))}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.B)(a,1,2,n,t),a=(0,l.C)(a),(0,l.m)(a[0])){const e=await a[0].sumArea(O(a[1]),null,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}let i=a[0];if(((0,V.kJ)(i)||(0,l.j)(i))&&(i=(0,l.E)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("area",[i.toJSON(),O(a[1])])}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{(0,l.B)(a,1,3,n,t);let i=(a=(0,l.C)(a))[0];((0,V.kJ)(i)||(0,l.j)(i))&&(i=(0,l.E)(i,n.spatialReference));const c=O(a[1]),f=(0,s.q2)(a[2]);if((0,l.m)(i)){const e=await i.sumArea(c,f,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}if(null==i)return 0;if(!(0,l.h)(i))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("geodeticArea",[i.toJSON(),c,f])}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if((0,l.B)(a,1,2,n,t),a=(0,l.C)(a),(0,l.m)(a[0])){const e=await a[0].sumLength(O(a[1]),null,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}let i=a[0];if(((0,V.kJ)(a[0])||(0,l.j)(a[0]))&&(i=(0,l.F)(a[0],n.spatialReference)),null===i)return 0;if(!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("length",[i.toJSON(),O(a[1])])}))},e.functions.length3d=function(n,r){return e.standardFunctionAsync(n,r,(async(e,a,i)=>{if((0,l.B)(i,1,2,n,r),null===(i=(0,l.C)(i))[0])return 0;let c=i[0];if(((0,V.kJ)(i[0])||(0,l.j)(i[0]))&&(c=(0,l.F)(i[0],n.spatialReference)),null===c)return 0;if(!(c instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,r);if(!0===c.hasZ){const{convertFromSpatialReferenceUnit:e,toLengthUnit:n}=await Promise.resolve().then(t.bind(t,1631)),r=(0,s.$1)(c);return e(c.spatialReference,n(i[1]),r)}return(0,u.c)("length",[c.toJSON(),O(i[1])])}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{(0,l.B)(a,1,3,n,t);let i=(a=(0,l.C)(a))[0];((0,V.kJ)(a[0])||(0,l.j)(a[0]))&&(i=(0,l.F)(a[0],n.spatialReference));const c=O(a[1]),f=(0,s.q2)(a[2]);if((0,l.m)(i)){const e=await i.sumLength(c,f,n.abortSignal);if(n.abortSignal.aborted)throw new o.aV(n,o.rH.Cancelled,t);return e}if(null===i)return 0;if(!(0,l.h)(i))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("geodeticLength",[i.toJSON(),c,f])}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.C)(a),(0,l.B)(a,2,3,n,t);let i=a[0];if(((0,V.kJ)(a[0])||(0,l.j)(a[0]))&&(i=(0,l.G)(a[0],n.spatialReference)),!(i instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);let c=a[1];if(((0,V.kJ)(a[1])||(0,l.j)(a[1]))&&(c=(0,l.G)(a[1],n.spatialReference)),!(c instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("distance",[i.toJSON(),c.toJSON(),O(a[2])])}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.C)(a),(0,l.B)(a,2,4,n,t);const i=a[0];if(!(i instanceof h.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const c=a[1];if(!(c instanceof h.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const f=new y.Z({paths:[],spatialReference:i.spatialReference});return f.addPath([i,c]),(0,u.c)("geodeticLength",[f.toJSON(),O(a[2]),(0,s.q2)(a[3])])}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.u)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);if(i<=0)throw new o.aV(n,o.rH.InvalidParameter,t);switch(a[0].type){case"polygon":case"polyline":case"extent":return(0,m.im)(await(0,u.c)("densify",[a[0].toJSON(),i,O(a[2])]));default:return a[0]}}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.C)(a),(0,l.B)(a,2,4,n,t);const i=a[0];if(null==i)return null;if(!(0,l.h)(i))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.u)(a[1]);if(isNaN(c))throw new o.aV(n,o.rH.InvalidParameter,t);if(c<=0)throw new o.aV(n,o.rH.InvalidParameter,t);const f=O(a[2]),d=(0,s.q2)(a[3]);switch(i.type){case"polygon":case"polyline":case"extent":return(0,m.im)(await(0,u.c)("geodeticDensify",[i.toJSON(),c,f,d]));default:return i}}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,4,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.u)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.H)((0,l.J)(a[2],!0));return(0,m.im)(await(0,u.c)("generalize",[a[0].toJSON(),i,O(a[3]),{removeDegenerateParts:c}]))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,l.u)(a[1]);if(isNaN(c))throw new o.aV(n,o.rH.InvalidParameter,t);return 0===c?(0,i.r1)(a[0]):(0,m.im)(await(0,u.c)("buffer",[a[0].toJSON(),c,O(a[2])]))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{a=(0,l.C)(a),(0,l.B)(a,2,4,n,t);const c=a[0];if(null==c)return null;if(!(0,l.h)(c))throw new o.aV(n,o.rH.InvalidParameter,t);const f=(0,l.u)(a[1]);if(isNaN(f))throw new o.aV(n,o.rH.InvalidParameter,t);if(0===f)return(0,i.r1)(c);const d=O(a[2]),w=(0,s.q2)(a[3]);return(0,m.im)(await(0,u.c)("geodesicBuffer",[c.toJSON(),f,d,w]))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,6,n,t),null===a[0])return null;if(!(a[0]instanceof g.Z||a[0]instanceof y.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=(0,l.u)(a[1]);if(isNaN(i))throw new o.aV(n,o.rH.InvalidParameter,t);const c=(0,s.NV)(a[3]),f=(0,l.u)((0,l.J)(a[4],10));if(isNaN(f))throw new o.aV(n,o.rH.InvalidParameter,t);const d=(0,l.u)((0,l.J)(a[5],0));if(isNaN(d))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,m.im)(await(0,u.c)("offset",[a[0].toJSON(),i,O(a[2]),{joins:c,miterLimit:f,flattenError:d}]))}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,2,3,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);const i=a[0]instanceof d.Z?g.Z.fromExtent(a[0]):a[0],c=(0,l.u)(a[1]);if(isNaN(c))throw new o.aV(n,o.rH.InvalidParameter,t);const s=(0,l.J)(a[2],null);if(null===s){const e="point"===i.type?i:i.extent?.center;return(0,m.im)(await(0,u.c)("rotate",[i.toJSON(),c,e?.x,e?.y]))}if(s instanceof h.Z)return(0,m.im)(await(0,u.c)("rotate",[i.toJSON(),c,s.x,s.y]));throw new o.aV(n,o.rH.InvalidParameter,t)}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,1,2,n,t),null===a[0])return null;const i=(0,s.Y1)(a[1]);let c=a[0];if(((0,V.kJ)(a[0])||(0,l.j)(a[0]))&&(c="geometric"===i?(0,l.G)(a[0],n.spatialReference):(0,l.E)(a[0],n.spatialReference),null===c))return null;if(!(c instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,m.im)("geometric"===i?await(0,u.c)("centroid",[c.toJSON()]):await(0,u.c)("labelPoint",[c.toJSON()]))}))},e.functions.measuretocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.vt)},e.functions.pointtocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.z$)},e.functions.distancetocoordinate=function(n,t){return e.standardFunctionAsync(n,t,s.gc)},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);if(a[0]instanceof h.Z)return[(0,l.D)((0,i.r1)(a[0]),n.spatialReference)];if(a[0]instanceof d.Z)return[(0,l.D)((0,i.r1)(a[0]),n.spatialReference)];const c=(0,m.im)(await(0,u.c)("simplify",[a[0].toJSON()]));if(c instanceof g.Z){const e=[],n=[];for(let t=0;t<c.rings.length;t++)if(c.isClockwise(c.rings[t])){const n=(0,m.im)({rings:[c.rings[t]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});e.push(n)}else n.push({ring:c.rings[t],pt:c.getPoint(t,0)});for(let t=0;t<n.length;t++)for(let r=0;r<e.length;r++)if(e[r].contains(n[t].pt)){e[r].addRing(n[t].ring);break}return e}if(c instanceof y.Z){const e=[];for(let n=0;n<c.paths.length;n++){const t=(0,m.im)({paths:[c.paths[n]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});e.push(t)}return e}if(a[0]instanceof p.Z){const e=[],t=(0,l.D)((0,i.r1)(a[0]),n.spatialReference);for(let n=0;n<t.points.length;n++)e.push(t.getPoint(n));return e}return null}))},e.functions.isselfintersecting=function(n,t){return e.standardFunctionAsync(n,t,(async(e,n,t)=>{(0,l.B)(t,1,1,e,n);let r=(t=(0,l.C)(t))[0];if(((0,V.kJ)(t[0])||(0,l.j)(t[0]))&&(r=(0,l.F)(t[0],e.spatialReference)),r instanceof p.Z){const e=r.points;for(let n=0;n<e.length;n++)for(let t=n+1;t<e.length;t++)if((0,f.fS)(e[n],e[t]))return!0;return!1}return(r instanceof y.Z||r instanceof g.Z)&&await(0,u.c)("isSelfIntersecting",[r.toJSON()])}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,1,1,n,t),null===a[0])return!0;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,u.c)("isSimple",[a[0].toJSON()])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,m.im)(await(0,u.c)("simplify",[a[0].toJSON()]))}))},e.functions.convexhull=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,a)=>{if(a=(0,l.C)(a),(0,l.B)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof w.Z))throw new o.aV(n,o.rH.InvalidParameter,t);return(0,m.im)(await(0,u.c)("convexHull",[a[0].toJSON()]))}))},e.functions.getuser=function(n,t){return e.standardFunctionAsync(n,t,(async(e,i,s)=>{(0,l.B)(s,0,2,n,t);let u=(0,l.J)(s[1],""),f=!0===u;if(u=!0===u||!1===u?"":(0,l.w)(u),0===s.length||s[0]instanceof r.Z){let e;e=n.services?.portal?n.services.portal:v.Z.getDefault(),s.length>0&&(e=(0,c._)(s[0],e));const t=await H(e,u,f);if(t){const e=JSON.parse(JSON.stringify(t));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return a.Z.convertObjectToArcadeDictionary(e,(0,l.K)(n))}return null}let d=null;if((0,l.m)(s[0])&&(d=s[0]),d){if(f=!1,u)return null;await d.load();const e=await d.getOwningSystemUrl();if(!e){if(!u){const e=await d.getIdentityUser();return e?a.Z.convertObjectToArcadeDictionary({username:e},(0,l.K)(n)):null}return null}let t;t=n.services?.portal?n.services.portal:v.Z.getDefault(),t=(0,c._)(new r.Z(e),t);const o=await H(t,u,f);if(o){const e=JSON.parse(JSON.stringify(o));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return a.Z.convertObjectToArcadeDictionary(e,(0,l.K)(n))}return null}throw new o.aV(n,o.rH.InvalidParameter,t)}))},e.functions.nearestcoordinate=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=(0,l.C)(i),(0,l.B)(i,2,2,n,t),!(i[0]instanceof w.Z||null===i[0]))throw new o.aV(n,o.rH.InvalidParameter,t);if(!(i[1]instanceof h.Z||null===i[1]))throw new o.aV(n,o.rH.InvalidParameter,t);if(null===i[0]||null===i[1])return null;const c=i[0]instanceof d.Z?g.Z.fromExtent(i[0]):i[0],s=await(0,u.c)("getNearestCoordinate",[c.toJSON(),i[1].toJSON(),{calculateLeftRightSide:!0}]);return null===s?null:a.Z.convertObjectToArcadeDictionary({coordinate:(0,m.im)(s.coordinate),distance:s.distance,sideOfLine:0===s.distance?"straddle":s.isRightSide?"right":"left"},(0,l.K)(n),!1,!0)}))},e.functions.nearestvertex=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=(0,l.C)(i),(0,l.B)(i,2,2,n,t),!(i[0]instanceof w.Z||null===i[0]))throw new o.aV(n,o.rH.InvalidParameter,t);if(!(i[1]instanceof h.Z||null===i[1]))throw new o.aV(n,o.rH.InvalidParameter,t);if(null===i[0]||null===i[1])return null;const c=i[0]instanceof d.Z?g.Z.fromExtent(i[0]):i[0],s=await(0,u.c)("getNearestVertex",[c.toJSON(),i[1].toJSON()]);return null===s?null:a.Z.convertObjectToArcadeDictionary({coordinate:(0,m.im)(s.coordinate),distance:s.distance,sideOfLine:0===s.distance?"straddle":s.isRightSide?"right":"left"},(0,l.K)(n),!1,!0)}))})}},9079:function(e,n,t){t.d(n,{c:function(){return c}});var r=t(82592);let a,o,i=!1;function l(){return a??=(0,r.bA)("arcadeGeometryOperatorsWorker").then((e=>{o=e,i=!0,a=void 0}))}async function c(e,n){return i?o.apply("invokeGeometryOp",[e,n]):(await l(),c(e,n))}},10921:function(e,n,t){t.d(n,{_:function(){return a}});var r=t(77601);function a(e,n){return null===e?n:new r.Z({url:e.field("url")})}}}]);