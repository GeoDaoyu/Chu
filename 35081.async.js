"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[35081],{12853:function(e,t,r){r.d(t,{z:function(){return i}});var n=r(69071);class i{constructor(e,t){this.removeFunc=t,this._storage=new n.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58426:function(e,t,r){r.d(t,{$c:function(){return d},Hg:function(){return m},jW:function(){return p},xb:function(){return y}});var n=r(70880),i=r(43254),o=r(22018);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof n.Z}function a(e){return e instanceof i.Z?Object.keys(e.items):l(e)?(0,o.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof i.Z?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function f(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const n=a(e),i=a(t);if(0===n.length&&0===i.length)return;if(!n.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=i.filter((e=>!n.includes(e))),p=n.filter((e=>!i.includes(e))),d=n.filter((r=>i.includes(r)&&u(e,r)!==u(t,r))).concat(o,p).sort(),m=c(e);if(m&&s.has(m)&&d.length)return{type:"complete",oldValue:e,newValue:t};let y;const h=l(e)&&l(t);for(const n of d){const i=u(e,n),o=u(t,n);let s;if((h||"function"!=typeof i&&"function"!=typeof o)&&i!==o&&(null!=i||null!=o)){if(r&&r[n]&&"function"==typeof r[n])s=r[n]?.(i,o);else if(i instanceof Date&&o instanceof Date){if(i.getTime()===o.getTime())continue;s={type:"complete",oldValue:i,newValue:o}}else s="object"==typeof i&&"object"==typeof o&&c(i)===c(o)?f(i,o):{type:"complete",oldValue:i,newValue:o};null!=s&&(null!=y?y.diff[n]=s:y={type:"partial",diff:{[n]:s}})}}return y}function p(e,t){return function(e,t){if(null==e)return!1;const r=t.split(".");let n=e;for(const e of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const t=n.diff[e];if(!t)return!1;n=t}}return!0}(e,t)}function d(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}function y(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!y(e))return!1;for(const e of t.removed)if(!y(e))return!1;for(const e of t.changed)if(!y(e))return!1;return!0}case"partial":for(const t in e.diff)if(!y(e.diff[t]))return!1;return!0}}},62381:function(e,t,r){r.r(t),r.d(t,{default:function(){return ee}});var n,i=r(73440),o=r(997),s=r(78619),l=r(89314),a=r(88194),u=r(50702),c=r(28947),f=r(96711),p=r(84060),d=r(93568),m=r(17155),y=r(95226),h=r(1194),g=r(48023),b=r(71354),v=r(45213),w=r(98842),C=r(38209),I=r(58560),S=r(83263),_=r(55591),x=r(7150),M=r(15303),T=r(88920),F=r(85330),P=r(27202),A=r(19306),j=r(3752),k=r(99671),E=r(30472),O=r(93295),Z=r(88792),L=r(49651),N=r(13545),R=r(76554),z=r(89428),D=r(80862),U=r(63255);r(61432),r(83850);let $=class extends U.Z{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}static{n=this}clone(){return new n({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,i._)([(0,m.Cb)({type:Number,json:{write:!0}})],$.prototype,"age",void 0),(0,i._)([(0,m.Cb)({type:Number,json:{write:!0}})],$.prototype,"ageReceived",void 0),(0,i._)([(0,m.Cb)({type:Number,json:{write:!0}})],$.prototype,"displayCount",void 0),(0,i._)([(0,m.Cb)({type:Number,json:{write:!0}})],$.prototype,"maxObservations",void 0),$=n=(0,i._)([(0,g.j)("esri.layers.support.PurgeOptions")],$);var G=r(87970),V=r(84799),J=r(89913),B=r(60541),q=r(29191),H=r(99382),W=r(13689),Y=r(3651);const Q=(0,N.v)();function X(e,t){return new a.Z("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}let K=class extends((0,x.tM)((0,T.M)((0,M.b)((0,S.h7)((0,k.n)((0,E._)((0,j.M)((0,A.Q)((0,I.Y)((0,F.q)((0,P.I)((0,p.R)((0,_.N)(l.Z.ClonableMixin(C.Z))))))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new $,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=v.Z.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,d.Ds)((async(e,t,n)=>{const{save:i,saveAs:o}=await r.e(87556).then(r.bind(r,87556));switch(e){case Y.x.SAVE:return i(this,t);case Y.x.SAVE_AS:return o(this,n,t)}}))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new a.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(d.r9).then((()=>this._fetchService(t)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){(0,R.YN)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const n=(t=t.layerDefinition||t).drawingInfo?.renderer;if(n){const e=(0,V.a)(n,t,r)||void 0;return e||f.Z.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),e}return(0,Z.Ob)(t,r)}async connect(e){const[{createConnection:t}]=await Promise.all([r.e(79474).then(r.bind(r,79474)),this.load()]),n=this.geometryType?w.Mk.toJSON(this.geometryType):null,{customParameters:i=null,definitionExpression:o=null,geometryDefinition:s=null,maxReconnectionAttempts:l=0,maxReconnectionInterval:a=20,spatialReference:c=this.spatialReference}=e||this.createConnectionParameters(),f=t(this.parsedUrl,this.spatialReference,c,n,o,s,l,a,i??void 0),p=(0,u.AL)([this.on("send-message-to-socket",(e=>f.sendMessageToSocket(e))),this.on("send-message-to-client",(e=>f.sendMessageToClient(e)))]);return f.once("destroy",p.remove),f}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(e){return(0,H.eZ)(this,e)}createQuery(){const e=new q.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}getFieldDomain(e,t){if(!this.fields)return null;let r=null;return this.fields.some((t=>(t.name===e&&(r=t.domain),!!r))),r}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}sendMessageToSocket(e){this.emit("send-message-to-socket",e)}sendMessageToClient(e){this.emit("send-message-to-client",e)}async save(e){return this._debouncedSaveOperations(Y.x.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Y.x.SAVE_AS,t,e)}write(e,t){const r=t?.messages;return this.webSocketUrl?(r?.push(X(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(e,t):(r?.push(X(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}async _fetchService(e){if(!this.webSocketUrl&&this.parsedUrl){if(!this.sourceJSON){const{data:t}=await(0,s.Z)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,...this.parsedUrl.query},responseType:"json",signal:e});this.sourceJSON=t}}else{if(!this.timeInfo?.trackIdField)throw new a.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!this.objectIdField){const e=this.fields.find((e=>"oid"===e.type))?.name;if(!e)throw new a.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");this.objectIdField=e}if(!this.fields)throw new a.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");if(this.fields.some((e=>e.name===this.objectIdField))||this.fields.push(new L.Z({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),!this.geometryType)throw new a.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");this.webSocketUrl&&(this.url=this.webSocketUrl)}return this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}),(0,R.YN)(this.renderer,this.fieldsIndex),(0,R.UF)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField=G.r1),(0,J.y)(this,{origin:"service"})}};(0,i._)([(0,m.Cb)({type:String})],K.prototype,"copyright",void 0),(0,i._)([(0,m.Cb)({readOnly:!0})],K.prototype,"defaultPopupTemplate",null),(0,i._)([(0,m.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],K.prototype,"definitionExpression",void 0),(0,i._)([(0,m.Cb)({type:String})],K.prototype,"displayField",void 0),(0,i._)([(0,m.Cb)({type:W.Z})],K.prototype,"elevationInfo",void 0),(0,i._)([(0,m.Cb)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],K.prototype,"featureReduction",null),(0,i._)([(0,m.Cb)(Q.fields)],K.prototype,"fields",void 0),(0,i._)([(0,m.Cb)(Q.fieldsIndex)],K.prototype,"fieldsIndex",void 0),(0,i._)([(0,m.Cb)({type:b.Z,json:{name:"layerDefinition.definitionGeometry",write:!0}})],K.prototype,"geometryDefinition",void 0),(0,i._)([(0,m.Cb)({type:w.Mk.apiValues,json:{read:{reader:w.Mk.read}}})],K.prototype,"geometryType",void 0),(0,i._)([(0,m.Cb)(O.iR)],K.prototype,"labelsVisible",void 0),(0,i._)([(0,m.Cb)({type:[z.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:D.r},write:!0}})],K.prototype,"labelingInfo",void 0),(0,i._)([(0,m.Cb)(O.rn)],K.prototype,"legendEnabled",void 0),(0,i._)([(0,m.Cb)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],K.prototype,"listMode",void 0),(0,i._)([(0,m.Cb)({type:y.z8})],K.prototype,"maxReconnectionAttempts",void 0),(0,i._)([(0,m.Cb)({type:y.z8})],K.prototype,"maxReconnectionInterval",void 0),(0,i._)([(0,m.Cb)(O.u1)],K.prototype,"maxScale",void 0),(0,i._)([(0,m.Cb)(O.rO)],K.prototype,"minScale",void 0),(0,i._)([(0,m.Cb)({type:String})],K.prototype,"objectIdField",void 0),(0,i._)([(0,m.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],K.prototype,"operationalLayerType",void 0),(0,i._)([(0,m.Cb)({readOnly:!0})],K.prototype,"outFields",void 0),(0,i._)([(0,m.Cb)(O.C_)],K.prototype,"popupEnabled",void 0),(0,i._)([(0,m.Cb)({type:o.Z,json:{name:"popupInfo",write:!0}})],K.prototype,"popupTemplate",void 0),(0,i._)([(0,m.Cb)({type:$})],K.prototype,"purgeOptions",void 0),(0,i._)([(0,m.Cb)({json:{read:!1,write:!1}})],K.prototype,"refreshInterval",void 0),(0,i._)([(0,m.Cb)({types:B.Av,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:B.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],K.prototype,"renderer",null),(0,i._)([(0,h.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,h.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],K.prototype,"readRenderer",null),(0,i._)([(0,m.Cb)((()=>{const e=(0,c.d9)(O.YI);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],K.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,m.Cb)()],K.prototype,"sourceJSON",void 0),(0,i._)([(0,m.Cb)({type:v.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],K.prototype,"spatialReference",void 0),(0,i._)([(0,m.Cb)({json:{read:!1}})],K.prototype,"type",void 0),(0,i._)([(0,m.Cb)(O.HQ)],K.prototype,"url",void 0),(0,i._)([(0,m.Cb)({type:Number})],K.prototype,"updateInterval",void 0),(0,i._)([(0,m.Cb)({json:{read:!1,write:!1}})],K.prototype,"useViewTime",void 0),(0,i._)([(0,m.Cb)({type:String})],K.prototype,"webSocketUrl",void 0),K=(0,i._)([(0,g.j)("esri.layers.StreamLayer")],K);const ee=K},615:function(e,t,r){r.d(t,{cW:function(){return a},ij:function(){return l},rM:function(){return u}});var n=r(88194),i=r(60123),o=r(13928),s=r(8971);function l(e,t,r){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:u(r.value)});return t}return u(e)}(e)}catch(e){r?.messages?.push(e)}return null}function a(e,t,r,n){try{const n=function(e){const t=(0,o.Q)(e);return t?(0,s.Cb)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);(0,i.RB)(r,n,t)}catch(e){n.messages&&n.messages.push(e)}}function u(e){if(!e?.length)return"";const t=[];for(const r of e){let e=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(r,"amount")];break;case"blur":e=[c(r,"radius","pt")];break;case"hue-rotate":e=[c(r,"angle","deg")];break;case"drop-shadow":e=[c(r,"xoffset","pt"),c(r,"yoffset","pt"),c(r,"blurRadius","pt"),f(r,"color")];break;case"bloom":e=[c(r,"strength"),c(r,"radius","pt"),c(r,"threshold")]}const n=`${r.type}(${e.filter(Boolean).join(" ")})`;(0,o.Q)(n),t.push(n)}return t.join(" ")}function c(e,t,r){if(null==e[t])throw new n.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function f(e,t){if(null==e[t])throw new n.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}},13928:function(e,t,r){r.d(t,{Q:function(){return u}});var n=r(38461),i=r(88194),o=r(71480),s=r(8971);class l extends SyntaxError{constructor(e,t,r,n){super(e),this.expected=t,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let r=null;const n=e.find((e=>e.source===this.location.source));n&&(r=n.text.split(/\r\n|\n|\r/g));const i=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,s=this.location.source+":"+o.line+":"+o.column;if(r){const e=this.location.end,n="".padEnd(o.line.toString().length," "),l=r[i.line-1],a=(i.line===e.line?e.column:l.length+1)-i.column||1;t+="\n --\x3e "+s+"\n"+n+" |\n"+o.line+" | "+l+"\n"+n+" | "+"".padEnd(i.column-1," ")+"".padEnd(a,"^")}else t+="\n at "+s}return t}static buildMessage(e,t){function r(e){return e.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function i(e){return n?e.replace(n,(e=>"\\u{"+r(e)+"}")):e}function o(e){return i(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+r(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+r(e))))}function s(e){return i(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+r(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+r(e))))}const l={literal:e=>'"'+o(e.text)+'"',class(e){const t=e.parts.map((e=>Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function a(e){return l[e.type](e)}return"Expected "+function(e){const t=e.map(a);if(t.sort(),t.length>0){let e=1;for(let r=1;r<t.length;r++)t[r-1]!==t[r]&&(t[e]=t[r],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."}}function a(e,t){const r={},n=(t=void 0!==t?t:{}).grammarSource,i={start:ae};let o=ae;const s="none",a=",",u="grad",c="turn",f=/^[ \t\n\r]/,p=/^[a-z\-]/,d=/^[0-9a-fA-F]/,m=/^[+\-]/,y=/^[0-9]/,h=ie("none"),g=re("none",!1),b=re(")",!1),v=re(",",!1),w=ne([" ","\t","\n","\r"],!1,!1,!1),C=ie("function"),I=re("(",!1),S=ie("identifier"),_=ne([["a","z"],"-"],!1,!1,!1),x=ie("percentage"),M=re("%",!1),T=ie("length"),F=re("px",!1),P=re("cm",!1),A=re("mm",!1),j=re("in",!1),k=re("pt",!1),E=re("pc",!1),O=ie("angle"),Z=re("deg",!1),L=re("rad",!1),N=re("grad",!1),R=re("turn",!1),z=ie("number"),D=ie("color"),U=re("#",!1),$=ne([["0","9"],["a","f"],["A","F"]],!1,!1,!1),G=ne(["+","-"],!1,!1,!1),V=ne([["0","9"]],!1,!1,!1),J=re(".",!1),B=re("e",!1);function q(e,t){return t.length>0?function(e,t,r){return[e].concat(function(e,t){return e.map((function(e){return e[t]}))}(t,r))}(e,t,3):[e]}let H=0|t.peg$currPos,W=H;const Y=[{line:1,column:1}];let Q,X=H,K=t.peg$maxFailExpected||[],ee=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=i[t.startRule]}function te(){return e.substring(W,H)}function re(e,t){return{type:"literal",text:e,ignoreCase:t}}function ne(e,t,r,n){return{type:"class",parts:e,inverted:t,ignoreCase:r,unicode:n}}function ie(e){return{type:"other",description:e}}function oe(t){let r,n=Y[t];if(n)return n;if(t>=Y.length)r=Y.length-1;else for(r=t;!Y[--r];);for(n=Y[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Y[t]=n,n}function se(e,t,r){const i=oe(e),o=oe(t);return{source:n,start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:o.line,column:o.column}}}function le(e){H<X||(H>X&&(X=H,K=[]),K.push(e))}function ae(){let e;return e=ue(),e===r&&(e=function(){let e,t;if(e=[],t=ce(),t!==r)for(;t!==r;)e.push(t),t=ce();else e=r;return e}()),e}function ue(){let t,n;return ee++,t=H,pe(),e.substr(H,4)===s?(n=s,H+=4):(n=r,0===ee&&le(g)),n!==r?(pe(),W=t,t=[]):(H=t,t=r),ee--,t===r&&0===ee&&le(h),t}function ce(){let t,n,i,o;return t=H,pe(),n=function(){let t,n,i;return ee++,t=H,n=de(),n!==r?(40===e.charCodeAt(H)?(i="(",H++):(i=r,0===ee&&le(I)),i!==r?(W=t,t=n):(H=t,t=r)):(H=t,t=r),ee--,t===r&&(n=r,0===ee&&le(C)),t}(),n!==r?(pe(),i=function(){let t,n,i,o,s,l,u,c;if(t=H,n=fe(),n!==r){for(i=[],o=H,s=pe(),44===e.charCodeAt(H)?(l=a,H++):(l=r,0===ee&&le(v)),l===r&&(l=null),u=pe(),c=fe(),c!==r?(s=[s,l,u,c],o=s):(H=o,o=r);o!==r;)i.push(o),o=H,s=pe(),44===e.charCodeAt(H)?(l=a,H++):(l=r,0===ee&&le(v)),l===r&&(l=null),u=pe(),c=fe(),c!==r?(s=[s,l,u,c],o=s):(H=o,o=r);W=t,t=q(n,i)}else H=t,t=r;return t}(),i===r&&(i=null),pe(),41===e.charCodeAt(H)?(o=")",H++):(o=r,0===ee&&le(b)),o!==r?(pe(),W=t,t=function(e,t){return{type:"function",name:e,parameters:t||[]}}(n,i)):(H=t,t=r)):(H=t,t=r),t}function fe(){let e,t;return e=H,t=me(),t===r&&(t=ye(),t===r&&(t=he(),t===r&&(t=function(){let e,t;return ee++,e=H,pe(),t=be(),t!==r?(W=e,e=function(e){return{value:e,unit:null}}(t)):(H=e,e=r),ee--,e===r&&0===ee&&le(z),e}()))),t!==r&&(W=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),e=t,e===r&&(e=H,t=ge(),t!==r&&(W=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function pe(){let t,n;for(ee++,t=[],n=e.charAt(H),f.test(n)?H++:(n=r,0===ee&&le(w));n!==r;)t.push(n),n=e.charAt(H),f.test(n)?H++:(n=r,0===ee&&le(w));return ee--,t}function de(){let t,n,i;if(ee++,t=H,n=[],i=e.charAt(H),p.test(i)?H++:(i=r,0===ee&&le(_)),i!==r)for(;i!==r;)n.push(i),i=e.charAt(H),p.test(i)?H++:(i=r,0===ee&&le(_));else n=r;return n!==r&&(W=t,n=te()),t=n,ee--,t===r&&(n=r,0===ee&&le(S)),t}function me(){let t,n,i;return ee++,t=H,pe(),n=be(),n!==r?(37===e.charCodeAt(H)?(i="%",H++):(i=r,0===ee&&le(M)),i!==r?(W=t,t=function(e){return{value:e,unit:"%"}}(n)):(H=t,t=r)):(H=t,t=r),ee--,t===r&&0===ee&&le(x),t}function ye(){let t,n,i;return ee++,t=H,pe(),n=be(),n!==r?("px"===e.substr(H,2)?(i="px",H+=2):(i=r,0===ee&&le(F)),i!==r?(W=t,t=function(e){return{value:e,unit:"px"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,pe(),n=be(),n!==r?("cm"===e.substr(H,2)?(i="cm",H+=2):(i=r,0===ee&&le(P)),i!==r?(W=t,t=function(e){return{value:e,unit:"cm"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,pe(),n=be(),n!==r?("mm"===e.substr(H,2)?(i="mm",H+=2):(i=r,0===ee&&le(A)),i!==r?(W=t,t=function(e){return{value:e,unit:"mm"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,pe(),n=be(),n!==r?("in"===e.substr(H,2)?(i="in",H+=2):(i=r,0===ee&&le(j)),i!==r?(W=t,t=function(e){return{value:e,unit:"in"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,pe(),n=be(),n!==r?("pt"===e.substr(H,2)?(i="pt",H+=2):(i=r,0===ee&&le(k)),i!==r?(W=t,t=function(e){return{value:e,unit:"pt"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,pe(),n=be(),n!==r?("pc"===e.substr(H,2)?(i="pc",H+=2):(i=r,0===ee&&le(E)),i!==r?(W=t,t=function(e){return{value:e,unit:"pc"}}(n)):(H=t,t=r)):(H=t,t=r)))))),ee--,t===r&&0===ee&&le(T),t}function he(){let t,n,i;return ee++,t=H,n=be(),n!==r?("deg"===e.substr(H,3)?(i="deg",H+=3):(i=r,0===ee&&le(Z)),i!==r?(W=t,t=function(e){return{value:e,unit:"deg"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,n=be(),n!==r?("rad"===e.substr(H,3)?(i="rad",H+=3):(i=r,0===ee&&le(L)),i!==r?(W=t,t=function(e){return{value:e,unit:"rad"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,n=be(),n!==r?(e.substr(H,4)===u?(i=u,H+=4):(i=r,0===ee&&le(N)),i!==r?(W=t,t=function(e){return{value:e,unit:"grad"}}(n)):(H=t,t=r)):(H=t,t=r),t===r&&(t=H,n=be(),n!==r?(e.substr(H,4)===c?(i=c,H+=4):(i=r,0===ee&&le(R)),i!==r?(W=t,t=function(e){return{value:e,unit:"turn"}}(n)):(H=t,t=r)):(H=t,t=r)))),ee--,t===r&&(n=r,0===ee&&le(O)),t}function ge(){let t,n,i,o;if(ee++,t=H,35===e.charCodeAt(H)?(n="#",H++):(n=r,0===ee&&le(U)),n!==r){if(i=[],o=e.charAt(H),d.test(o)?H++:(o=r,0===ee&&le($)),o!==r)for(;o!==r;)i.push(o),o=e.charAt(H),d.test(o)?H++:(o=r,0===ee&&le($));else i=r;i!==r?(W=t,t={type:"hex",value:te()}):(H=t,t=r)}else H=t,t=r;return t===r&&(t=H,n=ce(),n!==r&&(W=t,n=function(e){return{type:"function",value:e}}(n)),t=n,t===r&&(t=H,n=de(),n!==r&&(W=t,n={type:"named",value:te()}),t=n)),ee--,t===r&&(n=r,0===ee&&le(D)),t}function be(){let t,n,i,o,s,l,a,u;for(t=H,n=e.charAt(H),m.test(n)?H++:(n=r,0===ee&&le(G)),n===r&&(n=null),i=H,o=[],s=e.charAt(H),y.test(s)?H++:(s=r,0===ee&&le(V));s!==r;)o.push(s),s=e.charAt(H),y.test(s)?H++:(s=r,0===ee&&le(V));if(46===e.charCodeAt(H)?(s=".",H++):(s=r,0===ee&&le(J)),s!==r){if(l=[],a=e.charAt(H),y.test(a)?H++:(a=r,0===ee&&le(V)),a!==r)for(;a!==r;)l.push(a),a=e.charAt(H),y.test(a)?H++:(a=r,0===ee&&le(V));else l=r;l!==r?(o=[o,s,l],i=o):(H=i,i=r)}else H=i,i=r;if(i===r)if(i=[],o=e.charAt(H),y.test(o)?H++:(o=r,0===ee&&le(V)),o!==r)for(;o!==r;)i.push(o),o=e.charAt(H),y.test(o)?H++:(o=r,0===ee&&le(V));else i=r;if(i!==r){if(o=H,101===e.charCodeAt(H)?(s="e",H++):(s=r,0===ee&&le(B)),s!==r){if(l=e.charAt(H),m.test(l)?H++:(l=r,0===ee&&le(G)),l===r&&(l=null),a=[],u=e.charAt(H),y.test(u)?H++:(u=r,0===ee&&le(V)),u!==r)for(;u!==r;)a.push(u),u=e.charAt(H),y.test(u)?H++:(u=r,0===ee&&le(V));else a=r;a!==r?(s=[s,l,a],o=s):(H=o,o=r)}else H=o,o=r;o===r&&(o=null),W=t,t=parseFloat(te())}else H=t,t=r;return t}Q=o();const ve=Q!==r&&H===e.length;function we(){throw Q!==r&&H<e.length&&le({type:"end"}),function(e,t,r){return new l(l.buildMessage(e,t),e,t,r)}(K,X<e.length?function(t=H){const r=e.codePointAt(t);return void 0===r?"":String.fromCodePoint(r)}(X):null,X<e.length?se(X,X+1):se(X,X))}return t.peg$library?{peg$result:Q,peg$currPos:H,peg$FAILED:r,peg$maxFailExpected:K,peg$maxFailPos:X,peg$success:ve,peg$throw:ve?void 0:we}:ve?Q:void we()}function u(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=c(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new i.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:c(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!(0,s.AS)(t[e].effects,t[e+1].effects))throw new i.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,s.uF)(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function c(e){let t;if(!e)return[];try{t=a(e)}catch(t){throw new i.Z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=h(e.parameters[0])),new o.GI(e.name,t)}(e);case"opacity":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=h(e.parameters[0])),new o.Zx(t)}(e);case"hue-rotate":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=m[e.unit]))throw new i.Z("effect:type-error",`Expected <angle>, Actual: ${p(e)}`,{term:e})}(e),e.value*m[e.unit]||0}(e.parameters[0])),new o.Tq(t)}(e);case"blur":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=b(e.parameters[0]),d(t,e.parameters[0])),new o.Tj(t)}(e);case"drop-shadow":return function(e){const t=[];let r=null;for(const n of e.parameters)if("color"===n.type){if(t.length&&Object.freeze(t),r)throw new i.Z("effect:type-error","Accepts only one color",{});r=v(n)}else{const e=b(n);if(Object.isFrozen(t))throw new i.Z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&d(e,n)}if(t.length<2||t.length>3)throw new i.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new o.CE(t[0],t[1],t[2]||0,r||w("black"))}(e);case"bloom":return function(e){let t=1,r=0,n=0;return f(e.parameters,3),e.parameters[0]&&(t=h(e.parameters[0])),e.parameters[1]&&(r=b(e.parameters[1]),d(r,e.parameters[1])),e.parameters[2]&&(n=h(e.parameters[2])),new o.rk(t,r,n)}(e)}}catch(t){throw t.details.filter=e,t}throw new i.Z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function f(e,t){if(e.length>t)throw new i.Z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function p(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in y)return"<length>";if(e.unit in m)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function d(e,t){if(e<0)throw new i.Z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const m={deg:1,grad:.9,rad:180/Math.PI,turn:360};const y={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function h(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new i.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${p(e)}`,{term:e})}(e);const t=e.value;return d(t,e),"%"===e.unit?.01*t:t}function g(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new i.Z("effect:type-error",`Expected <double>, Actual: ${p(e)}`,{term:e})}(e),d(e.value,e),e.value}function b(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=y[e.unit]))throw new i.Z("effect:type-error",`Expected <length>, Actual: ${p(e)}`,{term:e})}(e),e.value*y[e.unit]||0}function v(e){switch(e.colorType){case"hex":return(0,n.a7)(e.value);case"named":return w(e.value);case"function":return function(e){if(f(e.parameters,4),C.test(e.name))return[h(e.parameters[0]),h(e.parameters[1]),h(e.parameters[2]),e.parameters[3]?h(e.parameters[3]):1];if(I.test(e.name))return(0,n.Y6)(g(e.parameters[0]),h(e.parameters[1]),h(e.parameters[2]),e.parameters[3]?h(e.parameters[3]):1);throw new i.Z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function w(e){if(!(0,n.St)(e))throw new i.Z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,n.VL)(e)}const C=/^rgba?/i,I=/^hsla?/i},58560:function(e,t,r){r.d(t,{Y:function(){return a}});var n=r(73440),i=r(96711),o=r(17155),s=(r(61432),r(83850),r(48023)),l=r(66619);const a=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,l.Qc)(this.url);if(e?.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,l.Nm)(e,i.Z.getLogger(this)))}};return(0,n._)([(0,o.Cb)()],t.prototype,"title",null),(0,n._)([(0,o.Cb)({type:String})],t.prototype,"url",null),t=(0,n._)([(0,s.j)("esri.layers.mixins.ArcGISService")],t),t}},83263:function(e,t,r){r.d(t,{h7:function(){return f},nE:function(){return a},qu:function(){return c}});var n=r(73440),i=r(17155),o=(r(61432),r(96711),r(83850),r(48023)),s=r(71840),l=r(615);const a={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:s.C}},"portal-item":{read:!0,write:{layerContainerTypes:s.C}}}}},u={read:{reader:l.ij},write:{allowNull:!0,writer:l.cW,layerContainerTypes:s.C}},c={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},f=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,n._)([(0,i.Cb)(a)],t.prototype,"blendMode",void 0),(0,n._)([(0,i.Cb)(c)],t.prototype,"effect",void 0),t=(0,n._)([(0,o.j)("esri.layers.mixins.BlendLayer")],t),t}},55591:function(e,t,r){r.d(t,{N:function(){return s}});var n=r(73440),i=r(17155),o=(r(61432),r(96711),r(83850),r(48023));const s=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,n._)([(0,i.Cb)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,n._)([(0,o.j)("esri.layers.mixins.CustomParametersMixin")],t),t}},7150:function(e,t,r){r.d(t,{tM:function(){return b},jp:function(){return v},ey:function(){return w}});var n=r(73440),i=r(60123),o=r(17155),s=(r(61432),r(96711),r(83850),r(48023)),l=r(71840),a=r(89314),u=r(43254),c=r(63255),f=r(29884),p=r(4469),d=r(18764);const m={write:{overridePolicy:(e,t,r)=>({enabled:!r||"scale"===r.filterMode})}};let y=class extends(a.Z.ClonableMixin(c.Z)){constructor(e){super(e),this.id=(0,d.DO)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],y.prototype,"id",void 0),(0,n._)([(0,o.Cb)({type:Number,json:m})],y.prototype,"maxScale",void 0),(0,n._)([(0,o.Cb)({type:Number,json:m})],y.prototype,"minScale",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],y.prototype,"title",void 0),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],y.prototype,"where",void 0),y=(0,n._)([(0,s.j)("esri.layers.support.DisplayFilter")],y);var h=r(78279);let g=class extends(a.Z.ClonableMixin(c.Z)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(u.Z.ofType(y)),this.mode="manual"}writeFilters(e,t,r,n){const i=e.toArray();"scale"===this.mode&&i.sort(((e,t)=>{const r=(0,p.Nf)(t.minScale,e.minScale),n=e.maxScale-t.maxScale;return 0===r?n:r})),t[r]=i.map((e=>e.toJSON(n)))}write(e,t){return super.write(e,(0,h.Ee)(this,t))}};(0,n._)([(0,o.Cb)({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:"manual"===r.filterMode,isRequired:!0})}}})],g.prototype,"activeFilterId",void 0),(0,n._)([(0,o.Cb)({type:u.Z.ofType(y),nonNullable:!0,json:{write:!0}})],g.prototype,"filters",void 0),(0,n._)([(0,f.c)("filters")],g.prototype,"writeFilters",null),(0,n._)([(0,o.Cb)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],g.prototype,"mode",void 0),g=(0,n._)([(0,s.j)("esri.layers.support.DisplayFilterInfo")],g);const b=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,n._)([(0,o.Cb)(v)],t.prototype,"displayFilterEnabled",void 0),(0,n._)([(0,o.Cb)(w)],t.prototype,"displayFilterInfo",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.DisplayFilteredLayer")],t),t},v={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:l.C,writer(e,t,r){(0,i.RB)(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},w={type:g,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:l.C},origins:{"web-scene":{write:!1,read:!1}}}}},27202:function(e,t,r){r.d(t,{I:function(){return I}});var n=r(73440),i=r(81001),o=r(10218),s=r(78619),l=r(29292),a=r(88194),u=r(96711),c=r(61100),f=r(93568),p=r(95490),d=r(17155),m=(r(61432),r(83850),r(1194)),y=r(48023),h=r(29884),g=r(75428),b=r(77601),v=r(96193),w=r(91525),C=r(47626);const I=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new v.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:n}=await r.e(64975).then(r.bind(r,64975));return(0,f.k_)(t),await n({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(e){throw(0,f.D_)(e)||u.Z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,f.r9)(e),!0))))}async setUserPrivileges(e,t){if(!i.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:n},content:{updateItem:i}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",i)}catch(e){(0,f.r9)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const n=!o.id?.findCredential(this.url),i=e===r.id;if(i&&r.portal.user)return this._getUserPrivileges(r,n);let s,l;if(i)s=r.portal.url;else try{s=await(0,g.oP)(this.url,t)}catch(e){(0,f.r9)(e)}if(!s||!(0,p.Zo)(s,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;l=await(o.id?.getCredential(`${s}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,f.r9)(e)}if(!l)return{features:{edit:true,fullEdit:false},content:{updateItem:false}};try{if(i?await r.reload():(r=new v.default({id:e,portal:{url:s}}),await r.load(t)),r.portal.user)return this._getUserPrivileges(r,n)}catch(e){(0,f.r9)(e)}return{features:{edit:true,fullEdit:false},content:{updateItem:false}}}_getUserPrivileges(e,t){const r=(0,C.Ss)(e);return t&&(r.features.edit=!0),r}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,f.r9)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?o.id?.findCredential(this.url):null;if(!t)return!0;const r=S.credential===t?S.user:await this._fetchEditingUser(e);return S.credential=t,S.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=o.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const n=`${r.owningSystemUrl}/sharing/rest`,i=b.Z.getDefault();if(i&&i.loaded&&(0,p.Fv)(i.restUrl)===(0,p.Fv)(n))return i.user;const a=`${n}/community/self`,u=null!=e?e.signal:null,c=await(0,l.q6)((0,s.Z)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?w.Z.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,n=this.portalItem?.id&&(this.portalItem.portal||b.Z.getDefault());return r&&n&&!(0,p.tm)(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new a.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,n._)([(0,d.Cb)({type:v.default})],t.prototype,"portalItem",null),(0,n._)([(0,m.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,n._)([(0,h.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,n._)([(0,d.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,n._)([(0,y.j)("esri.layers.mixins.PortalLayer")],t),t},S={credential:null,user:null}},19306:function(e,t,r){r.d(t,{Q:function(){return C},d:function(){return w}});var n=r(73440),i=(r(61432),r(96711)),o=r(93568),s=r(17155),l=r(90775),a=(r(83850),r(48023)),u=r(71840),c=r(43254),f=r(90403),p=r(21260);const d=new c.Z,m=new WeakMap;function y(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function h(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:h(t,e%t):0}let g=0,b=0;function v(){const e=Date.now();let t=!1;for(const r of d){const n=r.deref();n?n.refreshInterval&&e-(m.get(n)??0)+5>=6e4*n.refreshInterval&&(m.set(n,e),n.refresh(e)):t=!0}if(t)for(let e=d.length-1;e>=0;e--)d.at(e).deref()||d.removeAt(e)}(0,p.EH)((()=>{const e=Date.now();let t=0;for(const r of d){const n=r.deref();n&&(t=h(Math.round(6e4*n.refreshInterval),t),n.refreshInterval?m.get(n)||m.set(n,e):m.delete(n))}if(t!==b){if(b=t,clearInterval(g),0===b)return void(g=0);g=setInterval(v,b)}}),f.Z_);function w(e){return null!=e&&"object"==typeof e&&"refreshTimestamp"in e&&"refresh"in e}const C=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.Ds)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){y(e)&&d.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=d.find((t=>t.deref()===e));t&&d.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,o.R8)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.Z.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,n._)([(0,s.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"refreshInterval",void 0),(0,n._)([(0,l.p)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,n._)([(0,s.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,n._)([(0,s.Cb)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,n._)([(0,a.j)("esri.layers.mixins.RefreshableLayer")],t),t}},99671:function(e,t,r){r.d(t,{I:function(){return d},n:function(){return m}});var n=r(73440),i=r(17155),o=(r(61432),r(96711),r(83850),r(1194)),s=r(48023),l=r(71840),a=r(76554),u=r(83918),c=r(24009),f=r(85913),p=r(62920);const d={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:l.C}}},m=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const n=r.timeOffset,i=c.v.fromJSON(r.timeOffsetUnits);return n&&i?new p.T({value:n,unit:i}):null}set timeInfo(e){(0,a.UF)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,n._)([(0,i.Cb)({type:f.T,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,n._)([(0,i.Cb)({type:p.T})],t.prototype,"timeOffset",void 0),(0,n._)([(0,o.r)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,n._)([(0,i.Cb)({value:null,type:u.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,n._)([(0,i.Cb)(d)],t.prototype,"useViewTime",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.TemporalLayer")],t),t}},30472:function(e,t,r){r.d(t,{_:function(){return w}});var n=r(73440),i=r(17155),o=(r(61432),r(96711),r(83850),r(48023)),s=r(997),l=r(89314),a=r(63255),u=r(60123),c=r(29884),f=r(76401),p=r(93295),d=r(89428),m=r(60541);let y=class extends(l.Z.ClonableMixin(a.Z)){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,n._)([(0,i.Cb)({type:[d.Z],json:{write:!0}})],y.prototype,"labelingInfo",void 0),(0,n._)([(0,i.Cb)(p.iR)],y.prototype,"labelsVisible",void 0),(0,n._)([(0,i.Cb)({types:m.Av,json:{write:!0}})],y.prototype,"renderer",void 0),(0,n._)([(0,i.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"visible",void 0),y=(0,n._)([(0,o.j)("esri.layers.support.TrackPartInfo")],y);var h=r(43957),g=r(9350),b=r(62920);let v=class extends(l.Z.ClonableMixin(a.Z)){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new y({renderer:new h.Z({symbol:g.xA.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new y({renderer:new h.Z({symbol:g.xA.clone()})}),this.trackLines=new y({renderer:new h.Z({symbol:g.CJ.clone()})}),this.timeField="startTimeField"}writeFields(e,t,r){const n=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,u.RB)(r,n,t)}};(0,n._)([(0,i.Cb)({type:Boolean,json:{write:!0}})],v.prototype,"enabled",void 0),(0,n._)([(0,i.Cb)({type:[f.Z],json:{write:!0}})],v.prototype,"fields",void 0),(0,n._)([(0,c.c)("fields")],v.prototype,"writeFields",null),(0,n._)([(0,i.Cb)({type:y,json:{write:!0}})],v.prototype,"latestObservations",void 0),(0,n._)([(0,i.Cb)({type:b.T,json:{write:!0}})],v.prototype,"maxDisplayDuration",void 0),(0,n._)([(0,i.Cb)({type:Number,json:{write:!0}})],v.prototype,"maxDisplayObservationsPerTrack",void 0),(0,n._)([(0,i.Cb)(p.C_)],v.prototype,"popupEnabled",void 0),(0,n._)([(0,i.Cb)({type:s.Z,json:{name:"popupInfo",write:!0}})],v.prototype,"popupTemplate",void 0),(0,n._)([(0,i.Cb)({type:y,json:{write:!0}})],v.prototype,"previousObservations",void 0),(0,n._)([(0,i.Cb)({type:y,json:{write:!0}})],v.prototype,"trackLines",void 0),(0,n._)([(0,i.Cb)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],v.prototype,"timeField",void 0),v=(0,n._)([(0,o.j)("esri.layers.support.TrackInfo")],v);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return(0,n._)([(0,i.Cb)({type:v})],t.prototype,"trackInfo",void 0),t=(0,n._)([(0,o.j)("esri.layers.mixins.TrackableLayer")],t),t}},83918:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(73440),i=r(89314),o=r(63255),s=r(17155),l=(r(61432),r(96711),r(83850),r(1194)),a=r(48023),u=r(29884),c=r(85913),f=r(62920),p=r(88097);function d(e,t){return f.T.fromJSON({value:e,unit:t})}let m=class extends(i.Z.ClonableMixin(o.Z)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?c.T.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?d(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?d(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,n._)([(0,s.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],m.prototype,"cumulative",void 0),(0,n._)([(0,s.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],m.prototype,"endField",void 0),(0,n._)([(0,s.Cb)({type:c.T,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"fullTimeExtent",void 0),(0,n._)([(0,l.r)("fullTimeExtent",["timeExtent"])],m.prototype,"readFullTimeExtent",null),(0,n._)([(0,u.c)("fullTimeExtent")],m.prototype,"writeFullTimeExtent",null),(0,n._)([(0,s.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"hasLiveData",void 0),(0,n._)([(0,s.Cb)({type:f.T,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"interval",void 0),(0,n._)([(0,l.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],m.prototype,"readInterval",null),(0,n._)([(0,u.c)("interval")],m.prototype,"writeInterval",null),(0,n._)([(0,s.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],m.prototype,"startField",void 0),(0,n._)([(0,s.Cb)((0,p.mi)("timeReference",!0))],m.prototype,"timeZone",void 0),(0,n._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],m.prototype,"trackIdField",void 0),(0,n._)([(0,s.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],m.prototype,"useTime",void 0),(0,n._)([(0,s.Cb)({type:[Date],json:{read:!1}})],m.prototype,"stops",void 0),m=(0,n._)([(0,a.j)("esri.layers.support.TimeInfo")],m)},78279:function(e,t,r){r.d(t,{Ee:function(){return o},Gr:function(){return l},UO:function(){return s}});var n=r(99574),i=r(48797);function o(e,t){return{...t,filterMode:e.mode}}function s(e,t){return a(e,t).next().value??null}function l(e,t,r){const o=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:n}of e.filters)t[0]=Math.max(t[0],f(r)),t[1]=Math.min(t[1],p(n));return t}(e);if(o&&((0,n.nB)(t,o[0])||(0,n.pt)(r,o[1])))return"";const s=Array.from(a(e,t,r)),l=function(e,t,r){if(0===e.length)return!0;const i=f(e.at(0)?.minScale),o=p(e.at(-1)?.maxScale);if((0,n.pt)(i,t)||(0,n.nB)(o,r))return!0;for(let t=0;t<e.length-1;t++){const r=e[t],i=e[t+1];if((0,n.pt)(f(i.minScale),p(r.maxScale)))return!0}return!1}(s,t,r)?"1=1":s.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,i.D3)(e,t)),"");return l&&"1=1"!==l?l:""}function*a(e,t,r){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const n of e.filters)u(n.minScale,n.maxScale,t,r)&&(yield n)}}function u(e,t,r,i){return e=f(e),r=f(r),t=p(t),!(!(0,n.W8)(r,e)&&(i??r)>e||(0,n.aR)(t,r)||void 0!==i&&(0,n.W8)(i,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function f(e){return e||Number.POSITIVE_INFINITY}function p(e){return e||0}},13545:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(61432),i=r(96711),o=r(49651),s=r(299),l=r(76554);function a(){return{fields:{type:[o.Z],value:null,set:function(e){if(e&&(0,n.Z)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");i.Z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return s.Z.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const r=this.fieldsIndex?.has(t);r||i.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,l.Q0)(this.fieldsIndex,e)}}}}},87970:function(e,t,r){r.d(t,{Y6:function(){return s},ZO:function(){return a},Zs:function(){return l},gb:function(){return i},m6:function(){return o},r1:function(){return n}});const n="__esri_stream_id__",i="__esri_timestamp__",o="__esri_track_part__",s="__esri_time_received__",l="__esri_track_line__";var a;!function(e){e[e.TrackLine=0]="TrackLine",e[e.LatestObservation=1]="LatestObservation",e[e.PreviousObservation=2]="PreviousObservation"}(a||(a={}))},86462:function(e,t,r){r.d(t,{AJ:function(){return u},If:function(){return p},k0:function(){return a},uI:function(){return f},ul:function(){return l},wx:function(){return d}});var n=r(99574),i=r(96094),o=r(73749),s=r(27583);const l=2.4;function a(e){return(0,i.Wz)(e*l)}function u(e){return(0,i.F2)(e)/l}function c(e,t,r,i){let{color:s,ratio:l}=t,{color:a,ratio:u}=r;if(u===l){const e=1e-6;1===u?l-=e:u+=e}const c=(0,n.uZ)((i-l)/(u-l),0,1);(0,o.l)(e,s.toArray(),a.toArray(),c)}function f(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))),e.length<1)return t;let r=e[0],n=e[0],i=1;const o=(0,s.Ue)();for(let s=0;s<512;s++){const l=(s+.5)/512;for(;l>n.ratio&&i<e.length;)r=n,n=e[i++];c(o,r,n,l),t.set(o,4*s)}return t}function p(e,t,r){const n=Math.sqrt(e**2+t**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2}function d(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},89913:function(e,t,r){r.d(t,{y:function(){return s}});var n=r(29292),i=r(93568),o=r(8914);async function s(e,t,r){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const l=await(0,n.q6)(s.populateFromStyle());if((0,i.k_)(r),!1===l.ok){const r=l.error;t?.messages&&t.messages.push(new o.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${r.message}`,{error:r,context:t})),e.clear("renderer",t?.origin)}}}},599:function(e,t,r){r.d(t,{P:function(){return u},d:function(){return p}});var n=r(73440),i=r(41773),o=r(96711),s=r(17155),l=(r(61432),r(83850),r(79775)),a=r(48023);const u=(0,i.w)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",f="field",p=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&f||r&&c||null,t&&r&&o.Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==f&&e!==c||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,n._)([(0,s.Cb)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,n._)([(0,l.J)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,n._)([(0,a.j)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},6298:function(e,t,r){r.d(t,{E:function(){return i}});var n=r(44252);const i={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:n.of.Loop,repeatdelay:0,easing:n.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,r){r.d(t,{$Z:function(){return S},BX:function(){return C},Cc:function(){return h},E_:function(){return l},F:function(){return _},FG:function(){return M},H1:function(){return o},J0:function(){return y},JW:function(){return P},Lb:function(){return U},Le:function(){return A},Ml:function(){return N},On:function(){return v},Qf:function(){return T},RI:function(){return g},TB:function(){return F},Ul:function(){return L},W7:function(){return I},X_:function(){return x},be:function(){return c},e0:function(){return O},gJ:function(){return m},hU:function(){return E},hf:function(){return n},k5:function(){return d},oY:function(){return u},pJ:function(){return b},qQ:function(){return s},wi:function(){return w},yL:function(){return p},yl:function(){return j},zL:function(){return f}});r(6298);function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function i(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function o(e,t){const r=[];let n=0,o=-1;do{if(o=e.indexOf("[",n),o>=n){if(o>n){const t=e.slice(n,o);r.push([t,null,i(t)])}if(n=o+1,o=e.indexOf("]",n),o>=n){if(o>n){const i=t[e.slice(n,o)];i&&r.push([null,i,!1])}n=o+1}}}while(-1!==o);if(n<e.length){const t=e.slice(n);r.push([t,null,i(t)])}return r}function s(e,t,r){let n="",i=null;for(const r of t){const[t,o,s]=r;if(null!=t&&""!==t)s?i=t:(null!=i&&(n+=i,i=null),n+=t);else{const t=e.readAttribute(o);null!=t&&""!==t&&(null!==i&&(n+=i,i=null),n+=t)}}return a(n,r)}function l(e,t,r,n){let i="",o=null;for(const n of t){const[t,s,l]=n;if(null!=t&&""!==t)l?o=t:(null!=o&&(i+=o,o=null),i+=t);else{let t=s;null!=r&&(t=Z(s,r));const n=e.attributes[t];null!=n&&""!==n&&(null!=o&&(i+=o,o=null),i+=n)}}return a(i,n)}function a(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function c(e){return e.data?.symbol??null}function f(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function p(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const y=(e,t=0)=>null==e||isNaN(e)?t:e,h=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([r.e(27093),r.e(13323)]).then(r.bind(r,69339))}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function v(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function w(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function C(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function I(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=I(t);if(null!=e)return e}break;case"CIMTextSymbol":return I(e.symbol);case"CIMSolidFill":return e.color}return null}function S(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=S(e);if(null!=t)return t}break}case"CIMTextSymbol":return S(e.symbol);case"CIMSolidStroke":return e.color}}function _(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=_(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return _(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function M(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function T(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const F=e=>e.includes("data:image/svg+xml");function P(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function A(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function j(e,t,r,n,i,o,s=!0){const{infos:l}=o;let a=1,u=0,c=0,f=0,p=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:n,size:i,frameHeight:o,rotateClockWise:d,scaleSymbolsProportionally:m}of l)p=e?1:a,c=z(t,r,u,p,c),f=R(t,r,u,p,f),o&&(m||s)&&(a*=i/o),u=D(n,d,u);const d=z(n,i,u,p,c),m=R(n,i,u,p,f);return{size:e*a,rotation:D(t,r,u),offsetX:d,offsetY:m}}function k(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function E(e){return e?.dashTemplate&&(e.dashTemplate=k(e.dashTemplate)),e}function O(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return O(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return O(e.symbol)}}return"Normal"}function Z(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function L(e){return e.map((e=>({...e,propertyName:A(e.propertyName)})))}function N(e){const t={};for(const r in e){const n=e[r];t[A(r)]=n}return t}function R(e,t,r,n,i){const o=r*Math.PI/180;if(o){const r=Math.cos(o);return(Math.sin(o)*e+r*t)*n+i}return t*n+i}function z(e,t,r,n,i){const o=r*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*n+i:e*n+i}function D(e,t,r){return t?r-e:r+e}function U(e,t){return Math.max(Math.min((e??t)/100,1),0)}},9350:function(e,t,r){r.d(t,{CJ:function(){return u},Rz:function(){return f},js:function(){return p},xA:function(){return a},z3:function(){return c}});r(61432);var n=r(89636),i=r(38096),o=r(19886),s=r(45433),l=r(54914);const a=o.Z.fromJSON(l.I4),u=i.Z.fromJSON(l.ET),c=n.Z.fromJSON(l.lF),f=s.Z.fromJSON(l.qP);function p(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return u;case"polygon":case"extent":return c}return null}o.Z.fromJSON(l.eG),i.Z.fromJSON(l.wW),n.Z.fromJSON(l.lj)},54914:function(e,t,r){r.d(t,{ET:function(){return s},I4:function(){return o},SQ:function(){return n},X1:function(){return i},eG:function(){return u},lF:function(){return l},lj:function(){return f},qP:function(){return a},wW:function(){return c}});const n=[252,146,31,255],i=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},f={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);