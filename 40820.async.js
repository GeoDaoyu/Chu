"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40820,56346,95823,46127,55532,36182,68379,37308],{12853:function(e,t,r){r.d(t,{z:function(){return o}});var n=r(69071);class o{constructor(e,t){this.removeFunc=t,this._storage=new n.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58426:function(e,t,r){r.d(t,{$c:function(){return f},Hg:function(){return y},jW:function(){return d},xb:function(){return m}});var n=r(70880),o=r(43254),i=r(22018);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof n.Z}function l(e){return e instanceof o.Z?Object.keys(e.items):a(e)?(0,i.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof o.Z?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function c(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const n=l(e),o=l(t);if(0===n.length&&0===o.length)return;if(!n.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const i=o.filter((e=>!n.includes(e))),d=n.filter((e=>!o.includes(e))),f=n.filter((r=>o.includes(r)&&u(e,r)!==u(t,r))).concat(i,d).sort(),y=p(e);if(y&&s.has(y)&&f.length)return{type:"complete",oldValue:e,newValue:t};let m;const h=a(e)&&a(t);for(const n of f){const o=u(e,n),i=u(t,n);let s;if((h||"function"!=typeof o&&"function"!=typeof i)&&o!==i&&(null!=o||null!=i)){if(r&&r[n]&&"function"==typeof r[n])s=r[n]?.(o,i);else if(o instanceof Date&&i instanceof Date){if(o.getTime()===i.getTime())continue;s={type:"complete",oldValue:o,newValue:i}}else s="object"==typeof o&&"object"==typeof i&&p(o)===p(i)?c(o,i):{type:"complete",oldValue:o,newValue:i};null!=s&&(null!=m?m.diff[n]=s:m={type:"partial",diff:{[n]:s}})}}return m}function d(e,t){return function(e,t){if(null==e)return!1;const r=t.split(".");let n=e;for(const e of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const t=n.diff[e];if(!t)return!1;n=t}}return!0}(e,t)}function f(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},54516:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var n=r(73440),o=r(88194),i=r(93568),s=r(95490),a=r(17155),l=r(61432),u=(r(96711),r(83850),r(1194)),p=r(48023),c=r(45213),d=r(59876),f=r(97006),y=r(82592),m=r(71354),h=r(13878);let g=class extends f.Z{constructor(e){super(e),this.type="csv",this.refresh=(0,i.Ds)((async e=>{await this.load();const{extent:t,timeExtent:r}=await this._connection.invoke("refresh",e);return t&&(this.sourceJSON.extent=t),r&&(this.sourceJSON.timeInfo.timeExtent=[r.start,r.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}}))}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return h.Z.fromJSON(r)}async queryFeaturesJSON(e,t={}){return await this.load(t),this._connection.invoke("queryFeatures",e?e.toJSON():null,t)}async queryFeatureCount(e,t={}){return await this.load(t),this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)}async queryObjectIds(e,t={}){return await this.load(t),this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)}async queryExtent(e,t={}){await this.load(t);const r=await this._connection.invoke("queryExtent",e?e.toJSON():null,t);return{count:r.count,extent:m.Z.fromJSON(r.extent)}}async querySnapping(e,t={}){return await this.load(t),this._connection.invoke("querySnapping",e,t)}async queryAttributeBins(e,t={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?e.toJSON():null,t)}async _startWorker(e){this._connection=await(0,y.bA)("CSVSourceWorker",{strategy:(0,l.Z)("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{url:t,delimiter:r,fields:n,latitudeField:o,longitudeField:i,spatialReference:s,timeInfo:a}=this.loadOptions,u=await this._connection.invoke("load",{url:t,customParameters:this.customParameters,parsingOptions:{delimiter:r,fields:n?.map((e=>e.toJSON())),latitudeField:o,longitudeField:i,spatialReference:s?.toJSON(),timeInfo:a?.toJSON()}},{signal:e});this.locationInfo=u.locationInfo,this.sourceJSON=u.layerDefinition,this.delimiter=u.delimiter}};(0,n._)([(0,a.Cb)()],g.prototype,"type",void 0),(0,n._)([(0,a.Cb)()],g.prototype,"loadOptions",void 0),(0,n._)([(0,a.Cb)()],g.prototype,"customParameters",void 0),(0,n._)([(0,a.Cb)()],g.prototype,"locationInfo",void 0),(0,n._)([(0,a.Cb)()],g.prototype,"sourceJSON",void 0),(0,n._)([(0,a.Cb)()],g.prototype,"delimiter",void 0),g=(0,n._)([(0,p.j)("esri.layers.graphics.sources.CSVSource")],g);var C=r(73967),b=r(29191),v=r(28938);function S(e,t){throw new o.Z(t,`CSVLayer (title: ${e.title}, id: ${e.id}) cannot be saved to a portal item`)}let w=class extends d.default{constructor(...e){super(...e),this.geometryType="point",this.capabilities=(0,C.MS)(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=c.Z.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},e).catch(i.r9).then((async()=>this.initLayerProperties(await this.createGraphicsSource(t))));return this.addResolvingPromise(r),Promise.resolve(this)}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(e,t){return null!=t.showLabels?t.showLabels:!!t.layerDefinition?.drawingInfo?.labelingInfo}set url(e){if(!e)return void this._set("url",e);const t=(0,s.mN)(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async createGraphicsSource(e){const t=new g({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField??void 0,longitudeField:this.longitudeField??void 0,spatialReference:this.spatialReference??void 0,timeInfo:this.timeInfo??void 0,url:this.url},customParameters:this.customParameters??void 0});return this._set("source",t),await t.load({signal:e}),this.read({locationInfo:t.locationInfo,columnDelimiter:t.delimiter},{origin:"service",url:this.parsedUrl}),t}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(b.Z.from(e)||this.createQuery()))).then((e=>{if(e?.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}async queryObjectIds(e,t){return await this.load(),this.source.queryObjectIds(b.Z.from(e)||this.createQuery())}queryFeatureCount(e,t){return this.load().then((()=>this.source.queryFeatureCount(b.Z.from(e)||this.createQuery())))}queryExtent(e,t){return this.load().then((()=>this.source.queryExtent(b.Z.from(e)||this.createQuery())))}read(e,t){super.read(e,t),t&&"service"===t.origin&&this.revert(["latitudeField","longitudeField"],"service")}write(e,t){return super.write(e,{...t,writeLayerSchema:!0})}clone(){throw new o.Z("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}async save(e){return S(this,"csv-layer:save")}async saveAs(e,t){return S(this,"csv-layer:save-as")}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return null!=t&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};(0,n._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],w.prototype,"capabilities",void 0),(0,n._)([(0,a.Cb)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],w.prototype,"delimiter",void 0),(0,n._)([(0,a.Cb)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],w.prototype,"editingEnabled",void 0),(0,n._)([(0,a.Cb)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],w.prototype,"fields",void 0),(0,n._)([(0,a.Cb)({type:Boolean,readOnly:!0})],w.prototype,"isTable",null),(0,n._)([(0,u.r)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],w.prototype,"readWebMapLabelsVisible",null),(0,n._)([(0,a.Cb)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],w.prototype,"latitudeField",void 0),(0,n._)([(0,a.Cb)({type:["show","hide"]})],w.prototype,"listMode",void 0),(0,n._)([(0,a.Cb)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],w.prototype,"locationType",void 0),(0,n._)([(0,a.Cb)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],w.prototype,"longitudeField",void 0),(0,n._)([(0,a.Cb)({type:["CSV"]})],w.prototype,"operationalLayerType",void 0),(0,n._)([(0,a.Cb)()],w.prototype,"outFields",void 0),(0,n._)([(0,a.Cb)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],w.prototype,"path",void 0),(0,n._)([(0,a.Cb)({json:{read:!1},cast:null,type:g,readOnly:!0})],w.prototype,"source",void 0),(0,n._)([(0,a.Cb)({json:{read:!1},value:"csv",readOnly:!0})],w.prototype,"type",void 0),(0,n._)([(0,a.Cb)({json:{read:v.r,write:{isRequired:!0,ignoreOrigin:!0,writer:v.w}}})],w.prototype,"url",null),w=(0,n._)([(0,p.j)("esri.layers.CSVLayer")],w);const I=w},17749:function(e,t,r){r.d(t,{e:function(){return o},g:function(){return n}});const n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},o={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},73967:function(e,t,r){r.d(t,{Dm:function(){return p},Hq:function(){return d},MS:function(){return f},bU:function(){return a}});var n=r(61432),o=r(28947),i=r(17749),s=r(54914);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function p(e,t){if((0,n.Z)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${c(t)} = null;`;for(const t in e)r+=`this${c(t)} = ${JSON.stringify(e[t])};`;const n=new Function(`\n      return class AttributesClass$${u++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `)();return()=>new n}catch(r){return()=>({[t]:null,...e})}}function c(e){return l.test(e)?`.${e}`:`["${e}"]`}function d(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,o.d9)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:i.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:i.e,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},38448:function(e,t,r){r.d(t,{V:function(){return s}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023));const s=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,n._)([(0,o.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,n._)([(0,i.j)("esri.layers.mixins.APIKeyMixin")],t),t}},58560:function(e,t,r){r.d(t,{Y:function(){return l}});var n=r(73440),o=r(96711),i=r(17155),s=(r(61432),r(83850),r(48023)),a=r(66619);const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.Qc)(this.url);if(e?.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.Nm)(e,o.Z.getLogger(this)))}};return(0,n._)([(0,i.Cb)()],t.prototype,"title",null),(0,n._)([(0,i.Cb)({type:String})],t.prototype,"url",null),t=(0,n._)([(0,s.j)("esri.layers.mixins.ArcGISService")],t),t}},90833:function(e,t,r){r.d(t,{Ax:function(){return l},c_:function(){return p},lD:function(){return u}});var n=r(73440),o=r(60123),i=r(17155),s=(r(61432),r(96711),r(83850),r(48023)),a=r(72917);function l(e,t,r){if(!e)return null;const n=e.find((e=>!!e.field));if(!n)return null;const o=new a.Z;return o.read(n,r),[o]}const u={type:[a.Z],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,r,n){const i=e.find((e=>!!e.field));i&&(0,o.RB)(r,[i.toJSON()],t)}}}},p=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,n._)([(0,i.Cb)(u)],t.prototype,"orderBy",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.OrderedLayer")],t),t}},35130:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(73440),o=r(89314),i=r(63255),s=r(17155),a=(r(61432),r(96711),r(83850),r(1194)),l=r(48023),u=r(29884),p=r(76746),c=r(11755);let d=class extends(o.Z.ClonableMixin(i.Z)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,p.im)(e[r]);return t}writeDomains(e,t){const r={};for(const t of Object.keys(e))e[t]&&(r[t]=e[t]?.toJSON());t.domains=r}};(0,n._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"id",void 0),(0,n._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"name",void 0),(0,n._)([(0,s.Cb)({json:{write:!0}})],d.prototype,"domains",void 0),(0,n._)([(0,a.r)("domains")],d.prototype,"readDomains",null),(0,n._)([(0,u.c)("domains")],d.prototype,"writeDomains",null),(0,n._)([(0,s.Cb)({type:[c.Z],json:{write:!0}})],d.prototype,"templates",void 0),d=(0,n._)([(0,l.j)("esri.layers.support.FeatureType")],d)},68738:function(e,t,r){r.d(t,{Z:function(){return u}});var n,o=r(73440),i=r(43254),s=r(63255),a=r(17155),l=(r(61432),r(96711),r(83850),r(48023));let u=n=class extends s.Z{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new i.Z}clone(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,o._)([(0,a.Cb)({type:String,json:{write:{isRequired:!0}}})],u.prototype,"floorField",void 0),(0,o._)([(0,a.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,o._)([(0,a.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=n=(0,o._)([(0,l.j)("esri.layers.support.LayerFloorInfo")],u)},72917:function(e,t,r){r.d(t,{Z:function(){return p}});var n,o=r(73440),i=r(41773),s=r(63255),a=r(17155),l=(r(61432),r(96711),r(83850),r(48023));const u=new i.X({asc:"ascending",desc:"descending"});let p=class extends s.Z{static{n=this}constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new n({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,o._)([(0,a.Cb)({type:String,json:{write:!0}})],p.prototype,"field",void 0),(0,o._)([(0,a.Cb)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],p.prototype,"valueExpression",void 0),(0,o._)([(0,a.Cb)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],p.prototype,"order",void 0),p=n=(0,o._)([(0,l.j)("esri.layers.support.OrderByInfo")],p)},73388:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(73440),o=r(89314),i=r(41773),s=r(63255),a=r(17155),l=(r(61432),r(96711),r(83850),r(48023));const u=new i.X({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),p=new i.X({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends(o.Z.ClonableMixin(s.Z)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,n._)([(0,a.Cb)({json:{read:u.read,write:u.write}})],c.prototype,"cardinality",void 0),(0,n._)([(0,a.Cb)({json:{name:"catalogID"}})],c.prototype,"catalogId",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"composite",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"id",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"name",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0),(0,n._)([(0,a.Cb)({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0),(0,n._)([(0,a.Cb)({json:{read:p.read,write:p.write}})],c.prototype,"role",void 0),c=(0,n._)([(0,l.j)("esri.layers.support.Relationship")],c)},56346:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(73440),o=r(70880),i=r(3480),s=r(29292),a=r(43254),l=r(17155),u=(r(61432),r(96711),r(48023)),p=r(76554),c=r(3411);let d=class extends o.Z{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.vr)((()=>(0,c.L)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??r.e(11407).then(r.bind(r,11407)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new a.Z;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const t of this.calculatedExpressions?.toArray()??[])try{const r=this._arcadeTask.value.arcade.extractFieldLiterals(t.syntax);for(const t of r){const r=t.split("."),n=this.fieldsIndex.get(r.at(-1)??"");n&&e.add(n.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const r of t){const t=this.fieldsIndex.get(r);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,r){const n=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],r)).get(n)??""}async getTitles(e,t,r){const n=new Map,o=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:i}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:s,workingTitle:a}=this,l=a&&s;t.forEach((t=>{const r=t.getObjectId()??t.attributes[e.objectIdField],u=l?i({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:s,globalAttributes:this._createFormattedAttributes(e,t,o).global,layer:e,text:a}):"";n.set(r,u)}))}catch{}return n}async _checkAndReQueryGraphics(e,t){const r=t.map((t=>t.getObjectId()??t.attributes[e.objectIdField])).filter(i.pC);if(r.length!==t.length)return t;if(t.some((e=>!(0,p.R9)(e,this.requiredFields)))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const o=await e.queryFeatures(n);if(o?.features.length===t.length)return o.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){if(!r.fieldName)continue;const e=this.fieldsIndex.get(r.fieldName)?.name??r.fieldName;r.fieldName=e,t.set(e.toLowerCase(),r)}return t}_createFormattedAttributes(e,t,r="system"){const n=this.effectivePopupTemplate?.fieldInfos??[],o={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const r=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{o[`expression/${e.name}`]=e.func({vars:{$feature:r}})}catch{}}const i={...t.attributes,...o};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:i,graphic:t,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,p.ld)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,n._)([(0,l.Cb)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,n._)([(0,l.Cb)()],d.prototype,"_featureUtils",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,n._)([(0,l.Cb)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,n._)([(0,l.Cb)()],d.prototype,"displayField",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"effectivePopupTemplate",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"expressionsUsedInTitle",null),(0,n._)([(0,l.Cb)()],d.prototype,"fieldsIndex",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"fieldInfoMap",null),(0,n._)([(0,l.Cb)()],d.prototype,"fields",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"objectIdField",void 0),(0,n._)([(0,l.Cb)()],d.prototype,"requiredFields",null),d=(0,n._)([(0,u.j)("esri.layers.support.TitleCreator")],d)},60419:function(e,t,r){r.d(t,{$6:function(){return w},$z:function(){return i},F7:function(){return o},S0:function(){return s},Si:function(){return y},Wr:function(){return h},X4:function(){return c},Zq:function(){return d},d1:function(){return l},dm:function(){return u},eP:function(){return p},fe:function(){return f},sg:function(){return m}});const n=[["binary","application/octet-stream","bin",""]];function o(e,t){return null!=C(t.name,e?.supportedFormats??[])}function i(e,t){if(!e)return!1;const r=u(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function s(e,t){return b(function(e,t){const r=e.toLowerCase();return g(t).find((e=>v(e)===r))}(e,t))}function a(e,t){return b(C(e,t))}function l(e,t){return v(function(e,t){return g(t).find((t=>b(t)===e))}(e,t))}function u(e,t){return a(e.name,t)??s(e.type,t)}function p(e,t,r){return s(e,r)??a(t,r)}function c({supportedFormats:e}){return p("model/gltf-binary","glb",e)}function d(e){const t=c(e);return null!=t&&e.editFormats.includes(t)}function f({supportedFormats:e}){return p("model/gltf+json","gltf",e)}function y(e){if(!e)return null;const t=c(e),r=f(e);let n=null;for(const o of e.queryFormats){if(o===t)return o;o===r&&(n=o)}return n}function m({supportedFormats:e}){return p("application/esri3do-SR_world","wld",e)}function h({supportedFormats:e}){return p("application/esri3do-SR_prj","prj",e)}function g(e){return[...n,...e]}function C(e,t){const r=e.toLowerCase();return g(t).find((e=>S(e).some((e=>r.endsWith(e)))))}function b(e){return e?.[0]}function v(e){return e?.[1].toLowerCase()}function S(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}function w(e){return e.tables?.find((e=>"assetMaps"===e.role))}},25835:function(e,t,r){r.d(t,{h:function(){return y},j:function(){return x}});var n=r(61432),o=r(66619),i=r(60419);function s(e,t,r){return!!l(e,t,r)}function a(e,t,r){return l(e,t,r)}function l(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const u={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function p(e){const t=e?.supportedSpatialAggregationStatistics?.map((e=>e.toLowerCase()));return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function c(e,t){const r=e?.supportedOperationsWithCacheHint?.map((e=>e.toLowerCase()));return!!r?.includes(t.toLowerCase())}function d(e){const t=e?.supportedStatisticTypes?.map((e=>e.toLowerCase()));return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_cont"),percentileDiscrete:!!t?.includes("percentile_disc"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function f(e){const t=e?.supportedNormalizationTypes?.map((e=>e.toLowerCase()));return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function y(e,t){return{analytics:m(e),attachment:h(e),data:g(e),metadata:C(e),operations:b(e.capabilities,e,t),query:v(e,t),queryAttributeBins:I(e),queryRelated:S(e),queryTopFeatures:w(e),editing:M(e)}}function m(e){return{supportsCacheHint:c(e.advancedQueryCapabilities,"queryAnalytics")}}function h(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:c(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:s(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:s(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((e=>{const t=u[e.name];t&&(r[t]=!!e.isEnabled)})),r}function g(e){return{isVersioned:s(e,"isDataVersioned",!1),isBranchVersioned:s(e,"isDataBranchVersioned",!1),supportsAttachment:s(e,"hasAttachments",!1),supportsM:s(e,"hasM",!1),supportsZ:s(e,"hasZ",!1)}}function C(e){return{supportsAdvancedFieldProperties:s(e,"supportsFieldDescriptionProperty",!1)}}function b(e,t,r){const n=e?.toLowerCase().split(",").map((e=>e.trim()))??[],i=r?(0,o.Qc)(r):null,a=n.includes("MapServer"===i?.serverType?"data":"query"),l=n.includes("editing")&&!t.datesInUnknownTimezone&&!(!0===t.uniqueIdInfo?.OIDFieldContainsHashValue);let u=l&&n.includes("create"),p=l&&n.includes("delete"),c=l&&n.includes("update");const d=n.includes("changetracking"),f=t.advancedQueryCapabilities;return l&&!(u||p||c)&&(u=p=c=!0),{supportsCalculate:s(t,"supportsCalculate",!1),supportsTruncate:s(t,"supportsTruncate",!1),supportsValidateSql:s(t,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:p,supportsEditing:l,supportsChangeTracking:d,supportsQuery:a,supportsQueryAnalytics:s(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:s(f,"supportsQueryAttachments",!1),supportsQueryBins:s(f,"supportsQueryBins",!1)||!!t.queryBinsCapabilities,supportsQueryTopFeatures:s(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:s(t,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:s(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:s(t,"supportsAsyncConvert3D",!1)}}function v(e,t){const r=e.advancedQueryCapabilities,l=e.ownershipBasedAccessControlForFeatures,u=e.archivingInfo,d=e.currentVersion,f=t?.includes("MapServer"),y=!f||d>=(0,n.Z)("mapserver-pbf-version-support"),m=(0,o.M8)(t),h=new Set((e.supportedQueryFormats??"").split(",").map((e=>e.toLowerCase().trim())));return{maxRecordCount:a(e,"maxRecordCount",void 0),maxRecordCountFactor:a(e,"maxRecordCountFactor",void 0),maxUniqueIDCount:a(e,"maxUniqueIDCount",void 0),standardMaxRecordCount:a(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:p(r),supportsCacheHint:s(r,"supportsQueryWithCacheHint",!1)||c(r,"query"),supportsCentroid:s(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:m,supportsCurrentUser:s(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:s(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:s(r,"supportsDisjointSpatialRel",!1),supportsDistance:s(r,"supportsQueryWithDistance",!1),supportsDistinct:s(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:s(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:y&&h.has("pbf"),supportsFullTextSearch:s(r,"supportsFullTextSearch",!1),supportsGeometryProperties:s(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:s(r,"supportsHavingClause",!1),supportsHistoricMoment:s(u,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:s(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:s(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:s(r,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:s(r,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:s(r,"supportsPercentileStatistics",!1),supportsQuantization:s(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:s(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:s(l,"allowAnonymousToQuery",!0),supportsQueryByOthers:s(l,"allowOthersToQuery",!0),supportsQueryGeometry:s(e,"supportsReturningQueryGeometry",!1),supportsResultType:s(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,i.Si)(e.infoFor3D),supportsSpatialAggregationStatistics:s(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:s(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:s(e,"useStandardizedQueries",!1),supportsStatistics:s(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:s(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:s(r,"supportsTrueCurve",!1),tileMaxRecordCount:a(e,"tileMaxRecordCount",void 0)}}function S(e){const t=e.advancedQueryCapabilities,r=s(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:s(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:c(t,"queryRelated")}}function w(e){return{supportsCacheHint:c(e.advancedQueryCapabilities,"queryTopFilter")}}function I(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:s(t,"supportsDateBin",!1),supportsFixedInterval:s(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:s(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:s(t,"supportsFixedBoundariesBin",!1),supportsStackBy:s(t,"supportsStackBy",!1),supportsSplitBy:s(t,"supportsSplitBy",!1),supportsSnapToData:s(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:s(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:s(t,"supportsFirstDayOfWeek",!1),supportsNormalization:s(t,"supportsNormalization",!1),supportedStatistics:d(t),supportedNormalizationTypes:f(t)}}function M(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:s(e,"allowGeometryUpdates",!0),supportsGlobalId:s(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:s(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:s(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:s(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:s(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:s(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:s(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:s(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:s(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:s(r,"supportsAsyncApplyEdits",!1),zDefault:a(e,"zDefault",void 0)}}function x(e){return{operations:{supportsAppend:s(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:s(e,"supportsExportClip",!1),supportsExportFrameset:s(e,"supportsExportFrameset",!1),supportsMensuration:s(e,"supportsMensuration",!1),supportsPreviews:s(e,"supportsPreviews",!1),supportsUpdate:s(e,"supportsUpdate",!1)}}}},86462:function(e,t,r){r.d(t,{AJ:function(){return u},If:function(){return d},k0:function(){return l},uI:function(){return c},ul:function(){return a},wx:function(){return f}});var n=r(99574),o=r(96094),i=r(73749),s=r(27583);const a=2.4;function l(e){return(0,o.Wz)(e*a)}function u(e){return(0,o.F2)(e)/a}function p(e,t,r,o){let{color:s,ratio:a}=t,{color:l,ratio:u}=r;if(u===a){const e=1e-6;1===u?a-=e:u+=e}const p=(0,n.uZ)((o-a)/(u-a),0,1);(0,i.l)(e,s.toArray(),l.toArray(),p)}function c(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))),e.length<1)return t;let r=e[0],n=e[0],o=1;const i=(0,s.Ue)();for(let s=0;s<512;s++){const a=(s+.5)/512;for(;a>n.ratio&&o<e.length;)r=n,n=e[o++];p(i,r,n,a),t.set(i,4*s)}return t}function d(e,t,r){const n=Math.sqrt(e**2+t**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2}function f(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},41921:function(e,t,r){r.d(t,{p:function(){return o}});var n=r(35675);function o(e,t,r){if(!r?.features||!r.hasZ)return;const o=(0,n.k)(r.geometryType,t,e.outSpatialReference);if(null!=o)for(const e of r.features)o(e.geometry)}},13878:function(e,t,r){r.d(t,{Z:function(){return C}});var n,o=r(73440),i=r(46451),s=r(41773),a=r(63255),l=r(28947),u=r(17155),p=(r(61432),r(96711),r(1194)),c=r(48023),d=r(29884),f=r(45213),y=r(90756),m=r(98842),h=r(49651);const g=new s.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let C=n=class extends a.Z{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,i.Z)}writeGeometryType(e,t,r,n){if(e)return void g.write(e,t,r,n);const{features:o}=this;if(o)for(const e of o)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,n)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=(0,y.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=f.Z.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new n(this.cloneProperties())}cloneProperties(){return(0,l.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const t=e?.[r];n.geometry=t?.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,o]}=e,i=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-n)/t)),(e=>Math.round((o-e)/r)));for(let e=0,t=i.length;e<t;e++)s?.(i[e].geometry)||(i.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,o],scale:[i,s]}=r;let a=null,l=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;a=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;l=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*i+n),(e=>o-e*s),a,l);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}readFeaturesWithClass(e,t,r){const n=f.Z.fromJSON(t.spatialReference),o=[];for(let t=0;t<e.length;t++){const i=e[t],s=r.fromJSON(i),a=i.geometry?.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=n);const l=i.aggregateGeometries,u=s.aggregateGeometries;if(l&&null!=u)for(const e in u){const t=u[e],r=l[e]?.spatialReference;null==t||r||(t.spatialReference=n)}o.push(s)}return o}_quantizePoints(e,t,r){let n,o;const i=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=r(a[1]);e===n&&s===o||(i.push([e-n,s-o]),n=e,o=s)}else n=t(a[0]),o=r(a[1]),i.push([n,o])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const n=(0,y.oU)(e)?e.rings:e.paths,o=[];for(let e=0,i=n.length;e<i;e++){const i=n[e],s=this._quantizePoints(i,t,r);s&&o.push(s)}return o.length>0?((0,y.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?e=>{const n=this._quantizePoints(e.points,t,r);return n&&n.length>0?(e.points=n,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,n,o){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?e=>{const i=(0,y.oU)(e)?e.rings:e.paths;let s,a;for(let e=0,n=i.length;e<n;e++){const n=i[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(s+=o[0],a+=o[1]):(s=o[0],a=o[1]),o[0]=t(s),o[1]=r(a)}}if(n&&o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2]),r[3]=o(r[3])}}else if(n)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2])}}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=o(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),o&&null!=e.mmax&&null!=e.mmin&&(e.mmax=o(e.mmax),e.mmin=o(e.mmin))}:"multipoint"===e?e=>{const i=e.points;let s,a;for(let e=0,n=i.length;e<n;e++){const n=i[e];e>0?(s+=n[0],a+=n[1]):(s=n[0],a=n[1]),n[0]=t(s),n[1]=r(a)}if(n&&o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=n(t[2]),t[3]=o(t[3])}else if(n)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=n(t[2])}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=o(t[2])}}:null}};(0,o._)([(0,u.Cb)({type:String,json:{write:!0}})],C.prototype,"displayFieldName",void 0),(0,o._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"exceededTransferLimit",void 0),(0,o._)([(0,u.Cb)({type:[i.Z],json:{write:!0}})],C.prototype,"features",void 0),(0,o._)([(0,p.r)("features")],C.prototype,"readFeatures",null),(0,o._)([(0,u.Cb)({type:[h.Z],json:{write:!0}})],C.prototype,"fields",void 0),(0,o._)([(0,u.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],C.prototype,"geometryType",void 0),(0,o._)([(0,d.c)("geometryType")],C.prototype,"writeGeometryType",null),(0,o._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"hasM",void 0),(0,o._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"hasZ",void 0),(0,o._)([(0,u.Cb)({types:m.qM,json:{write:!0}})],C.prototype,"queryGeometry",void 0),(0,o._)([(0,p.r)("queryGeometry")],C.prototype,"readQueryGeometry",null),(0,o._)([(0,u.Cb)({type:f.Z,json:{write:!0}})],C.prototype,"spatialReference",void 0),(0,o._)([(0,d.c)("spatialReference")],C.prototype,"writeSpatialReference",null),(0,o._)([(0,u.Cb)({json:{write:!0}})],C.prototype,"transform",void 0),C=n=(0,o._)([(0,c.j)("esri.rest.support.FeatureSet")],C),C.prototype.toJSON.isDefaultToJSON=!0},599:function(e,t,r){r.d(t,{P:function(){return u},d:function(){return d}});var n=r(73440),o=r(41773),i=r(96711),s=r(17155),a=(r(61432),r(83850),r(79775)),l=r(48023);const u=(0,o.w)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),p="percent-of-total",c="field",d=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&c||r&&p||null,t&&r&&i.Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==c&&e!==p||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,n._)([(0,s.Cb)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,n._)([(0,a.J)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,n._)([(0,l.j)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},6298:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(44252);const o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:n.of.Loop,repeatdelay:0,easing:n.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,r){r.d(t,{$Z:function(){return I},BX:function(){return S},Cc:function(){return h},E_:function(){return a},F:function(){return M},FG:function(){return F},H1:function(){return i},J0:function(){return m},JW:function(){return A},Lb:function(){return N},Le:function(){return k},Ml:function(){return q},On:function(){return b},Qf:function(){return _},RI:function(){return g},TB:function(){return T},Ul:function(){return L},W7:function(){return w},X_:function(){return x},be:function(){return p},e0:function(){return z},gJ:function(){return y},hU:function(){return R},hf:function(){return n},k5:function(){return f},oY:function(){return u},pJ:function(){return C},qQ:function(){return s},wi:function(){return v},yL:function(){return d},yl:function(){return O},zL:function(){return c}});r(6298);function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function o(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.slice(n,i);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.slice(n,i)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length){const t=e.slice(n);r.push([t,null,o(t)])}return r}function s(e,t,r){let n="",o=null;for(const r of t){const[t,i,s]=r;if(null!=t&&""!==t)s?o=t:(null!=o&&(n+=o,o=null),n+=t);else{const t=e.readAttribute(i);null!=t&&""!==t&&(null!==o&&(n+=o,o=null),n+=t)}}return l(n,r)}function a(e,t,r,n){let o="",i=null;for(const n of t){const[t,s,a]=n;if(null!=t&&""!==t)a?i=t:(null!=i&&(o+=i,i=null),o+=t);else{let t=s;null!=r&&(t=j(s,r));const n=e.attributes[t];null!=n&&""!==n&&(null!=i&&(o+=i,i=null),o+=n)}}return l(o,n)}function l(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function p(e){return e.data?.symbol??null}function c(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const m=(e,t=0)=>null==e||isNaN(e)?t:e,h=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([r.e(27093),r.e(13323)]).then(r.bind(r,69339))}function C(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function v(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function S(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function w(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=w(t);if(null!=e)return e}break;case"CIMTextSymbol":return w(e.symbol);case"CIMSolidFill":return e.color}return null}function I(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=I(e);if(null!=t)return t}break}case"CIMTextSymbol":return I(e.symbol);case"CIMSolidStroke":return e.color}}function M(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=M(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return M(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function F(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function _(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const T=e=>e.includes("data:image/svg+xml");function A(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function k(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function O(e,t,r,n,o,i,s=!0){const{infos:a}=i;let l=1,u=0,p=0,c=0,d=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:n,size:o,frameHeight:i,rotateClockWise:f,scaleSymbolsProportionally:y}of a)d=e?1:l,p=E(t,r,u,d,p),c=D(t,r,u,d,c),i&&(y||s)&&(l*=o/i),u=B(n,f,u);const f=E(n,o,u,d,p),y=D(n,o,u,d,c);return{size:e*l,rotation:B(t,r,u),offsetX:f,offsetY:y}}function P(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function R(e){return e?.dashTemplate&&(e.dashTemplate=P(e.dashTemplate)),e}function z(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return z(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return z(e.symbol)}}return"Normal"}function j(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function L(e){return e.map((e=>({...e,propertyName:k(e.propertyName)})))}function q(e){const t={};for(const r in e){const n=e[r];t[k(r)]=n}return t}function D(e,t,r,n,o){const i=r*Math.PI/180;if(i){const r=Math.cos(i);return(Math.sin(i)*e+r*t)*n+o}return t*n+o}function E(e,t,r,n,o){const i=r*Math.PI/180;return i?(Math.cos(i)*e-Math.sin(i)*t)*n+o:e*n+o}function B(e,t,r){return t?r-e:r+e}function N(e,t){return Math.max(Math.min((e??t)/100,1),0)}},9350:function(e,t,r){r.d(t,{CJ:function(){return u},Rz:function(){return c},js:function(){return d},xA:function(){return l},z3:function(){return p}});r(61432);var n=r(89636),o=r(38096),i=r(19886),s=r(45433),a=r(54914);const l=i.Z.fromJSON(a.I4),u=o.Z.fromJSON(a.ET),p=n.Z.fromJSON(a.lF),c=s.Z.fromJSON(a.qP);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return p}return null}i.Z.fromJSON(a.eG),o.Z.fromJSON(a.wW),n.Z.fromJSON(a.lj)},54914:function(e,t,r){r.d(t,{ET:function(){return s},I4:function(){return i},SQ:function(){return n},X1:function(){return o},eG:function(){return u},lF:function(){return a},lj:function(){return c},qP:function(){return l},wW:function(){return p}});const n=[252,146,31,255],o=[153,153,153,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},p={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);