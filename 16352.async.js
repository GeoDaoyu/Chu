"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[16352],{46965:function(t,e,i){var s;i.d(e,{Y:function(){return s}}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(s||(s={}))},12019:function(t,e,i){i.d(e,{n:function(){return r}});var s=i(81001);const r=()=>s.default.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},18156:function(t,e,i){i.d(e,{Bh:function(){return l},I6:function(){return I},Jp:function(){return p},Kx:function(){return d},Su:function(){return y},U_:function(){return f},b0:function(){return O},t8:function(){return g},yY:function(){return c}});var s=i(30748),r=i(21117),n=i(82846),o=i(66130),a=i(24910),h=i(73749);function c(t,e,i){i*=.5;const s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t}function l(t,e){const i=2*Math.acos(e[3]),s=Math.sin(i/2);return s>(0,o.bn)()?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),i}function p(t,e,i){const s=e[0],r=e[1],n=e[2],o=e[3],a=i[0],h=i[1],c=i[2],l=i[3];return t[0]=s*l+o*a+r*c-n*h,t[1]=r*l+o*h+n*a-s*c,t[2]=n*l+o*c+s*h-r*a,t[3]=o*l-s*a-r*h-n*c,t}function u(t,e,i,s){const r=e[0],n=e[1],a=e[2],h=e[3];let c,l,p,u,f,d=i[0],_=i[1],y=i[2],m=i[3];return l=r*d+n*_+a*y+h*m,l<0&&(l=-l,d=-d,_=-_,y=-y,m=-m),1-l>(0,o.bn)()?(c=Math.acos(l),p=Math.sin(c),u=Math.sin((1-s)*c)/p,f=Math.sin(s*c)/p):(u=1-s,f=s),t[0]=u*r+f*d,t[1]=u*n+f*_,t[2]=u*a+f*y,t[3]=u*h+f*m,t}function f(t,e){const i=e[0],s=e[1],r=e[2],n=e[3],o=i*i+s*s+r*r+n*n,a=o?1/o:0;return t[0]=-i*a,t[1]=-s*a,t[2]=-r*a,t[3]=n*a,t}function d(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function _(t,e){const i=e[0]+e[4]+e[8];let s;if(i>0)s=Math.sqrt(i+1),t[3]=.5*s,s=.5/s,t[0]=(e[5]-e[7])*s,t[1]=(e[6]-e[2])*s,t[2]=(e[1]-e[3])*s;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);const r=(i+1)%3,n=(i+2)%3;s=Math.sqrt(e[3*i+i]-e[3*r+r]-e[3*n+n]+1),t[i]=.5*s,s=.5/s,t[3]=(e[3*r+n]-e[3*n+r])*s,t[r]=(e[3*r+i]+e[3*i+r])*s,t[n]=(e[3*n+i]+e[3*i+n])*s}return t}function y(t,e,i,s){const r=.5*Math.PI/180;e*=r,i*=r,s*=r;const n=Math.sin(e),o=Math.cos(e),a=Math.sin(i),h=Math.cos(i),c=Math.sin(s),l=Math.cos(s);return t[0]=n*h*l-o*a*c,t[1]=o*a*l+n*h*c,t[2]=o*h*c-n*a*l,t[3]=o*h*l+n*a*c,t}const m=h.c,g=h.s,v=h.g,b=p,x=h.d,G=h.h,w=h.l,M=h.j,S=M,k=h.b,C=k,R=h.n,I=h.a,E=h.e;function O(t,e,i){const s=(0,a.e)(e,i);return s<-.999999?((0,a.h)(Z,T,e),(0,a.H)(Z)<1e-6&&(0,a.h)(Z,L,e),(0,a.n)(Z,Z),c(t,Z,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,a.h)(Z,e,i),t[0]=Z[0],t[1]=Z[1],t[2]=Z[2],t[3]=1+s,R(t,t))}const Z=(0,n.Ue)(),T=(0,n.al)(1,0,0),L=(0,n.al)(0,1,0);const H=(0,r.Ue)(),Y=(0,r.Ue)();const z=(0,s.Ue)();Object.freeze(Object.defineProperty({__proto__:null,add:v,calculateW:function(t,e){const i=e[0],s=e[1],r=e[2];return t[0]=i,t[1]=s,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-r*r)),t},conjugate:d,copy:m,dot:G,equals:E,exactEquals:I,fromEuler:y,fromMat3:_,getAxisAngle:l,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:f,len:S,length:M,lerp:w,mul:b,multiply:p,normalize:R,random:function(t){const e=o.FD,i=e(),s=e(),r=e(),n=Math.sqrt(1-i),a=Math.sqrt(i);return t[0]=n*Math.sin(2*Math.PI*s),t[1]=n*Math.cos(2*Math.PI*s),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t},rotateX:function(t,e,i){i*=.5;const s=e[0],r=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=s*h+o*a,t[1]=r*h+n*a,t[2]=n*h-r*a,t[3]=o*h-s*a,t},rotateY:function(t,e,i){i*=.5;const s=e[0],r=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=s*h-n*a,t[1]=r*h+o*a,t[2]=n*h+s*a,t[3]=o*h-r*a,t},rotateZ:function(t,e,i){i*=.5;const s=e[0],r=e[1],n=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=s*h+r*a,t[1]=r*h-s*a,t[2]=n*h+o*a,t[3]=o*h-n*a,t},rotationTo:O,scale:x,set:g,setAxes:function(t,e,i,s){const r=z;return r[0]=i[0],r[3]=i[1],r[6]=i[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],R(t,_(t,r))},setAxisAngle:c,slerp:u,sqlerp:function(t,e,i,s,r,n){return u(H,e,r,n),u(Y,i,s,n),u(t,H,Y,2*n*(1-n)),t},sqrLen:C,squaredLength:k,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},51067:function(t,e,i){i.d(e,{L4:function(){return w},LO:function(){return u},Qv:function(){return l},Rd:function(){return f},Ud:function(){return m},VG:function(){return p},Wv:function(){return _},Zv:function(){return v},aC:function(){return b},h9:function(){return y},ld:function(){return x},mg:function(){return d},q6:function(){return g},sS:function(){return C},yc:function(){return G}});var s=i(46965),r=i(95437),n=i(99574),o=i(1925),a=i(29138),h=i(26636),c=i(40030);function l(t,e,i){return t.units[e][i]}function p(t,e,i,s=2,r="abbr"){return`${(0,c.uf)(e,{minimumFractionDigits:s,maximumFractionDigits:s,signDisplay:e>0?"never":"exceptZero"})} ${l(t,i,r)}`}function u(t,e,i,s=2,r="abbr"){return`${(0,c.uf)(e,{minimumFractionDigits:s,maximumFractionDigits:s,signDisplay:"exceptZero"})} ${l(t,i,r)}`}function f(t,e,i,s=2,r="abbr"){const n=(0,h.Y8)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function d(t,e,i,s=2,r="abbr"){const n=(0,h.Y8)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function _(t,e,i,s=2,r="abbr"){const n=(0,h.Dw)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function y(t,e,i,s=2,r="abbr"){const n=(0,h.Dw)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function m(t,e,i,s=2,r="abbr"){const n=(0,h.Q7)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function g(t,e,i,s=2,r="abbr"){const n=(0,h.Q7)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function v(t,e,i,s=2,r="abbr"){const n=(0,h.jl)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function b(t,e,i,s=2,r="abbr"){const n=(0,h.jl)(e,i);return u(t,(0,h.En)(e,i,n),n,s,r)}function x(t,e,i,s=2,r="abbr"){const n=(0,h.ZI)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function G(t,e,i,s=2,r="abbr"){const n=(0,h.LV)(e,i);return p(t,(0,h.En)(e,i,n),n,s,r)}function w(t,e,i,s,n,a=r.BV,l=!0){let p=a.normalize((0,o.hw)((0,h.En)(t,e,"degrees"),i,s),0,l);const u=((t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"}))(p,n??2);return p=S(p,u),(0,c.uf)(p,u)}const M=new Map;function S(t,e){const i=JSON.stringify(e);let s=M.get(i);return s||(s=new Intl.NumberFormat("en-US",e),M.set(i,s)),/^[-+]?360\.?0*Â°?$/.test(s.format(t))?0:t}const k=["B","kB","MB","GB","TB"];function C(t,e){let i=0===(e=Math.round(e))?0:Math.floor(Math.log(e)/Math.log(s.Y.KILOBYTES));i=(0,n.uZ)(i,0,k.length-1);const r=(0,c.uf)(e/s.Y.KILOBYTES**i,{maximumFractionDigits:2});return(0,a.gx)(t.units.bytes[k[i]],{fileSize:r})}},86456:function(t,e,i){i.d(e,{EU:function(){return y},Ue:function(){return c},WH:function(){return m},ZZ:function(){return _},q_:function(){return u},qw:function(){return d},uT:function(){return l},up:function(){return v},zk:function(){return p}});var s=i(99574),r=i(31865),n=i(18156),o=i(21117),a=i(24910),h=i(82846);function c(t=v){return[t[0],t[1],t[2],t[3]]}function l(t,e,i=c()){return(0,a.c)(i,t),i[3]=e,i}function p(t,e,i){return(0,a.h)(i,t,e),(0,a.n)(i,i),i[3]=-(0,a.p)(t,e),i}function u(t,e=c()){const i=(0,r.j6)(b,t);return g(e,(0,s.BV)((0,n.Bh)(e,i))),e}function f(t,e,i=c()){return(0,n.yY)(b,t,m(t)),(0,n.yY)(x,e,m(e)),(0,n.Jp)(b,x,b),g(i,(0,s.BV)((0,n.Bh)(i,b)))}function d(t,e,i,s=c()){return l(h.E9,t,G),l(h.IO,e,w),l(h.eG,i,M),f(G,w,G),f(G,M,s),s}function _(t){return t}function y(t){return t[3]}function m(t){return(0,s.Vl)(t[3])}function g(t,e){return t[3]=e,t}const v=[0,0,1,0],b=(0,o.Ue)(),x=(0,o.Ue)(),G=(c(),c()),w=c(),M=c()},48207:function(t,e,i){i.d(e,{LO:function(){return c},Nc:function(){return h},Yc:function(){return a}});const s="calcite-mode-",r="dark",n=/\W/g;function o(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(n,"").toLowerCase()}function a(){return o()===r}function h(){const t=o();switch(t){case r:case"light":return`${s}${t}`;default:return null}}function c(t){const e=h();e&&(l(t),t.classList.add(e))}function l(t){Array.from(t.classList).forEach((e=>{e.startsWith(s)&&t.classList.remove(e)}))}},1499:function(t,e,i){i.r(e),i.d(e,{default:function(){return X}});var s=i(73440),r=i(46451),n=i(87833),o=i(61100),a=i(1925),h=i(90403),c=i(17155),l=(i(61432),i(96711),i(83850),i(48023)),p=i(60508),u=i(67764),f=i(62197),d=i(47566),_=i(62951),y=i(28931),m=i(82868);function g(t,e,i,s){const r=[];for(const n of t){const t=n.slice();r.push(t);const o=e*(n[0]-s.x)-i*(n[1]-s.y)+s.x,a=i*(n[0]-s.x)+e*(n[1]-s.y)+s.y;t[0]=o,t[1]=a}return r}function v(t,e,i){const{hasM:s,hasZ:r,spatialReference:n}=t,o=e*Math.PI/180,a=Math.cos(o),h=Math.sin(o);if("xmin"in t&&(i=i??t.center,t=new u.Z({spatialReference:n,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})),"paths"in t){i=i??t.extent.center;const e=[];for(const s of t.paths)e.push(g(s,a,h,i));return new f.Z({hasM:s,hasZ:r,spatialReference:n,paths:e})}if("rings"in t){i=i??t.extent.center;const e=[];for(const s of t.rings){const t=(0,y.bu)(s),r=g(s,a,h,i);(0,y.bu)(r)!==t&&r.reverse(),e.push(r)}return new u.Z({hasM:s,hasZ:r,spatialReference:n,rings:e})}if("x"in t){i=i??t;const e=new p.Z({x:a*(t.x-i.x)-h*(t.y-i.y)+i.x,y:h*(t.x-i.x)+a*(t.y-i.y)+i.y,spatialReference:n});return null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}return"points"in t?(i=i??t.extent.center,new m.Z({hasM:s,hasZ:r,points:g(t.points,a,h,i),spatialReference:n})):null}var b=i(89636),x=i(38096),G=i(19886),w=i(89200),M=i(54339),S=i(91652),k=i(77308),C=i(52421),R=i(41943),I=i(3943),E=i(59037),O=i(8449),Z=i(66972),T=i(4939);class L{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type="move-start"}}class H{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type="move"}}class Y{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.dx=i,this.dy=s,this.type="move-stop"}}class z{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type="rotate-start"}}class B{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type="rotate"}}class A{constructor(t,e,i){this.graphics=t,this.mover=e,this.angle=i,this.type="rotate-stop"}}class P{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type="scale-start"}}class U{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type="scale"}}class D{constructor(t,e,i,s){this.graphics=t,this.mover=e,this.xScale=i,this.yScale=s,this.type="scale-stop"}}const N=C.X.transformGraphics,F={centerIndicator:new G.Z({style:"cross",size:N.center.size,color:N.center.color}),fill:{default:new b.Z({color:N.fill.color,outline:{color:N.fill.outlineColor,join:"round",width:1}}),active:new b.Z({color:N.fill.stagedColor,outline:{color:N.fill.outlineColor,join:"round",style:"dash",width:1}})},handles:{default:new G.Z({style:"square",size:N.vertex.size,color:N.vertex.color,outline:{color:N.vertex.outlineColor,width:1}}),hover:new G.Z({style:"square",size:N.vertex.hoverSize,color:N.vertex.hoverColor,outline:{color:N.vertex.hoverOutlineColor,width:1}})},rotator:{default:new G.Z({style:"circle",size:N.vertex.size,color:N.vertex.color,outline:{color:N.vertex.outlineColor,width:1}}),hover:new G.Z({style:"circle",size:N.vertex.hoverSize,color:N.vertex.hoverColor,outline:{color:N.vertex.hoverOutlineColor,width:1}})},rotatorLine:new x.Z({color:N.line.color,width:1})};let q=class extends n.Z.EventedAccessor{constructor(t){super(t),this._activeHandleGraphic=null,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._centerGraphic=null,this._backgroundGraphic=null,this._vertexGraphics=[],this._rotateHandleGraphic=null,this._rotateGraphicOffset=20,this._angleOfRotation=0,this._rotateLineGraphic=null,this._startInfo=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this.tooltip=null,this.type="box",this.callbacks={onMoveStart(){},onMove(){},onMoveStop(){},onScaleStart(){},onScale(){},onScaleStop(){},onRotateStart(){},onRotate(){},onRotateStop(){},onGraphicClick(){}},this.enableMovement=!0,this.enableRotation=!0,this.enableScaling=!0,this.graphics=[],this.highlightName=null,this.highlightsEnabled=!0,this.layer=null,this.preserveAspectRatio=!1,this.showCenterGraphic=!0,this.symbols=F,this.sketchOptions=new R.Z,this.view=null,this._getBounds=(()=>{const t=(0,d.Ue)();return(e,i)=>{e[0]=Number.POSITIVE_INFINITY,e[1]=Number.POSITIVE_INFINITY,e[2]=Number.NEGATIVE_INFINITY,e[3]=Number.NEGATIVE_INFINITY;for(const s of i){if(!s)continue;let i,r,n,o;if("point"===s.type)i=n=s.x,r=o=s.y;else if("multipoint"===s.type){const e=(0,y.nA)(s);[i,r,n,o]=(0,_.C6)(t,[e])}else if("extent"===s.type)[i,r,n,o]=[s.xmin,s.ymin,s.xmax,s.ymax];else{const e=(0,y.nA)(s);[i,r,n,o]=(0,_.C6)(t,e)}e[0]=Math.min(i,e[0]),e[1]=Math.min(r,e[1]),e[2]=Math.max(n,e[2]),e[3]=Math.max(o,e[3])}return e}})()}initialize(){const t=this.view;this._highlightHelper=new S.Z({view:t}),this._setup(),this.addHandles([(0,h.gx)((()=>t?.ready),(()=>{const{layer:t,view:e}=this;(0,k.p)(e,t)}),{once:!0,initial:!0}),(0,h.YP)((()=>this.preserveAspectRatio),(()=>{this._activeHandleGraphic&&(this._scaleGraphic(this._activeHandleGraphic),this._updateGraphics(),this._updateTooltip(this._activeHandleGraphic))})),(0,h.YP)((()=>t?.scale),(()=>{this._updateRotateGraphic(),this._updateRotateLineGraphic()})),(0,h.YP)((()=>this.graphics),(()=>this.refresh())),(0,h.YP)((()=>this.layer),((t,e)=>{e&&this._resetGraphics(e),this.refresh()})),(0,h.YP)((()=>[this.highlightsEnabled,this.highlightName]),(()=>{this._highlightHelper?.removeAll(),this._setUpHighlights()})),(0,h.YP)((()=>this.sketchOptions.tooltips.effectiveEnabled),(e=>{this.tooltip=e?(0,I.vG)((()=>({view:t,options:this.sketchOptions.tooltips}))):(0,o.SC)(this.tooltip)}),h.tX),(0,h.YP)((()=>this.view.effectiveTheme.accentColor),(()=>this._updateSymbolsForTheme()),h.nn),this.on("move-start",(t=>this.callbacks?.onMoveStart?.(t))),this.on("move",(t=>this.callbacks?.onMove?.(t))),this.on("move-stop",(t=>this.callbacks?.onMoveStop?.(t))),this.on("rotate-start",(t=>this.callbacks?.onRotateStart?.(t))),this.on("rotate",(t=>this.callbacks?.onRotate?.(t))),this.on("rotate-stop",(t=>this.callbacks?.onRotateStop?.(t))),this.on("scale-start",(t=>this.callbacks?.onScaleStart?.(t))),this.on("scale",(t=>this.callbacks?.onScale?.(t))),this.on("scale-stop",(t=>this.callbacks?.onScaleStop?.(t)))])}destroy(){this._reset(),this.tooltip=(0,o.SC)(this.tooltip)}get state(){const t=this.view?.ready??!1,e=this.graphics.length&&this.layer;return t&&e?"active":t?"ready":"disabled"}isUIGraphic(t){return this._vertexGraphics.includes(t)||t===this._backgroundGraphic||t===this._centerGraphic||t===this._rotateHandleGraphic||t===this._rotateLineGraphic}move(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=(0,w.e7)(s,t,e,this.view);i.geometry=r}this.refresh(),this.emit("move-stop",new Y(this.graphics,null,t,e))}}scale(t,e){if(this._mover&&this.graphics.length){for(const i of this.graphics){const s=i.geometry,r=(0,w.bA)(s,t,e);i.geometry=r}this.refresh(),this.emit("scale-stop",new D(this.graphics,null,t,e))}}rotate(t,e){if(this._mover&&this.graphics.length){if(!e){const t=this._vertexGraphics[1].geometry.x,i=this._vertexGraphics[3].geometry.y;e=new p.Z(t,i,this.view.spatialReference)}for(const i of this.graphics){const s=v(i.geometry,t,e);i.geometry=s}this.refresh(),this.emit("rotate-stop",new A(this.graphics,null,t))}}refresh(){this._reset(),this._setup()}reset(){this.graphics=[]}_setup(){"active"===this.state&&(this._setUpHighlights(),this._setupGraphics(),this._setupMover(),this._updateGraphics())}_reset(){this._highlightHelper?.removeAll(),this._resetGraphicStateVars(),this._resetGraphics(),this._updateTooltip(),this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetGraphicStateVars(){this._startInfo=null,this._activeHandleGraphic=null,this._totalDx=0,this._totalDy=0,this._xScale=1,this._yScale=1,this._angleOfRotation=0}_resetGraphics(t){(t=t||this.layer)&&(t.removeMany(this._vertexGraphics),t.remove(this._backgroundGraphic),t.remove(this._centerGraphic),t.remove(this._rotateHandleGraphic),t.remove(this._rotateLineGraphic)),this._vertexGraphics.forEach((t=>!t.destroyed&&t.destroy())),!this._backgroundGraphic.destroyed&&this._backgroundGraphic.destroy(),!this._centerGraphic.destroyed&&this._centerGraphic.destroy(),!this._rotateHandleGraphic.destroyed&&this._rotateHandleGraphic.destroy(),!this._rotateLineGraphic.destroyed&&this._rotateLineGraphic.destroy(),this._vertexGraphics=[],this._backgroundGraphic=null,this._centerGraphic=null,this._rotateHandleGraphic=null,this._rotateLineGraphic=null}_setupMover(){let t=[];this.enableScaling&&(t=t.concat(this._vertexGraphics)),this.enableRotation&&t.push(this._rotateHandleGraphic),this.enableMovement&&(t=t.concat(this.graphics,this._backgroundGraphic)),this.showCenterGraphic&&t.push(this._centerGraphic),this._mover=new M.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,view:this.view,graphics:t,callbacks:{onGraphicClick:t=>this._onGraphicClickCallback(t),onGraphicMoveStart:t=>this._onGraphicMoveStartCallback(t),onGraphicMove:t=>this._onGraphicMoveCallback(t),onGraphicMoveStop:t=>this._onGraphicMoveStopCallback(t),onGraphicPointerOver:t=>this._onGraphicPointerOverCallback(t),onGraphicPointerOut:t=>this._onGraphicPointerOutCallback(t)}})}_getStartInfo(t){const[e,i,s,r]=this._getBoxBounds((0,d.Ue)()),n=Math.abs(s-e),o=Math.abs(r-i),a=(s+e)/2,h=(r+i)/2,{x:c,y:l}=t.geometry;return{width:n,height:o,centerX:a,centerY:h,startX:c,startY:l,graphicInfos:this._getGraphicInfos(),box:this._backgroundGraphic.geometry,rotate:this._rotateHandleGraphic.geometry}}_getGraphicInfos(){return this.graphics.map((t=>this._getGraphicInfo(t)))}_getGraphicInfo(t){const e=t.geometry,[i,s,r,n]=this._getBounds((0,d.Ue)(),[e]);return{width:Math.abs(r-i),height:Math.abs(n-s),centerX:(r+i)/2,centerY:(n+s)/2,geometry:e}}_onGraphicClickCallback(t){t.viewEvent.stopPropagation(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t)}_onGraphicMoveStartCallback(t){const{_angleOfRotation:e,_xScale:i,_yScale:s,_backgroundGraphic:r,_vertexGraphics:n,_rotateHandleGraphic:o,symbols:a}=this,h=t.graphic;this._resetGraphicStateVars(),this._hideGraphicsBeforeUpdate(),r.symbol=a.fill.active,this._startInfo=this._getStartInfo(h),this._updateTooltip(h,t.viewEvent),h===o?(this.view.cursor="grabbing",this.emit("rotate-start",new z(this.graphics,h,e))):n.includes(h)?(this._activeHandleGraphic=h,this.emit("scale-start",new P(this.graphics,h,i,s))):this.emit("move-start",new L(this.graphics,h,t.dx,t.dy))}_onGraphicMoveCallback(t){const e=t.graphic;if(this._startInfo)if(this._vertexGraphics.includes(e))this._scaleGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("scale",new U(this.graphics,e,this._xScale,this._yScale));else if(e===this._rotateHandleGraphic)this._rotateGraphic(e),this._updateTooltip(e,t.viewEvent),this.emit("rotate",new B(this.graphics,e,this._angleOfRotation));else{const{dx:i,dy:s}=t;this._totalDx+=i,this._totalDy+=s,this._moveGraphic(e,i,s),this._updateTooltip(e,t.viewEvent),this.emit("move",new H(this.graphics,e,i,s))}}_onGraphicMoveStopCallback(t){const e=t.graphic;if(!this._startInfo)return void this.refresh();const{_angleOfRotation:i,_totalDx:s,_totalDy:r,_xScale:n,_yScale:o,_vertexGraphics:a,_rotateHandleGraphic:h}=this;this.refresh(),e===h?(this.view.cursor="pointer",this.emit("rotate-stop",new A(this.graphics,e,i))):a.includes(e)?this.emit("scale-stop",new D(this.graphics,e,n,o)):this.emit("move-stop",new Y(this.graphics,e,s,r))}_onGraphicPointerOverCallback(t){const{_backgroundGraphic:e,_vertexGraphics:i,graphics:s,_rotateHandleGraphic:r,symbols:n,view:o}=this,a=t.graphic;if(this._hoveredGraphic=a,a===r)return r.symbol=n.rotator.hover,o.cursor="pointer",void this._updateTooltip(a);if(s.includes(a)||a===e)return void(o.cursor="move");if(!i.includes(a))return void(o.cursor="pointer");this._updateTooltip(a),t.graphic.symbol=n.handles.hover;const h=o.rotation;let c,l=t.index;switch(l<8&&(h>=0&&h<45?l%=8:l=h>=45&&h<90?(l+1)%8:h>=90&&h<135?(l+2)%8:h>=135&&h<180?(l+3)%8:h>=180&&h<225?(l+4)%8:h>=225&&h<270?(l+5)%8:h>=270&&h<315?(l+6)%8:(l+7)%8),l){case 0:case 4:c="nwse-resize";break;case 1:case 5:c="ns-resize";break;case 2:case 6:c="nesw-resize";break;case 3:case 7:c="ew-resize";break;default:c="pointer"}o.cursor=c}_onGraphicPointerOutCallback(t){const{_vertexGraphics:e,_rotateHandleGraphic:i,symbols:s,view:r}=this;this._hoveredGraphic=null,t.graphic===i?i.symbol=s.rotator.default:e.includes(t.graphic)&&(t.graphic.symbol=s.handles.default),r.cursor="default",this._updateTooltip()}_scaleGraphic(t){const{_startInfo:e,_vertexGraphics:i,preserveAspectRatio:s,view:r}=this,{centerX:n,centerY:o,graphicInfos:a,height:h,startX:c,startY:l,width:u}=e,{resolution:f,transform:d}=r.state,_=i.indexOf(t);1!==_&&5!==_||this._updateX(t,n),3!==_&&7!==_||this._updateY(t,o);const{x:y,y:m}=t.geometry,g=d[0]*y+d[2]*m+d[4],v=d[1]*y+d[3]*m+d[5],b=a?.map((t=>t.geometry))??[],x=b.every((t=>"point"===t.type));if((0===u||0===h)&&x){const t=V((y-c)/f),i=V((l-m)/f);for(let e=0;e<b.length;e++)this.graphics[e].geometry=(0,w.e7)(b[e],t,i,r,!0);return this._centerGraphic.geometry=new p.Z(y,m,r.spatialReference),void(this._backgroundGraphic.geometry=(0,w.e7)(e.box,t,i,r,!0))}if(s){const t=V(d[0]*n+d[2]*o+d[4],2),e=V(d[1]*n+d[3]*o+d[5],2),i=V(d[0]*c+d[2]*l+d[4],2),s=V(d[1]*c+d[3]*l+d[5],2);let r=(0,w.Ru)(t,e,i,s,g,v);0!==r&&Math.abs(r)!==1/0||(r=1),this._xScale=this._yScale=r;for(const t of b){const e=b.indexOf(t);this.graphics[e].geometry=(0,w.bA)(t,this._xScale,this._yScale,[n,o])}this._updateBackgroundGraphic()}else{let t=y-c,i=l-m;if(1===_||5===_?t=0:3!==_&&7!==_||(i=0),0===t&&0===i)return;const s=n+t/2,a=o+i/2;let d=(u+(c>n?t:-1*t))/u,g=(h+(l<o?i:-1*i))/h;1!==_&&5!==_&&0!==d&&Math.abs(d)!==1/0||(d=1),3!==_&&7!==_&&0!==g&&Math.abs(g)!==1/0||(g=1),this._xScale=d,this._yScale=g;const v=(s-n)/f,x=(a-o)/f,G=(0,w.bA)(e.box,this._xScale,this._yScale);this._backgroundGraphic.geometry=(0,w.e7)(G,v,x,r,!0);const{centerX:M,centerY:S}=this._getGraphicInfo(this._backgroundGraphic),k=(M-n)/f,C=-1*(S-o)/f;for(const t of b){const e=b.indexOf(t),i=(0,w.bA)(t,this._xScale,this._yScale,[n,o]);this.graphics[e].geometry=(0,w.e7)(i,k,C,r,!0)}this._centerGraphic.geometry=new p.Z(M,S,r.spatialReference)}}_rotateGraphic(t){const{centerX:e,centerY:i,startX:s,startY:r,box:n,rotate:o}=this._startInfo,a=this.view.spatialReference,h=new p.Z(s,r,a),c=new p.Z(e,i,a),l=t.geometry;this._angleOfRotation=(0,w.cM)(h,l,c);const u=this._startInfo.graphicInfos?.map((t=>t.geometry))??[];for(const t of u){const e=u.indexOf(t),i=v(t,this._angleOfRotation,c);this.graphics[e].geometry=i}this._backgroundGraphic.geometry=v(n,this._angleOfRotation,c),this._rotateHandleGraphic.geometry=v(o,this._angleOfRotation,c)}_moveGraphic(t,e,i){if(this.graphics.includes(t)){const s=this._backgroundGraphic.geometry;this._backgroundGraphic.geometry=(0,w.e7)(s,e,i,this.view);for(const s of this.graphics)s!==t&&(s.geometry=(0,w.e7)(s.geometry,e,i,this.view))}else if(t===this._centerGraphic){const t=this._backgroundGraphic.geometry;this._backgroundGraphic.geometry=(0,w.e7)(t,e,i,this.view)}if(t===this._backgroundGraphic||t===this._centerGraphic)for(const t of this.graphics)t.geometry=(0,w.e7)(t.geometry,e,i,this.view)}_setUpHighlights(){this.highlightsEnabled&&this.graphics.length&&this._highlightHelper?.add(this.graphics,this.highlightName)}_setupGraphics(){const{_graphicAttributes:t,symbols:e}=this;this._centerGraphic=new r.Z({symbol:e.centerIndicator,attributes:t}),this.showCenterGraphic&&this.layer.add(this._centerGraphic),this._backgroundGraphic=new r.Z({symbol:e.fill.default,attributes:t}),this.layer.add(this._backgroundGraphic),this._rotateLineGraphic=new r.Z({symbol:e.rotatorLine,attributes:t}),this._rotateHandleGraphic=new r.Z({symbol:e.rotator.default,attributes:t}),this.enableRotation&&!this._hasExtentGraphic()&&this.layer.addMany([this._rotateLineGraphic,this._rotateHandleGraphic]);for(let i=0;i<8;i++)this._vertexGraphics.push(new r.Z({symbol:e.handles.default,attributes:t}));this.enableScaling&&this.layer.addMany(this._vertexGraphics)}_updateSymbolsForTheme(){const t=this.view.effectiveTheme.accentColor;this.symbols={...this.symbols,fill:{active:this.symbols.fill.active?.clone().set("outline.color",t),default:this.symbols.fill.default?.clone().set("outline.color",t)},handles:{...this.symbols.handles,default:this.symbols.handles.default.clone().set("outline.color",t)},rotator:{...this.symbols.rotator,default:this.symbols.rotator.default.clone().set("outline.color",t)},rotatorLine:this.symbols.rotatorLine.clone().set("color",t)};for(const t of this._vertexGraphics)t.symbol=t===this._hoveredGraphic?this.symbols.handles.hover:this.symbols.handles.default;this._backgroundGraphic.symbol=this.symbols.fill.default,this._rotateHandleGraphic.symbol=this._rotateHandleGraphic===this._hoveredGraphic?this.symbols.rotator.hover:this.symbols.rotator.default,this._rotateLineGraphic.symbol=this.symbols.rotatorLine}_updateGraphics(){this._updateBackgroundGraphic(),this._updateHandleGraphics(),this._updateCenterGraphic(),this._updateRotateGraphic(),this._updateRotateLineGraphic()}_hideGraphicsBeforeUpdate(){this._centerGraphic.visible=!1,this._rotateHandleGraphic.visible=!1,this._rotateLineGraphic.visible=!1,this._vertexGraphics.forEach((t=>t.visible=!1))}_updateHandleGraphics(){const t=this._getCoordinates(!0);this._vertexGraphics.forEach(((e,i)=>{const[s,r]=t[i];this._updateXY(e,s,r)}))}_updateBackgroundGraphic(){const t=this._getCoordinates().map((([t,e])=>[t,e]));this._backgroundGraphic.geometry=new u.Z({rings:[t],spatialReference:this.view.spatialReference})}_updateCenterGraphic(){const[t,e,i,s]=this._getBoxBounds((0,d.Ue)()),r=(i+t)/2,n=(s+e)/2;this._centerGraphic.geometry=new p.Z(r,n,this.view.spatialReference)}_updateRotateGraphic(){if(!this._vertexGraphics.length)return;const{x:t,y:e}=this._vertexGraphics[1].geometry,i=e+this.view.state.resolution*this._rotateGraphicOffset;this._rotateHandleGraphic.geometry=new p.Z(t,i,this.view.spatialReference)}_updateRotateLineGraphic(){if(!this._vertexGraphics.length||!this._rotateHandleGraphic?.geometry)return;const t=this._vertexGraphics[1].geometry,e=this._rotateHandleGraphic.geometry;this._rotateLineGraphic.geometry=new f.Z({paths:[[[t.x,t.y],[e.x,e.y]]],spatialReference:this.view.spatialReference})}_updateXY(t,e,i){t.geometry=new p.Z(e,i,this.view.spatialReference)}_updateX(t,e){const i=t.geometry.y;t.geometry=new p.Z(e,i,this.view.spatialReference)}_updateY(t,e){const i=t.geometry.x;t.geometry=new p.Z(i,e,this.view.spatialReference)}_hasExtentGraphic(){return this.graphics.some((t=>null!=t?.geometry&&"extent"===t.geometry.type))}_getBoxBounds(t){const e=this.graphics.map((t=>t.geometry));return this._getBounds(t,e)}_getCoordinates(t){const[e,i,s,r]=this._getBoxBounds((0,d.Ue)());if(t){const t=(e+s)/2,n=(r+i)/2;return[[e,r],[t,r],[s,r],[s,n],[s,i],[t,i],[e,i],[e,n]]}return[[e,r],[s,r],[s,i],[e,i]]}_updateTooltip(t,e){if(null==this.tooltip)return;if(!t)return void this.tooltip.clear();const{_backgroundGraphic:i,graphics:s,_vertexGraphics:r,_rotateHandleGraphic:n}=this;t===n?this._updateRotateTooltip():r.includes(t)?this._updateScaleTooltip():(s.includes(t)||t===i)&&this._updateMoveTooltip(e)}_updateRotateTooltip(){null!=this.tooltip&&(this.tooltip.info=new E.c({sketchOptions:this.sketchOptions,angle:-this._angleOfRotation}))}_updateScaleTooltip(){const{tooltip:t,_xScale:e,_yScale:i,sketchOptions:s,view:r,automaticLengthMeasurementUtils:n}=this;if(null==t)return;const o=this._getCoordinates(),a=(0,T.D)({topLeft:o[0],topRight:o[1],bottomRight:o[2],bottomLeft:o[3],spatialReference:r.spatialReference,automaticLengthMeasurementUtils:n});if(null==a)return;const{xSize:h,ySize:c}=a,l=Math.abs(e),p=Math.abs(i);t.info=new O.p({sketchOptions:s,xScale:l,yScale:p,xSize:h,ySize:c})}_updateMoveTooltip(t){const{tooltip:e,sketchOptions:i,view:s,automaticLengthMeasurementUtils:r}=this;if(null==e)return;const n=new Z.E({sketchOptions:i});if(t){const{x:e,y:i}=t.origin,o=s.toMap(t),h=s.toMap({x:e,y:i}),c=r.autoDistanceBetweenPoints2D(h,o);n.distance=null!=c?c:a.yP}e.info=n}};function V(t,e=2){return Number.parseFloat(t.toFixed(e))}(0,s._)([(0,c.Cb)()],q.prototype,"tooltip",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],q.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"callbacks",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"enableMovement",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"enableRotation",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"enableScaling",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"graphics",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"highlightName",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"highlightsEnabled",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"layer",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"preserveAspectRatio",void 0),(0,s._)([(0,c.Cb)()],q.prototype,"showCenterGraphic",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],q.prototype,"state",null),(0,s._)([(0,c.Cb)()],q.prototype,"symbols",void 0),(0,s._)([(0,c.Cb)({type:R.Z})],q.prototype,"sketchOptions",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],q.prototype,"view",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],q.prototype,"automaticLengthMeasurementUtils",void 0),q=(0,s._)([(0,l.j)("esri.views.draw.support.Box")],q);const X=q},89200:function(t,e,i){i.d(e,{Ru:function(){return l},bA:function(){return c},cM:function(){return p},e7:function(){return h}});var s=i(99574),r=i(47566),n=i(62951),o=i(28931);function a(t,e,i,s){if(null==s||t.hasZ||(s=void 0),"point"===t.type)return t.x+=e,t.y+=i,t.hasZ&&null!=s&&(t.z+=s),t;if("multipoint"===t.type){const r=t.points;for(let t=0;t<r.length;t++)r[t]=u(r[t],e,i,s);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=i,t.ymax+=i,null!=s&&(t.zmin??=0,t.zmin+=s,t.zmax??=0,t.zmax+=s),t;const r=(0,o.nA)(t),n="polyline"===t.type?t.paths:t.rings;for(let t=0;t<r.length;t++){const n=r[t];for(let t=0;t<n.length;t++)n[t]=u(n[t],e,i,s)}return"paths"in t?t.paths=n:t.rings=n,t}function h(t,e,i,s,r){const n=t.clone(),h=s.resolution;if("point"===n.type){if(r)a(n,e*h,-i*h);else{const t=s.state.transform,r=s.state.inverseTransform,o=t[0]*n.x+t[2]*n.y+t[4],a=t[1]*n.x+t[3]*n.y+t[5];n.x=r[0]*(o+e)+r[2]*(a+i)+r[4],n.y=r[1]*(o+e)+r[3]*(a+i)+r[5]}return n}if("multipoint"===n.type){if(r)a(n,e*h,-i*h);else{const t=n.points,r=s.state.transform,o=s.state.inverseTransform;for(let s=0;s<t.length;s++){const n=t[s],a=r[0]*n[0]+r[2]*n[1]+r[4],h=r[1]*n[0]+r[3]*n[1]+r[5],c=o[0]*(a+e)+o[2]*(h+i)+o[4],l=o[1]*(a+e)+o[3]*(h+i)+o[5];t[s]=f(n,c,l,void 0)}}return n}if("extent"===n.type){if(r)a(n,e*h,-i*h);else{const t=s.state.transform,r=s.state.inverseTransform,o=t[0]*n.xmin+t[2]*n.ymin+t[4],a=t[1]*n.xmin+t[3]*n.ymin+t[5],h=t[0]*n.xmax+t[2]*n.ymax+t[4],c=t[1]*n.xmax+t[3]*n.ymax+t[5];n.xmin=r[0]*(o+e)+r[2]*(a+i)+r[4],n.ymin=r[1]*(o+e)+r[3]*(a+i)+r[5],n.xmax=r[0]*(h+e)+r[2]*(c+i)+r[4],n.ymax=r[1]*(h+e)+r[3]*(c+i)+r[5]}return n}if(r)a(n,e*h,-i*h);else{const t=(0,o.nA)(n),r="polyline"===n.type?n.paths:n.rings,a=s.state.transform,h=s.state.inverseTransform;for(let s=0;s<t.length;s++){const r=t[s];for(let t=0;t<r.length;t++){const s=r[t],n=a[0]*s[0]+a[2]*s[1]+a[4],o=a[1]*s[0]+a[3]*s[1]+a[5],c=h[0]*(n+e)+h[2]*(o+i)+h[4],l=h[1]*(n+e)+h[3]*(o+i)+h[5];r[t]=f(s,c,l,void 0)}}"paths"in n?n.paths=r:n.rings=r}return n}function c(t,e,i,s){if("point"===t.type){const{x:r,y:n}=t,o=s?s[0]:r,a=s?s[1]:n,h=t.clone(),c=(r-o)*e+o,l=(n-a)*i+a;return h.x=c,h.y=l,h}if("multipoint"===t.type){const a=(0,o.nA)(t),h=(0,r.Ue)(),[c,l,p,u]=(0,n.C6)(h,[a]),d=s?s[0]:(c+p)/2,_=s?s[1]:(u+l)/2,y=t.clone(),m=y.points;for(let t=0;t<m.length;t++){const s=m[t],[r,n]=s,o=(r-d)*e+d,a=(n-_)*i+_;m[t]=f(s,o,a,void 0)}return y}if("extent"===t.type){const{xmin:r,xmax:n,ymin:o,ymax:a}=t,h=s?s[0]:(r+n)/2,c=s?s[1]:(a+o)/2,l=t.clone();if(l.xmin=(r-h)*e+h,l.ymax=(a-c)*i+c,l.xmax=(n-h)*e+h,l.ymin=(o-c)*i+c,l.xmin>l.xmax){const t=l.xmin,e=l.xmax;l.xmin=e,l.xmax=t}if(l.ymin>l.ymax){const t=l.ymin,e=l.ymax;l.ymin=e,l.ymax=t}return l}const a=(0,o.nA)(t),h=(0,r.Ue)(),[c,l,p,u]=(0,n.C6)(h,a),d=s?s[0]:(c+p)/2,_=s?s[1]:(u+l)/2,y=t.clone(),m="polyline"===y.type?y.paths:y.rings;for(let t=0;t<a.length;t++){const s=a[t];for(let r=0;r<s.length;r++){const n=s[r],[o,a]=n,h=(o-d)*e+d,c=(a-_)*i+_;m[t][r]=f(n,h,c,void 0)}}return"paths"in y?y.paths=m:y.rings=m,y}function l(t,e,i,s,r,n){const o=Math.sqrt((i-t)*(i-t)+(s-e)*(s-e));return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))/o}function p(t,e,i,r=!1){const n=Math.atan2(e.y-i.y,e.x-i.x)-Math.atan2(t.y-i.y,t.x-i.x),o=Math.atan2(Math.sin(n),Math.cos(n));return r?o:(0,s.BV)(o)}function u(t,e,i,s){return f(t,t[0]+e,t[1]+i,null!=t[2]&&null!=s?t[2]+s:void 0)}function f(t,e,i,s){const r=[e,i];return t.length>2&&r.push(null!=s?s:t[2]),t.length>3&&r.push(t[3]),r}},59037:function(t,e,i){i.d(e,{c:function(){return a}});var s=i(73440),r=i(17155),n=(i(61432),i(96711),i(83850),i(48023)),o=i(40298);let a=class extends o.h{constructor(t){super(t),this.type="extent-rotate",this.angle=0}};(0,s._)([(0,r.Cb)()],a.prototype,"type",void 0),(0,s._)([(0,r.Cb)()],a.prototype,"angle",void 0),a=(0,s._)([(0,n.j)("esri.views.interactive.tooltip.infos.ExtentRotateTooltipInfo")],a)},8449:function(t,e,i){i.d(e,{p:function(){return h}});var s=i(73440),r=i(1925),n=i(17155),o=(i(61432),i(96711),i(83850),i(48023)),a=i(40298);let h=class extends a.h{constructor(t){super(t),this.type="extent-scale",this.xScale=0,this.yScale=0,this.xSize=r.yP,this.ySize=r.yP}};(0,s._)([(0,n.Cb)()],h.prototype,"type",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"xScale",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"yScale",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"xSize",void 0),(0,s._)([(0,n.Cb)()],h.prototype,"ySize",void 0),h=(0,s._)([(0,o.j)("esri.views.interactive.tooltip.infos.ExtentScaleTooltipInfo")],h)},4939:function(t,e,i){i.d(e,{D:function(){return r}});var s=i(1925);function r({topLeft:t,topRight:e,bottomRight:i,bottomLeft:r,spatialReference:n,automaticLengthMeasurementUtils:{autoDistance2D:o}}){const a=(0,s.Fp)(o(r,i,n),o(t,e,n));if(null==a)return null;const h=(0,s.Fp)(o(i,e,n),o(r,t,n));return null==h?null:{xSize:a,ySize:h}}}}]);