"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[33671],{92643:function(t,n,e){e.d(n,{Ch:function(){return $},EX:function(){return S},G:function(){return R},H0:function(){return U},Ht:function(){return j},K6:function(){return E},O:function(){return T},WC:function(){return D},Y3:function(){return x},_Y:function(){return P},_j:function(){return Z},c9:function(){return I},gp:function(){return A},jQ:function(){return c},mj:function(){return k},nR:function(){return Y},sJ:function(){return L},vG:function(){return z},xr:function(){return w}});var r=e(53147),o=e(3480),i=e(28947),a=e(99574),s=e(73749),u=e(27583);function c(t){return"r"in t&&"g"in t&&"b"in t}function h(t){return"h"in t&&"s"in t&&"v"in t}function l(t){return"l"in t&&"a"in t&&"b"in t}function d(t){return"l"in t&&"c"in t&&"h"in t}const f=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],p=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function b(t,n){const e=[];let r,o;if(t[0].length!==n.length)throw new Error("dimensions do not match");const i=t.length,a=t[0].length;let s=0;for(r=0;r<i;r++){for(s=0,o=0;o<a;o++)s+=t[r][o]*n[o];e.push(s)}return e}function g(t){const n=[t.r/255,t.g/255,t.b/255].map((t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4)),e=b(f,n);return{x:100*e[0],y:100*e[1],z:100*e[2]}}function v(t){const n=b(p,[t.x/100,t.y/100,t.z/100]).map((t=>{const n=t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055;return Math.min(1,Math.max(n,0))}));return{r:Math.round(255*n[0]),g:Math.round(255*n[1]),b:Math.round(255*n[2])}}function _(t){const n=[t.x/95.047,t.y/100,t.z/108.883].map((t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29));return{l:116*n[1]-16,a:500*(n[0]-n[1]),b:200*(n[1]-n[2])}}function m(t){const n=t.l,e=[(n+16)/116+t.a/500,(n+16)/116,(n+16)/116-t.b/200].map((t=>t>6/29?t**3:3*(6/29)**2*(t-4/29)));return{x:95.047*e[0],y:100*e[1],z:108.883*e[2]}}function y(t){return function(t){const n=t.l,e=t.a,r=t.b,o=Math.sqrt(e*e+r*r);let i=Math.atan2(r,e);return i=i>0?i:i+2*Math.PI,{l:n,c:o,h:i}}(_(g(t)))}function M(t){return v(m(function(t){const n=t.l,e=t.c,r=t.h;return{l:n,a:e*Math.cos(r),b:e*Math.sin(r)}}(t)))}function w(t){return c(t)?t:d(t)?M(t):l(t)?function(t){return v(m(t))}(t):function(t){return"x"in t&&"y"in t&&"z"in t}(t)?v(t):h(t)?function(t){const n=(t.h+360)%360/60,e=t.s/100,r=t.v/100*255,o=r*e,i=o*(1-Math.abs(n%2-1));let a;switch(Math.floor(n)){case 0:a={r:o,g:i,b:0};break;case 1:a={r:i,g:o,b:0};break;case 2:a={r:0,g:o,b:i};break;case 3:a={r:0,g:i,b:o};break;case 4:a={r:i,g:0,b:o};break;case 5:case 6:a={r:o,g:0,b:i};break;default:a={r:0,g:0,b:0}}return a.r=Math.round(a.r+r-o),a.g=Math.round(a.g+r-o),a.b=Math.round(a.b+r-o),a}(t):t}function P(t){return h(t)?t:function(t){const n=t.r,e=t.g,r=t.b,o=Math.max(n,e,r),i=o-Math.min(n,e,r);let a=o,s=0===i?0:o===n?(e-r)/i%6:o===e?(r-n)/i+2:(n-e)/i+4,u=0===i?0:i/a;return s<0&&(s+=6),s*=60,u*=100,a*=100/255,{h:s,s:u,v:a}}(w(t))}function x(t){return l(t)?t:function(t){return _(g(t))}(w(t))}function L(t){return d(t)?t:y(w(t))}function C(t){let{r:n,g:e,b:o,a:i}=t;return i<1&&(n=Math.round(i*n+255*(1-i)),e=Math.round(i*e+255*(1-i)),o=Math.round(i*o+255*(1-i))),new r.Z({r:n,g:e,b:o})}function S(t,n){const{r:e,g:r,b:o}=n?.ignoreAlpha?t:C(t);return.2126*e+.7152*r+.0722*o}var E,H;function k(t,n=E.High){return S(t,{ignoreAlpha:!0})>n?new r.Z([0,0,0,t.a]):new r.Z([255,255,255,t.a])}function Z(t,n){const e=x(t);e.l*=1-n;const r=w(e),o=t.clone();return o.setColor(r),o.a=t.a,o}function R(t,n){const e=t.clone();return e.a*=n,e}function z(t,n){const e=P(t);e.s*=n;const r=w(e),o=t.clone();return o.setColor(r),o.a=t.a,o}function T(t){return r.Z.toUnitRGBA(t)}function D(t,n){return t===n||null!=t&&t.equals(n)}function j(t,n){return t===n||null!=t&&null!=n&&(0,s.e)(t,n)}function A(t){return(0,u.al)(t[0],t[1],t[2],t.length>3?t[3]:1)}function I(t){return t[0]??=0,t[1]??=0,t[2]??=0,t}function Y(t){return t.length=4,I(t),t[3]??=1,(0,a.uZ)(t[3],0,1),t}function $(t,n){const e=r.Z.toUnitRGBA(t);return e[3]*=n,e}function U(t,n,e={}){if(0===t.length||n<=0)return[];if(1===(t=t.map((t=>"string"==typeof t?new r.Z(t):t))).length||1===n){const e=[],r=t[0];for(let t=0;t<n;t++)e.push(r.clone());return e}if(e.shuffle&&(t=(0,o.TV)((0,i.d9)(t),e.seed)),t.length>=n){const e=[],r=(t.length-1)/(n-1);for(let o=0;o<n;o++){const n=Math.round(o*r);e.push(t[n].clone())}return e}return function(t,n,e={}){const r=[],i=t.length-1,a=Math.ceil((n-t.length)/i);t:for(let o=0;o<i;o++){const i=t[o],s=t[o+1];for(let o=1;o<=a;o++){const u=o/(a+1);if(r.push(X(i,s,u,e)),r.length+t.length===n)break t}}return[...t.map((t=>t.clone())),...(0,o.TV)(r,e.seed??1)]}(t,n,e)}(H=E||(E={}))[H.Low=160]="Low",H[H.High=225]="High";const V=(t,n)=>{const e=Math.floor(10*n())-5;return Math.min(255,Math.max(0,t+e))};function X(t,n,e,i={}){const a=t.r,s=t.g,u=t.b,c=n.r,h=n.g,l=n.b,d=Math.round(a+(c-a)*e),f=Math.round(s+(h-s)*e),p=Math.round(u+(l-u)*e);if(!i.offset)return new r.Z([d,f,p]);const b=(0,o.FS)(i.seed);return new r.Z([V(d,b),V(f,b),V(p,b)])}},83695:function(t,n,e){function r(){return[1,0,0,1,0,0]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}e.d(n,{Ue:function(){return r},Wd:function(){return i},d9:function(){return o}});const i=[1,0,0,1,0,0];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,fromValues:function(t,n,e,r,o,i){return[t,n,e,r,o,i]}},Symbol.toStringTag,{value:"Module"}))},50639:function(t,n,e){e.d(n,{Iu:function(){return c},Jp:function(){return a},U1:function(){return s},U_:function(){return i},Us:function(){return h},bA:function(){return u},vc:function(){return d},xJ:function(){return l},yR:function(){return o}});var r=e(66130);function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function i(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=n[5];let u=e*i-r*o;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=e*u,t[4]=(o*s-i*a)*u,t[5]=(r*a-e*s)*u,t):null}function a(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1],l=e[2],d=e[3],f=e[4],p=e[5];return t[0]=r*c+i*h,t[1]=o*c+a*h,t[2]=r*l+i*d,t[3]=o*l+a*d,t[4]=r*f+i*p+s,t[5]=o*f+a*p+u,t}function s(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=Math.sin(e),h=Math.cos(e);return t[0]=r*h+i*c,t[1]=o*h+a*c,t[2]=r*-c+i*h,t[3]=o*-c+a*h,t[4]=s,t[5]=u,t}function u(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1];return t[0]=r*c,t[1]=o*c,t[2]=i*h,t[3]=a*h,t[4]=s,t[5]=u,t}function c(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],c=e[0],h=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*c+i*h+s,t[5]=o*c+a*h+u,t}function h(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t}function l(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t}function d(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t}function f(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}const p=a,b=f;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},equals:function(t,n){const e=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=n[0],h=n[1],l=n[2],d=n[3],f=n[4],p=n[5],b=(0,r.bn)();return Math.abs(e-c)<=b*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(o-h)<=b*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-l)<=b*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-d)<=b*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-f)<=b*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(u-p)<=b*Math.max(1,Math.abs(u),Math.abs(p))},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)},fromRotation:h,fromScaling:l,fromTranslation:d,identity:o,invert:i,mul:p,multiply:a,multiplyScalar:function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},multiplyScalarAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},rotate:s,scale:u,set:function(t,n,e,r,o,i,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},sub:b,subtract:f,translate:c},Symbol.toStringTag,{value:"Module"}))},35078:function(t,n,e){e.r(n),e.d(n,{ElevationProfileView2D:function(){return P}});var r=e(12818),o=e(61100),i=e(90403),a=e(63216),s=e(74011),u=e(29292),c=e(93568),h=e(27546);class l{constructor(t){this._params=t,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=(0,o.IM)(this._highlightTask),this._highlightHandle=(0,o.hw)(this._highlightHandle)}update(t){if(this.remove(),null==t||(null==(n=t).geometry||"polyline"!==n.geometry.type))return;var n;const e=t.layer;this._highlightTask=(0,u.vr)((async n=>{const r=await this._params.view.whenLayerView(e);(0,c.k_)(n);const o=(0,h.tl)(r)?r:null;o&&(this._highlightHandle=o.highlight(t))}))}}var d=e(73440),f=e(46451),p=e(70880),b=e(92643),g=e(12506),v=e(17155),_=(e(61432),e(96711),e(83850),e(48023)),m=e(53447),y=e(44783),M=e(70388);let w=class extends p.Z{constructor(t){super(t),this._chartData=null,this._graphic=new f.Z,this._layer=new m.Z({listMode:"hide",internal:!0,title:"Profile line"}),this._update=t=>{const{chartData:n}=t;if(null==n)return this.remove();if(!n.refined)return;const e=n.lines.find((t=>t.viewVisualizationEnabled));if(!e)return;this._graphic.geometry=(0,M.L)(e,t.spatialReference),this._graphic.symbol=new y.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:e.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:(0,b.mj)(e.color).toArray()}]}}});const r=this.view?.map?.layers;r&&!r.includes(this._layer)&&r.add(this._layer)}}initialize(){this._layer.add(this._graphic);const t=(0,a.iE)().profileLinesUpdateThrottleMillis;let n=this._update;if(t>0){const e=(0,g.P)(this._update,t);this.addHandles(e),n=e}this.addHandles((0,i.YP)((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),n,i.tX))}destroy(){this.remove()}remove(){this.view?.map?.remove(this._layer)}update(t){this._chartData=t}};(0,d._)([(0,v.Cb)()],w.prototype,"view",void 0),(0,d._)([(0,v.Cb)()],w.prototype,"_chartData",void 0),w=(0,d._)([(0,_.j)("esri.widgets.ElevationProfile.support.ProfileLine2D")],w);class P{constructor(t,n){this._handles=new r.Z,this._inputRepresentation=new l({view:t}),this._hoveredPoints=new s.l({view:t}),this._profileLine=new w({view:t}),this._handles.add([(0,i.YP)((()=>n.viewModel.hoveredPoints),(t=>this._hoveredPoints.update(t)),i.tX),(0,i.YP)((()=>{const{state:t,highlightEnabled:e,viewModel:r}=n;return{input:r.input,state:t,highlightEnabled:e}}),(t=>this._updateInputRepresentation(t)),i.tX),(0,i.YP)((()=>n.viewModel.chartData),(t=>this._profileLine.update(t)),i.tX),(0,i.YP)((()=>n.viewModel.input?.geometry),(()=>{this._profileLine.remove()}),i.tX)])}destroy(){this._handles=(0,o.SC)(this._handles),this._inputRepresentation=(0,o.SC)(this._inputRepresentation),this._hoveredPoints=(0,o.SC)(this._hoveredPoints),this._profileLine=(0,o.SC)(this._profileLine)}_updateInputRepresentation({input:t,state:n,highlightEnabled:e}){n===a.dd.Selected&&e?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}},74011:function(t,n,e){e.d(n,{l:function(){return l}});var r=e(73440),o=e(70880),i=e(43254),a=e(90403),s=e(17155),u=(e(61432),e(96711),e(83850),e(48023)),c=e(63216),h=e(64397);let l=class extends o.Z{constructor(t){super(t),this._hoveredPoints=new i.Z}initialize(){this.addHandles((0,a.YP)((()=>this._hoveredPoints.toArray().map((({anchor:t,element:n})=>({screenLocation:t.screenLocation,element:n})))),(t=>{for(const{screenLocation:n,element:e}of t)n&&(e.style.transform=`translate(${n.x}px, ${n.y}px)`)}),a.tX))}destroy(){this._hoveredPoints.drain((t=>this._destroyHoveredPoint(t)))}update(t){const n=this.view,e=this._hoveredPoints,r=t.length;for(;this._hoveredPoints.length>r;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<r;){const t=this._makeHoveredPoint();e.push(t),n.surface?.appendChild(t.element)}for(let n=0;n<r;++n){const o=e.at(r-1-n),i=t[n];this._updateHoveredPoint(o,i)}}_makeHoveredPoint(){const{size:t,borderStyle:n,borderColor:e,borderWidth:r,boxShadow:o}=(0,c.iE)().hoveredPointsStyle,i=this.view,a=new h.Z({view:i,screenLocationEnabled:!0}),s=document.createElement("div"),u=s.style;return u.position="absolute",u.top="0",u.left="0",u.contain="strict",u.boxSizing="border-box",u.width=`${t}px`,u.height=`${t}px`,u.marginTop=`-${t/2}px`,u.marginLeft=`-${t/2}px`,u.border=`${n} ${r}px ${e}`,u.borderRadius=`${t}px`,u.boxShadow=o,{anchor:a,element:s}}_updateHoveredPoint({anchor:t,element:n},e){t.screenLocationEnabled=!0,t.location=e.hoveredPoint;const r=n.style;r.display="block",r.background=e.color.toCss()}_destroyHoveredPoint({anchor:t,element:n}){t.destroy(),this.view.surface?.removeChild(n)}};(0,r._)([(0,s.Cb)()],l.prototype,"view",void 0),(0,r._)([(0,s.Cb)()],l.prototype,"_hoveredPoints",void 0),l=(0,r._)([(0,u.j)("esri.widgets.ElevationProfile.support.HoveredPoints")],l)},70388:function(t,n,e){e.d(n,{L:function(){return o}});var r=e(1663);function o(t,n){const e=t.samples??[],o=e.length-1,i=[];let a=[];for(let t=0;t<=o;t++){const{x:n,y:r,z:s}=e[t];null!=s&&a.push([n,r,s]),t!==o&&null!=s||!a.length||(i.push(a),a=[])}return(0,r.DF)(i,n,!0)}},64397:function(t,n,e){e.d(n,{Z:function(){return c}});var r=e(73440),o=e(87833),i=e(90403),a=e(17155),s=(e(61432),e(96711),e(83850),e(48023)),u=e(13132);let c=class extends o.Z.EventedAccessor{constructor(t){super(t),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,i.gx)((()=>{const t=this.screenLocationEnabled?this.view:null;return t?[t.size,"3d"===t.type?t.camera:t.viewpoint]:null}),(()=>this.notifyChange("screenLocation"))),(0,i.YP)((()=>this.screenLocation),((t,n)=>{null!=t&&null!=n&&this.emit("view-change")}))])}destroy(){this.view=null}get screenLocation(){const{location:t,view:n,screenLocationEnabled:e}=this,r=n?.spatialReference,o=r?(0,u.projectOrLoad)(t,r).geometry:null;return e&&o&&n?.ready?n.toScreen(o):null}};(0,r._)([(0,a.Cb)()],c.prototype,"location",void 0),(0,r._)([(0,a.Cb)()],c.prototype,"screenLocation",null),(0,r._)([(0,a.Cb)()],c.prototype,"screenLocationEnabled",void 0),(0,r._)([(0,a.Cb)()],c.prototype,"view",void 0),c=(0,r._)([(0,s.j)("esri.widgets.support.AnchorElementViewModel")],c)}}]);