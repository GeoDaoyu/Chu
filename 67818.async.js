"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[67818],{30062:function(t,e,n){function r(t){let e,n,r=[],i=!1;return function(...s){return i&&e===this&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(s,r)||(n=t.apply(this,s),e=this,r=s,i=!0),n}}n.d(e,{H:function(){return r}})},37204:function(t,e,n){n.d(e,{SR:function(){return h},Ui:function(){return l}});var r=n(69306),i=n(47566),s=n(62951),o=n(28931),a=n(90756),u=n(76264),c=n(8554);function l(t){return p(t,!0)}function h(t){return p(t,!1)}function p(t,e){if(null==t)return null;const n=t.spatialReference,i=(0,c.C5)(n),o=(0,r.A)(t)?t.toJSON():t;if(!i)return o;const l=(0,c.sS)(n)?102100:4326,h=u.UZ[l].maxX,p=u.UZ[l].minX;if((0,a.wp)(o))return d(o,h,p);if((0,a.aW)(o))return o.points=o.points.map((t=>d(t,h,p))),o;if((0,a.YX)(o))return f(o,i);if((0,a.oU)(o)||(0,a.l9)(o)){const t=(0,s.$P)(v,o),n={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},r=(0,u.XZ)(n.xmin,p)*(2*h),i=0===r?o:(0,u.Sy)(o,r);return n.xmin+=r,n.xmax+=r,n.xmax>h?_(i,h,e):n.xmin<p?_(i,p,e):i}return o}function f(t,e){if(!e)return t;const n=function(t,e){const n=[],{ymin:r,ymax:i,xmin:s,xmax:o}=t,a=t.xmax-t.xmin,[u,c]=e.valid,{x:l,frameId:h}=g(t.xmin,e),{x:p,frameId:f}=g(t.xmax,e),d=l===p&&a>0;if(a>2*c){const t={xmin:s<o?l:p,ymin:r,xmax:c,ymax:i},e={xmin:u,ymin:r,xmax:s<o?p:l,ymax:i},a={xmin:0,ymin:r,xmax:c,ymax:i},d={xmin:u,ymin:r,xmax:0,ymax:i},g=[],y=[];m(t,a)&&g.push(h),m(t,d)&&y.push(h),m(e,a)&&g.push(f),m(e,d)&&y.push(f);for(let t=h+1;t<f;t++)g.push(t),y.push(t);n.push(new x(t,[h]),new x(e,[f]),new x(a,g),new x(d,y))}else l>p||d?n.push(new x({xmin:l,ymin:r,xmax:c,ymax:i},[h]),new x({xmin:u,ymin:r,xmax:p,ymax:i},[f])):n.push(new x({xmin:l,ymin:r,xmax:p,ymax:i},[h]));return n}(t,e).map((t=>t.extent));return n.length<2?n[0]||t:n.length>2?(t.xmin=e.valid[0],t.xmax=e.valid[1],t):{rings:n.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function d(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const n=(0,u.XZ)(r,e);t[0]=r+n*(-2*e)}else if(r<n){const e=(0,u.XZ)(r,n);t[0]=r+e*(-2*n)}}else{const r=t.x;if(r>e){const n=(0,u.XZ)(r,e);t.x+=n*(-2*e)}else if(r<n){const e=(0,u.XZ)(r,n);t.x+=e*(-2*n)}}return t}function g(t,e){const[n,r]=e.valid,i=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i,o=s):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i,o=-s),{x:t,frameId:o}}function m(t,e){const{xmin:n,ymin:r,xmax:i,ymax:s}=e;return y(t,n,r)&&y(t,n,s)&&y(t,i,s)&&y(t,i,r)}function y(t,e,n){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax}function _(t,e,n=!0){const r=!(0,a.l9)(t);if(r&&(0,o.Zy)(t),n)return(new w).cut(t,e);const i=r?t.rings:t.paths,s=r?4:2,u=i.length,c=-2*e;for(let t=0;t<u;t++){const e=i[t];if(e&&e.length>=s){const t=[];for(const n of e)t.push([n[0]+c,n[1]]);i.push(t)}}return r?t.rings=i:t.paths=i,t}class x{constructor(t,e){this.extent=t,this.frameIds=e}}const v=(0,i.Ue)();class w{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,e){let n;if(this._xCut=e,t.rings)this._closed=!0,n=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,n=t.paths,this._minPts=2}for(const t of n){if(!t||t.length<this._minPts)continue;let e=!0;for(const n of t)e?(this.moveTo(n),e=!1):this.lineTo(n);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),n=[];for(const t of this._linesIn)t&&t.length>=this._minPts&&n.push(t);const r=-2*this._xCut;for(const t of this._linesOut)if(t&&t.length>=this._minPts){for(const e of t)e[0]+=r;n.push(t)}return this._closed?t.rings=n:t.paths=n,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const e=this._side(t[0]);if(e*this._prevSide==-1){const n=this._intersect(this._prevPt,t);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(t[0],t[1],e)}else this._lineTo(t[0],t[1],e);this._prevSide=e,this._prevPt=t}close(){const t=this._firstPt,e=this._prevPt;t[0]===e[0]&&t[1]===e[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,e,n){this._closed?(this._lineIn.push([n<=0?t:this._xCut,e]),this._lineOut.push([n>=0?t:this._xCut,e])):(n<=0&&this._lineIn.push([t,e]),n>=0&&this._lineOut.push([t,e]))}_lineTo(t,e,n){this._closed?(b(this._lineIn,n<=0?t:this._xCut,e),b(this._lineOut,n>=0?t:this._xCut,e)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,e])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,e])):this._prevSide<0?(this._lineIn.push([t,e]),this._lineOut.push([t,e])):this._prevSide>0&&(this._lineOut.push([t,e]),this._lineIn.push([t,e]))}_checkClosingPt(t){const e=t.length;e>3&&t[0][0]===this._xCut&&t[e-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[e-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,e){const n=(this._xCut-t[0])/(e[0]-t[0]);return t[1]+n*(e[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}function b(t,e,n){const r=t.length;r>1&&t[r-1][0]===e&&t[r-2][0]===e?t[r-1][1]=n:t.push([e,n])}},615:function(t,e,n){n.d(e,{cW:function(){return u},ij:function(){return a},rM:function(){return c}});var r=n(88194),i=n(60123),s=n(13928),o=n(8971);function a(t,e,n){try{return function(t){if(!t||0===t.length)return null;if(function(t){const e=t[0];return!!e&&"scale"in e}(t)){const e=[];for(const n of t)e.push({scale:n.scale,value:c(n.value)});return e}return c(t)}(t)}catch(t){n?.messages?.push(t)}return null}function u(t,e,n,r){try{const r=function(t){const e=(0,s.Q)(t);return e?(0,o.Cb)(e)?e.map((t=>t.toJSON())):e.map((({scale:t,effects:e})=>({scale:t,value:e.map((t=>t.toJSON()))}))):null}(t);(0,i.RB)(n,r,e)}catch(t){r.messages&&r.messages.push(t)}}function c(t){if(!t?.length)return"";const e=[];for(const n of t){let t=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":t=[l(n,"amount")];break;case"blur":t=[l(n,"radius","pt")];break;case"hue-rotate":t=[l(n,"angle","deg")];break;case"drop-shadow":t=[l(n,"xoffset","pt"),l(n,"yoffset","pt"),l(n,"blurRadius","pt"),h(n,"color")];break;case"bloom":t=[l(n,"strength"),l(n,"radius","pt"),l(n,"threshold")]}const r=`${n.type}(${t.filter(Boolean).join(" ")})`;(0,s.Q)(r),e.push(r)}return e.join(" ")}function l(t,e,n){if(null==t[e])throw new r.Z("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return n?t[e]+n:""+t[e]}function h(t,e){if(null==t[e])throw new r.Z("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const n=t[e];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}},13928:function(t,e,n){n.d(e,{Q:function(){return c}});var r=n(38461),i=n(88194),s=n(71480),o=n(8971);class a extends SyntaxError{constructor(t,e,n,r){super(t),this.expected=e,this.found=n,this.location=r,this.name="SyntaxError"}format(t){let e="Error: "+this.message;if(this.location){let n=null;const r=t.find((t=>t.source===this.location.source));r&&(n=r.text.split(/\r\n|\n|\r/g));const i=this.location.start,s=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(n){const t=this.location.end,r="".padEnd(s.line.toString().length," "),a=n[i.line-1],u=(i.line===t.line?t.column:a.length+1)-i.column||1;e+="\n --\x3e "+o+"\n"+r+" |\n"+s.line+" | "+a+"\n"+r+" | "+"".padEnd(i.column-1," ")+"".padEnd(u,"^")}else e+="\n at "+o}return e}static buildMessage(t,e){function n(t){return t.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function i(t){return r?t.replace(r,(t=>"\\u{"+n(t)+"}")):t}function s(t){return i(t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(t=>"\\x0"+n(t))).replace(/[\x10-\x1F\x7F-\x9F]/g,(t=>"\\x"+n(t))))}function o(t){return i(t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(t=>"\\x0"+n(t))).replace(/[\x10-\x1F\x7F-\x9F]/g,(t=>"\\x"+n(t))))}const a={literal:t=>'"'+s(t.text)+'"',class(t){const e=t.parts.map((t=>Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)));return"["+(t.inverted?"^":"")+e.join("")+"]"+(t.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:t=>t.description};function u(t){return a[t.type](t)}return"Expected "+function(t){const e=t.map(u);if(e.sort(),e.length>0){let t=1;for(let n=1;n<e.length;n++)e[n-1]!==e[n]&&(e[t]=e[n],t++);e.length=t}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(t)+" but "+function(t){return t?'"'+s(t)+'"':"end of input"}(e)+" found."}}function u(t,e){const n={},r=(e=void 0!==e?e:{}).grammarSource,i={start:ut};let s=ut;const o="none",u=",",c="grad",l="turn",h=/^[ \t\n\r]/,p=/^[a-z\-]/,f=/^[0-9a-fA-F]/,d=/^[+\-]/,g=/^[0-9]/,m=it("none"),y=nt("none",!1),_=nt(")",!1),x=nt(",",!1),v=rt([" ","\t","\n","\r"],!1,!1,!1),w=it("function"),b=nt("(",!1),C=it("identifier"),S=rt([["a","z"],"-"],!1,!1,!1),I=it("percentage"),A=nt("%",!1),P=it("length"),k=nt("px",!1),E=nt("cm",!1),$=nt("mm",!1),O=nt("in",!1),z=nt("pt",!1),F=nt("pc",!1),Z=it("angle"),R=nt("deg",!1),j=nt("rad",!1),T=nt("grad",!1),M=nt("turn",!1),L=it("number"),G=it("color"),H=nt("#",!1),q=rt([["0","9"],["a","f"],["A","F"]],!1,!1,!1),Q=rt(["+","-"],!1,!1,!1),N=rt([["0","9"]],!1,!1,!1),V=nt(".",!1),W=nt("e",!1);function X(t,e){return e.length>0?function(t,e,n){return[t].concat(function(t,e){return t.map((function(t){return t[e]}))}(e,n))}(t,e,3):[t]}let D=0|e.peg$currPos,U=D;const J=[{line:1,column:1}];let B,Y=D,K=e.peg$maxFailExpected||[],tt=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=i[e.startRule]}function et(){return t.substring(U,D)}function nt(t,e){return{type:"literal",text:t,ignoreCase:e}}function rt(t,e,n,r){return{type:"class",parts:t,inverted:e,ignoreCase:n,unicode:r}}function it(t){return{type:"other",description:t}}function st(e){let n,r=J[e];if(r)return r;if(e>=J.length)n=J.length-1;else for(n=e;!J[--n];);for(r=J[n],r={line:r.line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return J[e]=r,r}function ot(t,e,n){const i=st(t),s=st(e);return{source:r,start:{offset:t,line:i.line,column:i.column},end:{offset:e,line:s.line,column:s.column}}}function at(t){D<Y||(D>Y&&(Y=D,K=[]),K.push(t))}function ut(){let t;return t=ct(),t===n&&(t=function(){let t,e;if(t=[],e=lt(),e!==n)for(;e!==n;)t.push(e),e=lt();else t=n;return t}()),t}function ct(){let e,r;return tt++,e=D,pt(),t.substr(D,4)===o?(r=o,D+=4):(r=n,0===tt&&at(y)),r!==n?(pt(),U=e,e=[]):(D=e,e=n),tt--,e===n&&0===tt&&at(m),e}function lt(){let e,r,i,s;return e=D,pt(),r=function(){let e,r,i;return tt++,e=D,r=ft(),r!==n?(40===t.charCodeAt(D)?(i="(",D++):(i=n,0===tt&&at(b)),i!==n?(U=e,e=r):(D=e,e=n)):(D=e,e=n),tt--,e===n&&(r=n,0===tt&&at(w)),e}(),r!==n?(pt(),i=function(){let e,r,i,s,o,a,c,l;if(e=D,r=ht(),r!==n){for(i=[],s=D,o=pt(),44===t.charCodeAt(D)?(a=u,D++):(a=n,0===tt&&at(x)),a===n&&(a=null),c=pt(),l=ht(),l!==n?(o=[o,a,c,l],s=o):(D=s,s=n);s!==n;)i.push(s),s=D,o=pt(),44===t.charCodeAt(D)?(a=u,D++):(a=n,0===tt&&at(x)),a===n&&(a=null),c=pt(),l=ht(),l!==n?(o=[o,a,c,l],s=o):(D=s,s=n);U=e,e=X(r,i)}else D=e,e=n;return e}(),i===n&&(i=null),pt(),41===t.charCodeAt(D)?(s=")",D++):(s=n,0===tt&&at(_)),s!==n?(pt(),U=e,e=function(t,e){return{type:"function",name:t,parameters:e||[]}}(r,i)):(D=e,e=n)):(D=e,e=n),e}function ht(){let t,e;return t=D,e=dt(),e===n&&(e=gt(),e===n&&(e=mt(),e===n&&(e=function(){let t,e;return tt++,t=D,pt(),e=_t(),e!==n?(U=t,t=function(t){return{value:t,unit:null}}(e)):(D=t,t=n),tt--,t===n&&0===tt&&at(L),t}()))),e!==n&&(U=t,e=function(t){return{type:"quantity",value:t.value,unit:t.unit}}(e)),t=e,t===n&&(t=D,e=yt(),e!==n&&(U=t,e=function(t){return{type:"color",colorType:t.type,value:t.value}}(e)),t=e),t}function pt(){let e,r;for(tt++,e=[],r=t.charAt(D),h.test(r)?D++:(r=n,0===tt&&at(v));r!==n;)e.push(r),r=t.charAt(D),h.test(r)?D++:(r=n,0===tt&&at(v));return tt--,e}function ft(){let e,r,i;if(tt++,e=D,r=[],i=t.charAt(D),p.test(i)?D++:(i=n,0===tt&&at(S)),i!==n)for(;i!==n;)r.push(i),i=t.charAt(D),p.test(i)?D++:(i=n,0===tt&&at(S));else r=n;return r!==n&&(U=e,r=et()),e=r,tt--,e===n&&(r=n,0===tt&&at(C)),e}function dt(){let e,r,i;return tt++,e=D,pt(),r=_t(),r!==n?(37===t.charCodeAt(D)?(i="%",D++):(i=n,0===tt&&at(A)),i!==n?(U=e,e=function(t){return{value:t,unit:"%"}}(r)):(D=e,e=n)):(D=e,e=n),tt--,e===n&&0===tt&&at(I),e}function gt(){let e,r,i;return tt++,e=D,pt(),r=_t(),r!==n?("px"===t.substr(D,2)?(i="px",D+=2):(i=n,0===tt&&at(k)),i!==n?(U=e,e=function(t){return{value:t,unit:"px"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,pt(),r=_t(),r!==n?("cm"===t.substr(D,2)?(i="cm",D+=2):(i=n,0===tt&&at(E)),i!==n?(U=e,e=function(t){return{value:t,unit:"cm"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,pt(),r=_t(),r!==n?("mm"===t.substr(D,2)?(i="mm",D+=2):(i=n,0===tt&&at($)),i!==n?(U=e,e=function(t){return{value:t,unit:"mm"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,pt(),r=_t(),r!==n?("in"===t.substr(D,2)?(i="in",D+=2):(i=n,0===tt&&at(O)),i!==n?(U=e,e=function(t){return{value:t,unit:"in"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,pt(),r=_t(),r!==n?("pt"===t.substr(D,2)?(i="pt",D+=2):(i=n,0===tt&&at(z)),i!==n?(U=e,e=function(t){return{value:t,unit:"pt"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,pt(),r=_t(),r!==n?("pc"===t.substr(D,2)?(i="pc",D+=2):(i=n,0===tt&&at(F)),i!==n?(U=e,e=function(t){return{value:t,unit:"pc"}}(r)):(D=e,e=n)):(D=e,e=n)))))),tt--,e===n&&0===tt&&at(P),e}function mt(){let e,r,i;return tt++,e=D,r=_t(),r!==n?("deg"===t.substr(D,3)?(i="deg",D+=3):(i=n,0===tt&&at(R)),i!==n?(U=e,e=function(t){return{value:t,unit:"deg"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,r=_t(),r!==n?("rad"===t.substr(D,3)?(i="rad",D+=3):(i=n,0===tt&&at(j)),i!==n?(U=e,e=function(t){return{value:t,unit:"rad"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,r=_t(),r!==n?(t.substr(D,4)===c?(i=c,D+=4):(i=n,0===tt&&at(T)),i!==n?(U=e,e=function(t){return{value:t,unit:"grad"}}(r)):(D=e,e=n)):(D=e,e=n),e===n&&(e=D,r=_t(),r!==n?(t.substr(D,4)===l?(i=l,D+=4):(i=n,0===tt&&at(M)),i!==n?(U=e,e=function(t){return{value:t,unit:"turn"}}(r)):(D=e,e=n)):(D=e,e=n)))),tt--,e===n&&(r=n,0===tt&&at(Z)),e}function yt(){let e,r,i,s;if(tt++,e=D,35===t.charCodeAt(D)?(r="#",D++):(r=n,0===tt&&at(H)),r!==n){if(i=[],s=t.charAt(D),f.test(s)?D++:(s=n,0===tt&&at(q)),s!==n)for(;s!==n;)i.push(s),s=t.charAt(D),f.test(s)?D++:(s=n,0===tt&&at(q));else i=n;i!==n?(U=e,e={type:"hex",value:et()}):(D=e,e=n)}else D=e,e=n;return e===n&&(e=D,r=lt(),r!==n&&(U=e,r=function(t){return{type:"function",value:t}}(r)),e=r,e===n&&(e=D,r=ft(),r!==n&&(U=e,r={type:"named",value:et()}),e=r)),tt--,e===n&&(r=n,0===tt&&at(G)),e}function _t(){let e,r,i,s,o,a,u,c;for(e=D,r=t.charAt(D),d.test(r)?D++:(r=n,0===tt&&at(Q)),r===n&&(r=null),i=D,s=[],o=t.charAt(D),g.test(o)?D++:(o=n,0===tt&&at(N));o!==n;)s.push(o),o=t.charAt(D),g.test(o)?D++:(o=n,0===tt&&at(N));if(46===t.charCodeAt(D)?(o=".",D++):(o=n,0===tt&&at(V)),o!==n){if(a=[],u=t.charAt(D),g.test(u)?D++:(u=n,0===tt&&at(N)),u!==n)for(;u!==n;)a.push(u),u=t.charAt(D),g.test(u)?D++:(u=n,0===tt&&at(N));else a=n;a!==n?(s=[s,o,a],i=s):(D=i,i=n)}else D=i,i=n;if(i===n)if(i=[],s=t.charAt(D),g.test(s)?D++:(s=n,0===tt&&at(N)),s!==n)for(;s!==n;)i.push(s),s=t.charAt(D),g.test(s)?D++:(s=n,0===tt&&at(N));else i=n;if(i!==n){if(s=D,101===t.charCodeAt(D)?(o="e",D++):(o=n,0===tt&&at(W)),o!==n){if(a=t.charAt(D),d.test(a)?D++:(a=n,0===tt&&at(Q)),a===n&&(a=null),u=[],c=t.charAt(D),g.test(c)?D++:(c=n,0===tt&&at(N)),c!==n)for(;c!==n;)u.push(c),c=t.charAt(D),g.test(c)?D++:(c=n,0===tt&&at(N));else u=n;u!==n?(o=[o,a,u],s=o):(D=s,s=n)}else D=s,s=n;s===n&&(s=null),U=e,e=parseFloat(et())}else D=e,e=n;return e}B=s();const xt=B!==n&&D===t.length;function vt(){throw B!==n&&D<t.length&&at({type:"end"}),function(t,e,n){return new a(a.buildMessage(t,e),t,e,n)}(K,Y<t.length?function(e=D){const n=t.codePointAt(e);return void 0===n?"":String.fromCodePoint(n)}(Y):null,Y<t.length?ot(Y,Y+1):ot(Y,Y))}return e.peg$library?{peg$result:B,peg$currPos:D,peg$FAILED:n,peg$maxFailExpected:K,peg$maxFailPos:Y,peg$success:xt,peg$throw:xt?void 0:vt}:xt?B:void vt()}function c(t){if(!t||0===t.length)return null;if("string"==typeof t){const e=l(t);return e&&0!==e.length?e:null}const e=t.map((t=>{if(!Number.isFinite(t.scale)||t.scale<=0)throw new i.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:t});return{scale:t.scale,effects:l(t.value)}}));e.sort(((t,e)=>e.effects.length-t.effects.length));for(let t=0;t<e.length-1;t++){if(!(0,o.AS)(e[t].effects,e[t+1].effects))throw new i.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[t].effects,b:e[t+1].effects});(0,o.uF)(e[t].effects,e[t+1].effects)}return e.sort(((t,e)=>e.scale-t.scale)),e}function l(t){let e;if(!t)return[];try{e=u(t)}catch(e){throw new i.Z("effect:invalid-syntax","Invalid effect syntax",{value:t,error:e})}return e.map((t=>function(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(t){let e=1;return h(t.parameters,1),1===t.parameters.length&&(e=m(t.parameters[0])),new s.GI(t.name,e)}(t);case"opacity":return function(t){let e=1;return h(t.parameters,1),1===t.parameters.length&&(e=m(t.parameters[0])),new s.Zx(e)}(t);case"hue-rotate":return function(t){let e=0;return h(t.parameters,1),1===t.parameters.length&&(e=function(t){return function(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=d[t.unit]))throw new i.Z("effect:type-error",`Expected <angle>, Actual: ${p(t)}`,{term:t})}(t),t.value*d[t.unit]||0}(t.parameters[0])),new s.Tq(e)}(t);case"blur":return function(t){let e=0;return h(t.parameters,1),1===t.parameters.length&&(e=_(t.parameters[0]),f(e,t.parameters[0])),new s.Tj(e)}(t);case"drop-shadow":return function(t){const e=[];let n=null;for(const r of t.parameters)if("color"===r.type){if(e.length&&Object.freeze(e),n)throw new i.Z("effect:type-error","Accepts only one color",{});n=x(r)}else{const t=_(r);if(Object.isFrozen(e))throw new i.Z("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&f(t,r)}if(e.length<2||e.length>3)throw new i.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new s.CE(e[0],e[1],e[2]||0,n||v("black"))}(t);case"bloom":return function(t){let e=1,n=0,r=0;return h(t.parameters,3),t.parameters[0]&&(e=m(t.parameters[0])),t.parameters[1]&&(n=_(t.parameters[1]),f(n,t.parameters[1])),t.parameters[2]&&(r=m(t.parameters[2])),new s.rk(e,n,r)}(t)}}catch(e){throw e.details.filter=t,e}throw new i.Z("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}(t)))}function h(t,e){if(t.length>e)throw new i.Z("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function p(t){if("color"===t.type)return"<color>";if(t.unit){if(t.unit in g)return"<length>";if(t.unit in d)return"<angle>";if("%"===t.unit)return"<percentage>"}return"<double>"}function f(t,e){if(t<0)throw new i.Z("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}const d={deg:1,grad:.9,rad:180/Math.PI,turn:360};const g={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function m(t){!function(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new i.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${p(t)}`,{term:t})}(t);const e=t.value;return f(e,t),"%"===t.unit?.01*e:e}function y(t){return function(t){if("quantity"!==t.type||null!==t.unit)throw new i.Z("effect:type-error",`Expected <double>, Actual: ${p(t)}`,{term:t})}(t),f(t.value,t),t.value}function _(t){return function(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=g[t.unit]))throw new i.Z("effect:type-error",`Expected <length>, Actual: ${p(t)}`,{term:t})}(t),t.value*g[t.unit]||0}function x(t){switch(t.colorType){case"hex":return(0,r.a7)(t.value);case"named":return v(t.value);case"function":return function(t){if(h(t.parameters,4),w.test(t.name))return[m(t.parameters[0]),m(t.parameters[1]),m(t.parameters[2]),t.parameters[3]?m(t.parameters[3]):1];if(b.test(t.name))return(0,r.Y6)(y(t.parameters[0]),m(t.parameters[1]),m(t.parameters[2]),t.parameters[3]?m(t.parameters[3]):1);throw new i.Z("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}(t.value)}}function v(t){if(!(0,r.St)(t))throw new i.Z("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return(0,r.VL)(t)}const w=/^rgba?/i,b=/^hsla?/i},51429:function(t,e,n){n.d(e,{x:function(){return o}});var r=n(88190),i=n(42022),s=n(60162);class o extends i.a{constructor(t){super({...t,constraint:new r.Hk(t.targetPoint)})}get hints(){return[new s.n(this.targetPoint,this.isDraped,this.domain)]}}},15955:function(t,e,n){n.r(e),n.d(e,{GraphicsSnappingSource:function(){return z}});var r=n(73440),i=n(70880),s=n(3480),o=n(29292),a=n(30062),u=n(93568),c=n(90403),l=n(17155),h=(n(61432),n(96711),n(48023)),p=n(60147),f=n(67764),d=n(13132),g=n(37204),m=n(98842),y=n(64246),_=n(24564),x=n(57536),v=n(95014),w=n(33235),b=n(299),C=n(51870),S=n(30903),I=n(29668),A=n(23989),P=n(18012),k=n(6733),E=n(46264),$=n(50399);const O="graphics-collections";let z=class extends i.Z{get updating(){return this._updatingHandles.updating}get _hasZ(){const t=this.view;return null!=t&&"3d"===t.type&&"map-notes"!==this.layerSource.layer.type}get _snappingElevationAligner(){const{view:t}=this,{layer:e}=this.layerSource,n=null!=t&&"3d"===t.type;if(!n||"map-notes"===e.type)return(0,P.p)();return(0,P.p)(n,{elevationInfo:e.elevationInfo,alignPointsInFeatures:async(n,r)=>(await(0,u.Hl)(t.whenLayerView(e),r)).elevationAlignPointsInFeatures(n,r)})}get _snappingElevationFilter(){const{view:t}=this,e=null!=t&&"3d"===t.type&&"map-notes"!==this.layerSource.layer.type;return(0,k.c)(e)}get _symbologySnappingFetcher(){const{view:t}=this,{layer:e}=this.layerSource,n=null!=t&&"3d"===t.type,r=this._extrudedPolygonSymbolsCount>0;return n&&"map-notes"!==e.type&&r?(0,E.k)(r,(async(n,r)=>{const i=await t.whenLayerView(e);return(0,u.k_)(r),i.queryForSymbologySnapping({candidates:n,spatialReference:t.spatialReference},r)})):(0,E.k)()}constructor(t){super(t),this.availability=1,this._sources={multipoint:null,point:null,polygon:null,polyline:null},this._loadedWkids=new Set,this._loadedWkts=new Set,this._pendingAdds=[],this._extrudedPolygonSymbolsCount=0,this._updatingHandles=new p.R,this._memoizedMakeGetGroundElevation=(0,a.H)(A.g)}destroy(){for(const t of this._pendingAdds)t.task.abort();this._pendingAdds.length=0,this._mapSources((t=>this._destroySource(t))),this._updatingHandles.destroy()}initialize(){this._updatingHandles.add((()=>this.getGraphicsLayers()),(t=>{this._updatingHandles.removeHandles(O);for(const e of t)this._addMany(e.graphics.toArray()),this.addHandles([e.on("graphic-update",(t=>this._onGraphicUpdate(t))),this._updatingHandles.addOnCollectionChange((()=>e.graphics),(t=>this._onGraphicsChanged(t)))],O)}),c.nn);const{view:t}=this,{layer:e}=this.layerSource;null!=t&&"3d"===t.type&&"map-notes"!==e.type&&t.elevationProvider&&this.addHandles([t.elevationProvider.on("elevation-change",(({context:t})=>{(0,C.W_)(t,e.elevationInfo)&&this._snappingElevationAligner.notifyElevationSourceChange()})),(0,c.YP)((()=>e.elevationInfo),(()=>this._snappingElevationAligner.notifyElevationSourceChange()),c.nn),(0,c.on)((()=>e),["edits","apply-edits","graphic-update"],(()=>this._symbologySnappingFetcher.notifySymbologyChange()))])}async fetchCandidates(t,e){const{point:n,coordinateHelper:{spatialReference:r}}=t,i=await(0,u.OT)(this._mapSources((n=>this._fetchCandidatesForSource(n,t,e))));(0,u.k_)(e);const s=this._memoizedMakeGetGroundElevation(this.view,r),o=i.flat().map((t=>(0,A.X)(t,s)));return(0,I.lQ)(n,o),o}async _fetchCandidatesForSource(t,e,n){const r=(0,I.rh)({parameters:e,mode:this.view?.type??"2d"}),i=await(0,x.T)(t.queryEngine,r,n);(0,u.k_)(n);const s=await this._snappingElevationAligner.alignCandidates(i.candidates,e.coordinateHelper.spatialReference,n);(0,u.k_)(n);const o=await this._symbologySnappingFetcher.fetch(s,n);(0,u.k_)(n);const a=0===o.length?s:[...s,...o];return this._snappingElevationFilter.filter(r,a)}refresh(){}_onGraphicUpdate(t){if(this.getGraphicsLayers().some((e=>e.graphics.includes(t.graphic))))switch(t.property){case"geometry":case"visible":this._remove(t.graphic),this._addMany([t.graphic])}}_onGraphicsChanged(t){for(const e of t.removed)this._remove(e);this._addMany(t.added)}_addMany(t){const e=[],n=new Map;for(const r of t)null!=r.geometry&&(this._needsInitializeProjection(r.geometry.spatialReference)?(e.push(r.geometry.spatialReference),n.set(r.uid,r)):this._add(r));this._createPendingAdd(e,n)}_createPendingAdd(t,e){if(!t.length)return;const n=(0,o.vr)((async n=>{await(0,d.initializeProjection)(t.map((t=>({source:t,dest:this.spatialReference}))),{signal:n}),this._markLoadedSpatialReferences(t);for(const t of e.values())this._add(t)}));this._updatingHandles.addPromise(n.promise);const r={task:n,graphics:e},i=()=>(0,s.e$)(this._pendingAdds,r);n.promise.then(i,i),this._pendingAdds.push(r)}_markLoadedSpatialReferences(t){for(const e of t){null!=e.wkid&&this._loadedWkids.add(e.wkid);const t=e.wkt2||e.wkt;t&&this._loadedWkts.add(t)}}_add(t){if(null==t.geometry||!t.visible)return;let e=t.geometry;if("mesh"===e.type)return;"extent"===e.type&&(e=f.Z.fromExtent(e));const n=this._ensureSource(e.type);if(null==n)return;const r=this._createOptimizedFeature(t.uid,e);null!=r&&(n.featureStore.add(r),(0,S.QL)(t.symbol)&&this._extrudedPolygonSymbolsCount++)}_needsInitializeProjection(t){if(null!=t.wkid&&this._loadedWkids.has(t.wkid))return!1;const e=t.wkt2||t.wkt;return!(e&&this._loadedWkts.has(e)||(0,d.canProjectWithoutEngine)(t,this.spatialReference))}_createOptimizedFeature(t,e){const n=(0,d.project)((0,g.SR)(e),this.spatialReference);if(!n)return null;const r=this._ensureGeometryHasZ(n),i=(0,y.GH)(r,this._hasZ,!1);return new _.u_(i,{[F]:t},null,t)}_ensureGeometryHasZ(t){if(!this._hasZ)return t;const e=t=>{for(;t.length<3;)t.push(0)},n=t.clone();switch(n.hasZ=!0,n.type){case"point":n.z=n.z??0;break;case"multipoint":n.points.forEach(e);break;case"polyline":n.paths.forEach((t=>t.forEach(e)));break;case"polygon":n.rings.forEach((t=>t.forEach(e)))}return n}_ensureSource(t){const e=this._sources[t];if(null!=e)return e;const n=this._createSource(t);return this._sources[t]=n,n}_createSource(t){const e=m.Mk.toJSON(t),n=this._hasZ,r=new v.Z({geometryType:e,hasZ:n,hasM:!1});return{featureStore:r,queryEngine:new w.qq({featureStore:r,fieldsIndex:b.Z.fromLayerJSON({fields:[{name:F,type:"esriFieldTypeOID",alias:F}]}),geometryType:e,hasM:!1,hasZ:n,featureIdInfo:{type:"object-id",fieldName:F},spatialReference:this.spatialReference,priority:$.T8.SNAPPING,scheduler:null!=this.view&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:t}}_remove(t){this._mapSources((e=>this._removeFromSource(e,t)));for(const e of this._pendingAdds)e.graphics.delete(t.uid),0===e.graphics.size&&e.task.abort()}_removeFromSource(t,e){const n=e.uid;t.featureStore.has(n)&&(t.featureStore.removeById(e.uid),(0,S.QL)(e.symbol)&&this._extrudedPolygonSymbolsCount--)}_destroySource(t){t.queryEngine.destroy(),this._sources[t.type]=null}_mapSources(t){const{point:e,polygon:n,polyline:r,multipoint:i}=this._sources,s=[];return null!=e&&s.push(t(e)),null!=n&&s.push(t(n)),null!=r&&s.push(t(r)),null!=i&&s.push(t(i)),s}};(0,r._)([(0,l.Cb)()],z.prototype,"getGraphicsLayers",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0})],z.prototype,"layerSource",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0})],z.prototype,"spatialReference",void 0),(0,r._)([(0,l.Cb)({constructOnly:!0})],z.prototype,"view",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],z.prototype,"updating",null),(0,r._)([(0,l.Cb)({readOnly:!0})],z.prototype,"availability",void 0),(0,r._)([(0,l.Cb)()],z.prototype,"_hasZ",null),(0,r._)([(0,l.Cb)()],z.prototype,"_snappingElevationAligner",null),(0,r._)([(0,l.Cb)()],z.prototype,"_snappingElevationFilter",null),(0,r._)([(0,l.Cb)()],z.prototype,"_symbologySnappingFetcher",null),(0,r._)([(0,l.Cb)()],z.prototype,"_extrudedPolygonSymbolsCount",void 0),z=(0,r._)([(0,h.j)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],z);const F="OBJECTID"},23989:function(t,e,n){n.d(e,{X:function(){return u},g:function(){return c}});var r=n(17609),i=n(24218),s=n(45712),o=n(51429);function a({x:t,y:e,z:n}){return(0,r.al)(t,e,n??0)}function u(t,e){switch(t.type){case"edge":return t.draped?new i.k({edgeStart:a(t.start),edgeEnd:a(t.end),targetPoint:(0,r.s)(a(t.target)),objectId:t.objectId,getGroundElevation:e}):new s.L({edgeStart:a(t.start),edgeEnd:a(t.end),targetPoint:(0,r.s)(a(t.target)),objectId:t.objectId,isDraped:!1});case"vertex":return new o.x({targetPoint:(0,r.s)(a(t.target)),objectId:t.objectId,isDraped:!1})}}function c(t,e){return null!=t&&"3d"===t.type?(n,r)=>t.elevationProvider.getElevation(n,r,0,e,"ground"):()=>null}},18012:function(t,e,n){n.d(e,{p:function(){return u}});n(61432);var r=n(12853),i=n(79577),s=n(93568),o=n(26636),a=n(46368);function u(t=!1,e){if(t){const{elevationInfo:t,alignPointsInFeatures:n}=e;return new l(t,n)}return new c}class c{async alignCandidates(t,e,n){return t}notifyElevationSourceChange(){}}class l{constructor(t,e){this._elevationInfo=t,this._alignPointsInFeatures=e,this._alignmentsCache=new r.z(1024),this._cacheVersion=0}async alignCandidates(t,e,n){const r=this._elevationInfo;return null==r||"absolute-height"!==r.mode||r.featureExpressionInfo?this._alignComputedElevationCandidates(t,e,n):(function(t,e,n){const{offset:r,unit:i}=n;if(null==r)return;const s=(0,o._R)(e),u=r*((0,a.Z7)(i??"meters")/s);for(const e of t)switch(e.type){case"edge":e.start.z+=u,e.end.z+=u;continue;case"vertex":e.target.z+=u;continue}}(t,e,r),t)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}async _alignComputedElevationCandidates(t,e,n){const r=new Map;for(const e of t)(0,i.s1)(r,e.objectId,f).push(e);const[o,a,u]=this._prepareQuery(r,e),c=await this._alignPointsInFeatures(o,n);if((0,s.k_)(n),u!==this._cacheVersion)return this._alignComputedElevationCandidates(t,e,n);this._applyCacheAndResponse(o,c,a);const{drapedObjectIds:l,failedObjectIds:h}=c,p=[];for(const e of t){const{objectId:t}=e;l.has(t)&&"edge"===e.type&&(e.draped=!0),h.has(t)||p.push(e)}return p}_prepareQuery(t,e){const n=[],r=[];for(const[e,i]of t){const t=[];for(const n of i)this._addToQueriesOrCachedResult(e,n.target,t,r),"edge"===n.type&&(this._addToQueriesOrCachedResult(e,n.start,t,r),this._addToQueriesOrCachedResult(e,n.end,t,r));0!==t.length&&n.push({objectId:e,points:t})}return[{spatialReference:e.toJSON(),pointsInFeatures:n},r,this._cacheVersion]}_addToQueriesOrCachedResult(t,e,n,r){const i=p(t,e),s=this._alignmentsCache.get(i);null==s?n.push(e):r.push(new h(e,s))}_applyCacheAndResponse(t,{elevations:e,drapedObjectIds:n,failedObjectIds:r},i){for(const t of i)t.apply();let s=0;const o=this._alignmentsCache;for(const{objectId:i,points:a}of t.pointsInFeatures){if(r.has(i)){s+=a.length;continue}const t=!n.has(i);for(const n of a){const r=p(i,n),a=e[s++];n.z=a,t&&o.put(r,a,1)}}}}class h{constructor(t,e){this.point=t,this.z=e}apply(){this.point.z=this.z}}function p(t,{x:e,y:n,z:r,spatialReference:i}){return`${t}-${e}-${n}-${r??0}}-wkid:${i?.wkid}`}function f(){return[]}},6733:function(t,e,n){n.d(e,{c:function(){return o}});n(61432);class r{filter(t,e){return e}notifyElevationSourceChange(){}}class i{filter(t,e){const{point:n,distance:r}=t,{z:i}=n;if(null==i)return e;if(0===e.length)return e;const o=function(t){return"number"==typeof t?{x:t,y:t,z:t}:t}(r),a=this._updateCandidatesTo3D(e,n,o).filter(s);return a.sort(c),a}_updateCandidatesTo3D(t,e,n){for(const r of t)switch(r.type){case"edge":a(r,e,n);continue;case"vertex":u(r,e,n);continue}return t}}function s(t){return t.distance<=1}function o(t=!1){return t?new i:new r}function a(t,e,{x:n,y:r,z:i}){const{start:s,end:o,target:a}=t;t.draped||function(t,e,n,r){const i=r.x-n.x,s=r.y-n.y,o=r.z-n.z,a=i*i+s*s+o*o,u=(e.x-n.x)*i+(e.y-n.y)*s+o*(e.z-n.z),c=Math.min(1,Math.max(0,u/a)),l=n.x+i*c,h=n.y+s*c,p=n.z+o*c;t.x=l,t.y=h,t.z=p}(a,e,s,o);const u=(e.x-a.x)/n,c=(e.y-a.y)/r,l=(e.z-a.z)/i;t.distance=Math.sqrt(u*u+c*c+l*l)}function u(t,e,{x:n,y:r,z:i}){const{target:s}=t,o=(e.x-s.x)/n,a=(e.y-s.y)/r,u=(e.z-s.z)/i,c=Math.sqrt(o*o+a*a+u*u);t.distance=c}function c(t,e){return t.distance-e.distance}},46264:function(t,e,n){n.d(e,{k:function(){return a}});n(61432);var r=n(28947),i=n(12853),s=n(93568),o=n(29138);function a(t=!1,e){return t?new c(e):new u}class u{async fetch(){return[]}notifySymbologyChange(){}}class c{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new i.z(1024),this._cacheVersion=0}async fetch(t,e){if(0===t.length)return[];const n=[],i=[],o=this._candidatesCache;for(const e of t){const t=l(e),s=o.get(t);if(s)for(const t of s)i.push((0,r.d9)(t));else n.push(e),o.put(t,[],1)}if(0===n.length)return i;const a=this._cacheVersion,{candidates:u,sourceCandidateIndices:c}=await this._getSymbologyCandidates(n,e);if((0,s.k_)(e),a!==this._cacheVersion)return this.fetch(t,e);const h=[],{length:p}=u;for(let t=0;t<p;++t){const e=u[t],i=l(n[c[t]]),s=o.get(i);s.push(e),o.put(i,s,s.length),h.push((0,r.d9)(e))}return i.concat(h)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function l(t){switch(t.type){case"vertex":{const{objectId:e,target:n}=t,r=`${e}-vertex-${n.x}-${n.y}-${n.z??0}`;return(0,o.hP)(r).toString()}case"edge":{const{objectId:e,start:n,end:r}=t,i=`${e}-edge-${n.x}-${n.y}-${n.z??0}-to-${r.x}-${r.y}-${r.z??0}`;return(0,o.hP)(i).toString()}default:return""}}},60162:function(t,e,n){n.d(e,{n:function(){return s}});var r=n(24910),i=n(10690);class s extends i.r{constructor(t,e,n){super(e,n),this.point=t}equals(t){return t instanceof s&&(0,r.q)(this.point,t.point)}}}}]);