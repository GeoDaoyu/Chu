"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[77145],{58426:function(e,t,r){r.d(t,{$c:function(){return h},Hg:function(){return y},jW:function(){return d},xb:function(){return p}});var n=r(70880),o=r(43254),i=r(22018);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function c(e){return e instanceof n.Z}function a(e){return e instanceof o.Z?Object.keys(e.items):c(e)?(0,i.vw)(e).keys():e?Object.keys(e):[]}function l(e,t){return e instanceof o.Z?e.items[t]:e[t]}function u(e){return e?e.declaredClass:null}function f(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const n=a(e),o=a(t);if(0===n.length&&0===o.length)return;if(!n.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const i=o.filter((e=>!n.includes(e))),d=n.filter((e=>!o.includes(e))),h=n.filter((r=>o.includes(r)&&l(e,r)!==l(t,r))).concat(i,d).sort(),y=u(e);if(y&&s.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let p;const m=c(e)&&c(t);for(const n of h){const o=l(e,n),i=l(t,n);let s;if((m||"function"!=typeof o&&"function"!=typeof i)&&o!==i&&(null!=o||null!=i)){if(r&&r[n]&&"function"==typeof r[n])s=r[n]?.(o,i);else if(o instanceof Date&&i instanceof Date){if(o.getTime()===i.getTime())continue;s={type:"complete",oldValue:o,newValue:i}}else s="object"==typeof o&&"object"==typeof i&&u(o)===u(i)?f(o,i):{type:"complete",oldValue:o,newValue:i};null!=s&&(null!=p?p.diff[n]=s:p={type:"partial",diff:{[n]:s}})}}return p}function d(e,t){return function(e,t){if(null==e)return!1;const r=t.split(".");let n=e;for(const e of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const t=n.diff[e];if(!t)return!1;n=t}}return!0}(e,t)}function h(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}function p(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!p(e))return!1;for(const e of t.removed)if(!p(e))return!1;for(const e of t.changed)if(!p(e))return!1;return!0}case"partial":for(const t in e.diff)if(!p(e.diff[t]))return!1;return!0}}},48505:function(e,t,r){r.d(t,{Q:function(){return c}});class n{constructor(e){this.size=0,this._start=0,this.maxSize=e,this._buffer=new Array(e)}get entries(){return this._buffer}enqueue(e){if(this.size===this.maxSize){const t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return this._buffer[(this._start+this.size++)%this.maxSize]=e,null}dequeue(){if(0===this.size)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(e){if(0===this.size)return null;for(const t of this._buffer)if(null!=t&&e(t))return t;return null}clear(e){let t=this.dequeue();for(;null!=t;)e&&e(t),t=this.dequeue()}}var o=r(88194),i=r(99574),s=r(87970);class c{constructor(e,t,r,n,i=128){if(this._trackIdToObservations=new Map,this._idCounter=0,this._lastPurge=performance.now(),this._addOrUpdated=new Map,this._removed=[],this._maxAge=0,this._timeInfo=r,this._purgeOptions=n,this.store=e,"unique-id-composite"===t.type)throw new o.Z("stream-layer","composite uniqueIds are not supported");this.idField=t.fieldName,this.purgeInterval=i,this._useGeneratedIds=this.idField===s.r1}removeById(e){this._removed.push(e)}removeByTrackId(e){const t=this._trackIdToObservations.get(e);if(t)for(const e of t.entries)this._removed.push(e)}add(e){if(this._useGeneratedIds){const t=this._nextId();e.attributes[this.idField]=t,e.objectId=t}else e.objectId=e.attributes[this.idField];const t=e.objectId;if(this._addOrUpdated.set(t,e),this._maxAge=Math.max(this._maxAge,e.attributes[this._timeInfo.startTimeField]),!this._timeInfo.trackIdField)return null==this._trackIdLessObservations&&(this._trackIdLessObservations=new n(1e5)),void this._trackIdLessObservations.enqueue(t);const r=e.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(r)){const e=null!=this._purgeOptions?.maxObservations?this._purgeOptions.maxObservations:1e3,t=(0,i.uZ)(e,0,1e3);this._trackIdToObservations.set(r,new n(t))}const o=this._trackIdToObservations.get(r)?.enqueue(t);null!=o&&(this._addOrUpdated.has(o)?this._addOrUpdated.delete(o):this._removed.push(o))}checkForUpdates(){const e=this._getToAdd(),t=this._getToRemove(),r=performance.now(),n=r-this._lastPurge,o=Date.now();n>=this.purgeInterval&&(this._purge(r),this._lastPurge=r);const i=[];if(null!=t)for(const e of t){const t=this.store.removeById(e);null!=t&&i.push(t)}const c=[];if(null!=e){const n=new Set(t??[]);for(const t of e)n.has(t.objectId)||(t.attributes[s.gb]=r,t.attributes[s.Y6]=o,this.store.add(t),c.push(t))}return!(!c.length&&!i?.length||(this.store.update(c,i),0))}_getToAdd(){if(!this._addOrUpdated.size)return null;const e=new Array(this._addOrUpdated.size);let t=0;return this._addOrUpdated.forEach((r=>e[t++]=r)),this._addOrUpdated.clear(),e}_getToRemove(){const e=this._removed;return this._removed.length?(this._removed=[],e):null}_nextId(){const e=this._idCounter;return this._idCounter=(this._idCounter+1)%4294967294+1,e}_purge(e){const t=this._purgeOptions;null!=t&&(this._purgeSomeByDisplayCount(t),this._purgeByAge(t),this._purgeByAgeReceived(e,t),this._purgeTracks())}_purgeSomeByDisplayCount(e){if(!e.displayCount)return;let t=this.store.size;if(t>e.displayCount){if(this._timeInfo.trackIdField)for(const r of this._trackIdToObservations.values())if(t>e.displayCount&&r.size){const e=r.dequeue();this._removed.push(e),t--}if(null!=this._trackIdLessObservations){let r=t-e.displayCount;for(;r-- >0;){const e=this._trackIdLessObservations.dequeue();null!=e&&this._removed.push(e)}}}}_purgeByAge(e){const t=this._timeInfo?.startTimeField;if(!e.age||!t)return;const r=60*e.age*1e3,n=this._maxAge-r;this.store.forEach((e=>{e.attributes[t]<n&&this._removed.push(e.objectId)}))}_purgeByAgeReceived(e,t){if(!t.ageReceived)return;const r=e-60*t.ageReceived*1e3;this.store.forEach((e=>{e.attributes[s.gb]<r&&this._removed.push(e.objectId)}))}_purgeTracks(){this._trackIdToObservations.forEach(((e,t)=>{0===e.size&&this._trackIdToObservations.delete(t)}))}}},79474:function(e,t,r){r.r(t),r.d(t,{createConnection:function(){return M}});var n=r(73440),o=r(78619),i=r(88194),s=r(96711),c=r(93568),a=r(95490),l=(r(61432),r(83850),r(48023)),u=r(45213),f=r(90756),d=r(17155),h=r(35675),y=r(87833);let p=class extends y.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new i.Z("stream-connection",this.errorString):null}onFeature(e){this.emit("data-received",e)}onMessage(e){this.emit("message-received",e)}};var m;(0,n._)([(0,d.Cb)({readOnly:!0})],p.prototype,"connectionError",null),p=(0,n._)([(0,l.j)("esri.layers.support.StreamConnection")],p),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(m||(m={}));let g=class extends p{constructor(e){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:r,sourceSpatialReference:n}=e;this._config=e,this._featureZScaler=(0,h.k)(t,n,r),this._open()}normalizeCtorArgs(){return{}}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case m.CONNECTING:case m.OPEN:return"connected";case m.CLOSING:case m.CLOSED:return"disconnected"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,t=1e3,r=0){try{if(this.destroyed)return;const t=(0,a.fl)(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange("connectionStatus")}catch(n){const o=t/1e3;return this._config.maxReconnectionAttempts&&r>=this._config.maxReconnectionAttempts?(s.Z.getLogger(this).error(new i.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void this.destroy()):(s.Z.getLogger(this).error(new i.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${o}s`,n)),await(0,c.e4)(t),this._tryCreateWebSocket(e,Math.min(1.5*t,1e3*this._config.maxReconnectionInterval),r+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(e){return void s.Z.getLogger(this).error(new i.Z("websocket-connection","Failed to parse message, invalid JSON",{error:e}))}}}_createWebSocket(e){return new Promise(((t,r)=>{const n=new WebSocket(e);n.onopen=()=>{if(n.onopen=null,this.destroyed)return n.onclose=null,void n.close();n.onclose=e=>this._onClose(e),n.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(n),t(n)},n.onclose=e=>{n.onopen=n.onclose=null,r(e)}}))}async _handshake(e=1e4){const t=this._websocket;if(null==t)return;const r=(0,c.hh)(),n=t.onmessage,{filter:o,outFields:a,spatialReference:l}=this._config;return r.timeout(e),t.onmessage=e=>{let c=null;try{c=JSON.parse(e.data)}catch(e){}c&&"object"==typeof c||(s.Z.getLogger(this).error(new i.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",e.data)),r.reject(),this.destroy()),c.spatialReference?.wkid!==l?.wkid&&(s.Z.getLogger(this).error(new i.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),r.reject(),this.destroy()),"json"!==c.format&&(s.Z.getLogger(this).error(new i.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",e.data)),r.reject(),this.destroy()),o&&c.filter!==o&&s.Z.getLogger(this).error(new i.Z("websocket-connection","Tried to set filter, but server doesn't support it")),a&&c.outFields!==a&&s.Z.getLogger(this).error(new i.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),t.onmessage=n;for(const e of this._outstandingMessages)t.send(JSON.stringify(e));this._outstandingMessages=[],r.resolve()},t.send(JSON.stringify({filter:o,outFields:a,format:"json",spatialReference:{wkid:l.wkid}})),r.promise}_onMessage(e){if(this.onMessage(e),"type"in e)switch(e.type){case"features":case"featureResult":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t="Encountered an error over WebSocket connection";this._set("errorString",t),s.Z.getLogger(this).error("websocket-connection",t)}_onClose(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&s.Z.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};(0,n._)([(0,d.Cb)()],g.prototype,"connectionStatus",null),(0,n._)([(0,d.Cb)()],g.prototype,"errorString",void 0),g=(0,n._)([(0,l.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],g);var _=r(96010),b=r(29191);const S={maxQueryDepth:5,maxRecordCountFactor:3};let C=class extends g{constructor(e){super({...S,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||s.Z.getLogger(this).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:n}=this._config;this.destroyed||this._setFilter(r,n)}_onMessage(e){if("attributes"in e){let t;try{t=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(t.geometry)}catch(e){return void s.Z.getLogger(this).error(new i.Z("geoevent-connection","Failed to parse message",e))}this.onFeature(t)}else this.onMessage(e)}async _fetchServiceDefinition(e){const t={f:"json",...this._config.customParameters},r=(0,o.Z)(e.path,{query:t,responseType:"json"}),n=(await r).data;return this._serviceDefinition=n,n}_fetchWebSocketUrl(e,t){const r=e[0],{urls:n,token:o}=r,i=this._inferWebSocketBaseUrl(n);return(0,a.fl)(`${i}/subscribe`,{outSR:""+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes("wss"))return t;return s.Z.getLogger(this).error(new i.Z("geoevent-connection","Unable to infer WebSocket url",e)),null}async _setFilter(e,t){const r=this._websocket;if(null==r||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let o=!1;const a=(0,c.hh)();return r.onmessage=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(s.Z.getLogger(this).error(new i.Z("geoevent-connection","Failed to set service filter",t.error)),this._set("errorString",`Could not set service filter - ${t.error}`),a.reject(t.error)),this._setWebSocketJSONParseHandler(r),o=!0,a.resolve())},r.send(n),setTimeout((()=>{o||(this.destroyed||this._websocket!==r||s.Z.getLogger(this).error(new i.Z("geoevent-connection","Server timed out when setting filter")),a.reject())}),1e4),a.promise}_serializeFilter(e,t){const r={};if(null==e&&null==t)return r;if(e?.geometry)try{const t=(0,f.im)(e.geometry);if("extent"!==t.type)throw new i.Z("geoevent-connection",`Expected extent but found type ${t.type}`);r.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(e){s.Z.getLogger(this).error(new i.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",e))}return e?.where&&"1 = 1"!==e.where&&"1=1"!==e.where&&(r.where=e.where),null!=t&&(r.outFields=t.join(",")),r}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,r=e.attributes[t],n=this._relatedFeatures.get(r);if(!n)return s.Z.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;const{attributes:o,geometry:c}=n;for(const t in o)e.attributes[t]=o[t];return c&&(e.geometry=c),e.geometry||e.centroid||s.Z.getLogger(this).error(new i.Z("geoevent-connection","Found malformed feature - no geometry found",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),n=this._queryArchive(t);await r;const o=await n;if(!o)return;for(const e of o.features)this.onFeature(this._enrich(e))}catch(e){s.Z.getLogger(this).error(new i.Z("geoevent-connection","Encountered an error when querying buddy services",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await Promise.all([r.e(85330),r.e(55105),r.e(88792),r.e(997),r.e(68578),r.e(60541),r.e(82592),r.e(98733),r.e(96526),r.e(40993),r.e(49405),r.e(59876),r.e(26896)]).then(r.bind(r,59876))).default)({url:e}),{capabilities:n}=await t.load(),o=n.query.supportsMaxRecordCountFactor,i=n.query.supportsPagination,s=n.query.supportsCentroid,c=this._config.maxRecordCountFactor,a=t.capabilities.query.maxRecordCount,l=o?a*c:a,f=new b.Z;if(f.outFields=this._config.outFields??["*"],f.where=this._config.filter?.where??"1=1",f.returnGeometry=!0,f.returnExceededLimitFeatures=!0,f.outSpatialReference=u.Z.fromJSON(this._config.spatialReference),s&&(f.returnCentroid=!0),o&&(f.maxRecordCountFactor=c),i)return f.num=l,t.destroy(),this._queryPages(e,f);const d=await(0,_.JT)(e,f,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],n=0){t.start=null!=t.num?n*t.num:null;const{data:o}=await(0,_.JT)(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&n<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,n+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,n=this._serviceDefinition.relatedFeatures.joinField;for(const e of r){const r=e.attributes[n];t.set(r,e)}this._relatedFeatures=t}};C=(0,n._)([(0,l.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],C);let w=class extends p{constructor(e){super({}),this.connectionStatus="connected",this.errorString=null;const{geometryType:t,spatialReference:r,sourceSpatialReference:n}=e;this._featureZScaler=(0,h.k)(t,n,r)}normalizeCtorArgs(){return{}}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if("type"in e)switch(e.type){case"features":case"featureResult":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}this.onMessage(e)}};function k(e,t){if(null==e&&null==t)return null;const r={};return null!=t&&(r.geometry=t),null!=e&&(r.where=e),r}function M(e,t,r,n,o,i,s,c,a){const l={source:e,sourceSpatialReference:t,spatialReference:r,geometryType:n,filter:k(o,i),maxReconnectionAttempts:s,maxReconnectionInterval:c,customParameters:a};return e?e.path.startsWith("wss://")||e.path.startsWith("ws://")?new g(l):new C(l):new w(l)}(0,n._)([(0,d.Cb)()],w.prototype,"connectionStatus",void 0),(0,n._)([(0,d.Cb)()],w.prototype,"errorString",void 0),w=(0,n._)([(0,l.j)("esri.layers.support.ClientSideConnection")],w)},87970:function(e,t,r){r.d(t,{Y6:function(){return s},ZO:function(){return a},Zs:function(){return c},gb:function(){return o},m6:function(){return i},r1:function(){return n}});const n="__esri_stream_id__",o="__esri_timestamp__",i="__esri_track_part__",s="__esri_time_received__",c="__esri_track_line__";var a;!function(e){e[e.TrackLine=0]="TrackLine",e[e.LatestObservation=1]="LatestObservation",e[e.PreviousObservation=2]="PreviousObservation"}(a||(a={}))},6298:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(44252);const o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:n.of.Loop,repeatdelay:0,easing:n.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,r){r.d(t,{$Z:function(){return k},BX:function(){return C},Cc:function(){return m},E_:function(){return c},F:function(){return M},FG:function(){return v},H1:function(){return i},J0:function(){return p},JW:function(){return x},Lb:function(){return q},Le:function(){return P},Ml:function(){return z},On:function(){return b},Qf:function(){return O},RI:function(){return g},TB:function(){return L},Ul:function(){return E},W7:function(){return w},X_:function(){return I},be:function(){return u},e0:function(){return A},gJ:function(){return y},hU:function(){return T},hf:function(){return n},k5:function(){return h},oY:function(){return l},pJ:function(){return _},qQ:function(){return s},wi:function(){return S},yL:function(){return d},yl:function(){return F},zL:function(){return f}});r(6298);function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function o(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.slice(n,i);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.slice(n,i)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length){const t=e.slice(n);r.push([t,null,o(t)])}return r}function s(e,t,r){let n="",o=null;for(const r of t){const[t,i,s]=r;if(null!=t&&""!==t)s?o=t:(null!=o&&(n+=o,o=null),n+=t);else{const t=e.readAttribute(i);null!=t&&""!==t&&(null!==o&&(n+=o,o=null),n+=t)}}return a(n,r)}function c(e,t,r,n){let o="",i=null;for(const n of t){const[t,s,c]=n;if(null!=t&&""!==t)c?i=t:(null!=i&&(o+=i,i=null),o+=t);else{let t=s;null!=r&&(t=R(s,r));const n=e.attributes[t];null!=n&&""!==n&&(null!=i&&(o+=i,i=null),o+=n)}}return a(o,n)}function a(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function l(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function u(e){return e.data?.symbol??null}function f(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function h(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const p=(e,t=0)=>null==e||isNaN(e)?t:e,m=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([r.e(27093),r.e(13323)]).then(r.bind(r,69339))}function _(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function C(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function w(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=w(t);if(null!=e)return e}break;case"CIMTextSymbol":return w(e.symbol);case"CIMSolidFill":return e.color}return null}function k(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=k(e);if(null!=t)return t}break}case"CIMTextSymbol":return k(e.symbol);case"CIMSolidStroke":return e.color}}function M(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=M(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return M(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function I(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function v(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function O(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const L=e=>e.includes("data:image/svg+xml");function x(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function P(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function F(e,t,r,n,o,i,s=!0){const{infos:c}=i;let a=1,l=0,u=0,f=0,d=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:n,size:o,frameHeight:i,rotateClockWise:h,scaleSymbolsProportionally:y}of c)d=e?1:a,u=G(t,r,l,d,u),f=N(t,r,l,d,f),i&&(y||s)&&(a*=o/i),l=j(n,h,l);const h=G(n,o,l,d,u),y=N(n,o,l,d,f);return{size:e*a,rotation:j(t,r,l),offsetX:h,offsetY:y}}function Z(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function T(e){return e?.dashTemplate&&(e.dashTemplate=Z(e.dashTemplate)),e}function A(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return A(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return A(e.symbol)}}return"Normal"}function R(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function E(e){return e.map((e=>({...e,propertyName:P(e.propertyName)})))}function z(e){const t={};for(const r in e){const n=e[r];t[P(r)]=n}return t}function N(e,t,r,n,o){const i=r*Math.PI/180;if(i){const r=Math.cos(i);return(Math.sin(i)*e+r*t)*n+o}return t*n+o}function G(e,t,r,n,o){const i=r*Math.PI/180;return i?(Math.cos(i)*e-Math.sin(i)*t)*n+o:e*n+o}function j(e,t,r){return t?r-e:r+e}function q(e,t){return Math.max(Math.min((e??t)/100,1),0)}},9350:function(e,t,r){r.d(t,{CJ:function(){return l},Rz:function(){return f},js:function(){return d},xA:function(){return a},z3:function(){return u}});r(61432);var n=r(89636),o=r(38096),i=r(19886),s=r(45433),c=r(54914);const a=i.Z.fromJSON(c.I4),l=o.Z.fromJSON(c.ET),u=n.Z.fromJSON(c.lF),f=s.Z.fromJSON(c.qP);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return l;case"polygon":case"extent":return u}return null}i.Z.fromJSON(c.eG),o.Z.fromJSON(c.wW),n.Z.fromJSON(c.lj)},54914:function(e,t,r){r.d(t,{ET:function(){return s},I4:function(){return i},SQ:function(){return n},X1:function(){return o},eG:function(){return l},lF:function(){return c},lj:function(){return f},qP:function(){return a},wW:function(){return u}});const n=[252,146,31,255],o=[153,153,153,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},c={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},f={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);