"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[23177],{47034:function(t,e,n){n.d(e,{e:function(){return f},g:function(){return d},i:function(){return l},l:function(){return h},s:function(){return c}});var r=n(26636),i=n(30391),s=n(25859);let o,a,u,c;function l(){return!!o&&(0,i.kR)()}async function h(){if(!l()){const[t]=await Promise.all([Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(56870),n.e(76873)]).then(n.bind(n,40472)),(0,i.zD)()]);o=t.fromGeometry,a=t.fromSpatialReference,u=t.getSpatialReference,c=(0,i.dE)()}}function f(t,e={}){const{curveType:n="geodesic",unit:c}=e,l=u(t);let h=(0,i.ht)(o(t),a(l),s.H[n]);return h&&c&&(h=(0,r.En)(h,"meters",c)),h}const d=Object.freeze(Object.defineProperty({__proto__:null,execute:f,isLoaded:l,load:h,get supportsCurves(){return c}},Symbol.toStringTag,{value:"Module"}))},30391:function(t,e,n){n.d(e,{dE:function(){return u},ht:function(){return a},kR:function(){return s},zD:function(){return o}});var r=n(53286);let i;function s(){return!!i&&(0,r.i)()}async function o(){if(!s()){const[t,e]=await Promise.all([Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(32288)]).then(n.bind(n,17107)),Promise.all([n.e(9519),n.e(66288),n.e(65513),n.e(81066)]).then(n.bind(n,65513)).then((t=>t.aG)).then((({injectPe:t})=>t)),(0,r.l)()]);i=new t.OperatorGeodeticLength,e(r.p)}}function a(t,e,n){return i.execute(t,e,n,null)}function u(){return i.supportsCurves()}},25859:function(t,e,n){n.d(e,{H:function(){return r}});const r={geodesic:0,loxodrome:1,"great-elliptic":2,"normal-section":3,"shape-preserving":4}},95872:function(t,e,n){n.d(e,{Gb:function(){return p},Jf:function(){return y},Lc:function(){return S},TB:function(){return v},_q:function(){return b},cA:function(){return E},p8:function(){return g}});var r=n(88194),i=n(26636),s=n(95226),o=(n(60508),n(67764)),a=n(62197),u=n(45213),c=n(1750),l=n(8554);function h(t){if(!t)return null;const e=t.wkid;if(e)return c.Dg[e];const n=t.wkt2??t.wkt;return n?function(t){const e=c.FQ.exec(t);if(!e||2!==e.length)return null;const n=e[1].split(",");if(!n||n.length<3)return null;const r=parseFloat(n[1]),i=parseFloat(n[2]);return isNaN(r)||isNaN(i)?null:{a:r,f:0===i?0:1/i}}(n):null}function f(t){const e=h(t);if(function(t){return null!=t&&"b"in t&&"eSq"in t&&"radius"in t}(e))return e;const n=e.a*(1-e.f);return Object.assign(e,{b:n,eSq:1-(n/e.a)**2,radius:(2*e.a+n)/3,densificationRatio:1e4/((2*e.a+n)/3)})}function d(t,e,n){const{a:r,eSq:i}=f(n),s=Math.sqrt(i),o=Math.sin(e[1]*c.Yr),a=r*e[0]*c.Yr;let u;return u=i>0?r*((1-i)*(o/(1-i*(o*o))-1/(2*s)*Math.log((1-s*o)/(1+s*o))))*.5:r*o,t[0]=a,t[1]=u,t}function p(t){return(0,l.sT)(t)&&!!h(t)}function g(t,e="square-meters"){if(t.some((t=>!p(t.spatialReference))))throw new r.Z("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let e=0;e<t.length;e++){const r=t[e],i=r.spatialReference,{radius:s,densificationRatio:o}=f(i),a=s*o;n.push(_(r,a))}const s=[],o=[0,0],a=[0,0];for(let t=0;t<n.length;t++){const{rings:r,spatialReference:u}=n[t];let c=0;for(let t=0;t<r.length;t++){const e=r[t];d(o,e[0],u),d(a,e[e.length-1],u);let n=a[0]*o[1]-o[0]*a[1];for(let t=0;t<e.length-1;t++)d(o,e[t+1],u),d(a,e[t],u),n+=a[0]*o[1]-o[0]*a[1];c+=n}c=(0,i.En)(c,"square-meters",e),s.push(c/-2)}return s}function y(t,e="meters"){if(!t)throw new r.Z("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some((t=>!p(t.spatialReference))))throw new r.Z("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let r=0;r<t.length;r++){const s=t[r],{spatialReference:o}=s,a="polyline"===s.type?s.paths:s.rings;let u=0;for(let t=0;t<a.length;t++){const e=a[t];let n=0;for(let t=1;t<e.length;t++){const r=e[t-1][0],i=e[t][0],s=e[t-1][1],a=e[t][1];if(s!==a||r!==i){const t=new b;E(t,[r,s],[i,a],o),n+=t.distance}}u+=n}u=(0,i.En)(u,"meters",e),n.push(u)}return n}function _(t,e){if("polyline"!==t.type&&"polygon"!==t.type)throw new r.Z("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:n}=t;if(!p(n))throw new r.Z("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const i="polyline"===t.type?t.paths:t.rings,c=[],l=[0,0],h=new b;for(const t of i){const r=[];c.push(r),r.push([t[0][0],t[0][1]]);let i,s,o=t[0][0],a=t[0][1];for(let u=0;u<t.length-1;u++){if(i=t[u+1][0],s=t[u+1][1],o===i&&a===s)continue;const c=[o,a];E(h,[o,a],[i,s],n);const{azimuth:f,distance:d}=h,p=d/e;if(p>1){for(let t=1;t<=p-1;t++)v(l,c,f,t*e,n),r.push(l.slice());v(l,c,f,(d+Math.floor(p-1)*e)/2,n),r.push(l.slice())}v(l,c,f,d,n),r.push(l.slice()),o=l[0],a=l[1]}}const f=(0,s.TJ)(u.Z,n);return"polyline"===t.type?new a.Z({paths:c,spatialReference:f}):new o.Z({rings:c,spatialReference:f})}class b{constructor(t=0,e,n){this.distance=t,this.azimuth=e,this.reverseAzimuth=n}}function v(t,e,n,r,i){const s=e[0],o=e[1],a=s*c.Yr,u=o*c.Yr,l=(n??0)*c.Yr,{a:h,b:d,f:p}=f(i),g=Math.sin(l),y=Math.cos(l),_=(1-p)*Math.tan(u),b=1/Math.sqrt(1+_*_),v=_*b,E=Math.atan2(_,y),S=b*g,w=S*S,m=1-w,R=m*(h*h-d*d)/(d*d),T=1+R/16384*(4096+R*(R*(320-175*R)-768)),L=R/1024*(256+R*(R*(74-47*R)-128));let N,x,M,P=r/(d*T),C=2*Math.PI;for(;Math.abs(P-C)>1e-12;)M=Math.cos(2*E+P),N=Math.sin(P),x=Math.cos(P),C=P,P=r/(d*T)+L*N*(M+L/4*(x*(2*M*M-1)-L/6*M*(4*N*N-3)*(4*M*M-3)));const A=v*N-b*x*y,z=Math.atan2(v*x+b*N*y,(1-p)*Math.sqrt(w+A*A)),q=p/16*m*(4+p*(4-3*m)),U=Math.atan2(N*g,b*x-v*N*y)-(1-q)*p*S*(P+q*N*(M+q*x*(2*M*M-1)));return t[0]=(a+U)/c.Yr,t[1]=z/c.Yr,t}function E(t,e,n,r){const i=e[0]*c.Yr,s=e[1]*c.Yr,o=n[0]*c.Yr,a=n[1]*c.Yr,{a:u,b:l,f:h,radius:d}=f(r),p=o-i,g=Math.atan((1-h)*Math.tan(s)),y=Math.atan((1-h)*Math.tan(a)),_=Math.sin(g),b=Math.cos(g),v=Math.sin(y),E=Math.cos(y);let S,w,m,R,T,L,N,x,M,P,C=1e3,A=p;do{if(N=Math.sin(A),x=Math.cos(A),m=Math.sqrt(E*N*(E*N)+(b*v-_*E*x)*(b*v-_*E*x)),0===m)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;T=_*v+b*E*x,L=Math.atan2(m,T),M=b*E*N/m,w=1-M*M,R=T-2*_*v/w,isNaN(R)&&(R=0),P=h/16*w*(4+h*(4-3*w)),S=A,A=p+(1-P)*h*M*(L+P*m*(R+P*T*(2*R*R-1)))}while(Math.abs(A-S)>1e-12&&--C>0);if(0===C){const e=d,n=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-i))*e,r=o-i,u=Math.sin(r)*Math.cos(a),l=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(r),h=Math.atan2(u,l);return t.azimuth=h/c.Yr,t.distance=n,t.reverseAzimuth=void 0,t}const z=w*(u*u-l*l)/(l*l),q=z/1024*(256+z*(z*(74-47*z)-128)),U=l*(1+z/16384*(4096+z*(z*(320-175*z)-768)))*(L-q*m*(R+q/4*(T*(2*R*R-1)-q/6*R*(4*m*m-3)*(4*R*R-3)))),j=Math.atan2(E*Math.sin(A),b*v-_*E*Math.cos(A)),k=Math.atan2(b*Math.sin(A),b*v*Math.cos(A)-_*E);return t.azimuth=j/c.Yr,t.distance=U,t.reverseAzimuth=k/c.Yr,t}function S(t){return p(t)?t:(0,l.sS)(t)?u.Z.WGS84:null}},11480:function(t,e,n){n.d(e,{C:function(){return u},R:function(){return c}});var r=n(96094),i=n(26821),s=n(24910),o=n(82846),a=n(51870);function u(t,e,n,r){n.projectToRenderScreen(t,h),n.projectToRenderScreen(e,f),(0,i.$X)(r,f,h),(0,i.Fv)(r,r)}function c(t,e,n,r,i=(0,o.Ue)()){const u=(0,s.c)(l,t);return u[2]=(0,a.zx)(r,u,e,n)||0,r.renderCoordsHelper.toRenderCoords(u,e,i),i}const l=(0,o.Ue)(),h=(0,r.gX)(),f=(0,r.gX)()},88190:function(t,e,n){n.d(e,{Hk:function(){return E},M8:function(){return I},SP:function(){return P},Vy:function(){return O},aU:function(){return k},f2:function(){return rt},jg:function(){return Z},kt:function(){return T},ku:function(){return w},lY:function(){return G},wp:function(){return st}});var r=n(3480),i=n(99574),s=n(26821),o=n(41788),a=n(24910),u=n(82846),c=n(73749),l=n(27583),h=n(1750),f=n(95872),d=n(77773),p=n(69055),g=n(22365),y=n(17609),_=n(7012),b=n(11465);class v{intersect(t){return V(this,t)}closestPoints(t){return[this.closestTo(t)]}}class E extends v{constructor(t){super(),this.point=t}equals(t){return this===t||st(t)&&(0,a.q)(this.point,t.point)}closestTo(){return(0,y.d9)(this.point)}}class S extends v{constructor(t,e,n){super(),this.start=t,this.end=e,this.lineLike={start:t,end:e,type:n}}equals(t){return this===t||ot(t)&&this.lineLike.type===t.lineLike.type&&(0,a.q)(this.start,t.start)&&(0,a.q)(this.end,t.end)}closestTo(t){const e=(0,y.by)();return(0,_.ZE)(t,this.lineLike,e),e}}class w extends S{constructor(t,e){super(t,e,b.SP.LINE)}}class m extends S{constructor(t,e){super(t,e,b.SP.RAY)}}class R extends v{constructor(t){super(),this.constraints=t}equals(t){return this===t||it(t)&&(0,r.fS)(this.constraints,t.constraints,((t,e)=>t.equals(e)))}closestTo(t){let e,n=1/0;for(const r of this.constraints){const i=r.closestTo(t),s=(0,a.s)(t,i);s<n&&(n=s,e=i)}return(0,y.d9)(e??t)}closestPoints(t){return this.constraints.flatMap((e=>e===this?[]:e.closestPoints(t)))}}class T extends v{constructor(t,e){super(),this.center=t,this.radius=e}equals(t){return this===t||ct(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const e=(0,y.by)();return(0,_.sc)(t,this.center,this.radius,e),e}}class L extends v{constructor(t,e){super(),this.center=t,this.radius=e}equals(t){return this===t||lt(t)&&(0,a.q)(this.center,t.center)&&this.radius===t.radius}closestTo(t){const e=(0,y.by)();return(0,_.sc)(t,this.center,this.radius,e),e[2]=this.center[2],e}asCircle(){return new N((0,y.d9)(this.center),this.radius,(0,y.al)(0,0,1))}}class N extends v{constructor(t,e,n,r){super(),this.center=t,this.radius=e,this.normal=n,this.slicePlane=r}equals(t){return this===t||ht(t)&&(0,a.q)(this.center,t.center)&&(0,a.q)(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:e,radius:n}=this;(0,d.nF)(this.getPlane(M),t,x);const r=(0,a.a)(x,x,e),i=(0,a.k)(r);if((0,_.hA)(i,0))return(0,y.d9)(t);const s=n/Math.sqrt(i),o=(0,y.by)();(0,a.b)(o,e,r,s);const{slicePlane:u}=this;if(u&&!(0,_.zf)(u,o)){return B(u,this)?.closestTo(t)??(0,y.d9)(t)}return o}getPlane(t=(0,d.Ue)()){return(0,d.Yq)(this.center,this.normal,t)}}const x=(0,u.Ue)(),M=(0,d.Ue)();class P extends v{constructor(t){super(),this.z=t}equals(t){return this===t||at(t)&&this.z===t.z}closestTo(t){return(0,y.al)(t[0],t[1],this.z)}getPlane(t=(0,d.Ue)()){return(0,a.i)(C,0,0,this.z),(0,d.Yq)(C,u.eG,t)}}const C=(0,u.Ue)();class A extends v{constructor(t,e,n){super(),this.start=t,this.end=e,this.planeLike={start:(0,y.eR)(t),end:(0,y.eR)(e),type:n}}equals(t){return this===t||ut(t)&&this.planeLike.type===t.planeLike.type&&(0,a.q)(this.start,t.start)&&(0,a.q)(this.end,t.end)}closestTo(t){const e=(0,y.by)();return(0,_.z9)(t,this.planeLike,e),e}closestEndTo(t){const{start:e,end:n}=this.planeLike;return Math.sign((0,s.AK)((0,s.$X)(z,n,e),(0,s.$X)(q,(0,y.eR)(t),e)))>0?this.end:this.start}getPlane(t=(0,d.Ue)()){const e=(0,a.c)(U,this.end);return e[2]+=1,(0,d.zk)(this.start,this.end,e,t)}getSlicePlane(t=(0,d.Ue)()){const{start:e,end:n,type:r}=this.planeLike;if(r===_.Jk.PLANE)return;const i=(0,a.i)(U,e[0],e[1],0),s=(0,a.i)(j,n[0],n[1],0),o=(0,a.d)(j,s,i);return(0,d.Yq)(i,o,t),t}}const z=(0,o.Ue)(),q=(0,o.Ue)(),U=(0,u.Ue)(),j=(0,u.Ue)();class k extends A{constructor(t,e){super(t,e,_.Jk.HALF_PLANE)}}class Z extends A{constructor(t,e){super(t,e,_.Jk.PLANE)}}class D extends v{constructor(t,e){super(),this.sphere=(0,p.l)(t,e)}equals(t){return this===t||ft(t)&&(0,p.n)(this.sphere,t.sphere)}closestTo(t){const e=(0,y.by)();return(0,p.p)(this.sphere,t,e),e}get center(){return(0,p.a)(this.sphere)}get radius(){return this.sphere[3]}}class I extends v{constructor(t,e,n){super(),this.start=t,this.end=e,this.getZ=n,this.planeLike={start:(0,y.eR)(t),end:(0,y.eR)(e),type:_.Jk.PLANE}}equals(t){return this===t||dt(t)&&(0,a.q)(this.start,t.start)&&(0,a.q)(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return function(t,e){const n=(0,y.by)();return(0,_.z9)(e,t.planeLike,n),n[2]=t.getZ(n[0],n[1])??pt,n}(this,t)}addIfOnTheGround(t,e){for(const n of e){const e=this.getZ(n[0],n[1])??0;(0,_.hA)(n[2],e)&&(n[2]=e,t.push(n))}}}class G extends v{constructor(t,e,n){super(),this._x=t,this._y=e,this._z=n}equals(t){return this===t||function(t){return t instanceof G}(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo([t,e,n]){return(0,y.Ue)(this._x??t,this._y??e,this._z??n)}}class O extends v{constructor(t,e,n,r,i){super(),this._origin=t,this._spatialReference=e,this._distanceMeters=n,this._z=r,this._directionDegrees=i}equals(t){return this===t||function(t){return t instanceof O}(t)&&(0,s.I6)(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo([t,e,n]){return(0,s.t8)(F,t,e),(0,s.I6)(F,this._origin)||this._applyDirectionAndDistance(F),(0,y.Ue)(F[0],F[1],this._z??n)}_applyDirectionAndDistance(t){if(null!=this._directionDegrees&&null!=this._distanceMeters)(0,f.TB)(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(null!=this._directionDegrees)!function(t,e,n,r,i){let{azimuth:s,distance:o}=(0,f.cA)(Y,e,r,i);s??=0;let a=o*Math.cos((s-n)*h.Yr);a=Math.max(0,a),(0,f.TB)(t,e,n,a,i)}(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(null!=this._distanceMeters){const{azimuth:e}=(0,f.cA)(H,this._origin,t,this._spatialReference);(0,f.TB)(t,this._origin,e??0,this._distanceMeters,this._spatialReference)}}}const F=[0,0],H=new f._q;const Y=new f._q;function V(t,e){if(it(t)){const n=[];for(const r of t.constraints){const t=r.intersect(e);t&&n.push(t)}return rt(n)}if(it(e))return V(e,t);if(dt(t))return Q(t,e);if(dt(e))return Q(e,t);if(st(t)){const{point:n}=t;if(st(e))return(0,a.q)(n,e.point)?t:void 0;const r=e.closestTo(n);return(0,a.G)(r,n)?t:void 0}if(ot(t)){if(st(e))return V(e,t);if(ot(e))return et((0,_.Au)(t.lineLike,e.lineLike));if(at(e))return X(t,e);if(ut(e))return et((0,_.fK)(e.planeLike,t.lineLike));if(ct(e))return et((0,_.CJ)(t.lineLike,e.center,e.radius));if(ht(e))return et((0,_.UG)(t.lineLike,e));if(lt(e))return function({lineLike:t},{center:e,radius:n}){const r=e[2];return et((0,_.CJ)(t,e,n).filter((t=>(0,_.hA)(t[2],r))))}(t,e);if(ft(e))return function({lineLike:t},{sphere:e}){return et((0,p.m)(e,t.start,t.end))}(t,e)}else if(at(t)){if(st(e)||ot(e))return V(e,t);if(at(e))return function(t,e){return(0,_.hA)(t.z,e.z)?t:void 0}(t,e);if(ut(e))return function({z:t},{planeLike:e}){const[n,r]=e.start,[i,s]=e.end,o=(0,y.al)(n,r,t),a=(0,y.al)(i,s,t);return e.type===_.Jk.PLANE?new w(o,a):new m(o,a)}(t,e);if(ct(e))return function(t,e){const[n,r]=e.center;return new L((0,y.al)(n,r,t.z),e.radius)}(t,e);if(ht(e))return $(t,e);if(lt(e))return function(t,e){return(0,_.hA)(e.center[2],t.z)?e:void 0}(t,e);if(ft(e))return function(t,{center:e,radius:n}){const r=Math.abs(e[2]-t.z);if(r>n&&!(0,_.hA)(r,n))return;const i=(0,y.al)(e[0],e[1],t.z),s=Math.sqrt(n**2-r**2);return(0,_.hA)(s,0)?void 0:new L(i,s)}(t,e)}else if(ut(t)){if(st(e)||ot(e)||at(e))return V(e,t);if(ut(e))return tt((0,_.Nn)(t.planeLike,e.planeLike));if(ct(e))return tt((0,_.SD)(t.planeLike,e.center,e.radius));if(ht(e))return W(t,e);if(lt(e))return K(t,e);if(ft(e))return J(t,e)}else if(ct(t)){if(st(e)||ot(e)||at(e)||ut(e))return V(e,t);if(ct(e))return tt((0,_.Yf)((0,y.eR)(t.center),t.radius,(0,y.eR)(e.center),e.radius));if(ht(e))return;if(lt(e))return function(t,e){const n=(0,s.bI)((0,y.eR)(t.center),(0,y.eR)(e.center));return(0,_.hA)(n,0)&&(0,_.hA)(t.radius,e.radius)?e:nt((0,_.Yf)((0,y.eR)(t.center),t.radius,(0,y.eR)(e.center),e.radius),e.center[2])}(t,e);if(ft(e))return}else if(ht(t)){if(st(e)||ot(e)||at(e)||ut(e)||ct(e))return V(e,t);if(ht(e))return;if(lt(e))return void e.asCircle();if(ft(e))return}else if(lt(t)){if(st(e)||ot(e)||at(e)||ut(e)||ct(e)||ht(e))return V(e,t);if(lt(e))return function(t,e){if(!(0,_.$7)(t.center,e.center))return;const n=(0,s.bI)((0,y.eR)(t.center),(0,y.eR)(e.center));return(0,_.hA)(n,0)&&(0,_.hA)(t.radius,e.radius)?t:nt((0,_.Yf)((0,y.eR)(t.center),t.radius,(0,y.eR)(e.center),e.radius),t.center[2])}(e,t);if(ft(e))return}else if(ft(t)){if(st(e)||ot(e)||at(e)||ut(e)||ct(e)||lt(e))return V(e,t);if(ft(e))return}}const X=(()=>{const t=(0,d.Ue)();return(e,n)=>{const{start:r,end:i}=e;if((0,_.$7)(r,i)&&(0,_.hA)(r[2],n.z))return e;const s=(0,y.by)();return(0,d.fn)(n.getPlane(t),r,i,s)?new E(s):void 0}})();const B=(()=>{const t=(0,l.Ue)(),e=(0,u.Ue)(),n=(0,u.Ue)();return(r,s,o)=>{const{normal:l,center:h,radius:f}=s;(0,g._F)(l,e,n);const p=(0,d.st)(r),b=f*(0,a.e)(p,e),v=f*(0,a.e)(p,n);(0,c.s)(t,h[0],h[1],h[2],1);const S=(0,c.h)(r,t),w=Math.hypot(b,v),m=(0,_.hA)(w,0);if((0,_.hA)((0,d.TE)(r,h),0)){if(m)return s;if((0,_.hA)(f,0))return!o||(0,_.zf)(o,h)?new E((0,y.d9)(h)):void 0;(0,a.h)(e,p,l),(0,a.n)(e,e);const t=new Array,n=(0,u.d9)(h);(0,a.b)(n,n,e,f),o&&!(0,_.zf)(o,n)||t.push(n);const r=(0,u.d9)(h);return(0,a.b)(r,r,e,-f),o&&!(0,_.zf)(o,r)||t.push(r),et(t)}if(m)return;const R=-S/w;if(Math.abs(R)>1||(0,_.hA)(R,1))return;const T=Math.atan(b/v),L=(0,i.Kt)(R)-T,N=Math.PI-L,x=new Array,M=(0,u.Ue)();(0,a.b)(M,h,e,f*Math.cos(L)),(0,a.b)(M,M,n,f*Math.sin(L)),x.push(M);const P=(0,u.Ue)();return(0,a.b)(P,h,e,f*Math.cos(N)),(0,a.b)(P,P,n,f*Math.sin(N)),x.push(P),et(o?(0,_.rq)(o,x):x)}})();const $=(()=>{const t=(0,d.Ue)();return(e,n)=>B(e.getPlane(t),n,n.slicePlane)})();const K=(()=>{const t=(0,d.Ue)();return(e,{center:n,radius:r})=>{const i=(0,_.SD)(e.planeLike,n,r),s=n[2];e.getSlicePlane(t);const o=new Array;for(const[e,n]of i){const r=[e,n,s];(0,_.zf)(t,r)&&o.push(r)}return et(o)}})(),W=(()=>{const t=(0,d.Ue)(),e=(0,d.Ue)();return(n,r)=>B(n.getPlane(t),r,n.getSlicePlane(e))})(),J=(()=>{const t=(0,d.Ue)();return(e,{center:n,radius:r})=>{const i=e.getPlane(t),s=(0,d.jH)(i,n),o=Math.abs(s);if(o>r&&!(0,_.hA)(o,r))return;const c=Math.sqrt(r**2-s**2);if((0,_.hA)(c,0)){const t=(0,y.by)();return(0,d.nF)(i,n,t),new E(t)}const l=(0,y.by)(),h=(0,u.d9)((0,d.st)(i));return(0,a.b)(l,n,h,s),new N(l,c,h,e.getSlicePlane())}})();function Q(t,e){const{planeLike:n,getZ:r}=t,i=new Array;if(st(e))t.addIfOnTheGround(i,(0,_.hm)(n,e.point));else if(ot(e))t.addIfOnTheGround(i,(0,_.fK)(n,e.lineLike));else if(ct(e))for(const[t,s]of(0,_.SD)(n,e.center,e.radius)){const e=r(t,s);null!=e&&i.push((0,u.al)(t,s,e))}else if(ut(e)||dt(e))for(const[t,s]of(0,_.Nn)(n,e.planeLike)){const e=r(t,s)??pt;i.push((0,u.al)(t,s,e))}return et(i)}function tt(t){return rt(t.map((([t,e])=>{const n=(0,y.al)(t,e,0),r=(0,y.al)(t,e,1);return new w(n,r)})))}function et(t){return rt(t.map((t=>t?new E((0,y.uo)(t)):void 0)))}function nt(t,e){return et(t.map((([t,n])=>[t,n,e])))}function rt(t){if(0!==t.length)return 1===t.length?t[0]??void 0:new R(t.filter(r.pC))}function it(t){return t instanceof R}function st(t){return t instanceof E}function ot(t){return t instanceof S}function at(t){return t instanceof P}function ut(t){return t instanceof A}function ct(t){return t instanceof T}function lt(t){return t instanceof L}function ht(t){return t instanceof N}function ft(t){return t instanceof D}function dt(t){return t instanceof I}const pt=0},17609:function(t,e,n){n.d(e,{Ju:function(){return _},SN:function(){return y},Ue:function(){return a},Vx:function(){return v},aK:function(){return b},al:function(){return h},by:function(){return u},d9:function(){return f},eR:function(){return l},hx:function(){return p},j7:function(){return g},s:function(){return d},uo:function(){return c}});var r,i=n(82846),s=n(60856),o=n(51870);function a(t,e,n){return u(t,e,n)}function u(t=0,e=0,n=0){return(0,i.al)(t,e,n)}function c(t){return t}function l(t){return t}function h(t,e,n){return(0,i.al)(t,e,n)}function f(t){const[e,n,r]=t;return t.length>3?[e,n,r,t[3]]:[e,n,r]}function d(t){return t[3]=((t.length>3?t[3]:void 0)??r.NONE)|r.TARGET,t}function p(t){return Boolean(((t.length>3?t[3]:void 0)??r.NONE)&r.TARGET)}function g(t,e,{coordinateHelper:n,elevationInfo:r},i){return t?y(n.vectorToDehydratedPoint(t,E),e,r,i):null}function y(t,e,n,r=u()){return r[0]=t.x,r[1]=t.y,r[2]=t.z??0,null==e||("2d"===e.type?r[2]=0:r[2]=(0,o.vQ)(e,t,n,o.jG)??0),r}function _(t,e,n){return n?((0,s.y)(n,t[0],t[1],t[2],e),n):(0,s.T)(t[0],t[1],t[2],e)}function b(t,e,{z:n,m:r},i,a){const{spatialReference:u,elevationInfo:c}=i;let l;l=null==n&&null==r?void 0:null==e||"2d"===e.type?n??void 0:(0,o.zx)(e,t,u,o.jG,c)??0;const[h,f]=t;return a?(0,s.y)(a,h,f,l,u):a=(0,s.T)(h,f,l,u),null!=r&&(a.m=r,a.hasM=!0),a}function v(t,e,n,i,s=u()){const[a,c]=t;return s[0]=a,s[1]=c,t.length>3&&(s[3]=t[3]??r.NONE),"3d"!==n?.type?(s[2]=e.value,s):(s[2]=(0,o.O3)(n,a,c,e.value,i,e.elevationInfo,o.jG)??0,s)}!function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"}(r||(r={}));const E=(0,s.T)(0,0,0,null)},676:function(t,e,n){n.d(e,{Z:function(){return u}});var r=n(73440),i=n(70880),s=n(43254),o=n(17155),a=(n(61432),n(96711),n(83850),n(48023));let u=class extends i.Z{constructor(t){super(t),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new s.Z}};(0,r._)([(0,o.Cb)({constructOnly:!0})],u.prototype,"layer",void 0),(0,r._)([(0,o.Cb)()],u.prototype,"enabled",void 0),(0,r._)([(0,o.Cb)()],u.prototype,"updating",void 0),(0,r._)([(0,o.Cb)()],u.prototype,"availability",void 0),(0,r._)([(0,o.Cb)()],u.prototype,"sublayerSources",void 0),u=(0,r._)([(0,a.j)("esri.views.interactive.snapping.FeatureSnappingLayerSource")],u)},22590:function(t,e,n){n.d(e,{c:function(){return l}});var r=n(73440),i=n(53147),s=n(63255),o=n(17155),a=n(48023);let u=class extends s.Z{constructor(){super(...arguments),this.enabled=!0}};(0,r._)([(0,o.Cb)({type:Boolean})],u.prototype,"enabled",void 0),u=(0,r._)([(0,a.j)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],u);let c=class extends s.Z{constructor(t){super(t),this.lineSnapper=new u,this.parallelLineSnapper=new u,this.rightAngleSnapper=new u,this.rightAngleTriangleSnapper=new u,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new i.Z([255,127,0]),this.orangeTransparent=new i.Z([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,r._)([(0,o.Cb)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),(0,r._)([(0,o.Cb)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),(0,r._)([(0,o.Cb)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),(0,r._)([(0,o.Cb)({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"verticalLineThresholdMeters",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),(0,r._)([(0,o.Cb)({type:i.Z,nonNullable:!0})],c.prototype,"orange",void 0),(0,r._)([(0,o.Cb)({type:i.Z,nonNullable:!0})],c.prototype,"orangeTransparent",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0),(0,r._)([(0,o.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"satisfiesConstraintScreenThreshold",void 0),c=(0,r._)([(0,a.j)("esri.views.interactive.snapping.Settings.Defaults")],c);const l=new c},13707:function(t,e,n){var r;n.d(e,{B:function(){return r}}),function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"}(r||(r={}))},9217:function(t,e,n){n.d(e,{N:function(){return N}});var r=n(73440),i=n(70880),s=n(29292),o=n(87833),a=(n(61432),n(93568)),u=n(90403),c=n(17155),l=(n(96711),n(83850),n(48023)),h=n(13132),f=n(51870),d=n(17609),p=n(22590),g=n(13707),y=n(81972),_=n(29668),b=n(24218),v=n(45712),E=n(50620),S=n(80677),w=n(28917),m=n(29453),R=n(66445),T=n(87778),L=n(55274);let N=class extends(o.Z.EventedMixin(i.Z)){constructor(t){super(t),this.options=new y.Z,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=x.MAIN}initialize(){this.addHandles([(0,u.YP)((()=>{const{distance:t,touchSensitivityMultiplier:e,effectiveSelfEnabled:n,effectiveFeatureEnabled:r,effectiveGridEnabled:i}=this.options;return{selfEnabled:n,featureEnabled:r,gridEnabled:"2d"===this.view.type&&i,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:t,touchSensitivityMultiplier:e}}),((t,e)=>{e&&(this.doneSnapping(),this.emit("changed")),this._loadTask?.abort(),this._loadTask=(0,s.vr)((n=>this._updateEngines(t,e,n)))}),u.tX),(0,u.YP)((()=>this.options),(t=>{for(const e of this._engines)e.options=t}),u.Z_)])}destroy(){this._loadTask?.abort(),this._destroyEngines()}get updating(){return this._engines.some((t=>t.updating))||!this._loadTask?.finished}_destroyEngines(){this._engineCache.forEach((t=>t.destroy())),this._engineCache.clear(),this._engines=[]}async _updateEngines(t,e,n){if(!t.viewReady)return void this._destroyEngines();e?.viewSpatialReference!==t.viewSpatialReference&&this._destroyEngines();const r=this._engineCache,i=await Promise.allSettled([t.featureEnabled&&!r.has("feature")?this._createFeatureSnappingEngine(n):void 0,t.selfEnabled&&!r.has("self")?this._createSelfSnappingEngine(n):void 0,t.gridEnabled&&!r.has("grid")?this._createGridSnappingEngine(n):void 0]);if(n.aborted)for(const t of i)"fulfilled"===t.status&&t.value?.engine.destroy();else{for(const t of i)"fulfilled"===t.status&&t.value&&r.set(t.value.type,t.value.engine);this._engines=Array.from(r.values())}}async _createSelfSnappingEngine(t){const[{SelfSnappingEngine:e},r]=await Promise.all([n.e(75319).then(n.bind(n,75319)),(0,L.H)()]);return(0,a.k_)(t),{type:"self",engine:new e({view:this.view,options:this.options,geodesicLengthMeasurementUtils:r})}}async _createGridSnappingEngine(t){const{view:e}=this;if("2d"!==e.type)return;const{GridSnappingEngine:r}=await n.e(36302).then(n.bind(n,36302));return(0,a.k_)(t),{type:"grid",engine:new r({view:e,options:this.options})}}async _createFeatureSnappingEngine(t){const{FeatureSnappingEngine:e}=await n.e(28859).then(n.bind(n,28859));(0,a.k_)(t);const{view:r,options:i}=this,{spatialReference:s}=r;return{type:"feature",engine:new e({view:r,options:i,spatialReference:s})}}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:e}=this.options,n=t*e;return n*n}snap(t){return function(t){return null!=t.scenePoint}(t)?this._snapMultiPoint(t):this._snapSinglePoint(t)}update(t){const{point:e,context:n}=t;this._removeVisualization();const r=this._currentMainCandidate;if(null==r)return e;const i=this._selectUpdateInput(t);if(null==i)return e;const{spatialReference:s}=n,o=(0,h.project)(i,s);if(null==o)return e;const{view:a}=this,{elevationInfo:u,visualizer:c}=n,l=[],f=(0,d.SN)(o,a,u),p=r.constraint.closestTo(f);if(!this._arePointsWithinScreenThreshold(f,p,n)||!P(r,n.drawConstraints))return this._resetSnappingState(),e;r.targetPoint=(0,d.s)(p),l.push(...r.hints);for(const t of this._currentOtherActiveCandidates)P(t,n.drawConstraints)&&(t.targetPoint=(0,d.s)(p),l.push(...t.hints));return null!=c&&this.addHandles(c.draw(l,{spatialReference:s,elevationInfo:A(n),view:a,selfSnappingZ:n.selfSnappingZ}),M),(0,d.aK)(p,a,e,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:t,scenePoint:e}){switch(this._currentSnappedType){case x.MAIN:return t;case x.SCENE:return e}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=x.MAIN}_removeVisualization(){this.removeHandles(M)}async _snapSinglePoint({point:t,context:e,signal:n}){const{view:r}=this,{elevationInfo:i}=e,s=(0,d.SN)(t,r,i),o=await this._fetchCandidates(s,g.B.ALL,e,n);return this._createSnapResult(s,x.MAIN,o,r,t,e,n)}async _snapMultiPoint({point:t,scenePoint:e,context:n,signal:r}){const{view:i}=this,{coordinateHelper:s,elevationInfo:o,spatialReference:a}=n;await(0,h.initializeProjection)(e.spatialReference,a);const u=(0,h.project)(e,a),c=(0,d.SN)(u,i,o),l=await this._fetchCandidates(c,g.B.FEATURE,n,r);if(l.length>0){const t=await this._fetchCandidates(c,g.B.SELF,n,r);return this._createSnapResult(c,x.SCENE,[...l,...t],i,u,n,r)}const f=(0,d.SN)(t,i,o),p=await this._fetchCandidates(f,g.B.SELF,n,r);return this._createSnapResult(f,x.MAIN,p,i,{z:s.hasZ()&&t.hasZ?t.z??0:void 0,m:s.hasM()&&t.hasM?t.m??0:void 0},n,r)}async _fetchCandidates(t,e,n,r){return(await Promise.all(this._engines.map((i=>i.fetchCandidates(t,e,n,r))))).flat()}_createSnapResult(t,e,n,r,i,s,o){return{get valid(){return!(0,a.Hc)(o)},apply:()=>{const{spatialReference:o}=s,{snappedPoint:a,hints:u}=this._processCandidates(t,e,n,s);return this._removeVisualization(),null!=s.visualizer&&this.addHandles(s.visualizer.draw(u,{spatialReference:o,elevationInfo:f.jG,view:r,selfSnappingZ:s.selfSnappingZ}),M),(0,d.aK)(a,r,i,s)}}}_processCandidates(t,e,n,r){if(n.length<1)return this.doneSnapping(),{snappedPoint:t,hints:[]};this._currentSnappedType!==e&&this._resetSnappingState(),(0,_.lQ)(t,n);const i=this._currentMainCandidate;if(null!=i){const s=function(t,e){return t instanceof E.m?C(e,t.first)>=0&&C(e,t.second)>=0?0:-1:C(e,t)}(i,n);if(s>=0){if(!(n[s]instanceof E.m))return this._intersectWithOtherCandidates(s,n,t,e,r);if(this._arePointsWithinScreenThreshold(t,i.targetPoint,r))return this._updateSnappingCandidate(i,e,n,r)}}return this._intersectWithOtherCandidates(0,n,t,e,r)}_intersectWithOtherCandidates(t,e,n,r,i){const{coordinateHelper:s}=i,o=e[t],a=[];for(let r=0;r<e.length;++r){if(r===t)continue;const i=e[r],u=o.constraint.intersect(i.constraint);if(u)for(const t of u.closestPoints(o.targetPoint))a.push([new E.m((0,d.s)(t),o,i,i.isDraped),this._squaredScreenDistance(n,t,s)])}return a.length>0&&(a.sort(((t,e)=>t[1]-e[1])),a[0][1]<this._squaredPointProximityThreshold(i.pointer))?this._updateSnappingCandidate(a[0][0],r,e,i):P(o,i.drawConstraints)?this._updateSnappingCandidate(o,r,e,i):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(t,e,n,r){this.doneSnapping(),this._currentMainCandidate=t,this._currentSnappedType=e;const i=this._currentMainCandidate.targetPoint,s=[];s.push(...t.hints);for(const e of n){if(t instanceof E.m){if(e.constraint.equals(t.first.constraint)||e.constraint.equals(t.second.constraint))continue}else if(e.constraint.equals(t.constraint))continue;const n=e.constraint.closestTo(i);this._squaredScreenDistance(n,i,r.coordinateHelper)<p.c.satisfiesConstraintScreenThreshold*p.c.satisfiesConstraintScreenThreshold&&(e.targetPoint=i,this._currentOtherActiveCandidates.push(e),s.push(...e.hints))}return{snappedPoint:i,hints:s}}_squaredPointProximityThreshold(t){return"touch"===t?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(t,e,n){return this._squaredScreenDistance(t,e,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(t,e,n){return(0,_.Bb)(this._toScreen(t,n),this._toScreen(e,n))}_toScreen(t,e){return(0,T.R)(t,e.spatialReference,f.jG,this.view)}get test(){}};var x;(0,r._)([(0,c.Cb)({constructOnly:!0})],N.prototype,"view",void 0),(0,r._)([(0,c.Cb)()],N.prototype,"options",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],N.prototype,"updating",null),(0,r._)([(0,c.Cb)()],N.prototype,"_loadTask",void 0),(0,r._)([(0,c.Cb)()],N.prototype,"_engines",void 0),(0,r._)([(0,c.Cb)()],N.prototype,"_squaredMouseProximityThreshold",null),(0,r._)([(0,c.Cb)()],N.prototype,"_squaredTouchProximityThreshold",null),N=(0,r._)([(0,l.j)("esri.views.interactive.snapping.SnappingManager")],N),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(x||(x={}));const M="visualization-handle";function P(t,e){return!e||null==e.direction&&null==e.distance||!(t instanceof b.k||t instanceof v.L||t instanceof S.u||t instanceof w.n||t instanceof R.K)&&(!(t instanceof m.A1)||null==e.direction&&t.selfSnappingType===m.dq.LastVertex)}function C(t,e){let n=-1;for(let r=0;r<t.length;++r)if(e.constraint.equals(t[r].constraint)){n=r;break}return n}function A({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?f.jG:e}},81972:function(t,e,n){n.d(e,{Z:function(){return f}});var r=n(73440),i=n(70880),s=n(3480),o=n(43254),a=n(96711),u=n(17155),c=(n(61432),n(48023)),l=n(676),h=n(22590);let f=class extends i.Z{constructor(t){super(t),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new o.Z,this.distance=h.c.distance,this.touchSensitivityMultiplier=h.c.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const t=this.featureSources;t.some(d)&&a.Z.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const e=t.filter(g),n=this._get("_effectiveFeatureSources")?.filter(d)??new o.Z;for(const t of e){const e=n.find((e=>e.layer===t.layer.parent));if(e)e.sublayerSources.includes(t)||e.sublayerSources.add(t);else if(t.layer.parent){const e=new l.Z({layer:t.layer.parent});e.sublayerSources.add(t),n.add(e)}}for(const t of n){const n=t.sublayerSources.filter((t=>!e.includes(t)));t.sublayerSources.removeMany(n)}n.removeMany(n.filter((t=>0===t.sublayerSources.length)));const r=t.filter(p),i=this._get("_effectiveFeatureSources")??new o.Z,{added:u,removed:c}=(0,s.e5)(i.toArray(),[...r,...n]);return i.removeMany(c),i.addMany(u),i}};function d(t){return"subtype-group"===t.layer.type}function p(t){return"subtype-group"!==t.layer.type}function g(t){return"subtype-sublayer"===t.layer.type}(0,r._)([(0,u.Cb)()],f.prototype,"enabled",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"enabledToggled",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"forceDisabled",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"selfEnabled",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"featureEnabled",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"gridEnabled",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"attributeRulesEnabled",void 0),(0,r._)([(0,u.Cb)({type:o.Z.ofType(l.Z)})],f.prototype,"featureSources",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"distance",void 0),(0,r._)([(0,u.Cb)()],f.prototype,"touchSensitivityMultiplier",void 0),(0,r._)([(0,u.Cb)({readOnly:!0})],f.prototype,"effectiveEnabled",null),(0,r._)([(0,u.Cb)({readOnly:!0})],f.prototype,"effectiveGridEnabled",null),(0,r._)([(0,u.Cb)({readOnly:!0})],f.prototype,"effectiveSelfEnabled",null),(0,r._)([(0,u.Cb)({readOnly:!0})],f.prototype,"effectiveFeatureEnabled",null),(0,r._)([(0,u.Cb)({readOnly:!0})],f.prototype,"_effectiveFeatureSources",null),f=(0,r._)([(0,c.j)("esri.views.interactive.snapping.SnappingOptions")],f)},24218:function(t,e,n){n.d(e,{k:function(){return a}});var r=n(88190),i=n(29668),s=n(42022),o=n(62489);class a extends s.a{constructor(t){super({...t,isDraped:!0,constraint:new r.M8(t.edgeStart,t.edgeEnd,t.getGroundElevation)})}get hints(){return[new o.w(i.ze.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},45712:function(t,e,n){n.d(e,{L:function(){return a}});var r=n(88190),i=n(29668),s=n(42022),o=n(62489);class a extends s.a{constructor(t){super({...t,constraint:new r.ku(t.edgeStart,t.edgeEnd)})}get hints(){return[new o.w(i.ze.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},42022:function(t,e,n){n.d(e,{a:function(){return s}});var r=n(13707),i=n(82532);class s extends i.j{constructor({targetPoint:t,objectId:e,constraint:n,isDraped:i}){super(t,n,i,r.B.FEATURE),this.objectId=e}}},50620:function(t,e,n){n.d(e,{m:function(){return a}});var r=n(88190),i=n(13707),s=n(82532),o=n(67581);class a extends s.j{constructor(t,e,n,s){super(t,new r.Hk(t),s,i.B.ALL),this.first=e,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new o.w(this.targetPoint,this.isDraped,this.domain)]}}},80677:function(t,e,n){n.d(e,{u:function(){return u}});var r=n(88190),i=n(13707),s=n(29668),o=n(82532),a=n(62489);class u extends o.j{constructor({lineStart:t,lineEnd:e,targetPoint:n,isDraped:o}){super(n,new r.jg(t,e),o,i.B.SELF),this._referenceLineHint=new a.w(s.ze.REFERENCE_EXTENSION,t,e,o,this.domain)}get hints(){return[this._referenceLineHint,new a.w(s.ze.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}},28917:function(t,e,n){n.d(e,{n:function(){return f}});var r=n(24910),i=n(82846),s=n(88190),o=n(17609),a=n(13707),u=n(29668),c=n(82532),l=n(62489),h=n(12399);class f extends c.j{constructor({referenceLine:t,lineStart:e,targetPoint:n,isDraped:u}){const c=(0,i.d9)(e),{left:l,right:h}=t;(0,r.d)(c,(0,r.f)(c,c,h),l),super(n,new s.jg(e,(0,o.uo)(c)),u,a.B.SELF),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new l.w(u.ze.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new h.L(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map((t=>new l.w(u.ze.REFERENCE,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight)))]}addReferenceLine(t){const e={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((n=>{(0,r.q)(t.right,n.edge.left)&&(n.fadeLeft=!1,e.fadeRight=!1),(0,r.q)(t.right,n.edge.right)&&(n.fadeRight=!1,e.fadeRight=!1),(0,r.q)(t.left,n.edge.right)&&(n.fadeRight=!1,e.fadeLeft=!1),(0,r.q)(t.left,n.edge.left)&&(n.fadeLeft=!1,e.fadeLeft=!1)})),this._referenceLines.push(e)}}},29453:function(t,e,n){n.d(e,{A1:function(){return l},YJ:function(){return r},dq:function(){return i}});var r,i,s=n(13707),o=n(29668),a=n(82532),u=n(62489),c=n(97801);class l extends a.j{constructor({targetPoint:t,constraint:e,previousVertex:n,otherVertex:r,otherVertexType:o,isDraped:a,selfSnappingType:u,objectId:c,domain:l}){super(t,e,a,l??s.B.SELF),this.previousVertex=n,this.otherVertex=r,this.otherVertexType=o,this.selfSnappingType=u??i.None,this.objectId=c??null}get hints(){const t=this.previousVertex,e=this.otherVertexType===r.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===r.CENTER?this.targetPoint:this.otherVertex;return[new u.w(o.ze.TARGET,e,n,this.isDraped,this.domain),new u.w(o.ze.REFERENCE,t,e,this.isDraped,this.domain),new c.y(this.previousVertex,e,n,this.isDraped,this.domain)]}}!function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"}(r||(r={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(i||(i={}))},66445:function(t,e,n){n.d(e,{K:function(){return d}});var r=n(26821),i=n(24910),s=n(82846),o=n(88190),a=n(17609),u=n(13707),c=n(29668),l=n(82532),h=n(62489),f=n(97801);class d extends l.j{constructor({targetPoint:t,point1:e,point2:n,isDraped:c}){super(t,new o.kt((0,a.uo)((0,i.m)((0,s.Ue)(),e,n,.5)),.5*(0,r.TE)((0,a.eR)(e),(0,a.eR)(n))),c,u.B.SELF),this._p1=e,this._p2=n}get hints(){return[new h.w(c.ze.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new h.w(c.ze.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new f.y(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}},82532:function(t,e,n){n.d(e,{j:function(){return r}});class r{constructor(t,e,n,r){this.targetPoint=t,this.constraint=e,this.isDraped=n,this.domain=r}}},67581:function(t,e,n){n.d(e,{w:function(){return o}});var r=n(24910),i=n(13707),s=n(10690);class o extends s.r{constructor(t,e,n=i.B.ALL){super(e,n),this.intersectionPoint=t}equals(t){return t instanceof o&&(0,r.q)(this.intersectionPoint,t.intersectionPoint)}}},62489:function(t,e,n){n.d(e,{w:function(){return o}});n(61432),n(96711);var r=n(24910),i=n(13707),s=n(10690);class o extends s.r{constructor(t,e,n,r,s=i.B.ALL,o=!0,a=!0){super(r,s),this.type=t,this.lineStart=e,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(t){return t instanceof o&&this.type===t.type&&(0,r.q)(this.lineStart,t.lineStart)&&(0,r.q)(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return(0,r.j)(this.lineStart,this.lineEnd)}}},12399:function(t,e,n){n.d(e,{L:function(){return o}});n(61432),n(96711);var r=n(24910),i=n(13707),s=n(10690);class o extends s.r{constructor(t,e,n,r=i.B.ALL){super(n,r),this.lineStart=t,this.lineEnd=e}equals(t){return t instanceof o&&(0,r.q)(this.lineStart,t.lineStart)&&(0,r.q)(this.lineEnd,t.lineEnd)}}},97801:function(t,e,n){n.d(e,{y:function(){return o}});n(61432),n(96711);var r=n(24910),i=n(13707),s=n(10690);class o extends s.r{constructor(t,e,n,r,s=i.B.ALL){super(r,s),this.previousVertex=t,this.centerVertex=e,this.nextVertex=n}equals(t){return t instanceof o&&(0,r.q)(this.previousVertex,t.previousVertex)&&(0,r.q)(this.centerVertex,t.centerVertex)&&(0,r.q)(this.nextVertex,t.nextVertex)}}},10690:function(t,e,n){n.d(e,{r:function(){return r}});class r{constructor(t,e){this.isDraped=t,this.domain=e}}},29668:function(t,e,n){n.d(e,{Bb:function(){return g},Ob:function(){return w},Ry:function(){return p},_j:function(){return E},fG:function(){return y},lQ:function(){return _},n0:function(){return m},rh:function(){return v},ze:function(){return b}});var r=n(90403),i=n(74355),s=n(48797),o=n(92161),a=n(24910),u=n(60856),c=n(29191),l=n(96620),h=n(18753),f=n(17609),d=n(62052);const p=Symbol("grid-placement-graphic");function g(t,e){const n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function y(t,e){return Math.sqrt(g(t,e))}function _(t,e){e.sort(((e,n)=>(0,a.s)(e.targetPoint,t)-(0,a.s)(n.targetPoint,t)))}var b;function v({parameters:{point:t,distance:e,returnEdge:n,vertexMode:r,coordinateHelper:{spatialReference:a},filter:l},mode:h,returnZ:f,filter:d}){const p=d?.clone()??new c.Z({where:"1=1"});return p.returnZ=f??"3d"===h,l&&(p.geometry=l.geometry,p.distance=l.distance,p.spatialRelationship=l.spatialRelationship,p.where=(0,s._$)(p.where,l.where),p.timeExtent=(0,o.Ov)(p.timeExtent,l.timeExtent),p.objectIds=function(t,e){return t||e?e?t?Array.from((0,i.jV)(new Set(t),new Set(e))):e:t:null}(p.objectIds,l.objectIds)),{point:(0,u.T)(t[0],t[1],t[2],a.toJSON()),mode:h,distance:e,returnEdge:n,vertexMode:r,query:p.toJSON()}}function E(t,e,n){return{left:(0,f.j7)(t.leftVertex.pos,e,n),right:(0,f.j7)(t.rightVertex.pos,e,n)}}!function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"}(b||(b={}));const S=Symbol("snapping-toggle");function w(t,e=(()=>{})){const n=(0,r.YP)((()=>({view:t.view,snappingOptions:t.snappingOptions})),(({view:n,snappingOptions:r})=>{if(t.removeHandles(S),!n||!r)return;const i=l.f.TOOL,s=[n.on("key-down",(t=>{t.key!==h.Kj.toggle||t.repeat||(r.enabledToggled=!0,e())}),i),n.on("key-up",(t=>{t.key===h.Kj.toggle&&(r.enabledToggled=!1,e())}),i),n.on("pointer-move",(t=>{const n=t.native.ctrlKey;r.enabledToggled!==n&&(r.enabledToggled=n,e())}),i)];t.addHandles(s,S)}),r.tX);t.addHandles(n)}function m(t){return(0,d.s)(t)&&"utilityNetworks"in t&&!!t.utilityNetworks?.length}},87778:function(t,e,n){n.d(e,{R:function(){return a}});var r=n(96094),i=n(82846),s=n(60856),o=n(11480);function a(t,e,n,i){return"2d"===i.type?(u.x=t[0],u.y=t[1],u.spatialReference=e,i.toScreen(u)):((0,o.R)(t,e,n,i,c),i.state.camera.projectToScreen(c,l),(0,r.vW)(l[0],l[1]))}const u=(0,s.T)(0,0,0,null),c=(0,i.Ue)(),l=(0,r.s1)()},49510:function(t,e,n){n.d(e,{Cr:function(){return S},FN:function(){return v},KY:function(){return b},Sx:function(){return h},Uy:function(){return d},Z1:function(){return p},_e:function(){return y},qj:function(){return E},un:function(){return _},xI:function(){return g}});var r,i=n(1925),s=n(26636),o=n(24910),a=n(82846),u=n(2051),c=n(8554),l=n(27250);function h(t){return f(t,r.Horizontal)}function f(t,e){const{hasZ:n,spatialReference:o}=t,a=(0,l.m)(o);let u=0;const c=(0,s.j5)(a);if(null==c)return null;const h=e===r.Direct?v:E;for(const e of t.paths){if(e.length<2)continue;const t=e.length-1;for(let r=0;r<t;++r){const t=e[r];m[0]=t[0],m[1]=t[1],m[2]=n?t[2]:0;const i=e[r+1];R[0]=i[0],R[1]=i[1],R[2]=n?i[2]:0;const s=h(m,R,o);if(null==s)return null;u+=s.value}}return(0,i.yG)(u,c)}function d(t,e){const{spatialReference:n}=t;return(0,c.fS)(n,e.spatialReference)?(m[0]=t.x,m[1]=t.y,m[2]=t.hasZ?t.z:0,R[0]=e.x,R[1]=e.y,R[2]=e.hasZ?e.z:0,function(t,e,n){const r=w(t,e,n);return null!=r?{direct:(0,i.yG)(r.direct,r.unit),horizontal:(0,i.yG)(r.horizontal,r.unit),vertical:(0,i.yG)(r.vertical,r.unit)}:null}(m,R,n)):null}function p(t,e){const{spatialReference:n}=t;return(0,c.fS)(n,e.spatialReference)?(m[0]=t.x,m[1]=t.y,m[2]=t.hasZ?t.z:0,R[0]=e.x,R[1]=e.y,R[2]=e.hasZ?e.z:0,v(m,R,n)):null}function g(t,e){const{spatialReference:n}=t;return(0,c.fS)(n,e.spatialReference)?(m[0]=t.x,m[1]=t.y,m[2]=t.hasZ?t.z:0,R[0]=e.x,R[1]=e.y,R[2]=e.hasZ?e.z:0,E(m,R,n)):null}function y(t,e){const{spatialReference:n}=t;return(0,c.fS)(n,e.spatialReference)?(m[0]=t.x,m[1]=t.y,m[2]=t.hasZ?t.z:0,R[0]=e.x,R[1]=e.y,R[2]=e.hasZ?e.z:0,S(m,R,n)):null}function _(t){return null!=t?b(t.hasZ?t.z:0,t.spatialReference):null}function b(t,e){const n=(0,s.y)(e);return null!=n?(0,i.yG)(t??0,n):null}function v(t,e,n){const s=w(t,e,n,r.Direct);return null!=s?(0,i.yG)(s.direct,s.unit):null}function E(t,e,n){const s=w(t,e,n,r.Horizontal);return null!=s?(0,i.yG)(s.horizontal,s.unit):null}function S(t,e,n){const s=w(t,e,n,r.Vertical);return null!=s?(0,i.yG)(s.verticalSigned,s.unit):null}function w(t,e,n,i){const a=(0,l.m)(n),c=(0,s.j5)(a);if(null==c)return null;const h=e[2]-t[2];if(i===r.Vertical)return{verticalSigned:h,unit:c};if(!(0,u.S)(t,n,T,a)||!(0,u.S)(e,n,L,a))return null;if(i===r.Direct)return{direct:(0,o.j)(L,T),unit:c};if((0,o.i)(N,t[0],t[1],e[2]),!(0,u.S)(N,n,N,a))return null;const f=(0,o.j)(N,L);return i===r.Horizontal?{horizontal:f,unit:c}:{direct:(0,o.j)(L,T),horizontal:f,vertical:Math.abs(h),unit:c}}!function(t){t[t.Direct=0]="Direct",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(r||(r={}));const m=(0,a.Ue)(),R=(0,a.Ue)(),T=(0,a.Ue)(),L=(0,a.Ue)(),N=(0,a.Ue)()},55274:function(t,e,n){n.d(e,{H:function(){return f}});var r=n(1925),i=n(82846),s=n(62197),o=n(47034),a=n(95872),u=n(8554),c=n(10618);function l(t,e,n){return(0,c.T5)(n,d,p,t,e,n)}const h={geodesicLength:function(t){const{spatialReference:e}=t;return(0,c.T5)(e,g,y,t)},geodesicDistanceBetweenPoints:function(t,e){if(!(0,u.fS)(t.spatialReference,e.spatialReference))return null;const{spatialReference:n}=t;return b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,v[0]=e.x,v[1]=e.y,v[2]=e.hasZ?e.z:0,l(b,v,n)},geodesicDistance:l};async function f(){return await(0,o.l)(),h}function d(t,e,n){return(0,r.yG)((0,a.cA)(_,t,e,n).distance,"meters")}function p(t,e,n){return(0,r.yG)((0,o.e)(function(t,e,n){return new s.Z({spatialReference:n,paths:[[[...t],[...e]]]})}(t,e,n),{unit:"meters"}),"meters")}function g(t){return(0,r.yG)((0,a.Jf)([t],"meters")[0],"meters")}function y(t){return(0,r.yG)((0,o.e)(t,{unit:"meters"}),"meters")}const _=new a._q,b=(0,i.Ue)(),v=(0,i.Ue)()},10618:function(t,e,n){n.d(e,{T5:function(){return o},Yo:function(){return a},op:function(){return s}});var r=n(95872),i=n(8554);function s(t){return(0,r.Gb)(t)||(0,i.sS)(t)}function o(t,e,n,...i){return(0,r.Gb)(t)?e.apply(void 0,i):t.isWebMercator?n.apply(void 0,i):null}const a=1e5},11465:function(t,e,n){n.d(e,{SP:function(){return r},UG:function(){return l},dU:function(){return c},k0:function(){return a},xO:function(){return u}});n(99574);var r,i=n(26821),s=n(41788);function o(t,e){return t[0]*e[1]-t[1]*e[0]}function a(t,e,n,r,s=n){return(0,i.$X)(f,r,n),(0,i.$X)(p,e,s),function(t,e,n){const r=(0,i.AK)(n,e)/(0,i.we)(n);(0,i.bA)(t,n,r)}(g,p,f),(0,i.IH)(t,s,g)}function u(t,e,n,r){(0,i.$X)(f,e,n);const s=r/(0,i.kE)(f);return(0,i.od)(t,n,f,s)}function c(t,e){const n=t.start,s=t.end,a=e.start,u=e.end,c=(0,i.$X)(f,s,n),l=(0,i.$X)(d,u,a),y=o(c,l);if(Math.abs(y)<=h)return[];const _=(0,i.$X)(p,n,a),b=o(l,_)/y,v=o(c,_)/y;if(b>=0){if(v>=0||e.type===r.LINE)return[(0,i.od)(g,n,c,b)]}else if(t.type===r.LINE&&(v>=0||e.type===r.LINE))return[(0,i.od)(g,n,c,b)];return[]}function l(t,e,n){const s=[],o=(0,i.$X)(f,t.end,t.start),a=(0,i.$X)(d,t.start,e),u=(0,i.we)(o),c=2*(0,i.AK)(o,a),l=c*c-4*u*((0,i.we)(a)-n*n);if(0===l){const e=-c/(2*u);(t.type===r.LINE||e>=0)&&s.push((0,i.od)(g,t.start,o,e))}else if(l>0){const e=Math.sqrt(l),n=(-c+e)/(2*u);(t.type===r.LINE||n>=0)&&s.push((0,i.od)(g,t.start,o,n));const a=(-c-e)/(2*u);(t.type===r.LINE||a>=0)&&s.push((0,i.od)(p,t.start,o,a))}return s}!function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"}(r||(r={}));const h=1e-6,f=(0,s.Ue)(),d=(0,s.Ue)(),p=(0,s.Ue)(),g=(0,s.Ue)()},7012:function(t,e,n){n.d(e,{$7:function(){return R},Au:function(){return S},CJ:function(){return E},Jk:function(){return x},Nn:function(){return g},SD:function(){return f},UG:function(){return v},Yf:function(){return w},ZE:function(){return b},fK:function(){return d},hA:function(){return T},hm:function(){return p},rq:function(){return L},sc:function(){return _},z9:function(){return y},zf:function(){return N}});var r=n(99574),i=n(26821),s=n(41788),o=n(24910),a=n(82846),u=n(66130),c=n(77773),l=n(22365),h=n(11465);function f({start:t,end:e,type:n},r,o){const a=[],u=(0,i.$X)(P,e,t),c=(0,i.$X)(C,t,r),l=(0,i.we)(u),h=2*(0,i.AK)(u,c),f=h*h-4*l*((0,i.we)(c)-o*o);if(0===f){const e=-h/(2*l);(n===x.PLANE||e>=0)&&a.push((0,i.od)((0,s.Ue)(),t,u,e))}else if(f>0){const e=Math.sqrt(f),r=(-h+e)/(2*l);(n===x.PLANE||r>=0)&&a.push((0,i.od)((0,s.Ue)(),t,u,r));const o=(-h-e)/(2*l);(n===x.PLANE||o>=0)&&a.push((0,i.od)((0,s.Ue)(),t,u,o))}return a}function d(t,e){const n=t.start,r=t.end,s=(0,i.$X)(P,r,n),c=(0,o.i)(z,-s[1],s[0],0),l=e.start,f=e.end,d=(0,o.a)(q,f,l),p=(0,o.e)(d,c),g=(0,o.i)(U,n[0],n[1],0),y=(0,o.a)(j,g,l),_=(0,o.e)(y,c),b=(0,u.bn)();if(Math.abs(p)<b)return Math.abs(_),[];const v=(0,o.b)(k,l,d,_/p);if(e.type===h.SP.RAY){const t=(0,o.a)(Z,v,l);if((0,o.e)(t,d)<-b)return[]}if(t.type===x.HALF_PLANE){const t=(0,i.lu)(C,v,n);if((0,i.AK)(t,s)<-b)return[]}return[(0,a.d9)(v)]}function p(t,e){return function({start:t,end:e,type:n},r){const i=(0,o.a)(A,r,t),s=(0,o.a)(z,e,t),c=(0,o.h)(q,s,i),l=(0,o.y)(c)/(0,o.y)(s),f=(0,u.bn)();if(l<f)switch(n){case h.SP.LINE:return[(0,a.d9)(r)];case h.SP.RAY:return(0,o.e)(s,i)<-f?[]:[(0,a.d9)(r)]}return[]}(m(I,e[2],t),e)}function g(t,e){return S(m(I,0,t),m(G,0,e)).map((([t,e])=>(0,s.al)(t,e)))}function y(t,e,n){return b(t,m(I,t[2],e),n)}function _(t,e,n,r=(0,a.Ue)()){const s=(0,i.$X)(P,t,e),o=(0,i.kE)(s);return(0,i.od)(r,e,s,0===o?1:n/o),r[2]=t[2],r}function b(t,{start:e,end:n,type:r},i=(0,a.Ue)()){const s=(0,o.a)(A,t,e),u=(0,o.a)(z,n,e),c=(0,o.e)(s,u)/(0,o.e)(u,u);return(0,o.b)(i,e,u,r===h.SP.RAY?Math.max(c,0):c)}const v=(()=>{const t=(0,a.Ue)(),e=(0,a.Ue)(),n=(0,a.Ue)();return({start:r,end:u},{center:f,radius:d,normal:p,slicePlane:g})=>{const y=(0,c.Yq)(f,p,D);if(T((0,c.TE)(y,r),0)&&T((0,c.TE)(y,u),0)){(0,l._F)(p,t,e);const c=(r,s)=>((0,o.d)(n,s,f),(0,i.t8)(r,(0,o.e)(n,t),(0,o.e)(n,e)),r),y=(0,h.UG)({start:c(P,r),end:c(C,u),type:h.SP.LINE},s.AG,d),_=[];for(const[n,r]of y){const i=(0,o.c)((0,a.Ue)(),f);(0,o.b)(i,i,t,n),(0,o.b)(i,i,e,r),g&&!N(g,i)||_.push(i)}return _}const _=(0,a.Ue)();return(0,c.fn)(y,r,u,_)?!T((0,o.j)(_,f),d)||g&&!N(g,_)?[]:[_]:[]}})();function E({start:t,end:e,type:n},r,s){const u=[],c=(0,o.d)(A,e,t),l=(0,i.$X)(C,t,r),f=(0,i.we)(c),d=2*(0,i.AK)(c,l),p=d*d-4*f*((0,i.we)(l)-s*s);if(0===p){const e=-d/(2*f);(n===h.SP.LINE||e>=0)&&u.push((0,o.b)((0,a.Ue)(),t,c,e))}else if(p>0){const e=Math.sqrt(p),r=(-d+e)/(2*f);(n===h.SP.LINE||r>=0)&&u.push((0,o.b)((0,a.Ue)(),t,c,r));const i=(-d-e)/(2*f);(n===h.SP.LINE||i>=0)&&u.push((0,o.b)((0,a.Ue)(),t,c,i))}return u}function S(t,e){const n=t.start,r=t.end,i=e.start,s=e.end,c=(0,o.a)(A,r,n),l=(0,o.a)(z,s,i),f=(0,o.a)(q,i,n),d=(0,o.h)(U,c,l);if(!T((0,o.e)(f,d),0))return[];const p=(0,o.y)(d);if(T(p,0))return[];const g=(0,o.h)(j,f,l),y=(0,o.e)(g,d)/p,_=(0,o.b)(k,n,c,y);if(t.type===h.SP.RAY){const t=(0,o.a)(Z,_,n);if((0,o.e)(c,t)<-(0,u.bn)())return[]}if(e.type===h.SP.RAY){const t=(0,o.a)(Z,_,i);if((0,o.e)(l,t)<-(0,u.bn)())return[]}return[(0,a.d9)(_)]}function w(t,e,n,r){const[o,a]=t,[u,c]=n,l=u-o,h=c-a,f=l*l+h*h,d=Math.sqrt(f);if(d>e+r)return[];if(d<Math.abs(e-r))return[];if(T(d,0)&&T(e,r))return[];const p=(e*e-r*r+f)/(2*d),g=Math.sqrt(e*e-p*p),y=g*h/d,_=g*l/d,[b,v]=(0,i.t7)(P,t,n,p/d);return T(y,_)?[(0,s.al)(b,v)]:[(0,s.al)(b+y,v-_),(0,s.al)(b-y,v+_)]}function m(t,e,{start:n,end:r,type:i}){return(0,o.i)(t.start,n[0],n[1],e),(0,o.i)(t.end,r[0],r[1],e),t.type=M[i],t}function R(t,e){return T(t[2],e[2])}function T(t,e){return(0,r.W8)(Math.abs(t-e),0,(0,u.bn)())}function L(t,e){return e.filter((e=>N(t,e)))}function N(t,e){return(0,c.Ac)(t,e)}var x;!function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"}(x||(x={}));const M={[x.PLANE]:h.SP.LINE,[x.HALF_PLANE]:h.SP.RAY},P=(0,s.Ue)(),C=(0,s.Ue)(),A=(0,a.Ue)(),z=(0,a.Ue)(),q=(0,a.Ue)(),U=(0,a.Ue)(),j=(0,a.Ue)(),k=(0,a.Ue)(),Z=(0,a.Ue)(),D=(0,c.Ue)(),I={start:(0,a.Ue)(),end:(0,a.Ue)(),type:h.SP.LINE},G={start:(0,a.Ue)(),end:(0,a.Ue)(),type:h.SP.LINE}},27250:function(t,e,n){n.d(e,{m:function(){return o}});var r=n(47925),i=n(70331),s=n(8554);function o(t){return(0,s.N$)(t)?(0,s.oR)(t)||(0,s.sS)(t)||(0,s.yW)(t)||(0,r.fY)(t)?i.wY:t:(0,i.rS)(t)}},62052:function(t,e,n){n.d(e,{s:function(){return s}});var r=n(15322);class i extends r.G{constructor(t,e){super(t,e,"webmap")}}function s(t){return null!=t&&"object"==typeof t&&"declaredClass"in t&&"esri.WebMap"===t.declaredClass}new i(2,34)}}]);