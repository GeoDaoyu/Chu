"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[56078,65871,31986],{46451:function(e,t,n){n.d(t,{Z:function(){return v}});var r,i=n(73440),o=n(997),s=n(89314),a=n(85168),l=n(63255),u=n(96711),c=n(90403),p=n(67908),d=n(17155),f=(n(61432),n(83850),n(48023)),h=n(69306),y=n(90756),m=n(98842),g=n(15083),b=n(68578);function C(e){if(null==e)return null;const t={};for(const n in e){const r=e[n];r&&(t[n]=r.toJSON())}return 0!==Object.keys(t).length?t:null}let v=class extends(s.Z.ClonableMixin(l.Z)){static{r=this}constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:(0,p.D)(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&(0,a.bP)(u.Z.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),"mesh"!==e?.type&&this._notifyLayer("geometry",t,e))}set popupTemplate(e){const t=this._get("popupTemplate");t!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new r({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[t,this.sourceLayer,this.layer])if(n){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&null!=n.defaultPopupTemplate)return n.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes={[e]:t}}getObjectId(){const e=this.sourceLayer??this.layer;return e?(0,g.v)(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){return{aggregateGeometries:C(this.aggregateGeometries),geometry:null!=this.geometry?this.geometry.toJSON():null,symbol:null!=this.symbol?this.symbol.toJSON():null,attributes:(0,h.A)(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if("mesh"===t?.type){const n={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",n,n,e.action)}}_notifyLayer(e,t,n,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:n};"origin-transform"===e&&(i.action=r),"attributes"===e&&(i.attributeName=r),this.layer.graphicChanged(i)}_watchMeshGeometryChanges(){this.addHandles([(0,c.gx)((()=>"mesh"===this.geometry?.type&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0),(({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())})),(0,c.gx)((()=>"mesh"===this.geometry?.type?{vertexAttributes:this.geometry.vertexAttributes}:void 0),(()=>{const e=this.geometry;"mesh"===e?.type&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(e,t)=>e===t,sync:!0})])}};(0,i._)([(0,d.Cb)({value:null,json:{read:function(e){if(!e)return null;const t={};for(const n in e){const r=(0,y.im)(e[n]);r&&(t[n]=r)}return 0!==Object.keys(t).length?t:null}}})],v.prototype,"aggregateGeometries",null),(0,i._)([(0,d.Cb)({value:null})],v.prototype,"attributes",null),(0,i._)([(0,d.Cb)({value:null,types:m.qM,json:{read:y.im}})],v.prototype,"geometry",null),(0,i._)([(0,d.Cb)({type:Boolean})],v.prototype,"isAggregate",void 0),(0,i._)([(0,d.Cb)({clonable:!1})],v.prototype,"layer",void 0),(0,i._)([(0,d.Cb)({clonable:"reference"})],v.prototype,"origin",void 0),(0,i._)([(0,d.Cb)({type:o.Z,value:null})],v.prototype,"popupTemplate",null),(0,i._)([(0,d.Cb)({clonable:"reference"})],v.prototype,"sourceLayer",void 0),(0,i._)([(0,d.Cb)({value:null,types:b.LB})],v.prototype,"symbol",null),(0,i._)([(0,d.Cb)({clonable:!1,json:{read:!1,write:!1}})],v.prototype,"_version",void 0),(0,i._)([(0,d.Cb)({type:Boolean,value:!0})],v.prototype,"visible",null),v=r=(0,i._)([(0,f.j)("esri.Graphic")],v)},12853:function(e,t,n){n.d(t,{z:function(){return i}});var r=n(69071);class i{constructor(e,t){this.removeFunc=t,this._storage=new r.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,n=1){this._storage.put(this,e,t,n,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},69071:function(e,t,n){n.d(t,{Jv:function(){return i},M4:function(){return r},WJ:function(){return a},Xq:function(){return s},lN:function(){return o}});const r=-3,i=r-1;var o;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(o||(o={}));class s{constructor(e,t,n,r=0){this.name=e,this._storage=t,this.removeFunc=n,this._defaultPriority=r,this.id=`${l++}${c}`,this.size=0,this._hit=0,this._miss=0,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}set maxSize(e){this._storage.setMaxSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,n=this._defaultPriority){this._storage.put(this,e,t,t.cachedMemory,n)}pop(e){const t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){const t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t){this._storage.updateSize(this,e,t,t.cachedMemory)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}*[Symbol.iterator](){yield*this._storage.values(this)}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class a{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){return this._db.get(e.id+t)?.size??0}put(e,t,n,s,a){t=e.id+t;const l=this._db.get(t);if(l&&(this._size-=l.size,e.size-=l.size,this._db.delete(t),l.entry!==n&&this._notifyRemove(t,l.entry,l.size,o.ALL)),s>this._maxSize)return void this._notifyRemove(t,n,s,o.ALL);if(void 0===n)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${t}`),void this._notifyRemove(t,n,0,o.ALL);const c=1+Math.max(a,i)-r;this._db.set(t,new u(n,s,c)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,t,n,r){t=e.id+t;const i=this._db.get(t);if(i&&i.entry===n){for(this._size-=i.size,e.size-=i.size;r>this._maxSize;){const e=this._notifyRemove(t,n,r,o.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);r=e}i.size=r,this._size+=r,e.size+=r,this._checkSize()}}pop(e,t){t=e.id+t;const n=this._db.get(t);if(n)return this._size-=n.size,e.size-=n.size,this._db.delete(t),++this._hit,n.entry;++this._miss}get(e,t){t=e.id+t;const n=this._db.get(t);if(void 0!==n)return this._db.delete(t),n.lives=n.lifetime,this._db.set(t,n),++this._hit,n.entry;++this._miss}peek(e,t){const n=this._db.get(e.id+t);return n?++this._hit:++this._miss,n?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},n=new Array;this._db.forEach(((e,r)=>{const i=e.lifetime;n[i]=(n[i]||0)+e.size,this._users.forEach((n=>{const{id:i,name:o}=n;if(r.startsWith(i)){const n=t[o]||0;t[o]=n+e.size}}))}));const i={};this._users.forEach((e=>{const n=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const r=t[n]||0;t[n]=r,i[n]=Math.round(100*e.hitRate)+"%"}else i[n]="0%"}));const o=Object.keys(t);o.sort(((e,n)=>t[n]-t[e])),o.forEach((n=>e[n]=Math.round(t[n]/2**20)+"MB / "+i[n]));for(let t=n.length-1;t>=0;--t){const i=n[t];i&&(e["Priority "+(t+r-1)]=Math.round(i/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemove(n,e.entry,e.size,o.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,o.ALL))),this._users.forEach((e=>e.size=0)),this._size=0,this._db.clear()}*values(e){for(const[t,n]of this._db)t.startsWith(e.id)&&(yield n.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,n,r){const i=this._users.get(e.split(c)[0])?.removeFunc,o=i?.(t,r,n);return"number"==typeof o?o:null}_checkSize(){this._sizeLimits.forEach(((e,t)=>this._checkSizeLimits(e,t))),this._checkSizeLimits(this.maxSize)}setMaxSize(e,t){null==t||t<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,t)}_checkSizeLimits(e,t){const n=t??this;if(n.size<=e)return;const r=t?.id;let i=!0;for(;i;){i=!1;for(const[o,s]of this._db)if(0===s.lifetime&&(!r||o.startsWith(r))){const r=t??this._users.get(o.split(c)[0]);if(this._purgeItem(o,s,r),n.size<=.9*e)return;i||=this._db.has(o)}}for(const[i,o]of this._db)if(!r||i.startsWith(r)){const r=t??this._users.get(i.split(c)[0]);if(this._purgeItem(i,o,r),n.size<=.9*e)return}}_purgeItem(e,t,n){if(this._db.delete(e),t.lives<=1){this._size-=t.size,n&&(n.size-=t.size);const r=this._notifyRemove(e,t.entry,t.size,o.SOME);null!=r&&r>0&&(this._size+=r,n&&(n.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let l=0;class u{constructor(e,t,n){this.entry=e,this.size=t,this.lifetime=n,this.lives=n}}const c=":"},58426:function(e,t,n){n.d(t,{$c:function(){return f},Hg:function(){return h},jW:function(){return d},xb:function(){return y}});var r=n(70880),i=n(43254),o=n(22018);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof r.Z}function l(e){return e instanceof i.Z?Object.keys(e.items):a(e)?(0,o.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof i.Z?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function p(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const r=l(e),i=l(t);if(0===r.length&&0===i.length)return;if(!r.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=i.filter((e=>!r.includes(e))),d=r.filter((e=>!i.includes(e))),f=r.filter((n=>i.includes(n)&&u(e,n)!==u(t,n))).concat(o,d).sort(),h=c(e);if(h&&s.has(h)&&f.length)return{type:"complete",oldValue:e,newValue:t};let y;const m=a(e)&&a(t);for(const r of f){const i=u(e,r),o=u(t,r);let s;if((m||"function"!=typeof i&&"function"!=typeof o)&&i!==o&&(null!=i||null!=o)){if(n&&n[r]&&"function"==typeof n[r])s=n[r]?.(i,o);else if(i instanceof Date&&o instanceof Date){if(i.getTime()===o.getTime())continue;s={type:"complete",oldValue:i,newValue:o}}else s="object"==typeof i&&"object"==typeof o&&c(i)===c(o)?p(i,o):{type:"complete",oldValue:i,newValue:o};null!=s&&(null!=y?y.diff[r]=s:y={type:"partial",diff:{[r]:s}})}}return y}function d(e,t){return function(e,t){if(null==e)return!1;const n=t.split(".");let r=e;for(const e of n){if("complete"===r.type)return!0;if("partial"!==r.type)return!1;{const t=r.diff[e];if(!t)return!1;r=t}}return!0}(e,t)}function f(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}function y(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!y(e))return!1;for(const e of t.removed)if(!y(e))return!1;for(const e of t.changed)if(!y(e))return!1;return!0}case"partial":for(const t in e.diff)if(!y(e.diff[t]))return!1;return!0}}},92643:function(e,t,n){n.d(t,{Ch:function(){return D},EX:function(){return F},G:function(){return L},H0:function(){return G},Ht:function(){return z},K6:function(){return x},O:function(){return O},WC:function(){return E},Y3:function(){return w},_Y:function(){return _},_j:function(){return R},c9:function(){return N},gp:function(){return j},jQ:function(){return u},mj:function(){return A},nR:function(){return Z},sJ:function(){return I},vG:function(){return P},xr:function(){return M}});var r=n(53147),i=n(3480),o=n(28947),s=n(99574),a=n(73749),l=n(27583);function u(e){return"r"in e&&"g"in e&&"b"in e}function c(e){return"h"in e&&"s"in e&&"v"in e}function p(e){return"l"in e&&"a"in e&&"b"in e}function d(e){return"l"in e&&"c"in e&&"h"in e}const f=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function y(e,t){const n=[];let r,i;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let a=0;for(r=0;r<o;r++){for(a=0,i=0;i<s;i++)a+=e[r][i]*t[i];n.push(a)}return n}function m(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),n=y(f,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function g(e){const t=y(h,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function b(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function C(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function v(e){return function(e){const t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o=o>0?o:o+2*Math.PI,{l:t,c:i,h:o}}(b(m(e)))}function S(e){return g(C(function(e){const t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}(e)))}function M(e){return u(e)?e:d(e)?S(e):p(e)?function(e){return g(C(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?g(e):c(e)?function(e){const t=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,i=r*n,o=i*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:i,g:o,b:0};break;case 1:s={r:o,g:i,b:0};break;case 2:s={r:0,g:i,b:o};break;case 3:s={r:0,g:o,b:i};break;case 4:s={r:o,g:0,b:i};break;case 5:case 6:s={r:i,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+r-i),s.g=Math.round(s.g+r-i),s.b=Math.round(s.b+r-i),s}(e):e}function _(e){return c(e)?e:function(e){const t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),o=i-Math.min(t,n,r);let s=i,a=0===o?0:i===t?(n-r)/o%6:i===n?(r-t)/o+2:(t-n)/o+4,l=0===o?0:o/s;return a<0&&(a+=6),a*=60,l*=100,s*=100/255,{h:a,s:l,v:s}}(M(e))}function w(e){return p(e)?e:function(e){return b(m(e))}(M(e))}function I(e){return d(e)?e:v(M(e))}function T(e){let{r:t,g:n,b:i,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),n=Math.round(o*n+255*(1-o)),i=Math.round(o*i+255*(1-o))),new r.Z({r:t,g:n,b:i})}function F(e,t){const{r:n,g:r,b:i}=t?.ignoreAlpha?e:T(e);return.2126*n+.7152*r+.0722*i}var x,k;function A(e,t=x.High){return F(e,{ignoreAlpha:!0})>t?new r.Z([0,0,0,e.a]):new r.Z([255,255,255,e.a])}function R(e,t){const n=w(e);n.l*=1-t;const r=M(n),i=e.clone();return i.setColor(r),i.a=e.a,i}function L(e,t){const n=e.clone();return n.a*=t,n}function P(e,t){const n=_(e);n.s*=t;const r=M(n),i=e.clone();return i.setColor(r),i.a=e.a,i}function O(e){return r.Z.toUnitRGBA(e)}function E(e,t){return e===t||null!=e&&e.equals(t)}function z(e,t){return e===t||null!=e&&null!=t&&(0,a.e)(e,t)}function j(e){return(0,l.al)(e[0],e[1],e[2],e.length>3?e[3]:1)}function N(e){return e[0]??=0,e[1]??=0,e[2]??=0,e}function Z(e){return e.length=4,N(e),e[3]??=1,(0,s.uZ)(e[3],0,1),e}function D(e,t){const n=r.Z.toUnitRGBA(e);return n[3]*=t,n}function G(e,t,n={}){if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new r.Z(e):e))).length||1===t){const n=[],r=e[0];for(let e=0;e<t;e++)n.push(r.clone());return n}if(n.shuffle&&(e=(0,i.TV)((0,o.d9)(e),n.seed)),e.length>=t){const n=[],r=(e.length-1)/(t-1);for(let i=0;i<t;i++){const t=Math.round(i*r);n.push(e[t].clone())}return n}return function(e,t,n={}){const r=[],o=e.length-1,s=Math.ceil((t-e.length)/o);e:for(let i=0;i<o;i++){const o=e[i],a=e[i+1];for(let i=1;i<=s;i++){const l=i/(s+1);if(r.push(q(o,a,l,n)),r.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,i.TV)(r,n.seed??1)]}(e,t,n)}(k=x||(x={}))[k.Low=160]="Low",k[k.High=225]="High";const B=(e,t)=>{const n=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+n))};function q(e,t,n,o={}){const s=e.r,a=e.g,l=e.b,u=t.r,c=t.g,p=t.b,d=Math.round(s+(u-s)*n),f=Math.round(a+(c-a)*n),h=Math.round(l+(p-l)*n);if(!o.offset)return new r.Z([d,f,h]);const y=(0,i.FS)(o.seed);return new r.Z([B(d,y),B(f,y),B(h,y)])}},332:function(e,t,n){n.d(t,{G:function(){return s},w:function(){return a}});var r=n(29292),i=n(43254),o=n(97006);async function s(e,t){return await e.load(),a(e,t)}async function a(e,t){const n=[],s=(...e)=>{for(const t of e)null!=t&&(Array.isArray(t)?s(...t):i.Z.isCollection(t)?t.forEach((e=>s(e))):o.Z.isLoadable(t)&&n.push(t))};t(s);let a=null;if(await(0,r.UI)(n,(async e=>{const t=await(0,r.q6)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load());!1!==t.ok||a||(a=t)})),a)throw a.error;return e}},28960:function(e,t,n){n.d(t,{A4:function(){return o},L9:function(){return s},yV:function(){return i}});var r=n(87599);class i{static{this.instance=new r.vF("Etc/UTC")}}function o(e){return e instanceof r.ld?e===i.instance:"unknown"===e?.toString().toLowerCase()}function s(e){return o(e)?i.instance:e}},86640:function(e,t,n){n.d(t,{Z:function(){return g}});var r,i=n(73440),o=n(3480),s=n(41773),a=n(63255),l=n(26636),u=n(8914),c=n(17155),p=(n(61432),n(96711),n(1194)),d=n(48023),f=n(29884);const h=(0,s.w)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),y=h.jsonValues.slice();(0,o.e$)(y,"orthometric");const m=(0,s.w)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let g=r=class extends a.Z{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,n){return h.write(e,t,n)}readHeightModel(e,t,n){return h.read(e)||(n?.messages&&n.messages.push(function(e,t){return new u.Z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:n})),null)}readHeightUnit(e,t,n){return m.read(e)||(n?.messages&&n.messages.push(b(e,{context:n})),null)}readHeightUnitService(e,t,n){return(0,l.$C)(e)||m.read(e)||(n?.messages&&n.messages.push(b(e,{context:n})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new r({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const n=(0,l.cM)(t);return new r({heightModel:e.heightModel,heightUnit:n??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new r;return t.read(e,{origin:"web-scene"}),t}};function b(e,t){return new u.Z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}(0,i._)([(0,c.Cb)({type:h.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:y,default:"ellipsoidal",write:{isRequired:!0}}}}})],g.prototype,"heightModel",void 0),(0,i._)([(0,f.c)("web-scene","heightModel")],g.prototype,"writeHeightModel",null),(0,i._)([(0,p.r)(["web-scene","service"],"heightModel")],g.prototype,"readHeightModel",null),(0,i._)([(0,c.Cb)({type:m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m.jsonValues,write:{writer:m.write,isRequired:!0}}}}})],g.prototype,"heightUnit",void 0),(0,i._)([(0,p.r)("web-scene","heightUnit")],g.prototype,"readHeightUnit",null),(0,i._)([(0,p.r)("service","heightUnit")],g.prototype,"readHeightUnitService",null),(0,i._)([(0,c.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],g.prototype,"vertCRS",void 0),(0,i._)([(0,p.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],g.prototype,"readVertCRS",null),g=r=(0,i._)([(0,d.j)("esri.geometry.HeightModelInfo")],g)},60199:function(e,t,n){n.d(t,{QZ:function(){return o},Rq:function(){return s},bg:function(){return i}});var r=n(59384);function i(e,t=!1){return e<=r.c8?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function o(e){return((0,r.fU)(e)?e.byteLength/8:e.length)<=r.c8?Array.from(e):new Float64Array(e)}function s(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}},16447:function(e,t,n){n.d(t,{BD:function(){return I},Cb:function(){return S},FY:function(){return l},G1:function(){return m},G_:function(){return U},HH:function(){return p},I7:function(){return k},JR:function(){return N},KE:function(){return L},TC:function(){return f},Tn:function(){return O},Ue:function(){return s},VK:function(){return h},Wi:function(){return g},Ye:function(){return v},Zp:function(){return x},al:function(){return a},bA:function(){return R},bM:function(){return W},bZ:function(){return Z},be:function(){return _},bf:function(){return C},cS:function(){return z},cv:function(){return A},dp:function(){return w},eZ:function(){return c},fS:function(){return B},gy:function(){return V},is:function(){return D},kK:function(){return F},nX:function(){return d},op:function(){return P},pp:function(){return y},r3:function(){return T},re:function(){return q},sU:function(){return b},t8:function(){return E},wp:function(){return G},wq:function(){return u},wz:function(){return M},y8:function(){return j}});var r=n(71354),i=n(47566),o=n(60199);function s(e=W){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,n,r,i,o,a=s()){return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function l(e,t=s()){return u(e,0,e.length/3,t)}function u(e,t,n,r=s()){return E(r,U),m(r,e,t,n),r}function c(e,t=(0,o.bg)(24)){const[n,r,i,s,a,l]=e;return t[0]=n,t[1]=r,t[2]=i,t[3]=n,t[4]=r,t[5]=l,t[6]=n,t[7]=a,t[8]=i,t[9]=n,t[10]=a,t[11]=l,t[12]=s,t[13]=r,t[14]=i,t[15]=s,t[16]=r,t[17]=l,t[18]=s,t[19]=a,t[20]=i,t[21]=s,t[22]=a,t[23]=l,t}function p(e,t){const n=isFinite(e[2])||isFinite(e[5]);return new r.Z(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function d(e,t,n=s()){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=t[0],n[4]=t[1],n[5]=t[2],n}function f(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function h(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function y(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function m(e,t,n=0,r=t.length/3){let i=e[0],o=e[1],s=e[2],a=e[3],l=e[4],u=e[5];for(let e=0;e<r;e++)i=Math.min(i,t[n+3*e]),o=Math.min(o,t[n+3*e+1]),s=Math.min(s,t[n+3*e+2]),a=Math.max(a,t[n+3*e]),l=Math.max(l,t[n+3*e+1]),u=Math.max(u,t[n+3*e+2]);e[0]=i,e[1]=o,e[2]=s,e[3]=a,e[4]=l,e[5]=u}function g(e,t,n){const r=t.length;let i=e[0],o=e[1],s=e[2],a=e[3],l=e[4],u=e[5];if(n)for(let e=0;e<r;e++){const n=t[e];i=Math.min(i,n[0]),o=Math.min(o,n[1]),s=Math.min(s,n[2]),a=Math.max(a,n[0]),l=Math.max(l,n[1]),u=Math.max(u,n[2])}else for(let e=0;e<r;e++){const n=t[e];i=Math.min(i,n[0]),o=Math.min(o,n[1]),a=Math.max(a,n[0]),l=Math.max(l,n[1])}e[0]=i,e[1]=o,e[2]=s,e[3]=a,e[4]=l,e[5]=u}function b(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function C(e){return e[0]>=e[3]?0:e[3]-e[0]}function v(e){return e[1]>=e[4]?0:e[4]-e[1]}function S(e){return e[2]>=e[5]?0:e[5]-e[2]}function M(e){const t=C(e),n=S(e),r=v(e);return Math.sqrt(t*t+n*n+r*r)}function _(e,t=[0,0,0]){return t[0]=e[0]+C(e)/2,t[1]=e[1]+v(e)/2,t[2]=e[2]+S(e)/2,t}function w(e,t=[0,0,0]){return t[0]=C(e),t[1]=v(e),t[2]=S(e),t}function I(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function T(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]}function F(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function x(e,t){return null==t||F(e,t)}function k(e,t,n){let r=0,i=1;for(let o=0;o<3;++o){const s=e[o],a=e[o+3],l=t[o],u=n[o],c=u<l,p=c?u:l,d=c?l:u,f=Math.max(s,p),h=Math.min(a,d);if(f>h)return!1;if(d===p)break;const y=d-p,m=(f-p)/y,g=(h-p)/y;if(r=Math.max(r,c?1-g:m),i=Math.min(i,c?1-m:g),r>i)return!1}return!0}function A(e,t,n,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i}function R(e,t,n=e){const r=e[0]+C(e)/2,i=e[1]+v(e)/2,o=e[2]+S(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=o+(e[2]-o)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=o+(e[5]-o)*t,n}function L(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function P(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function O(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function E(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function z(e){return e?E(e,U):s(U)}function j(e,t){return t||(t=(0,i.Ue)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function N(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Z(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=i,e[5]=Number.POSITIVE_INFINITY,e}function D(e){return 6===e.length}function G(e){return 0===C(e)&&0===v(e)&&0===S(e)}function B(e,t,n){if(null==e||null==t)return e===t;if(!D(e)||!D(t))return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function q(e,t,n,r,i,o){return a(e,t,n,r,i,o,H)}const V=[-1/0,-1/0,-1/0,1/0,1/0,1/0],U=[1/0,1/0,1/0,-1/0,-1/0,-1/0],W=[0,0,0,0,0,0],H=s()},4469:function(e,t,n){n.d(t,{DE:function(){return a},Nf:function(){return u},dp:function(){return s},o2:function(){return l},yZ:function(){return o}});var r=n(99574),i=n(26636);function o(e,t){const n=t||e.extent,r=e.width,o=(0,i.c9)(n?.spatialReference);return n&&r?n.width/r*o*i.hd*96:0}function s(e,t){return e/((0,i.c9)(t)*i.hd*96)}function a(e){return e/(96*i.hd)}function l(e,t,n){return function(e,t){return 0===t||(0,r.W8)(e,t)||e<t}(e,t)&&function(e,t){return 0===t||(0,r.W8)(e,t)||e>t}(e,n)}function u(e,t){return(0,r.W8)(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}},98842:function(e,t,n){n.d(t,{Mk:function(){return c},P$:function(){return p},qM:function(){return d}});var r=n(41773),i=n(71354),o=n(82890),s=n(82868),a=n(60508),l=n(67764),u=n(62197);const c=(0,r.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),p=(0,r.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),d={base:o.Z,key:"type",typeMap:{extent:i.Z,multipoint:s.Z,point:a.Z,polyline:u.Z,polygon:l.Z}}},24301:function(e,t,n){n.r(t),n.d(t,{default:function(){return Re}});var r=n(73440),i=n(89314),o=n(43254),s=n(88194),a=n(332),l=n(79577),u=n(84060),c=n(93568),p=n(90403),d=n(48797),f=n(95490),h=n(17155),y=(n(61432),n(96711)),m=(n(83850),n(1194)),g=n(48023),b=n(38209),C=n(38448),v=n(58560),S=n(83263),M=n(55591),_=n(7150),w=n(25176),I=n(56192),T=n(85330),F=n(27202),x=n(19306),k=n(3752),A=n(99671),R=n(66619),L=n(93295),P=n(88792),O=n(13545),E=n(76554),z=n(92643),j=n(68886),N=n(22225),Z=n(69258),D=n(43957),G=n(55105),B=n(27737),q=n(30903);const V={key:"type",base:Z.Z,errorContext:"renderer",typeMap:{simple:D.Z,"unique-value":G.Z,"class-breaks":N.Z}},U=(0,j.d)({types:V});const W=["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"];var H=n(997),J=n(15894),Q=n(28947),$=n(97006),Y=n(61100),X=n(60123),K=n(29884),ee=n(71840),te=n(94301),ne=n(45213),re=n(11755),ie=n(89428),oe=n(80862),se=n(56346),ae=n(29191),le=n(99382),ue=n(9350),ce=n(66563);const pe=(0,O.v)();let de=0;function fe(e,t){let n=e.json.write;return"object"!=typeof n&&(n=e.json.write={}),n.ignoreOrigin=!0,t?.spatialOnly&&(n.layerContainerTypes=ee.C),e}function he(e){const t={write:{ignoreOrigin:!0}};return e?.name&&(t.name=e.name),"object"==typeof t.write&&(e?.spatialOnly&&(t.write.layerContainerTypes=ee.C),e?.target&&(t.write.target=e.target)),t}function ye(e){switch(e){case"point":case"multipoint":return ue.xA.clone();case"polyline":return ue.CJ.clone();case"polygon":case"multipatch":return ue.z3.clone();default:return null}}function me(e,t){return null==e?null:t.subtypes?.find((t=>t.code===e))}function ge(e,t){let n=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":n="point";break;case"esriGeometryPolyline":n="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":n="polygon";break;default:t.type,n=null}const r={},i=me(e,t);if(null!=i){const{defaultValues:e}=i;for(const t in e)r[t]=e[t]}return r[t.subtypeField]=e,new re.Z({name:"New Feature",drawingTool:n,prototype:{attributes:r}})}let be=class extends((0,u.R)(i.Z.ClonableMixin(J.Z.IdentifiableMixin($.Z)))){constructor(e){super(e),this.attributeTableTemplate=null,this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${de++}`,this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}load(e){return(0,E.YN)(this.renderer,this.fieldsIndex),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return(0,Y.SC)(e),new se.Z({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,displayField:this.parent?.displayField??"",fields:this.fields,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}get capabilities(){return this.parent?.capabilities}get effectiveCapabilities(){return this.parent?.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){return this.parent?.elevationInfo}get featureTitleFields(){return[...this._titleCreator.requiredFields]}writeFieldOverrides(e,t,n){const{fields:r,parent:i}=this;let o;if(r){o=[];let e=0;r.forEach((({name:t,alias:n,editable:r,visible:s})=>{if(!s)return;const a=i?.fields?.find((e=>e.name===t));if(!a)return;const l={name:t};let u=!1;n!==a.alias&&(l.alias=n,u=!0),r!==a.editable&&(l.editable=r,u=!0),o.push(l),u&&e++})),0===e&&o.length===r.length&&(o=null)}else o=(0,Q.d9)(e);o?.length&&(0,X.RB)(n,o,t)}get fields(){const{parent:e,fieldOverrides:t,subtypeCode:n}=this,r=e?.fields;if(!e||!r?.length)return null;const{subtypes:i,subtypeField:o}=e,s=i?.find((e=>e.code===n)),a=s?.defaultValues,l=s?.domains,u=[];for(const e of r){const r=e.clone(),{name:i}=r,s=t?.find((e=>e.name===i));if(r.visible=!t?.length||!!s,s){const{alias:e,editable:t}=s;e&&(r.alias=e),!1===t&&(r.editable=!1)}const c=a?.[i]??null;r.defaultValue=i===o?n:c;const p=l?.[i]??null;r.domain=i===o?null:p?"inherited"===p.type?r.domain:p.clone():null,u.push(r)}return u}get floorInfo(){return this.parent?.floorInfo}get isTable(){return!!this.parent?.isTable}get geometryType(){return this.parent?.geometryType}get globalIdField(){return this.parent?this.parent.globalIdField:(y.Z.getLogger(this).error(Se("globalIdField")),null)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get objectIdField(){return this.parent||y.Z.getLogger(this).error(Se("objectIdField")),this.parent?.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}get relationships(){return this.parent?.relationships}set renderer(e){(0,E.YN)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?function(e){return new D.Z({symbol:ye(e)})}(e.geometryType):null}readRendererFromService(e,t,n){if("Table"===t.type)return null;const r=t.drawingInfo?.renderer,i=U(r,t,n);let o;const{subtypeCode:s}=this;if(null!=s&&function(e,t){return!(!t||"unique-value"!==e?.type||null==e.field||e.field.toLowerCase()!==t.toLowerCase()||e.field2||e.field3||e.valueExpression)}(i,t.subtypeField)){const e=i.uniqueValueInfos?.find((({value:e})=>(e="number"==typeof e?String(e):e)===String(s)));e&&(o=new D.Z({symbol:e.symbol}))}else"simple"!==i?.type||i.visualVariables?.length||(o=i);return o}readRenderer(e,t,n){const r=t?.layerDefinition?.drawingInfo?.renderer;if(!r)return;const i=r.visualVariables?.some((e=>"rotationInfo"!==e.type));return i?void 0:U(r,t,n)||void 0}get spatialReference(){return this.parent?.spatialReference??ne.Z.WGS84}get subtypeField(){return this.parent?.subtypeField}readTemplatesFromService(e,t){return[ge(this.subtypeCode,t)]}readTitleFromService(e,t){const n=me(this.subtypeCode,t);return null!=n?n.name:null}get url(){return this.parent?.url}get userHasUpdateItemPrivileges(){return!!this.parent?.userHasUpdateItemPrivileges}async addAttachment(e,t){const{parent:n}=this;if(!n)throw Se("addAttachment");if(e.getAttribute(n.subtypeField)!==this.subtypeCode)throw new s.Z("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return n.addAttachment(e,t)}async updateAttachment(e,t,n){const{parent:r}=this;if(!r)throw Se("updateAttachment");if(e.getAttribute(r.subtypeField)!==this.subtypeCode)throw new s.Z("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return r.updateAttachment(e,t,n)}async deleteAttachments(e,t){const{parent:n}=this;if(!n)throw Se("deleteAttachments");if(e.getAttribute(n.subtypeField)!==this.subtypeCode)throw new s.Z("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return n.deleteAttachments(e,t)}async applyEdits(e,t){if(!this.parent)throw Se("applyEdits");return this.parent.applyEdits(e,t)}createPopupTemplate(e){let t=this;const{parent:n,fields:r,title:i}=this;if(n){const{displayField:e,editFieldsInfo:o,objectIdField:s}=n;t={displayField:e,editFieldsInfo:o,fields:r,objectIdField:s,title:i}}return(0,le.eZ)(t,e)}createQuery(){if(!this.parent)throw Se("createQuery");const e=(0,P.rP)(this.parent),t=`${this.parent.subtypeField}=${this.subtypeCode}`;return e.where=(0,d._$)(t,this.parent.definitionExpression),e}getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){if(!t?.excludeImpliedDomains&&this.parent){const t=(0,P.K7)(this.parent,e);if(t)return t}return this._getLayerDomain(e)}async queryAttachments(e,t){const n=await this.load();if(!n.parent)throw Se("queryAttachments");const r=e.clone();return r.where=ve(r.where,n.parent.subtypeField,n.subtypeCode),n.parent.queryAttachments(e,t)}async queryFeatureCount(e,t){const n=await this.load();if(!n.parent)throw Se("queryFeatureCount");return n.parent.queryFeatureCount(Ce(n.parent,n,e),t)}async queryFeatures(e,t){const n=await this.load();if(!n.parent)throw Se("queryFeatures");return n.parent.queryFeatures(Ce(n.parent,n,e),t)}async queryObjectIds(e,t){const n=await this.load();if(!n.parent)throw Se("queryObjectIds");return n.parent.queryObjectIds(Ce(n.parent,n,e),t)}async queryRelatedFeatures(e,t){const n=await this.load();if(!n.parent)throw Se("queryRelatedFeatures");return n.parent.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){const n=await this.load();if(!n.parent)throw Se("queryRelatedFeaturesCount");return n.parent.queryRelatedFeaturesCount(e,t)}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};(0,r._)([(0,h.Cb)({clonable:!1,readOnly:!0})],be.prototype,"_titleCreator",null),(0,r._)([(0,h.Cb)({type:ce.Z,json:he({name:"attributeTableInfo"})})],be.prototype,"attributeTableTemplate",void 0),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"capabilities",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"effectiveCapabilities",null),(0,r._)([(0,h.Cb)({json:he()})],be.prototype,"charts",void 0),(0,r._)([(0,h.Cb)({type:Boolean,nonNullable:!0,json:he({name:"enableEditing"})})],be.prototype,"editingEnabled",void 0),(0,r._)([(0,h.Cb)({type:Boolean,readOnly:!0})],be.prototype,"effectiveEditingEnabled",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"elevationInfo",null),(0,r._)([(0,h.Cb)({clonable:!1,readOnly:!0})],be.prototype,"featureTitleFields",null),(0,r._)([(0,h.Cb)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],be.prototype,"fieldOverrides",void 0),(0,r._)([(0,K.c)("fieldOverrides")],be.prototype,"writeFieldOverrides",null),(0,r._)([(0,h.Cb)({...pe.fields,readOnly:!0,json:{read:!1}})],be.prototype,"fields",null),(0,r._)([(0,h.Cb)(pe.fieldsIndex)],be.prototype,"fieldsIndex",void 0),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"floorInfo",null),(0,r._)([(0,h.Cb)({type:te.Z,json:he({name:"formInfo"})})],be.prototype,"formTemplate",void 0),(0,r._)([(0,h.Cb)({type:String,clonable:!1,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"id",void 0),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"isTable",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"geometryType",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"globalIdField",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"type",void 0),(0,r._)([(0,h.Cb)(fe((0,Q.d9)(L.iR)))],be.prototype,"labelsVisible",void 0),(0,r._)([(0,h.Cb)({type:[ie.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:oe.r},write:{ignoreOrigin:!0,layerContainerTypes:ee.C}}})],be.prototype,"labelingInfo",void 0),(0,r._)([(0,h.Cb)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,layerContainerTypes:ee.C}}})],be.prototype,"layerType",void 0),(0,r._)([(0,h.Cb)(fe((0,Q.d9)(L.rn)))],be.prototype,"legendEnabled",void 0),(0,r._)([(0,h.Cb)({type:["show","hide"]})],be.prototype,"listMode",void 0),(0,r._)([(0,h.Cb)((()=>{const e=(0,Q.d9)(L.rO);return e.json.origins.service.read=!1,fe(e,{spatialOnly:!0})})())],be.prototype,"minScale",void 0),(0,r._)([(0,h.Cb)((()=>{const e=(0,Q.d9)(L.u1);return e.json.origins.service.read=!1,fe(e,{spatialOnly:!0})})())],be.prototype,"maxScale",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],be.prototype,"effectiveScaleRange",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"objectIdField",null),(0,r._)([(0,h.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:he({spatialOnly:!0})})],be.prototype,"opacity",void 0),(0,r._)([(0,h.Cb)({clonable:!1})],be.prototype,"parent",void 0),(0,r._)([(0,h.Cb)(fe((0,Q.d9)(L.C_)))],be.prototype,"popupEnabled",void 0),(0,r._)([(0,h.Cb)({type:H.Z,json:he({name:"popupInfo"})})],be.prototype,"popupTemplate",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],be.prototype,"defaultPopupTemplate",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"relationships",null),(0,r._)([(0,h.Cb)({types:V,json:he({target:"layerDefinition.drawingInfo.renderer",spatialOnly:!0})})],be.prototype,"renderer",null),(0,r._)([(0,m.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],be.prototype,"readRendererFromService",null),(0,r._)([(0,m.r)("renderer",["layerDefinition.drawingInfo.renderer"])],be.prototype,"readRenderer",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"spatialReference",null),(0,r._)([(0,h.Cb)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],be.prototype,"subtypeCode",void 0),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"subtypeField",null),(0,r._)([(0,h.Cb)({type:[re.Z],json:he({name:"layerDefinition.templates"})})],be.prototype,"templates",void 0),(0,r._)([(0,m.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],be.prototype,"readTemplatesFromService",null),(0,r._)([(0,h.Cb)({type:String,json:he()})],be.prototype,"title",void 0),(0,r._)([(0,m.r)("service","title",["subtypes"])],be.prototype,"readTitleFromService",null),(0,r._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],be.prototype,"url",null),(0,r._)([(0,h.Cb)({readOnly:!0})],be.prototype,"userHasUpdateItemPrivileges",null),(0,r._)([(0,h.Cb)({type:Boolean,nonNullable:!0,json:he({name:"visibility",spatialOnly:!0})})],be.prototype,"visible",void 0),be=(0,r._)([(0,g.j)("esri.layers.support.SubtypeSublayer")],be);const Ce=(e,t,n)=>{if(!n)return t.createQuery();const r=ae.Z.from(n);return r.where=ve(r.where,e.subtypeField,t.subtypeCode),r},ve=(e,t,n)=>{const r=new RegExp(`${t}\\s*=\\s*\\d+`),i=`${t}=${n}`,o=e??"";return r.test(o)?o.replace(r,i):(0,d._$)(i,o)},Se=e=>new s.Z("subtype-sublayer:parent-missing",`This sublayer must have a parent SubtypeGroupLayer in order to use ${e}`);var Me=n(83918),_e=n(10852),we=n(43462),Ie=n(3651);const Te="SubtypeGroupLayer";function Fe(e,t){return new s.Z("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function xe(e,t){const n=[];for(const r of e){const e=new be;e.read(r,t),n.push(e)}return n}const ke=(0,O.v)();let Ae=class extends((0,I.B)((0,_.tM)((0,w.o1)((0,S.h7)((0,A.n)((0,k.M)((0,x.Q)((0,v.Y)((0,T.q)((0,F.I)((0,u.R)((0,M.N)((0,C.V)(i.Z.ClonableMixin(b.Z))))))))))))))){constructor(...e){super(...e),this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.sublayers=new(o.Z.ofType(be)),this.useUniqueColorsForSublayers=!0,this.supportedSourceTypes=new Set(["Feature Layer","Table"]),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this._debouncedSaveOperations=(0,c.Ds)((async(e,t,r)=>{const{save:i,saveAs:o}=await n.e(71629).then(n.bind(n,23611));switch(e){case Ie.x.SAVE:return i(this,t);case Ie.x.SAVE_AS:return o(this,r,t)}})),this.addHandles((0,p.YP)((()=>this.sublayers),((e,t)=>this._handleSublayersChange(e,t)),p.Z_))}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null,n=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(c.r9).then((async()=>{if(!this.url)throw new s.Z("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==this.layerId)throw new s.Z("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>(0,P.nU)(this,"load",e)));return this.addResolvingPromise(n),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,P.sX)(this)}get operationalLayerType(){return this.isTable?"SubtypeGroupTable":"SubtypeGroupLayer"}get parsedUrl(){const e=(0,f.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,f.v_)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,{name:t}){return this.url?(0,R.a7)(this.url,t):t}async addAttachment(e,t){const n=await(0,P.JD)(this,e,t,Te);return this.lastEditsEventDate=new Date,n}async updateAttachment(e,t,n){const r=await(0,P.Y5)(this,e,t,n,Te);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return(0,P.Jj)(this,e,t)}on(e,t){return super.on(e,t)}async createGraphicsSource(e){const{default:t}=await(0,c.Hl)(Promise.all([n.e(64246),n.e(86035),n.e(99813),n.e(47062),n.e(48221)]).then(n.bind(n,47062)),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=(0,P.rP)(this),t=this.sublayers.map((e=>e.subtypeCode));return e.where=(0,d._$)(`${this.subtypeField} IN (${t.join(",")})`,this.definitionExpression),e}async deleteAttachments(e,t){const n=await(0,P.FV)(this,e,t,Te);return this.lastEditsEventDate=new Date,n}async fetchRecomputedExtents(e){return(0,P.Ci)(this,e,Te)}findSublayerForFeature(e){const t=this.fieldsIndex.get(this.subtypeField),n=e.attributes[t.name];return this.findSublayerForSubtypeCode(n)}findSublayerForSubtypeCode(e){return this._sublayerLookup.get(e)}getFieldDomain(e,t){if(!t?.excludeImpliedDomains){const t=(0,P.K7)(this,e);if(t)return t}const n=(0,P.k6)(this,t?.feature);if(n){const t=n.domains?.[e];return"inherited"===t?.type?this._getLayerDomain(e):t}return this._getLayerDomain(e)}loadAll(){return(0,a.G)(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,t){return(0,P.SU)(this,e,t,Te)}async queryFeatures(e,t){const n=await this.load(),r=ae.Z.from(e)??n.createQuery(),i=r.outFields??[];i.includes(this.subtypeField)||(i.push(this.subtypeField),r.outFields=i);const o=await n.source.queryFeatures(r,t);if(o?.features)for(const e of o.features)e.layer=e.sourceLayer=this.findSublayerForFeature(e);return o}async queryObjectIds(e,t){return(await(0,P.tD)(this,e,t,Te)).filter(we.hj)}async queryFeatureCount(e,t){return(0,P.VG)(this,e,t,Te)}async queryExtent(e,t){return(0,P.KE)(this,e,t,Te)}async queryRelatedFeatures(e,t){return(0,P.kp)(this,e,t,Te)}async queryRelatedFeaturesCount(e,t){return(0,P.C9)(this,e,t,Te)}async save(e){return this._debouncedSaveOperations(Ie.x.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Ie.x.SAVE_AS,t,e)}write(e,t){const{origin:n,layerContainerType:r,messages:i}=t;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==r)return i?.push(Fe(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===n&&"tables"===r)return i?.push(Fe(this,"using a non-table source cannot be written to tables in web maps")),null;return this.sublayers?.length?super.write(e,t):(i?.push(new s.Z("web-document-write:invalid-property",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,_e.D)(this,e)}async getFeatureTitle(e,t){const n=this.findSublayerForFeature(e);return n?await n.getFeatureTitle(e,t):this._getFeatureTitleForUnknownSublayer(e)}async getFeatureTitles(e,t){const n=new Map,r=new Map,i=[r];e.forEach((e=>{const t=this.findSublayerForFeature(e);if(t)(0,l.s1)(n,t,(()=>[])).push(e);else{const t=e.getObjectId()??e.attributes[this.objectIdField];r.set(t,this._getFeatureTitleForUnknownSublayer(e))}}));const o=await Promise.all(Array.from(n).map((([e,n])=>e.getFeatureTitles(n,t))));return o.forEach((e=>i.push(e))),new Map(i.flatMap((e=>[...e])))}get featureTitleFields(){const e=new Set;for(const t of this.sublayers){const n=t.featureTitleFields;for(const t of n)e.add(t)}return[...e]}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}async _initLayerProperties(e){this._set("source",e);const{sourceJSON:t}=e;if(t&&(this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})),!this.subtypes?.length)throw new s.Z("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");this._verifyFields(),(0,E.UF)(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return(0,P.gG)(this)}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||-1!==e.search(/\/FeatureServer\//i)||this.fields?.some((e=>"geometry"===e.type))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null})),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this.addHandles([e.on("after-add",(({item:e})=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),e.on("after-remove",(({item:e})=>{e.parent=null,this._sublayerLookup.delete(e.subtypeCode)}))],"sublayers-owner"))}_getFeatureTitleForUnknownSublayer(e){const{displayField:t,fieldsIndex:n,objectIdField:r}=this;if(t&&n.has(t))return e.attributes[n.get(t).name]??"";const i=e.getObjectId();return null!=i?i.toString():r&&n.has(r)?e.attributes[n.get(r).name]??"":""}};(0,r._)([(0,h.Cb)({readOnly:!0})],Ae.prototype,"createQueryVersion",null),(0,r._)([(0,h.Cb)({readOnly:!0})],Ae.prototype,"editingEnabled",null),(0,r._)([(0,h.Cb)({readOnly:!0})],Ae.prototype,"effectiveEditingEnabled",null),(0,r._)([(0,h.Cb)({...ke.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ae.prototype,"fields",void 0),(0,r._)([(0,h.Cb)(ke.fieldsIndex)],Ae.prototype,"fieldsIndex",void 0),(0,r._)([(0,h.Cb)(L.id)],Ae.prototype,"id",void 0),(0,r._)([(0,h.Cb)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Ae.prototype,"listMode",void 0),(0,r._)([(0,h.Cb)({type:["SubtypeGroupLayer","SubtypeGroupTable"],json:{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{"web-document":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}},"portal-item":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}}}}})],Ae.prototype,"operationalLayerType",null),(0,r._)([(0,h.Cb)(ke.outFields)],Ae.prototype,"outFields",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],Ae.prototype,"parsedUrl",null),(0,r._)([(0,h.Cb)({clonable:!1})],Ae.prototype,"source",null),(0,r._)([(0,h.Cb)({type:o.Z.ofType(be),json:{origins:{service:{read:{source:"subtypes",reader(e,t,n){let r=null;if(this.useUniqueColorsForSublayers){const i=function(e,t){const n=e.drawingInfo?.renderer,r=n?U(n,e,t):null;if("simple"===r?.type)return(0,q._h)(r.symbol,null)?r.symbol.clone():null}(t,n);r=i?function(e,t){return(0,z.H0)(W,e,{offset:!0,shuffle:!0}).reverse().map((e=>{const n=t.clone();return"cim"===n.type?(0,B.ZB)(n,e):(0,q.tb)(n,e),new D.Z({symbol:n})}))}(e.length,i):null}const i=e.map((({code:e},i)=>{const o=new be({subtypeCode:e});o.read(t,n);const s=r?.[i];return s&&o.read({drawingInfo:{renderer:s.toJSON()}},n),o}));return new(o.Z.ofType(be))(i)}}}},read:{source:["layers","tables"],reader(e,t,n){let r;return"SubtypeGroupLayer"===t.layerType&&t.layers?.length?r=xe(t.layers,n):"SubtypeGroupTable"===t.layerType&&t.tables?.length&&(r=xe(t.tables,n)),new(o.Z.ofType(be))(r)}},write:{ignoreOrigin:!0,writer(e,t,n,r){const i=[];for(const t of e){const e=t.write({},r);i.push(e)}this.isTable?t.tables=i:t.layers=i}}}})],Ae.prototype,"sublayers",void 0),(0,r._)([(0,h.Cb)()],Ae.prototype,"useUniqueColorsForSublayers",void 0),(0,r._)([(0,h.Cb)({type:Me.Z})],Ae.prototype,"timeInfo",void 0),(0,r._)([(0,h.Cb)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],Ae.prototype,"title",void 0),(0,r._)([(0,m.r)("service","title",["name"])],Ae.prototype,"readTitleFromService",null),(0,r._)([(0,h.Cb)({json:{read:!1}})],Ae.prototype,"type",void 0),(0,r._)([(0,h.Cb)({clonable:!1,readOnly:!0})],Ae.prototype,"featureTitleFields",null),Ae=(0,r._)([(0,g.j)("esri.layers.SubtypeGroupLayer")],Ae);const Re=Ae},15083:function(e,t,n){function r(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const n=[];for(const r of t.fieldNames)n.push(e.attributes[r]??null);return JSON.stringify(n)}}}function i(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const n=t.uniqueIdFields.map((t=>e.attributes?.[t]));return JSON.stringify(n)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}n.d(t,{C:function(){return r},v:function(){return i}})},38448:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(73440),i=n(17155),o=(n(61432),n(96711),n(83850),n(48023));const s=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function(e){return"portalItem"in e}(this)?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,r._)([(0,i.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,r._)([(0,o.j)("esri.layers.mixins.APIKeyMixin")],t),t}},58560:function(e,t,n){n.d(t,{Y:function(){return l}});var r=n(73440),i=n(96711),o=n(17155),s=(n(61432),n(83850),n(48023)),a=n(66619);const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.Qc)(this.url);if(e?.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.Nm)(e,i.Z.getLogger(this)))}};return(0,r._)([(0,o.Cb)()],t.prototype,"title",null),(0,r._)([(0,o.Cb)({type:String})],t.prototype,"url",null),t=(0,r._)([(0,s.j)("esri.layers.mixins.ArcGISService")],t),t}},41964:function(e,t,n){n.d(t,{u:function(){return l}});var r,i=n(73440),o=n(63255),s=n(17155),a=(n(61432),n(96711),n(83850),n(48023));let l=r=class extends o.Z{constructor(e){super(e),this.name=null,this.code=null}clone(){return new r({name:this.name,code:this.code})}};(0,i._)([(0,s.Cb)({type:String,json:{write:{isRequired:!0}}})],l.prototype,"name",void 0),(0,i._)([(0,s.Cb)({type:[String,Number],json:{write:{isRequired:!0}}})],l.prototype,"code",void 0),l=r=(0,i._)([(0,a.j)("esri.layers.support.CodedValue")],l)},37127:function(e,t,n){n.d(t,{Z:function(){return p}});var r,i=n(73440),o=n(28947),s=n(17155),a=(n(61432),n(96711),n(79775)),l=n(48023),u=n(41964),c=n(85853);let p=class extends c.Z{static{r=this}constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new r({codedValues:(0,o.d9)(this.codedValues),name:this.name})}};(0,i._)([(0,s.Cb)({type:[u.u],json:{write:{isRequired:!0}}})],p.prototype,"codedValues",void 0),(0,i._)([(0,a.J)({codedValue:"coded-value"})],p.prototype,"type",void 0),p=r=(0,i._)([(0,l.j)("esri.layers.support.CodedValueDomain")],p)},85853:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(73440),i=n(41773),o=n(63255),s=n(17155),a=(n(61432),n(96711),n(83850),n(79775)),l=n(48023);const u=new i.X({inherited:"inherited",codedValue:"coded-value",range:"range"});let c=class extends o.Z{constructor(e){super(e),this.name=null,this.type=null}};(0,r._)([(0,s.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,a.J)(u),(0,s.Cb)({json:{write:{isRequired:!0}}})],c.prototype,"type",void 0),c=(0,r._)([(0,l.j)("esri.layers.support.Domain")],c)},49651:function(e,t,n){n.d(t,{Z:function(){return y}});var r,i=n(73440),o=n(41773),s=n(63255),a=n(17155),l=n(95226),u=(n(61432),n(83850),n(79775)),c=n(1194),p=n(48023),d=n(76746),f=n(72396);const h=new o.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let y=class extends s.Z{static{r=this}constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?.value??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch(e){}return n?h.fromJSON(n.fieldValueType):null}clone(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"alias",void 0),(0,i._)([(0,a.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],y.prototype,"defaultValue",void 0),(0,i._)([(0,a.Cb)()],y.prototype,"description",void 0),(0,i._)([(0,c.r)("description")],y.prototype,"readDescription",null),(0,i._)([(0,a.Cb)({types:d.V5,json:{read:{reader:d.im},write:!0}})],y.prototype,"domain",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"editable",void 0),(0,i._)([(0,a.Cb)({type:l.z8,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],y.prototype,"length",void 0),(0,i._)([(0,a.Cb)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,i._)([(0,a.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"nullable",void 0),(0,i._)([(0,u.J)(f.v)],y.prototype,"type",void 0),(0,i._)([(0,a.Cb)()],y.prototype,"valueType",void 0),(0,i._)([(0,c.r)("valueType",["description"])],y.prototype,"readValueType",null),(0,i._)([(0,a.Cb)({type:Boolean,json:{read:!1}})],y.prototype,"visible",void 0),y=r=(0,i._)([(0,p.j)("esri.layers.support.Field")],y)},299:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(88194),i=n(96711),o=n(79577),s=n(28960),a=n(69306),l=n(76554),u=n(41801),c=n(88097),p=n(87599);const d=new Map;class f{static fromJSON(e){return new f(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new f(e.fields??[],g(e))}static fromLayerJSON(e){return new f(e.fields??[],g(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const n=[];for(const e of this.fields){const t=e?.name,r=y(t);if(t&&r){const i=h(t);this._fieldsMap.set(t,e),this._fieldsMap.set(i,e),this._normalizedFieldsMap.set(r,e),n.push(`${i}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,l.y2)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,l.H7)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,l.Dl)(e)||(0,l.Se)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.Dl)(e)||(0,l.Se)(e)||e.nullable||void 0!==(0,l.os)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(h(e))??this._normalizedFieldsMap.get(y(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(i.Z.getLogger("esri.layers.support.FieldsIndex").errorOnce(new r.Z("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.pt):m.has(t.type)?u._4:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u._4?s.yV.instance:t===u.pt?p.Qf.utcInstance:(0,o.s1)(d,t,(()=>p.vF.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.sX)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,a.A)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function h(e){return e.trim().toLowerCase()}function y(e){return(0,l.q6)(e)?.toLowerCase()??""}const m=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function g(e){const t=new Map;if(!e.fields)return t;const n=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:i}=e,o=(r?"startField"in r?r.startField:r.startTimeField:"")??"",s=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,c.Jv)(e.dateFieldsTimeReference):null,l=i?function(e){return"timeZone"in e}(i)?i.timeZone??a:i.dateFieldsTimeReference?(0,c.Jv)(i.dateFieldsTimeReference):a??u.pt:null,p=r?function(e){return"timeZone"in e}(r)?r.timeZone??a:r.timeReference?(0,c.Jv)(r.timeReference):a:null,d=new Map([[h(i?.creationDateField??""),l],[h(i?.editDateField??""),l],[h(o),p],[h(s),p]]);for(const{name:r,type:i}of e.fields)if(m.has(i))t.set(r,u._4);else if("date"!==i&&"esriFieldTypeDate"!==i)t.set(r,null);else if(n)t.set(r,u._4);else{const e=d.get(h(r??""))??a;t.set(r,e)}return t}},39502:function(e,t,n){n.d(t,{Z:function(){return l}});var r,i=n(73440),o=(n(96711),n(61432),n(83850),n(88194),n(79775)),s=n(48023),a=n(85853);let l=class extends a.Z{static{r=this}constructor(e){super(e),this.type="inherited"}clone(){return new r}};(0,i._)([(0,o.J)({inherited:"inherited"})],l.prototype,"type",void 0),l=r=(0,i._)([(0,s.j)("esri.layers.support.InheritedDomain")],l)},68738:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i=n(73440),o=n(43254),s=n(63255),a=n(17155),l=(n(61432),n(96711),n(83850),n(48023));let u=r=class extends s.Z{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new o.Z}clone(){return new r({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,i._)([(0,a.Cb)({type:String,json:{write:{isRequired:!0}}})],u.prototype,"floorField",void 0),(0,i._)([(0,a.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,i._)([(0,a.Cb)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=r=(0,i._)([(0,l.j)("esri.layers.support.LayerFloorInfo")],u)},95951:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i=n(73440),o=n(17155),s=(n(61432),n(96711),n(83850),n(79775)),a=n(48023),l=n(85853);let u=class extends l.Z{static{r=this}constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,i._)([(0,o.Cb)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]},isRequired:!0}}})],u.prototype,"maxValue",void 0),(0,i._)([(0,o.Cb)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]},isRequired:!0}}})],u.prototype,"minValue",void 0),(0,i._)([(0,s.J)({range:"range"})],u.prototype,"type",void 0),u=r=(0,i._)([(0,a.j)("esri.layers.support.RangeDomain")],u)},73388:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(73440),i=n(89314),o=n(41773),s=n(63255),a=n(17155),l=(n(61432),n(96711),n(83850),n(48023));const u=new o.X({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),c=new o.X({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let p=class extends(i.Z.ClonableMixin(s.Z)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,r._)([(0,a.Cb)({json:{read:u.read,write:u.write}})],p.prototype,"cardinality",void 0),(0,r._)([(0,a.Cb)({json:{name:"catalogID"}})],p.prototype,"catalogId",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"composite",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"id",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"keyField",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"keyFieldInRelationshipTable",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"name",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"relatedTableId",void 0),(0,r._)([(0,a.Cb)({json:{read:!0,write:!0}})],p.prototype,"relationshipTableId",void 0),(0,r._)([(0,a.Cb)({json:{read:c.read,write:c.write}})],p.prototype,"role",void 0),p=(0,r._)([(0,l.j)("esri.layers.support.Relationship")],p)},56346:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(73440),i=n(70880),o=n(3480),s=n(29292),a=n(43254),l=n(17155),u=(n(61432),n(96711),n(48023)),c=n(76554),p=n(3411);let d=class extends i.Z{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.vr)((()=>(0,p.L)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??n.e(11407).then(n.bind(n,11407)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new a.Z;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const t of this.calculatedExpressions?.toArray()??[])try{const n=this._arcadeTask.value.arcade.extractFieldLiterals(t.syntax);for(const t of n){const n=t.split("."),r=this.fieldsIndex.get(n.at(-1)??"");r&&e.add(r.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const n of t){const t=this.fieldsIndex.get(n);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,n){const r=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],n)).get(r)??""}async getTitles(e,t,n){const r=new Map,i=n?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);n?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:s,workingTitle:a}=this,l=a&&s;t.forEach((t=>{const n=t.getObjectId()??t.attributes[e.objectIdField],u=l?o({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:s,globalAttributes:this._createFormattedAttributes(e,t,i).global,layer:e,text:a}):"";r.set(n,u)}))}catch{}return r}async _checkAndReQueryGraphics(e,t){const n=t.map((t=>t.getObjectId()??t.attributes[e.objectIdField])).filter(o.pC);if(n.length!==t.length)return t;if(t.some((e=>!(0,c.R9)(e,this.requiredFields)))){const r=e.createQuery();r.where="1=1",r.outFields=[...this.requiredFields],r.objectIds=n;const i=await e.queryFeatures(r);if(i?.features.length===t.length)return i.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const n of e){if(!n.fieldName)continue;const e=this.fieldsIndex.get(n.fieldName)?.name??n.fieldName;n.fieldName=e,t.set(e.toLowerCase(),n)}return t}_createFormattedAttributes(e,t,n="system"){const r=this.effectivePopupTemplate?.fieldInfos??[],i={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const n=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{i[`expression/${e.name}`]=e.func({vars:{$feature:n}})}catch{}}const o={...t.attributes,...i};return{global:this._featureUtils.formatAttributes({fieldInfos:r,attributes:o,graphic:t,timeZone:n,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,c.ld)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,r._)([(0,l.Cb)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,r._)([(0,l.Cb)()],d.prototype,"_featureUtils",void 0),(0,r._)([(0,l.Cb)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,r._)([(0,l.Cb)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,r._)([(0,l.Cb)()],d.prototype,"displayField",void 0),(0,r._)([(0,l.Cb)()],d.prototype,"effectivePopupTemplate",void 0),(0,r._)([(0,l.Cb)()],d.prototype,"expressionsUsedInTitle",null),(0,r._)([(0,l.Cb)()],d.prototype,"fieldsIndex",void 0),(0,r._)([(0,l.Cb)()],d.prototype,"fieldInfoMap",null),(0,r._)([(0,l.Cb)()],d.prototype,"fields",void 0),(0,r._)([(0,l.Cb)()],d.prototype,"objectIdField",void 0),(0,r._)([(0,l.Cb)()],d.prototype,"requiredFields",null),d=(0,r._)([(0,u.j)("esri.layers.support.TitleCreator")],d)},76746:function(e,t,n){n.d(t,{V5:function(){return a},im:function(){return l}});n(61432);var r=n(37127),i=n(85853),o=n(39502),s=n(95951);const a={key:"type",base:i.Z,typeMap:{range:s.Z,"coded-value":r.Z,inherited:o.Z}};function l(e){if(!e?.type)return null;switch(e.type){case"range":return s.Z.fromJSON(e);case"codedValue":return r.Z.fromJSON(e);case"inherited":return o.Z.fromJSON(e)}return null}},72396:function(e,t,n){n.d(t,{v:function(){return r}});const r=new(n(41773).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},60419:function(e,t,n){n.d(t,{$6:function(){return M},$z:function(){return o},F7:function(){return i},S0:function(){return s},Si:function(){return h},Wr:function(){return m},X4:function(){return p},Zq:function(){return d},d1:function(){return l},dm:function(){return u},eP:function(){return c},fe:function(){return f},sg:function(){return y}});const r=[["binary","application/octet-stream","bin",""]];function i(e,t){return null!=b(t.name,e?.supportedFormats??[])}function o(e,t){if(!e)return!1;const n=u(t,e.supportedFormats??[]);return null!=n&&e.editFormats.includes(n)}function s(e,t){return C(function(e,t){const n=e.toLowerCase();return g(t).find((e=>v(e)===n))}(e,t))}function a(e,t){return C(b(e,t))}function l(e,t){return v(function(e,t){return g(t).find((t=>C(t)===e))}(e,t))}function u(e,t){return a(e.name,t)??s(e.type,t)}function c(e,t,n){return s(e,n)??a(t,n)}function p({supportedFormats:e}){return c("model/gltf-binary","glb",e)}function d(e){const t=p(e);return null!=t&&e.editFormats.includes(t)}function f({supportedFormats:e}){return c("model/gltf+json","gltf",e)}function h(e){if(!e)return null;const t=p(e),n=f(e);let r=null;for(const i of e.queryFormats){if(i===t)return i;i===n&&(r=i)}return r}function y({supportedFormats:e}){return c("application/esri3do-SR_world","wld",e)}function m({supportedFormats:e}){return c("application/esri3do-SR_prj","prj",e)}function g(e){return[...r,...e]}function b(e,t){const n=e.toLowerCase();return g(t).find((e=>S(e).some((e=>n.endsWith(e)))))}function C(e){return e?.[0]}function v(e){return e?.[1].toLowerCase()}function S(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}function M(e){return e.tables?.find((e=>"assetMaps"===e.role))}},48837:function(e,t,n){n.d(t,{UG:function(){return p},UO:function(){return y},YI:function(){return h},dI:function(){return m},el:function(){return S},hV:function(){return f},z7:function(){return d}});var r=n(29138);const i="__begin__",o="__end__",s=new RegExp(i,"ig"),a=new RegExp(o,"ig"),l=new RegExp("^"+i,"i"),u=new RegExp(o+"$","i"),c='"';function p(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function d(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=p(e.labelExpression),t.type="conventional"),t}function h(e){const t=f(e);if(!t)return null;switch(t.type){case"conventional":return m(t.expression);case"arcade":return t.expression}return null}function y(e){const t=f(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e?.match(g);return t?.[1].trim()||null}(t.expression);case"arcade":return S(t.expression)}return null}function m(e){let t;return e?(t=(0,r.gx)(e,(e=>i+'$feature["'+e+'"]'+o)),t=l.test(t)?t.replace(l,""):c+t,t=u.test(t)?t.replace(u,""):t+c,t=t.replaceAll(s,'" + ').replaceAll(a,' + "')):t='""',t}const g=/^\s*\{([^}]+)\}\s*$/i;const b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,C=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function S(e){if(!e)return null;let t=b.exec(e)||C.exec(e);return t?t[1]||t[3]:(t=v.exec(e),t?t[2]:null)}},25835:function(e,t,n){n.d(t,{h:function(){return h},j:function(){return I}});var r=n(61432),i=n(66619),o=n(60419);function s(e,t,n){return!!l(e,t,n)}function a(e,t,n){return l(e,t,n)}function l(e,t,n){return e&&e.hasOwnProperty(t)?e[t]:n}const u={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function c(e){const t=e?.supportedSpatialAggregationStatistics?.map((e=>e.toLowerCase()));return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function p(e,t){const n=e?.supportedOperationsWithCacheHint?.map((e=>e.toLowerCase()));return!!n?.includes(t.toLowerCase())}function d(e){const t=e?.supportedStatisticTypes?.map((e=>e.toLowerCase()));return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_cont"),percentileDiscrete:!!t?.includes("percentile_disc"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function f(e){const t=e?.supportedNormalizationTypes?.map((e=>e.toLowerCase()));return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function h(e,t){return{analytics:y(e),attachment:m(e),data:g(e),metadata:b(e),operations:C(e.capabilities,e,t),query:v(e,t),queryAttributeBins:_(e),queryRelated:S(e),queryTopFeatures:M(e),editing:w(e)}}function y(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryAnalytics")}}function m(e){const t=e.attachmentProperties,n={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:s(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:s(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((e=>{const t=u[e.name];t&&(n[t]=!!e.isEnabled)})),n}function g(e){return{isVersioned:s(e,"isDataVersioned",!1),isBranchVersioned:s(e,"isDataBranchVersioned",!1),supportsAttachment:s(e,"hasAttachments",!1),supportsM:s(e,"hasM",!1),supportsZ:s(e,"hasZ",!1)}}function b(e){return{supportsAdvancedFieldProperties:s(e,"supportsFieldDescriptionProperty",!1)}}function C(e,t,n){const r=e?.toLowerCase().split(",").map((e=>e.trim()))??[],o=n?(0,i.Qc)(n):null,a=r.includes("MapServer"===o?.serverType?"data":"query"),l=r.includes("editing")&&!t.datesInUnknownTimezone&&!(!0===t.uniqueIdInfo?.OIDFieldContainsHashValue);let u=l&&r.includes("create"),c=l&&r.includes("delete"),p=l&&r.includes("update");const d=r.includes("changetracking"),f=t.advancedQueryCapabilities;return l&&!(u||c||p)&&(u=c=p=!0),{supportsCalculate:s(t,"supportsCalculate",!1),supportsTruncate:s(t,"supportsTruncate",!1),supportsValidateSql:s(t,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:c,supportsEditing:l,supportsChangeTracking:d,supportsQuery:a,supportsQueryAnalytics:s(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:s(f,"supportsQueryAttachments",!1),supportsQueryBins:s(f,"supportsQueryBins",!1)||!!t.queryBinsCapabilities,supportsQueryTopFeatures:s(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:s(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:p,supportsExceedsLimitStatistics:s(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:s(t,"supportsAsyncConvert3D",!1)}}function v(e,t){const n=e.advancedQueryCapabilities,l=e.ownershipBasedAccessControlForFeatures,u=e.archivingInfo,d=e.currentVersion,f=t?.includes("MapServer"),h=!f||d>=(0,r.Z)("mapserver-pbf-version-support"),y=(0,i.M8)(t),m=new Set((e.supportedQueryFormats??"").split(",").map((e=>e.toLowerCase().trim())));return{maxRecordCount:a(e,"maxRecordCount",void 0),maxRecordCountFactor:a(e,"maxRecordCountFactor",void 0),maxUniqueIDCount:a(e,"maxUniqueIDCount",void 0),standardMaxRecordCount:a(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:c(n),supportsCacheHint:s(n,"supportsQueryWithCacheHint",!1)||p(n,"query"),supportsCentroid:s(n,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:y,supportsCurrentUser:s(n,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:s(n,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:s(n,"supportsDisjointSpatialRel",!1),supportsDistance:s(n,"supportsQueryWithDistance",!1),supportsDistinct:s(n,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:s(n,"supportsReturningQueryExtent",!1),supportsFormatPBF:h&&m.has("pbf"),supportsFullTextSearch:s(n,"supportsFullTextSearch",!1),supportsGeometryProperties:s(n,"supportsReturningGeometryProperties",!1),supportsHavingClause:s(n,"supportsHavingClause",!1),supportsHistoricMoment:s(u,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:s(n,"supportsMaxRecordCountFactor",!1),supportsOrderBy:s(n,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:s(n,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:s(n,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:s(n,"supportsPercentileStatistics",!1),supportsQuantization:s(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:s(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:s(l,"allowAnonymousToQuery",!0),supportsQueryByOthers:s(l,"allowOthersToQuery",!0),supportsQueryGeometry:s(e,"supportsReturningQueryGeometry",!1),supportsResultType:s(n,"supportsQueryWithResultType",!1),supportsReturnMesh:!!(0,o.Si)(e.infoFor3D),supportsSpatialAggregationStatistics:s(n,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:s(n,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:s(e,"useStandardizedQueries",!1),supportsStatistics:s(n,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:s(n,"supportsTopFeaturesQuery",!1),supportsTrueCurve:s(n,"supportsTrueCurve",!1),tileMaxRecordCount:a(e,"tileMaxRecordCount",void 0)}}function S(e){const t=e.advancedQueryCapabilities,n=s(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:s(t,"supportsQueryRelatedPagination",!1),supportsCount:n,supportsOrderBy:n,supportsCacheHint:p(t,"queryRelated")}}function M(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryTopFilter")}}function _(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:s(t,"supportsDateBin",!1),supportsFixedInterval:s(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:s(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:s(t,"supportsFixedBoundariesBin",!1),supportsStackBy:s(t,"supportsStackBy",!1),supportsSplitBy:s(t,"supportsSplitBy",!1),supportsSnapToData:s(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:s(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:s(t,"supportsFirstDayOfWeek",!1),supportsNormalization:s(t,"supportsNormalization",!1),supportedStatistics:d(t),supportedNormalizationTypes:f(t)}}function w(e){const t=e.ownershipBasedAccessControlForFeatures,n=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:s(e,"allowGeometryUpdates",!0),supportsGlobalId:s(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:s(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:s(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:s(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:s(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:s(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:s(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:s(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:s(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:s(n,"supportsAsyncApplyEdits",!1),zDefault:a(e,"zDefault",void 0)}}function I(e){return{operations:{supportsAppend:s(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:s(e,"supportsExportClip",!1),supportsExportFrameset:s(e,"supportsExportFrameset",!1),supportsMensuration:s(e,"supportsMensuration",!1),supportsPreviews:s(e,"supportsPreviews",!1),supportsUpdate:s(e,"supportsUpdate",!1)}}}},599:function(e,t,n){n.d(t,{P:function(){return u},d:function(){return d}});var r=n(73440),i=n(41773),o=n(96711),s=n(17155),a=(n(61432),n(83850),n(79775)),l=n(48023);const u=(0,i.w)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",p="field",d=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&p||n&&c||null,t&&n&&o.Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==p&&e!==c||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,r._)([(0,s.Cb)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,r._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,r._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,r._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,r._)([(0,a.J)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,r._)([(0,l.j)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},6298:function(e,t,n){n.d(t,{E:function(){return i}});var r=n(44252);const i={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:r.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:r.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:r.of.Loop,repeatdelay:0,easing:r.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},44252:function(e,t,n){var r,i,o,s,a,l,u,c,p,d,f,h,y,m,g,b,C,v,S,M,_,w,I,T,F,x,k,A,R,L,P,O,E,z,j,N,Z,D,G,B,q,V,U,W,H,J,Q,$,Y,X,K,ee,te,ne,re,ie,oe,se,ae,le,ue,ce,pe;n.d(t,{$y:function(){return I},AH:function(){return i},BZ:function(){return T},CS:function(){return Y},DD:function(){return c},Dd:function(){return L},Em:function(){return w},IB:function(){return h},IH:function(){return ie},JS:function(){return Q},Ky:function(){return p},Lh:function(){return X},Qb:function(){return ae},RL:function(){return r},RS:function(){return ue},TF:function(){return _},Tx:function(){return a},UR:function(){return v},UX:function(){return se},bj:function(){return $},eZ:function(){return u},id:function(){return x},kP:function(){return D},mC:function(){return ne},of:function(){return f},r4:function(){return V},sj:function(){return G},v2:function(){return o},zQ:function(){return R},zV:function(){return C}}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(o||(o={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(a||(a={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(l||(l={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(u||(u={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(c||(c={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(p||(p={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(f||(f={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(h||(h={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(y||(y={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(m||(m={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(b||(b={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(C||(C={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(v||(v={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(S||(S={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(M||(M={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(_||(_={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(w||(w={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(I||(I={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(T||(T={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(F||(F={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(x||(x={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(k||(k={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(A||(A={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(R||(R={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(L||(L={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(P||(P={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(O||(O={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(E||(E={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"}(z||(z={})),function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"}(j||(j={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(N||(N={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(Z||(Z={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(D||(D={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(G||(G={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(B||(B={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(q||(q={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(V||(V={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(U||(U={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(W||(W={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(H||(H={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(J||(J={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(Q||(Q={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}($||($={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(Y||(Y={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(X||(X={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(K||(K={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(ee||(ee={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(te||(te={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ne||(ne={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(re||(re={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ie||(ie={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(oe||(oe={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(se||(se={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ae||(ae={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(le||(le={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ue||(ue={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ce||(ce={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(pe||(pe={}))},61421:function(e,t,n){n.d(t,{$Z:function(){return _},BX:function(){return S},Cc:function(){return m},E_:function(){return a},F:function(){return w},FG:function(){return T},H1:function(){return o},J0:function(){return y},JW:function(){return k},Lb:function(){return G},Le:function(){return A},Ml:function(){return j},On:function(){return C},Qf:function(){return F},RI:function(){return g},TB:function(){return x},Ul:function(){return z},W7:function(){return M},X_:function(){return I},be:function(){return c},e0:function(){return O},gJ:function(){return h},hU:function(){return P},hf:function(){return r},k5:function(){return f},oY:function(){return u},pJ:function(){return b},qQ:function(){return s},wi:function(){return v},yL:function(){return d},yl:function(){return R},zL:function(){return p}});n(6298);function r(e,t,n,r){return function(e){return"function"==typeof e}(e)?e(t,n,r):e}function i(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function o(e,t){const n=[];let r=0,o=-1;do{if(o=e.indexOf("[",r),o>=r){if(o>r){const t=e.slice(r,o);n.push([t,null,i(t)])}if(r=o+1,o=e.indexOf("]",r),o>=r){if(o>r){const i=t[e.slice(r,o)];i&&n.push([null,i,!1])}r=o+1}}}while(-1!==o);if(r<e.length){const t=e.slice(r);n.push([t,null,i(t)])}return n}function s(e,t,n){let r="",i=null;for(const n of t){const[t,o,s]=n;if(null!=t&&""!==t)s?i=t:(null!=i&&(r+=i,i=null),r+=t);else{const t=e.readAttribute(o);null!=t&&""!==t&&(null!==i&&(r+=i,i=null),r+=t)}}return l(r,n)}function a(e,t,n,r){let i="",o=null;for(const r of t){const[t,s,a]=r;if(null!=t&&""!==t)a?o=t:(null!=o&&(i+=o,o=null),i+=t);else{let t=s;null!=n&&(t=E(s,n));const r=e.attributes[t];null!=r&&""!==r&&(null!=o&&(i+=o,o=null),i+=r)}}return l(i,r)}function l(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function c(e){return e.data?.symbol??null}function p(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function d(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function h(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const y=(e,t=0)=>null==e||isNaN(e)?t:e,m=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([n.e(27093),n.e(13323)]).then(n.bind(n,69339))}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function C(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function v(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function S(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function M(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=M(t);if(null!=e)return e}break;case"CIMTextSymbol":return M(e.symbol);case"CIMSolidFill":return e.color}return null}function _(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=_(e);if(null!=t)return t}break}case"CIMTextSymbol":return _(e.symbol);case"CIMSolidStroke":return e.color}}function w(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=w(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return w(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function I(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function T(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function F(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const x=e=>e.includes("data:image/svg+xml");function k(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function A(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function R(e,t,n,r,i,o,s=!0){const{infos:a}=o;let l=1,u=0,c=0,p=0,d=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:n,rotation:r,size:i,frameHeight:o,rotateClockWise:f,scaleSymbolsProportionally:h}of a)d=e?1:l,c=Z(t,n,u,d,c),p=N(t,n,u,d,p),o&&(h||s)&&(l*=i/o),u=D(r,f,u);const f=Z(r,i,u,d,c),h=N(r,i,u,d,p);return{size:e*l,rotation:D(t,n,u),offsetX:f,offsetY:h}}function L(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function P(e){return e?.dashTemplate&&(e.dashTemplate=L(e.dashTemplate)),e}function O(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return O(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return O(e.symbol)}}return"Normal"}function E(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function z(e){return e.map((e=>({...e,propertyName:A(e.propertyName)})))}function j(e){const t={};for(const n in e){const r=e[n];t[A(n)]=r}return t}function N(e,t,n,r,i){const o=n*Math.PI/180;if(o){const n=Math.cos(o);return(Math.sin(o)*e+n*t)*r+i}return t*r+i}function Z(e,t,n,r,i){const o=n*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*r+i:e*r+i}function D(e,t,n){return t?n-e:n+e}function G(e,t){return Math.max(Math.min((e??t)/100,1),0)}},27737:function(e,t,n){n.d(t,{YV:function(){return o},ZB:function(){return f},iW:function(){return l}});var r=n(53147),i=n(61421);function o(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers){switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":o(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}if(n.effects)for(const e of n.effects)a(e,t)}}else null!=e.height&&(e.height*=t)}function s(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,i.gJ)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||o(r.symbol,t,!0,n)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return u((0,i.be)(e),t),t.length?new r.Z((0,i.oY)(t[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const e of n.symbolLayers)if(!(e.colorLocked||r&&((0,i.yL)(e)||(0,i.zL)(e)&&e.markerPlacement&&(0,i.gJ)(e.markerPlacement))))switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor&&c(t,e.tintColor);break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":c(t,e.color);break;case"CIMGradientFill":p(t,e);break;case"CIMHatchFill":u(e.lineSymbol,t)}}function c(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function p(e,t){const n=t.colorRamp?.type;switch(n){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach((t=>{"CIMLinearContinuousColorRamp"===t.type&&d(e,t)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":d(e,t.colorRamp)}}function d(e,t){t&&(t.fromColor&&c(e,t.fromColor),t.toColor&&c(e,t.toColor))}function f(e,t,n){t instanceof r.Z||(t=new r.Z(t));const o=(0,i.be)(e);o&&h(o,t,n)}function h(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const o="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const e of r.symbolLayers){if(e.colorLocked)continue;if(o)if(n){const{layersToColor:t}=n;if(((0,i.yL)(e)||(0,i.zL)(e)&&e.markerPlacement&&(0,i.gJ)(e.markerPlacement))&&"fill"===t||(0,i.k5)(e)&&"outline"===t)continue}else if((0,i.yL)(e)||(0,i.zL)(e)&&e.markerPlacement&&(0,i.gJ)(e.markerPlacement))continue;const r=t.toArray();switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor=r;break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{h(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":e.color=r;break;case"CIMGradientFill":y(e,t);break;case"CIMHatchFill":h(e.lineSymbol,t,n)}}}function y(e,t){const n=e.colorRamp?.type;switch(n){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach((e=>{"CIMLinearContinuousColorRamp"===e.type&&m(e,t)}));break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":m(e.colorRamp,t)}}function m(e,t){if(e&&(e.fromColor&&(e.fromColor=t.toArray()),e.toColor)){const n=t.clone();n.a=0,e.toColor=n.toArray()}}},9350:function(e,t,n){n.d(t,{CJ:function(){return u},Rz:function(){return p},js:function(){return d},xA:function(){return l},z3:function(){return c}});n(61432);var r=n(89636),i=n(38096),o=n(19886),s=n(45433),a=n(54914);const l=o.Z.fromJSON(a.I4),u=i.Z.fromJSON(a.ET),c=r.Z.fromJSON(a.lF),p=s.Z.fromJSON(a.qP);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return c}return null}o.Z.fromJSON(a.eG),i.Z.fromJSON(a.wW),r.Z.fromJSON(a.lj)},54914:function(e,t,n){n.d(t,{ET:function(){return s},I4:function(){return o},SQ:function(){return r},X1:function(){return i},eG:function(){return u},lF:function(){return a},lj:function(){return p},qP:function(){return l},wW:function(){return c}});const r=[252,146,31,255],i=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},48922:function(e,t,n){n.d(t,{Ne:function(){return C},Od:function(){return y},Sp:function(){return b},_M:function(){return h},iI:function(){return g},mx:function(){return m}});var r=n(1800),i=n(53147),o=n(78619),s=n(12853),a=n(96094),l=n(27737);const u="picture-fill",c="simple-fill",p="simple-marker",d=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),f=new s.z(1e3);function h(e){const t=e.style;let n=null;if(e)switch(e.type){case p:"cross"!==t&&"x"!==t&&(n=e.color);break;case c:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.V)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):n=e.color;break;case u:n={type:"pattern",src:e.url,width:(0,a.F2)(e.width)*e.xscale,height:(0,a.F2)(e.height)*e.yscale,x:(0,a.F2)(e.xoffset),y:(0,a.F2)(e.yoffset)};break;case"text":n=e.color;break;case"cim":n=(0,l.iW)(e)}return n}function y(e,t){const n=e+"-"+t;return void 0!==f.get(n)?Promise.resolve(f.get(n)):(0,o.Z)(e,{responseType:"image"}).then((e=>{const r=e.data,i=r.naturalWidth,o=r.naturalHeight,s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d");a.fillStyle=t,a.fillRect(0,0,i,o),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0);const l=s.toDataURL();return f.put(n,l),l}))}function m(e){if(!e)return null;let t=null;switch(e.type){case c:case u:case p:t=m(e.outline);break;case"simple-line":{const n=(0,a.F2)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:b(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,a.F2)(e.miterLimit):e.join},t.dashArray=g(t).join(",")||"none");break}default:t=null}return t}function g(e){if(!e?.style)return[];const{dashArray:t,style:n,width:r}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const i=r??0,o=d.has(n)?d.get(n).map((e=>e*i)):[];if("butt"!==e.cap)for(const[e,t]of o.entries())o[e]=e%2==1?t+i:Math.max(t-i,1);return o}const b=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),C=new i.Z([128,128,128])},30903:function(e,t,n){n.d(t,{BR:function(){return w},QL:function(){return T},Y6:function(){return f},YW:function(){return h},_h:function(){return m},e3:function(){return _},nf:function(){return y},tb:function(){return b},wJ:function(){return I}});var r=n(53147),i=n(29292),o=(n(61432),n(96094)),s=n(82846),a=n(615),l=n(27737),u=n(48922),c=n(75485),p=n(68578);const d=new r.Z("white");function f(e){if(!e)return 0;if((0,p.dU)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,o.Wz)((0,u.mx)(e)?.width)}function h(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function m(e,t){if(!e)return null;let n=null;return(0,p.dU)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.Z(n):null}(e):(0,p.cT)(e)&&(n="cim"===e.type?(0,l.iW)(e):e.color?new r.Z(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.Z(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.Z(t)),(0,p.dU)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const i=e=>g(t??e??(null!=n?d:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=i(e.color);else{const t=null!=e.material?e.material.color:null,r=i(t);if(null==e.material?e.material=new c.b({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n)),"marker"in e&&null!=e.marker){const t=i(e.marker.color);e.marker.color=t}}}))}(e,t,n):(0,p.cT)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function C(e,t){const r=e.symbolLayers;r&&await(0,i.Ed)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){const n=t[2];"number"==typeof n&&(e.size=n)}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=v(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=S(t,s.hq,[e.width,void 0,e.height]);null!=n&&(e.width=M(t[0],e.width,1,n),e.height=M(t[2],e.height,1,n))}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:i}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(99795).then(n.bind(n,99795)),r=await t(e,10),{width:i,height:o,depth:s}=e,a=[i,s,o];let l=1;for(let e=0;e<3;e++){const t=a[e];if(null!=t){l=t/r[e];break}}for(let e=0;e<3;e++)null==a[e]&&(a[e]=r[e]*l);return{resourceSize:r,symbolSize:a}}(e),o=S(t,r,i);null!=o&&(e.width=M(t[0],i[0],r[0],o),e.depth=M(t[1],i[1],r[1],o),e.height=M(t[2],i[2],r[2],o))}(e,t)}}(e,t)))}function v(e){for(const t of e)if("number"==typeof t)return t;return null}function S(e,t,n){for(let r=0;r<3;r++){const i=e[r];switch(i){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(i&&t[r])return i/t[r]}}return null}function M(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function _(e,t){if(e&&t)return(0,p.dU)(e)?C(e,t):void((0,p.cT)(e)&&function(e,t){const n=v(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function w(e,t,n){if(e&&null!=t)if((0,p.dU)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if("object"===e.type)switch(n){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,p.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function I(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.rM)(t)}function T(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}},3651:function(e,t,n){var r;n.d(t,{x:function(){return r}}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))}}]);