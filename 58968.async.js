"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[58968],{64497:function(e,t,r){r.d(t,{I:function(){return i},v:function(){return s}});var n=r(99574);function i(e,t,r=0){const i=(0,n.uZ)(e,0,o);for(let e=0;e<4;e++)t[r+e]=Math.floor(256*l(i*a[e]))}function s(e,t=0){let r=0;for(let n=0;n<4;n++)r+=e[t+n]*c[n];return r}const a=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],o=s(new Uint8ClampedArray([255,255,255,255]));function l(e){return e-Math.floor(e)}},96610:function(e,t,r){r.d(t,{G6:function(){return U},IN:function(){return a},Ie:function(){return R},J9:function(){return I},Jd:function(){return s},Kq:function(){return O},RF:function(){return x},U1:function(){return A},oh:function(){return i},s9:function(){return M},vY:function(){return n}});r(90756);function n(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function i(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:n}=e,i=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[i,"lowerLeft"===t?s:-s,r[2]??1,r[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function s({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function a({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function c({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function o({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function l(e,t){return e&&t?p:e&&!t?d:!e&&t?f:u}const u=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),c=a(e,n[1]);r.push([i,c]);for(let n=1;n<t.length;n++){const[o,l]=t[n],u=s(e,o),d=a(e,l);u===i&&d===c||r.push([u-i,d-c]),i=u,c=d}return r},d=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),o=a(e,n[1]),l=c(e,n[2]);r.push([i,o,l]);for(let n=1;n<t.length;n++){const[u,d,f]=t[n],p=s(e,u),y=a(e,d),g=c(e,f);p===i&&y===o&&g===l||r.push([p-i,y-o,g]),i=p,o=y,l=g}return r},f=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),c=a(e,n[1]),l=o(e,n[2]);r.push([i,c,l]);for(let n=1;n<t.length;n++){const[u,d,f]=t[n],p=s(e,u),y=a(e,d),g=o(e,f);p===i&&y===c&&g===l||r.push([p-i,y-c,g]),i=p,c=y,l=g}return r},p=(e,t)=>{const r=[];if(!t.length)return null;const n=t[0];let i=s(e,n[0]),l=a(e,n[1]),u=c(e,n[2]),d=o(e,n[3]);r.push([i,l,u,d]);for(let n=1;n<t.length;n++){const[f,p,y,g]=t[n],m=s(e,f),h=a(e,p),v=c(e,y),b=o(e,g);m===i&&h===l&&v===u&&b===d||r.push([m-i,h-l,v,b]),i=m,l=h,u=v,d=b}return r};function y({scale:e,translate:t},r){return r*e[0]+t[0]}function g({scale:e,translate:t},r){return r*e[1]+t[1]}function m({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function h({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function v(e,t){return e&&t?w:e&&!t?S:!e&&t?L:b}const b=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=y(e,n[0]),s=g(e,n[1]);r[0]=[i,s];const{scale:a,originPosition:c}=e,o=a[0],l="lowerLeft"===c?a[1]:-a[1];for(let e=1;e<t.length;e++){const[n,a]=t[e];i+=o*n,s+=l*a,r[e]=[i,s]}return r},S=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=y(e,n[0]),s=g(e,n[1]);r[0]=[i,s,m(e,n[2])];const{scale:a,originPosition:c}=e,o=a[0],l="lowerLeft"===c?a[1]:-a[1];for(let n=1;n<t.length;n++){const[a,c,u]=t[n];i+=o*a,s+=l*c,r[n]=[i,s,m(e,u)]}return r},L=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=y(e,n[0]),s=g(e,n[1]);r[0]=[i,s,h(e,n[2])];const{scale:a,originPosition:c}=e,o=a[0],l="lowerLeft"===c?a[1]:-a[1];for(let n=1;n<t.length;n++){const[a,c,u]=t[n];i+=o*a,s+=l*c,r[n]=[i,s,h(e,u)]}return r},w=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=y(e,n[0]),s=g(e,n[1]);r[0]=[i,s,m(e,n[2]),h(e,n[3])];const{scale:a,originPosition:c}=e,o=a[0],l="lowerLeft"===c?a[1]:-a[1];for(let n=1;n<t.length;n++){const[a,c,u,d]=t[n];i+=o*a,s+=l*c,r[n]=[i,s,m(e,u),h(e,d)]}return r};function T(e,t,r){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=t(e,r[i]);return n}function x(e,t,r){const n=i(e);return t.x=s(n,r.x),t.y=a(n,r.y),null!=r.z&&(t.z=c(n,r.z)),null!=r.m&&(t.m=o(n,r.m)),t}function O(e,t,r){const n=function(e,t,r,n){const i=[],s=l(r,n);for(let r=0;r<t.length;r++){const n=s(e,t[r]);n&&n.length>=3&&i.push(n)}return i.length?i:null}(i(e),r.rings,r.hasZ,r.hasM);return n?(t.rings=n,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function M(e,t,r){const n=function(e,t,r,n){const i=[],s=l(r,n);for(let r=0;r<t.length;r++){const n=s(e,t[r]);n&&n.length>=2&&i.push(n)}return i.length?i:null}(i(e),r.paths,r.hasZ,r.hasM);return n?(t.paths=n,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function I(e,t,r,n=r?.hasZ??!1,s=r?.hasM??!1){if(null!=r){const a=i(e);t.points=v(n,s)(a,r.points),t.hasZ=n,t.hasM=s}return t}function A(e,t,r,n=null!=r?.z,s=null!=r?.m){if(null==r)return t;const a=i(e);return t.x=y(a,r.x),t.y=g(a,r.y),n&&(t.z=m(a,r.z)),s&&(t.m=h(a,r.m)),t}function R(e,t,r,n=r?.hasZ??!1,s=r?.hasM??!1){if(null!=r){const a=i(e);t.rings=T(a,v(n,s),r.rings),t.hasZ=n,t.hasM=s}return t}function U(e,t,r,n=r?.hasZ??!1,s=r?.hasM??!1){if(null!=r){const a=i(e);t.paths=T(a,v(n,s),r.paths),t.hasZ=n,t.hasM=s}return t}},27936:function(e,t,r){function n(e){return"point"===e.type}r.d(t,{f:function(){return n}})},26334:function(e,t,r){r.d(t,{g:function(){return s},s:function(){return a}});var n=r(1800),i=r(12816);async function s(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await(0,i.ME)("esri/t9n/basemaps");return r[e]||r[t]}const a={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return(0,n.V)("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}}},18177:function(e,t,r){r.d(t,{Qs:function(){return L},Us:function(){return u},wZ:function(){return o}});var n=r(43254),i=r(61100),s=r(95490),a=r(8971),c=r(26334);function o(e,t){return e.allLayerViews.find((e=>e.uid===t))?.layer.parent===e.map?.basemap}let l;function u(e,t){if(null==t||null==e)return{spatialReference:null,updating:!1};if("not-loaded"===t.loadStatus)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(0===t.baseLayers.length)return{spatialReference:null,updating:!1};const r=t.baseLayers.at(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const n=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?r.tileInfo?.spatialReference:r.spatialReference]).filter(Boolean),i=e.spatialReference;return i?{spatialReference:n.find((e=>i.equals(e)))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}}function d(e){return e?!e.loaded&&e.resourceInfo?g(e.resourceInfo.data):{baseLayers:f(e.baseLayers),referenceLayers:f(e.referenceLayers)}:null}function f(e){return(n.Z.isCollection(e)?e.toArray():e).map(p)}function p(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:S("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers?void 0:e.sublayers?.map((e=>({id:e.id,visible:e.visible}))),activeLayerId:"wmts"===e.type?e.activeLayer?.id:void 0}}function y(e){return e.isReference||"ArcGISSceneServiceLayer"===e.layerType}function g(e){return e?{baseLayers:m((e.baseMapLayers??[]).filter((e=>!y(e)))),referenceLayers:m((e.baseMapLayers??[]).filter((e=>y(e))))}:null}function m(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:S(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e)))}function h(e,t,r){return null!=e!=(null!=t)?"not-equal":e&&t?v(e.baseLayers,t.baseLayers)?v(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function v(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!b(e[r],t[r]))return!1;return!0}function b(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(!(0,a.yQ)(e.effect,t.effect))return!1;if(null!=e.activeLayerId||null!=t.activeLayerId)return e.activeLayerId===t.activeLayerId;if(null!=e.sublayers||null!=t.sublayers){if(null==e.sublayers||null==t.sublayers||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const n=e.sublayers.at(r),i=t.sublayers.at(r);if(n?.id!==i?.id||n?.visible!==i?.visible)return!1}}return!0}function S(e){return e?(0,s.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}function L(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const r=function(e){if(l)return l(e);let t=null;const r=d(e),n=!r?.baseLayers.length;for(const e in c.s){const i=h(r,g(c.s[e]),{mustMatchReferences:n});if("equal"===i){t=e;break}"base-layers-equal"===i&&(t=e)}return t}(e);return r?c.s[r].thumbnailUrl:(0,i.ei)(e.baseLayers,w)}function w(e){return"portalItem"in e?e.portalItem?.thumbnailUrl:void 0}},36027:function(e,t,r){r.d(t,{$o:function(){return T},Go:function(){return L},Si:function(){return A},Uu:function(){return w},WR:function(){return S},ZL:function(){return M},_Z:function(){return I},bD:function(){return x},bh:function(){return O},zE:function(){return h}});var n=r(26636),i=r(31865),s=r(10934),a=r(82846),c=r(73749),o=r(27583),l=r(13132),u=r(16447),d=r(47566),f=r(69372),p=r(28931),y=r(52861),g=r(60856),m=r(74774);function h(e,t){if("point"===e.type)return b(e,t,!1);if((0,m.Ou)(e))switch(e.type){case"extent":return b(e.center,t,!1);case"polygon":return b(e.centroid,t,!1);case"polyline":return b(v(e),t,!0);case"mesh":return b((0,y.rU)(e.vertexSpace,e.spatialReference)??e.extent.center,t,!1);case"multipoint":return}else switch(e.type){case"extent":return b(function(e){return(0,g.T)(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),null!=e.zmin&&null!=e.zmax&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}(e),t,!0);case"polygon":return b(function(e){const t=e.rings[0];if(!t||0===t.length)return null;const r=(0,f.a)(e.rings,!!e.hasZ);return(0,g.T)(r[0],r[1],r[2],e.spatialReference)}(e),t,!0);case"polyline":return b(v(e),t,!0);case"multipoint":return}}function v(e){const t=e.paths[0];if(!t||0===t.length)return null;const r=(0,p.n8)(t,(0,p.ok)(t)/2);return(0,g.T)(r[0],r[1],r[2],e.spatialReference)}function b(e,t,r){const n=r?e:(0,m.WG)(e);return t&&e?(0,l.projectPoint)(e,n,t)?n:null:n}function S(e){if(!e)return 0;switch(e.type){case"point":return e.z;case"extent":return e.zmax;case"polygon":return e.hasZ?e.rings.reduce(((e,t)=>t.reduce(((e,t)=>Math.max(e,t[2])),e)),-1/0):void 0;case"polyline":return e.hasZ?e.paths.reduce(((e,t)=>t.reduce(((e,t)=>Math.max(e,t[2])),e)),-1/0):void 0;case"mesh":return e.extent.zmax;case"multipoint":return}}function L(e,t,r,n=0){if(e){t||(t=(0,d.Ue)());const i=e;let s=.5*i.width*(r-1),a=.5*i.height*(r-1);return i.width<1e-7*i.height?s+=a/20:i.height<1e-7*i.width&&(a+=s/20),(0,c.s)(t,i.xmin-s-n,i.ymin-a-n,i.xmax+s+n,i.ymax+a+n),t}return null}function w(e,t,r=null){const n=(0,o.d9)(o.hq);return null!=e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),null!=t?n[3]=t:null!=e&&e.length>3&&(n[3]=e[3]),r&&(n[0]*=r,n[1]*=r,n[2]*=r,n[3]*=r),n}function T(e,t,r,n,i,s){for(let t=0;t<3;++t)s[t]=null!=e?.[t]?e[t]:null!=r?.[t]?r[t]:i[t];return s[3]=null!=t?t:null!=n?n:i[3],s}function x(e=a.hq,t,r,n=1){const i=new Array(3);if(null==t||null==r)i[0]=1,i[1]=1,i[2]=1;else{let n,s=0;for(let a=2;a>=0;a--){const c=e[a],o=null!=c,l=0===a&&!n&&!o,u=r[a];let d;"symbol-value"===c||l?d=0!==u?t[a]/u:1:o&&"proportional"!==c&&isFinite(c)&&(d=0!==u?c/u:1),null!=d&&(i[a]=d,n=d,s=Math.max(s,Math.abs(d)))}for(let e=2;e>=0;e--)null==i[e]?i[e]=n:0===i[e]&&(i[e]=.001*s)}for(let e=2;e>=0;e--)i[e]/=n;return(0,a.nI)(i)}function O(e){return M(function(e){return null!=e.isPrimitive}(e)?[e.width,e.depth,e.height]:e)?null:"Symbol sizes may not be negative values"}function M(e){const t=e=>null==e||e>=0;return Array.isArray(e)?e.every(t):t(e)}function I(e,t,r,n=(0,s.Ue)()){return e&&(0,i.jI)(n,n,-e/180*Math.PI),t&&(0,i.lM)(n,n,t/180*Math.PI),r&&(0,i.uD)(n,n,r/180*Math.PI),n}function A(e,t,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=(0,n.c9)(t),s=(0,u.bf)(e)*i,a=(0,u.Ye)(e)*i,c=(0,u.Cb)(e)*(t.isGeographic?1:i);return 0===s&&0===a&&0===c?r.minDemResolutionForPoints:.01*Math.max(s,a,c)}},36786:function(e,t,r){r.d(t,{F:function(){return s},t:function(){return a}});r(61432);var n=r(86026),i=r(45952);function s(e){switch(e){case"sphere":case"cube":case"diamond":case"cylinder":case"cone":case"inverted-cone":case"tetrahedron":return!0}return!1}function a(e,t){const r=(e,t,r=!1)=>new i.hO(e.map((e=>{const s=t(e.tesselation);return r&&(0,n.Cr)(s),new i.T6([new i.QD(new i.pT(s))],e.minScreenSpaceRadius)})));switch(e){case"sphere":return r([{tesselation:0,minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],(e=>(0,n.mj)(t,.5,e,!0)));case"cube":return r([{tesselation:0,minScreenSpaceRadius:0}],(()=>(0,n.IG)(t,1)));case"cone":return r(c,(e=>(0,n.QL)(t,1,.5,e,!1)),!0);case"inverted-cone":return r(c,(e=>(0,n.QL)(t,1,.5,e,!0)),!0);case"cylinder":return r(c,(e=>(0,n.nb)(t,1,.5,e,[0,0,1],[0,0,.5])));case"tetrahedron":return r([{tesselation:0,minScreenSpaceRadius:0}],(()=>(0,n.AW)(t,1)),!0);case"diamond":return r([{tesselation:0,minScreenSpaceRadius:0}],(()=>(0,n.B2)(t,1)),!0);default:return}}const c=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}]},89755:function(e,t,r){r.d(t,{H:function(){return s}});var n=r(79729),i=r(48857);function s(e){e.uniforms.add(new n.U("alignPixelEnabled",(e=>e.alignPixelEnabled))),e.code.add(i.H`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),e.code.add(i.H`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}},19615:function(e,t,r){r.d(t,{R:function(){return f},c:function(){return d}});var n=r(27897),i=r(39863),s=r(96541),a=r(23027),c=r(13663),o=r(85119),l=r(48857),u=r(52061);const d=.5;function f(e,t){e.include(i.cK),e.attributes.add(u.T.POSITION,"vec3"),e.attributes.add(u.T.NORMAL,"vec3"),e.attributes.add(u.T.CENTEROFFSETANDDISTANCE,"vec4");const r=e.vertex;(0,s.Sv)(r,t),(0,s.hY)(r,t),r.uniforms.add(new a.$("viewport",(e=>e.camera.fullViewport)),new o.p("polygonOffset",(e=>e.shaderPolygonOffset)),new c.z("cameraGroundRelative",(e=>e.camera.aboveGround?1:-1))),t.hasVerticalOffset&&(0,n.V)(r),r.code.add(l.H`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),r.code.add(l.H`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${t.terrainDepthTest?l.H.float(0):l.H`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),t.draped&&!t.hasVerticalOffset||(0,s._8)(r),t.draped||(r.uniforms.add(new c.z("perDistancePixelRatio",(e=>Math.tan(e.camera.fovY/2)/(e.camera.fullViewport[2]/2)))),r.code.add(l.H`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${l.H.float(d)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `)),t.screenCenterOffsetUnitsEnabled&&(0,s.ZI)(r),t.hasScreenSizePerspective&&(0,i.m8)(r),r.code.add(l.H`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      vec3 centerOffset = centerOffsetAndDistance.xyz;
      float pointGroundDistance = centerOffsetAndDistance.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${t.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${t.hasScreenSizePerspective&&(t.hasVerticalOffset||t.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${t.hasVerticalOffset?t.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${t.hasVerticalOffset?l.H`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${t.screenCenterOffsetUnitsEnabled?"":l.H`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${t.screenCenterOffsetUnitsEnabled?t.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)}},42609:function(e,t,r){r.d(t,{P:function(){return l}});var n=r(89755),i=r(29158),s=r(23027),a=r(13663),c=r(48857),o=r(71063);function l(e){e.vertex.uniforms.add(new a.z("renderTransparentlyOccludedHUD",(e=>e.hudRenderStyle===i.U.Occluded?1:e.hudRenderStyle===i.U.NotOccluded?0:.75)),new s.$("viewport",(e=>e.camera.fullViewport)),new o.e("hudVisibilityTexture",(e=>e.hudVisibility?.getTexture()))),e.vertex.include(n.H),e.vertex.code.add(c.H`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}},45701:function(e,t,r){r.d(t,{n:function(){return i}});var n=r(48857);function i(e){e.code.add(n.H`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}`),e.code.add(n.H`const vec4 RGBA_TO_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgbaTofloat(vec4 rgba) {
return dot(rgba, RGBA_TO_FLOAT_FACTORS);
}`),e.code.add(n.H`const vec4 uninterpolatedRGBAToFloatFactors = vec4(
1.0 / 256.0,
1.0 / 256.0 / 256.0,
1.0 / 256.0 / 256.0 / 256.0,
1.0 / 256.0 / 256.0 / 256.0 / 256.0
);
float uninterpolatedRGBAToFloat(vec4 rgba) {
return (dot(round(rgba * 255.0), uninterpolatedRGBAToFloatFactors) - 0.5) * 2.0;
}`)}},90285:function(e,t,r){r.d(t,{$:function(){return s}});var n=r(5998),i=r(92217);class s extends i.x{constructor(e,t){super(e,"vec4",n.P.Draw,((r,n,i)=>r.setUniform4fv(e,t(n,i))))}}},61442:function(e,t,r){r.d(t,{e:function(){return i},o:function(){return n}});class n{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerViewUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}var i;!function(e){e[e.MIN=0]="MIN",e[e.MINMAX=1]="MINMAX",e[e.ALL=2]="ALL"}(i||(i={}))},32033:function(e,t,r){r.d(t,{n:function(){return f},x:function(){return d}});var n=r(31865),i=r(10934),s=r(24910),a=r(82846),c=r(73749),o=r(27583),l=r(12659),u=r(19821);class d{get ray(){return this._ray}get distanceInRenderSpace(){return null==this.distance?null:((0,s.g)(p,this.ray.direction,this.distance),(0,s.l)(p))}withinDistance(e){return!!f(this)&&this.distanceInRenderSpace<=e}getIntersectionPoint(e){return!!f(this)&&((0,s.g)(p,this.ray.direction,this.distance),(0,s.f)(e,this.ray.origin,p),!0)}getTransformedNormal(e){return(0,s.c)(y,this.normal),y[3]=0,(0,c.t)(y,y,this.transformation),(0,s.c)(e,y),(0,s.n)(e,e)}constructor(e){this.intersector=u.q.OBJECT,this.normal=(0,a.Ue)(),this.transformation=(0,i.Ue)(),this._ray=(0,l.Ue)(),this.init(e)}init(e){this.distance=this.target=this.drapedLayerOrder=this.renderPriority=null,this.intersector=u.q.OBJECT,(0,l.JG)(e,this._ray)}set(e,t,r,c,o,l,u){this.intersector=e,this.distance=r,(0,s.c)(this.normal,c??a.eG),(0,n.JG)(this.transformation,o??i.Wd),this.target=t,this.drapedLayerOrder=l,this.renderPriority=u}copy(e){(0,l.JG)(e.ray,this._ray),this.intersector=e.intersector,this.distance=e.distance,this.target=e.target,this.drapedLayerOrder=e.drapedLayerOrder,this.renderPriority=e.renderPriority,(0,s.c)(this.normal,e.normal),(0,n.JG)(this.transformation,e.transformation)}}function f(e){return null!=e?.distance}const p=(0,a.Ue)(),y=(0,o.Ue)()},31856:function(e,t,r){r.d(t,{D:function(){return i},Z:function(){return n}});class n{constructor(e){this.layerViewUid=e}}class i extends n{constructor(e,t){super(e),this.graphicUid=t}}},19821:function(e,t,r){var n;r.d(t,{q:function(){return n}}),function(e){e[e.OBJECT=0]="OBJECT",e[e.HUD=1]="HUD",e[e.TERRAIN=2]="TERRAIN",e[e.OVERLAY=3]="OVERLAY",e[e.I3S=4]="I3S",e[e.PCL=5]="PCL",e[e.LOD=6]="LOD",e[e.VOXEL=7]="VOXEL",e[e.TILES3D=8]="TILES3D"}(n||(n={}))},32176:function(e,t,r){r.d(t,{w:function(){return c},x:function(){return a}});var n=r(32033),i=r(31856),s=r(19821);class a extends i.D{constructor(e,t,r,n,i){super(e,t),this.layerViewUid=e,this.graphicUid=t,this.triangleNr=r,this.baseBoundingSphere=n,this.numLodLevels=i}}function c(e){return(0,n.n)(e)&&e.intersector===s.q.LOD&&!!e.target}},45952:function(e,t,r){r.d(t,{Np:function(){return u},QD:function(){return p},T6:function(){return y},hO:function(){return g},pT:function(){return d}});var n=r(3480),i=r(85881),s=r(61442),a=r(32033),c=r(19821),o=r(52061),l=r(32176);class u{constructor(e,t,r,n){this.material=e,this.bufferWriter=e.createBufferWriter(),this.vertexBufferLayout=this.bufferWriter.vertexBufferLayout,this.buffer=t,this.elementCount=r,this.boundingInfo=n}get numTriangles(){return this.elementCount/3}get numVertices(){return this.elementCount}computeUsedMemory(){return this.buffer.byteLength+i.Qi}getRenderGeometry(){return this}intersect(e,t,r,n,i,s,a,c){const o=this.bufferWriter,l=this.buffer;o.intersect(l,this.material.parameters,null,e,r,n,((r,n,o)=>f(r,n,o,e,t,s,a,i,c)))}}class d{constructor(e){this.engineGeometry=e}get material(){return this.engineGeometry.material}get numVertices(){return this.engineGeometry.attributes.get(o.T.POSITION).indices.length}get numTriangles(){return this.engineGeometry.indexCount/3}get boundingInfo(){return this.engineGeometry.boundingInfo}computeUsedMemory(){return Array.from(this.engineGeometry.attributes.values()).reduce(((e,t)=>e+(0,i.G7)(t.data,t.indices)),0)}getRenderGeometry(){const e=this.material,t=this.engineGeometry,r=t.attributes,n=t.boundingInfo,i=e.createBufferWriter(),s=i.vertexBufferLayout,a=i.elementCount(r),c=s.createBuffer(a);return i.write(null,null,r,null,c,0),new u(e,c.buffer,a,n)}intersect(e,t,r,n,i,s,a,c){const o=this.engineGeometry;this.material.intersect(o,e.transform.transform,e,r,n,((r,n,o)=>f(r,n,o,e,t,s,a,i,c)))}}function f(e,t,r,n,i,o,u,d,f){if(e<0)return;if(i&&!i(n.rayBegin,n.rayEnd,e))return;const p=new l.x(o.layerViewUid,o.graphicUid(d),r,u,f);if((null==n.results.min.distance||e<n.results.min.distance)&&n.results.min.set(c.q.LOD,p,e,t,n.transform.transform),(null==n.results.max.distance||e>n.results.max.distance)&&n.results.max.set(c.q.LOD,p,e,t,n.transform.transform),n.options.store===s.e.ALL){const r=new a.x(n.results.min.ray);r.set(c.q.LOD,p,e,t,n.transform.transform),n.results.all.push(r)}}class p{constructor(e,t=null){this.geometry=e,this.textures=t}get material(){return this.geometry.material}get numTriangles(){return this.geometry.numTriangles}}class y{constructor(e,t,r){this.components=e,this.minScreenSpaceRadius=t,this.pivotOffset=r;const i=(0,n.Tw)(this.components.map((e=>e.geometry)));this.numVertices=i.reduce(((e,t)=>e+t.numVertices),0)}}class g{constructor(e){this.levels=e,this.levels.sort(((e,t)=>e.minScreenSpaceRadius===t.minScreenSpaceRadius?e.numVertices-t.numVertices:e.minScreenSpaceRadius-t.minScreenSpaceRadius))}getMaterials(){const e=[];return this.levels.forEach((t=>t.components.forEach((t=>e.push(t.geometry.material))))),(0,n.Tw)(e)}getTextures(){const e=new Array;return this.levels.forEach((t=>t.components.forEach((t=>{null!=t.textures&&e.push(...t.textures)})))),(0,n.Tw)(e)}getGeometries(){const e=new Array;return this.levels.forEach((t=>t.components.forEach((t=>{e.push(t.geometry)})))),(0,n.Tw)(e)}getEngineGeometries(){return this.getGeometries().map((e=>e.engineGeometry)).filter((e=>null!=e))}computeUsedMemory(){const e=this.getGeometries(),t=this.getTextures(),r=e.reduce(((e,t)=>e+t.computeUsedMemory()),0);return t.reduce(((e,t)=>e+t.usedMemory),0)+r}}}}]);