"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[1663,76873,81066,70885],{85968:function(e,t,n){n.d(t,{D:function(){return _},m:function(){return l},s:function(){return d},w:function(){return g}});var r=n(73440),i=n(10057),s=n(11894),o=n(65513),a=n(9519),u=n(64699),c=n(60988);function l(){return{outPoint:new a.P,index:-1,t:Number.NaN}}function m(e,t,n){return{outPoint:e.clone(),index:t,t:n}}function h(e,t,n,r){e.outPoint.assign(t),e.index=n,e.t=r}function f(e,t){e.outPoint.assign(t.outPoint),e.index=t.index,e.t=t.t}function p(e,t,n,r){e.index=n,e.t=r,t.queryCoord2D(e.t,e.outPoint)}function y(e,t){const n=l();f(n,e),f(e,t),f(t,n)}function g(e,t,n,r,s,a){if(e.getGeometryType()===i.G.enumPolygon){for(;r.nextPath();)if(r.hasNextSegment()){const t=r.nextSegment();if(0!==(0,o.h)(e,t.getEndXY(),0))return h(s,t.getEndXY(),-1,Number.NaN),h(a,t.getEndXY(),-1,Number.NaN),!0}r.resetToFirstPath()}if(t.getGeometryType()===i.G.enumPolygon){for(;n.nextPath();)if(n.hasNextSegment()){const e=n.nextSegment();if(0!==(0,o.h)(t,e.getEndXY(),0))return h(s,e.getEndXY(),-1,Number.NaN),h(a,e.getEndXY(),-1,Number.NaN),!0}n.resetToFirstPath()}return!1}function d(e){const t=e.getPathCount(),n=(0,a.d)(e.getSegmentCount(),0);let r=0;for(let i=0;i<t;++i){const t=r+e.getSegmentCountPath(i);for(let s=r,o=e.getPathStart(i);s<t;++s,++o)n[s]=o;r=t}return(0,s.s)(e.getPointCount(),n),n}function v(e,t){return!!Number.isNaN(t)||e<=t}function x(e){const t=new s.a;return t.addEnvelope(e,!1),t}class _{constructor(e,t){if(this.m_env2DgeometryA=null,this.m_env2DgeometryB=null,this.m_progressCounter=0,this.m_progressTracker=t,this.m_maxSqrDistance=e*e,this.m_maxDistance=e,this.m_bIsNearCalc=!1,Number.isNaN(this.m_maxDistance)?this.m_maxDistance=Number.POSITIVE_INFINITY:this.m_maxDistance=e,this.m_maxSqrDistance=this.m_maxDistance*this.m_maxDistance,Number.isFinite(this.m_maxSqrDistance)){let e=Math.sqrt(this.m_maxSqrDistance);for(;e<this.m_maxDistance;)this.m_maxSqrDistance*=1+Number.EPSILON,e=Math.sqrt(this.m_maxSqrDistance)}}calculate(e,t,n,r){if((e.getGeometryType()!==c.P.type||t.getGeometryType()!==c.P.type)&&(this.m_env2DgeometryA=new u.Envelope2D,this.m_env2DgeometryB=new u.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!v(this.m_env2DgeometryA.distanceFromEnvelope(this.m_env2DgeometryB),this.m_maxDistance)))return Number.POSITIVE_INFINITY;const i=m(new a.P,(0,a.j)(),Number.NaN),s=m(new a.P,(0,a.j)(),Number.NaN),o=this._ExecuteBruteForce(e,t,i,s);return v(o,this.m_maxDistance)?(null!==n&&f(n,i),null!==r&&f(r,s),o):Number.POSITIVE_INFINITY}isNear(e,t){if(this.m_bIsNearCalc=!0,e.isEmpty()||t.isEmpty())return!1;if(e===t)return!0;let n=!0;if(e.getGeometryType()!==c.P.type&&e.getGeometryType()!==c.E.type||t.getGeometryType()!==c.P.type&&t.getGeometryType()!==c.E.type||(n=!1),n){if(this.m_env2DgeometryA=new u.Envelope2D,this.m_env2DgeometryB=new u.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!(this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)>this.m_maxSqrDistance))return!0;if(this.m_env2DgeometryA.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>this.m_maxSqrDistance)return!1}const r=m(new a.P,(0,a.j)(),Number.NaN),i=m(new a.P,(0,a.j)(),Number.NaN);return this._ExecuteBruteForce(e,t,r,i)<=this.m_maxDistance}progress_(e=!1){}_ExecuteBruteForce(e,t,n,r){switch(e.getGeometryType()){case i.G.enumPoint:return this.distancePointGeometry(e,t,n,r);case i.G.enumMultiPoint:return this.distanceMultipointGeometry(e,t,n,r);case i.G.enumEnvelope:return this.distanceEnvelopeGeometry(e,t,n,r);case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathGeometry(e,t,n,r);default:return Number.NaN}}distancePointGeometry(e,t,n,r){switch(t.getGeometryType()){case i.G.enumPoint:return this.distancePointPoint(e,t,n,r);case i.G.enumMultiPoint:return this.distancePointMultipoint(e,t,n,r);case i.G.enumPolyline:case i.G.enumPolygon:return this.distancePointMultipath(e,t,n,r);case i.G.enumEnvelope:return this.distancePointEnvelope(e,t,n,r);default:return Number.NaN}}distancePointPoint(e,t,n,r){const i=e.getXY(),s=t.getXY();return h(n,i,0,0),h(r,s,0,0),Math.sqrt(a.P.sqrDistance(i,s))}distancePointMultipoint(e,t,n,r){const i=e.getXY();let s=this.m_maxSqrDistance,o=s,u=!1;const c=t.getPointCount(),l=new a.P;for(let e=0;e<c;++e)if(t.queryXY(e,l),o=a.P.sqrDistance(i,l),this.m_bIsNearCalc){if(o<=s)return 0}else if(!(o>s)&&(!u&&o===s||o<s)&&(s=o,h(n,i,0,0),h(r,l,e,0),u=!0,0===s))return 0;return u?Math.sqrt(s):Number.POSITIVE_INFINITY}distancePointMultipath(e,t,n,r){const s=!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB),c=e.getXY();if(!s&&t.getGeometryType()===i.G.enumPolygon&&0!==(0,o.h)(t,c,0))return h(n,c,0,0),h(r,c,-1,Number.NaN),0;t.getImpl().getAccelerators();let l=this.m_maxSqrDistance,m=l,f=-1;const p=new u.Envelope2D,y=t.querySegmentIterator();let g=!1;for(;y.nextPath();)for(;y.hasNextSegment();){const e=y.nextSegment();e.queryEnvelope(p);const t=p.sqrDistance(c);if(t>l)continue;if(!this.m_bIsNearCalc&&g&&t===l)continue;f=e.getClosestCoordinate(c,!1);const i=e.getCoord2D(f);if(m=a.P.sqrDistance(c,i),this.m_bIsNearCalc){if(m<=l)return 0}else if(!(m>l)&&(!g||m<l)&&(l=m,h(n,c,0,0),h(r,i,y.getStartPointIndex(),f),g=!0,0===l))return 0}return g?Math.sqrt(l):Number.POSITIVE_INFINITY}distancePointEnvelope(e,t,n,r){const i=e.getXY();h(n,i,0,0),h(r,i,-1,Number.NaN);const s=t.asEnvelope2D();return s.contains(i)?0:Math.sqrt(s.sqrDistance(i,r.outPoint))}distanceMultipointGeometry(e,t,n,r){switch(t.getGeometryType()){case i.G.enumPoint:{this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distancePointMultipoint(t,e,r,n);return this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumMultiPoint:return this.distanceMultipointMultipoint(e,t,n,r,1,1);case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipointMultipath(e,t,n,r);case i.G.enumEnvelope:return this.distanceMultipointMultipath(e,x(t),n,r);default:return Number.NaN}}distanceMultipointMultipoint(e,t,n,i,s,o){const u={stack:[],error:void 0,hasError:!1};try{if(this.m_bIsNearCalc&&1===s&&1===o){const r=Math.trunc((0,a.s)(Math.sqrt(e.getPointCount())+1,1,(0,a.i)())),s=Math.trunc((0,a.s)(Math.sqrt(t.getPointCount())+1,1,(0,a.i)()));if((r>=4||s>=4)&&this.distanceMultipointMultipoint(e,t,n,i,r,s)<=this.m_maxSqrDistance)return 0}let c=this.m_maxSqrDistance;const l=[e],m=[t],f=this.swapGeometriesIfBGtA(l,m);f&&(this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),o=(0,a.c)(s,s=o),y(n,i)),(0,r.b)(u,(0,a.h)((()=>{y(n,i),this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)}),!f),!1);const p=l[0].getImpl(),g=m[0].getImpl(),d=p.getPointCount(),v=g.getPointCount(),x=v>1;let _=!1;const M=new a.P,D=new a.P;for(let e=0;e<d;e+=s){if(p.queryXY(e,M),x){const e=this.m_env2DgeometryB.sqrDistance(M);if(this.m_bIsNearCalc){if(e>c)continue;if(this.m_env2DgeometryB.sqrMaxMinDistance(M)<=c)return 0}else if(e>=c)continue}for(let t=0;t<v;t+=o){g.queryXY(t,D);const r=a.P.sqrDistance(M,D);if(this.m_bIsNearCalc){if(r<=c)return 0}else if(!(r>c||_&&r===c)&&(!_||r<c)&&(h(n,M,e,0),h(i,D,t,0),_=!0,c=r,0===c))return _?Math.sqrt(c):Number.POSITIVE_INFINITY}}return _?Math.sqrt(c):Number.POSITIVE_INFINITY}catch(e){u.error=e,u.hasError=!0}finally{(0,r.c)(u)}}distanceMultipointMultipath(e,t,n,r){let s=!!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)&&t.getGeometryType()===i.G.enumPolygon;const c=t.querySegmentIterator();c.stripAttributes();const l=new u.Envelope2D,m=new a.P;let f=this.m_maxSqrDistance;const p=e.getImpl(),y=p.getPointCount(),g=y>1;let d=!1;for(;c.nextPath();)for(;c.hasNextSegment();){const e=c.nextSegment();if(e.queryLooseEnvelope(l),g){const e=l.sqrDistanceEnvelope(this.m_env2DgeometryA,null,null);if(this.m_bIsNearCalc){if(e>f)continue}else if(e>f||d&&e===f)continue}for(let i=0;i<y;i++){if(p.queryXY(i,m),s&&0!==(0,o.h)(t,m,0))return h(n,m,-1,Number.NaN),h(r,m,i,0),0;{const e=l.sqrDistance(m);if(this.m_bIsNearCalc){if(e>f)continue}else if(e>f)continue}const a=e.getClosestCoordinate(m,!1),u=e.getCoord2D(a);m.subThis(u);const y=m.sqrLength();if(this.m_bIsNearCalc){if(y<=f)return 0}else if(!(y>f)&&(!d||y<f)&&(f=y,h(n,p.getXY(i),i,0),h(r,u,c.getStartPointIndex(),a),d=!0,0===f))return 0}s=!1}return d?Math.sqrt(f):Number.POSITIVE_INFINITY}distanceEnvelopeGeometry(e,t,n,r){switch(t.getGeometryType()){case i.G.enumPoint:return this.distancePointEnvelope(t,e,r,n);case i.G.enumMultiPoint:{this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distanceMultipointMultipath(t,x(e),r,n);return this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathMultipath(x(e),t,n,r);case i.G.enumEnvelope:return this.distanceEnvelopeEnvelope(e,t,n,r);default:return Number.NaN}}distanceEnvelopeEnvelope(e,t,n,r){n.t=Number.NaN,n.index=-1,r.t=Number.NaN,r.index=-1;const i=e.asEnvelope2D(),s=t.asEnvelope2D();return Math.sqrt(i.sqrDistanceEnvelope(s,n.outPoint,r.outPoint))}distanceMultipathGeometry(e,t,n,r){switch(t.getGeometryType()){case i.G.enumPoint:{this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distancePointMultipath(t,e,r,n);return this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumMultiPoint:{this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distanceMultipointMultipath(t,e,r,n);return this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathMultipath(e,t,n,r);case i.G.enumEnvelope:return this.distanceMultipathMultipath(e,x(t),n,r);default:return Number.NaN}}distanceMultipathMultipath(e,t,n,i){const o={stack:[],error:void 0,hasError:!1};try{const c=[e],m=[t],h=this.swapGeometriesIfAGtB(c,m);h&&(this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),y(n,i)),(0,r.b)(o,(0,a.h)((()=>{y(n,i),this.m_env2DgeometryB=(0,a.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)}),!h),!1);const v=c[0],x=m[0],_=v.querySegmentIterator();_.stripAttributes();const M=x.querySegmentIterator();if(M.stripAttributes(),this.m_bIsNearCalc&&this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)<=this.m_maxSqrDistance)return 0;if(this.m_bIsNearCalc){const e=Math.trunc((0,a.s)(Math.sqrt(v.getPointCount())+1,1,(0,a.i)())),t=Math.trunc((0,a.s)(Math.sqrt(v.getPointCount())+1,1,(0,a.i)()));if(this.distanceMultipointMultipoint(v,x,n,i,e,t)<=this.m_maxSqrDistance)return 0}if(this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)){const e=l(),t=l();if(g(v,x,_,M,e,t))return f(n,e),f(i,t),0}const D=d(v),P=[],N=new s.S,w=new u.Envelope2D,I=new u.Envelope2D,G=new u.Envelope2D;let b=this.m_maxSqrDistance,S=!0,C=!1;for(let e=0,t=D.length;e<t;++e){v.querySegment(D[e],N,!0);const t=N.get();if(t.queryEnvelope(w),!(w.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>b)){if(this.m_bIsNearCalc&&w.sqrMaxDistanceEnvelope(this.m_env2DgeometryB)<=b)return 0;for(;M.nextPath();){if(this.progress_(),S)x.queryPathEnvelope(M.getPathIndex(),G),P[M.getPathIndex()]=G.clone();else if(w.sqrDistanceEnvelope(P[M.getPathIndex()],null,null)>b)continue;for(;M.hasNextSegment();){const r=M.nextSegment();if(r.queryEnvelope(I),w.sqrDistanceEnvelope(I,null,null)<=b){const s=!w.isIntersecting(I),o=[0],a=[0];let u=t.distance(r,s,o,a);if(u*=u,this.m_bIsNearCalc&&u<=this.m_maxSqrDistance)return 0;if(u<b||u===b&&D[e]<n.index){if(C=!0,p(n,t,D[e],o[0]),p(i,r,M.getStartPointIndex(),a[0]),0===u)return 0;b=u}}}}M.resetToFirstPath(),S=!1}}return C?Math.sqrt(b):Number.POSITIVE_INFINITY}catch(e){o.error=e,o.hasError=!0}finally{(0,r.c)(o)}}swapGeometriesIfAGtB(e,t){return(0,i.v)(e[0])>(0,i.v)(t[0])&&(t[0]=(0,a.c)(e[0],e[0]=t[0]),!0)}swapGeometriesIfBGtA(e,t){return this.swapGeometriesIfAGtB(t,e)}}},81066:function(e,t,n){n.d(t,{G:function(){return r},S:function(){return i}});class r{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}}class i extends r{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}},70213:function(e,t,n){n.d(t,{d:function(){return l},e:function(){return u},s:function(){return c}});var r=n(10057),i=n(85968),s=n(26636),o=n(70885);const a=new class{getOperatorType(){return 10100}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n){return this.executeEx(e,t,n,null,null,Number.NaN)}executeEx(e,t,n,s,o,a){if(e.isEmpty()||t.isEmpty())return Number.NaN;(0,r.c)(e),(0,r.c)(t);const u=e,c=t;Number.isNaN(a)&&(a=Number.POSITIVE_INFINITY);const l=new i.D(a,n).calculate(u,c,s,o);return Number.isFinite(l)?l:Number.NaN}};function u(e,t,n={}){const{unit:r}=n;let i=a.execute((0,o.fromGeometry)(e),(0,o.fromGeometry)(t),null);if(i&&r){const t=(0,o.getSpatialReference)(e);i=(0,s.qp)(i,t,r)}return i}const c=a.supportsCurves(),l=Object.freeze(Object.defineProperty({__proto__:null,execute:u,supportsCurves:c},Symbol.toStringTag,{value:"Module"}))},31215:function(e,t,n){n.d(t,{a:function(){return o},b:function(){return u},e:function(){return s},i:function(){return a},s:function(){return c}});var r=n(11879),i=n(70885);function s(e){const t=(0,i.getSpatialReference)(e);return(0,i.toGeometry)((0,r.ht)((0,i.fromGeometry)(e),(0,i.fromSpatialReference)(t),!1),t)}function o(e){const t=e.map(i.fromGeometry),n=(0,i.getSpatialReference)(e);return(0,r.XR)(t,(0,i.fromSpatialReference)(n),!1).map((e=>(0,i.toGeometry)(e,n)))}function a(e){return(0,r.OA)((0,i.fromGeometry)(e),(0,i.fromSpatialReference)((0,i.getSpatialReference)(e)),!1)}const u=(0,r.dE)(),c=Object.freeze(Object.defineProperty({__proto__:null,execute:s,executeMany:o,isSimple:a,supportsCurves:u},Symbol.toStringTag,{value:"Module"}))},11879:function(e,t,n){n.d(t,{OA:function(){return u},XR:function(){return a},dE:function(){return c},ht:function(){return o}});var r=n(81066),i=(n(10057),n(11894),n(65513));n(60988);const s=new i.O;function o(e,t,n){return s.execute(e,t,n,null)}function a(e,t,n){const i=s.executeMany(new r.S(e),t,n,null);return Array.from(i)}function u(e,t,n){return s.isSimpleAsFeature(e,t,n,null,null)}function c(){return s.supportsCurves()}},70885:function(e,t,n){n.r(t),n.d(t,{fromExtent:function(){return d},fromGeometry:function(){return g},fromMultipoint:function(){return v},fromPoint:function(){return x},fromPolygon:function(){return _},fromPolyline:function(){return M},fromSpatialReference:function(){return D},getSpatialReference:function(){return y},toExtent:function(){return N},toGeometry:function(){return P},toMultipoint:function(){return w},toPoint:function(){return I},toPolygon:function(){return G},toPolyline:function(){return b}});var r=n(9519),i=(n(64699),n(10057)),s=n(60988),o=n(11894),a=n(65513),u=n(71354),c=n(82868),l=n(60508),m=n(67764),h=n(62197),f=(n(77245),n(56870));const p="_gxVersion";function y(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function g(e){switch(e.type){case"point":return x(e);case"multipoint":return v(e);case"polyline":return M(e);case"polygon":return _(e);case"extent":return d(e);default:throw new Error(`Unsupported geometry type: ${e.type}`)}}function d(e){if(!e.getCacheValue(p)){const t=new s.E;t.setCoords(e.xmin,e.ymin,e.xmax,e.ymax),e.hasM&&t.setInterval(2,0,e.mmin,e.mmax),e.hasZ&&t.setInterval(1,0,e.zmin,e.zmax),e.setCacheValue(p,t)}return e.getCacheValue(p)}function v(e){if(!e.getCacheValue(p)){const t=new o.M,n=new s.P,r=e.points,i=e.hasM,a=e.hasZ,u=a?3:2;for(let e=0,s=r.length;e<s;e++){const s=r[e];n.setXYCoords(s[0],s[1]),a&&n.setZ(s[2]??0),i&&n.setM(s[u]??NaN),t.add(n)}e.setCacheValue(p,t)}return e.getCacheValue(p)}function x(e){if(!e.getCacheValue(p)){const t=new s.P;t.setXYCoords(e.x,e.y),e.hasM&&t.setM(e.m),e.hasZ&&t.setZ(e.z),e.setCacheValue(p,t)}return e.getCacheValue(p)}function _(e){if(!e.getCacheValue(p)){const{curveRings:t,hasM:n,hasZ:r,rings:i}=e,s=(0,f.fromGeometryToGXGeometry)({curveRings:t,hasM:n,hasZ:r,rings:i});e.setCacheValue(p,s)}return e.getCacheValue(p)}function M(e){if(!e.getCacheValue(p)){const{curvePaths:t,hasM:n,hasZ:r,paths:i}=e,s=(0,f.fromGeometryToGXGeometry)({curvePaths:t,hasM:n,hasZ:r,paths:i});e.setCacheValue(p,s)}return e.getCacheValue(p)}function D(e){if(e.wkid)return(0,a.c)(e.wkid);const t=e.wkt2||e.wkt;return t?(0,a.a)(t):null}function P(e,t){if(e)switch(e.getGeometryType()){case i.G.enumPoint:return I(e,t);case i.G.enumEnvelope:return N(e,t);case i.G.enumMultiPoint:return w(e,t);case i.G.enumPolyline:return b(e,t);case i.G.enumPolygon:return G(e,t)}return null}function N(e,t){if(e.isEmpty())return null;const n=new u.Z({xmin:e.getXMin(),ymin:e.getYMin(),xmax:e.getXMax(),ymax:e.getYMax(),spatialReference:t}),r=e.getDescription();if(r.hasM()){const t=e.queryInterval(2,0);n.mmin=t.vmin,n.mmax=t.vmax}if(r.hasZ()){const t=e.queryInterval(1,0);n.zmin=t.vmin,n.zmax=t.vmax}return n.setCacheValue(p,e),n}function w(e,t){if(e.isEmpty())return null;const n=e.getDescription(),r=n.hasM(),i=n.hasZ(),o=[],a=new s.P;for(let t=0,n=e.getPointCount();t<n;t++){e.getPointByVal(t,a);const n=[a.getX(),a.getY()];i&&n.push(a.getZ()),r&&n.push(a.getM()),o.push(n)}const u=new c.Z({hasM:r,hasZ:i,points:o,spatialReference:t});return u.setCacheValue(p,e),u}function I(e,t){if(e instanceof r.P)return new l.Z({x:e.x,y:e.y,spatialReference:t});if(e.isEmpty())return null;const n=new l.Z({x:e.getX(),y:e.getY(),spatialReference:t}),i=e.getDescription();return i.hasM()&&(n.m=e.getM()),i.hasZ()&&(n.z=e.getZ()),n.setCacheValue(p,e),n}function G(e,t){if(e.isEmpty())return null;const n=m.Z.fromJSON({spatialReference:t,...(0,f.toGeometry)(e,null)});return n.setCacheValue(p,e),n}function b(e,t){if(e.isEmpty())return null;const n=h.Z.fromJSON({spatialReference:t,...(0,f.toGeometry)(e,null)});return n.setCacheValue(p,e),n}},1663:function(e,t,n){n.d(t,{y:function(){return Y},n_:function(){return U},Nv:function(){return S},p:function(){return E},DF:function(){return C},MC:function(){return R},yL:function(){return T}});var r,i=n(3480),s=n(28947),o=n(26636),a=n(24910),u=n(82846),c=n(73440),l=n(17155),m=(n(61432),n(96711),n(83850),n(48023)),h=n(47925),f=n(60508),p=n(67764),y=n(45213),g=n(95872),d=n(97290),v=n(81592);let x=r=class extends p.Z{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const n=(0,o.En)(this.radius,this.radiusUnit,"meters"),r=e.spatialReference;let i,s="geographic";if(r.isWebMercator?s="webMercator":(null!=(r.wkid&&v.Z[r.wkid])||(r.wkt2||r.wkt)&&(0,o.s_)(r.wkt2||r.wkt))&&(s="projected"),this.geodesic){let r;switch(s){case"webMercator":r=(0,d.Sx)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":r=e}i=this._createGeodesicCircle(r,n,t),"webMercator"===s&&(i=(0,d.$)(i))}else{let r;"webMercator"===s||"projected"===s?r=n/(0,o.Z7)(e.spatialReference):"geographic"===s&&(r=(0,o.ty)(n,"meters",(0,h.Iu)(e.spatialReference).radius)),i=this._createPlanarCircle(e,r,t)}this.spatialReference=i.spatialReference,this.addRing(i.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:n,radiusUnit:i,geodesic:s}=this;return new r({center:e?.clone(),numberOfPoints:t,radius:n,radiusUnit:i,geodesic:s})}_createGeodesicCircle(e,t,n){const r=[],i=[e.x,e.y];for(let s=0;s<360;s+=360/n){const n=this.hasZ?[0,0,e.z??0]:[0,0];(0,g.TB)(n,i,s,t,y.Z.WGS84),r.push(n)}return r.push(r[0]),new p.Z({rings:[r]})}_createPlanarCircle(e,t,n){const r=[],i=2*Math.PI/n;for(let s=0;s<n;++s){const n=i*s,o=[e.x+Math.cos(-n)*t,e.y+Math.sin(-n)*t];this.hasZ&&o.push(e.z??0),r.push(o)}return r.push(r[0]),new p.Z({spatialReference:e.spatialReference,rings:[r]})}};(0,c._)([(0,l.Cb)({type:f.Z})],x.prototype,"center",void 0),(0,c._)([(0,l.Cb)()],x.prototype,"geodesic",void 0),(0,c._)([(0,l.Cb)()],x.prototype,"numberOfPoints",void 0),(0,c._)([(0,l.Cb)()],x.prototype,"radius",void 0),(0,c._)([(0,l.Cb)()],x.prototype,"radiusUnit",void 0),x=r=(0,c._)([(0,m.j)("esri.geometry.Circle")],x);const _=x;var M=n(82868),D=n(62197),P=n(70213),N=n(31215),w=n(28931),I=n(8554),G=n(49609);function b(e,t){const n=new f.Z({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(n.z=e[2]),n}function S(e,t){return new M.Z({points:e,spatialReference:t})}function C(e,t,n){const r=new D.Z({paths:e,spatialReference:t});return n&&(0,w.nc)(r),r}function E(e,t,n,r=!0){const o=(0,s.d9)(e);o.forEach((e=>{const t=e[0],n=e[e.length-1];(0,i.fS)(t,n)&&1!==e.length||e.push(e[0])}));let a=new p.Z({rings:o,spatialReference:t});return a.rings.forEach((e=>{(0,w.bu)(e)||e.reverse()})),n&&(0,w.nc)(a),r&&!(0,N.i)(a)&&(0,I.JY)(t)&&(a=(0,N.e)(a)||a),a}function T(e,t,n){const r=t.mapToLocalMultiple(e),s=[],o={x:r[0].x,y:r[0].y},a=r[1].x,u=r[1].y,c=Math.round(a-o.x),l=Math.round(u-o.y),m=Math.max(Math.abs(c),Math.abs(l));if(n){const e={x:o.x+m,y:o.y+m},t={x:o.x-m,y:o.y-m};s.push((0,G.Q8)(e.x,t.y),(0,G.Q8)(t.x,t.y),(0,G.Q8)(t.x,e.y),(0,G.Q8)(e.x,e.y))}else{const e={x:c>0?o.x+m:o.x-m,y:l>0?o.y+m:o.y-m};s.push((0,G.Q8)(o.x,o.y),(0,G.Q8)(e.x,o.y),(0,G.Q8)(e.x,e.y),(0,G.Q8)(o.x,e.y))}return q(E([s.map((e=>t.localToMap(e))).filter(i.pC)],t.spatialReference,t.doUnnormalization,!0),s,t)}function R(e,t,n){let r=t.mapToLocalMultiple(e);if(1===r.length){const e=48,t=r[0];r=[(0,G.Q8)(t.x-e,t.y+e),(0,G.Q8)(t.x+e,t.y-e),(0,G.Q8)(t.x+e,t.y-e),(0,G.Q8)(t.x-e,t.y+e)]}const s=[],o={x:r[0].x,y:r[0].y},a={x:r[1].x,y:r[1].y};if(n){const e=Math.round(a.x-o.x),t=Math.round(a.y-o.y);s.push((0,G.Q8)(o.x-e,o.y-t),(0,G.Q8)(a.x,o.y-t),(0,G.Q8)(a.x,a.y),(0,G.Q8)(o.x-e,a.y))}else s.push((0,G.Q8)(o.x,o.y),(0,G.Q8)(a.x,o.y),(0,G.Q8)(a.x,a.y),(0,G.Q8)(o.x,a.y));return q(E([s.map((e=>t.localToMap(e))).filter(i.pC)],t.spatialReference,t.doUnnormalization,!0),s,t)}function q(e,t,n){const r=A(t[3],t[2],n),i=A(t[1],t[2],n),s=A(t[0],t[1],n),o=A(t[0],t[3],n);return{geometry:e,midpoints:null!=r&&null!=i&&null!=s&&null!=o?{top:r,right:i,bottom:s,left:o}:null}}function A(e,t,n){Z[0]=e.x,Z[1]=e.y,Z[2]=0,F[0]=t.x,F[1]=t.y,F[2]=0,(0,a.m)(Z,Z,F,.5),B.x=Z[0],B.y=F[1],B.z=F[2];const r=n.localToMap(B);return null!=r?b(r,n.spatialReference):null}const B=(0,G.Q8)(0,0,0),Z=(0,u.Ue)(),F=(0,u.Ue)();function Y(e,t,n,r){const i=t.mapToLocalMultiple(e);let s=null,a=null;if(n)s=i[0],a=i[1];else{const e=i[0],t=i[1],n=Math.round(t.x-e.x),r=Math.round(t.y-e.y),o=Math.max(Math.abs(n),Math.abs(r));s=(0,G.Q8)(n>0?e.x+o/2:e.x-o/2,r>0?e.y+o/2:e.y-o/2),a=(0,G.Q8)(Math.abs(n)>Math.abs(r)?s.x-o/2:s.x,Math.abs(n)>Math.abs(r)?s.y:s.y-o/2)}const u=t.localToMap(s),c=t.localToMap(a);if(null==u||null==c)return null;t.doUnnormalization&&(0,w.Sq)([[u,c]],t.spatialReference);const l=b(u,t.spatialReference),m=b(c,t.spatialReference),h=(0,o.c9)(t.spatialReference);let f=0;if((0,I.JY)(t.spatialReference))f=h*(0,P.e)(l,m);else{const e=s.x-a.x,t=s.y-a.y;f=h*Math.sqrt(e*e+t*t)*(r||1)}const p=new _({center:l,radius:f,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:E(p.rings,p.spatialReference,!1),center:l,edge:m}}function U(e,t,n){const r=t.mapToLocalMultiple(e),s=r[0],o=r[1],a=Math.round(o.x-s.x),u=Math.round(o.y-s.y),c=(0,G.Q8)(n?s.x:s.x+a/2,n?s.y:s.y+u/2),l=n?a:a/2,m=n?u:u/2,h=[],f=2*Math.PI/60;function p(e){const t=Math.cos(e),n=Math.sin(e);return(0,G.Q8)(l*t+c.x,m*n+c.y)}for(let e=0;e<60;e++)h.push(p(e*f));h.push(h[0]);const{spatialReference:y,doUnnormalization:g}=t,d=E([h.map((e=>t.localToMap(e))).filter(i.pC)],y,g,!1),v=t.localToMap(p(Math.PI/2)),x=t.localToMap(p(0)),_=t.localToMap(p(-Math.PI/2)),M=t.localToMap(p(Math.PI));return{geometry:d,midpoints:null!=v&&null!=x&&null!=_&&null!=M?{top:b(v,y),right:b(x,y),bottom:b(_,y),left:b(M,y)}:null}}},49609:function(e,t,n){n.d(t,{Gn:function(){return d},Q8:function(){return f},kq:function(){return y}});var r=n(3480),i=n(50639),s=n(83695),o=n(18156),a=n(21117),u=n(24910),c=n(82846),l=n(60508),m=n(93070);function h(e,t,n=null){return null!=n?[e,t,n]:[e,t]}function f(e,t,n=null){return null!=n?{x:e,y:t,z:n}:{x:e,y:t}}class p{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(r.pC)}get doUnnormalization(){return!1}}class y extends p{constructor(e,t,n=null){super(t),this._defaultZ=n,this.transform=(0,s.Ue)(),this.transformInv=(0,s.Ue)(),this.transform=(0,s.d9)(e),(0,i.U_)(this.transformInv,this.transform)}makeMapPoint(e,t){return h(e,t,this._defaultZ)}mapToLocal(e){return f(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return h(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class g extends p{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,c.Ue)(),this.tangentFrameUpWS=(0,c.Ue)(),this.tangentFrameRightWS=(0,c.Ue)(),this.tangentFrameForwardWS=(0,c.Ue)(),this.localFrameRightWS=(0,c.Ue)(),this.localFrameUpWS=(0,c.Ue)(),this.worldToLocalTransform=(0,a.Ue)(),this.localToWorldTransform=(0,a.Ue)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,m.R.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,m.R.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,m.R.Z,this.tangentFrameForwardWS);const r=(0,c.Ue)();(0,u.g)(r,this.tangentFrameForwardWS,(0,u.e)(n,this.tangentFrameForwardWS)),(0,u.d)(this.localFrameRightWS,n,r),(0,u.n)(this.localFrameRightWS,this.localFrameRightWS),(0,u.h)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,o.b0)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,o.U_)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return h(e,t,this.defaultZ)}mapToLocal(e){const t=(0,c.Ue)();this.view.renderCoordsHelper.toRenderCoords(new l.Z({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,u.v)(t,t,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new l.Z({spatialReference:this.view.spatialReference}));return null!=n?f(n.x/this.scale,n.y/this.scale):null}localToMap(e){const t=(0,c.Ue)();this.view.renderCoordsHelper.toRenderCoords(new l.Z({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,u.v)(t,t,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new l.Z({spatialReference:this.view.spatialReference}));return null!=n?h(n.x,n.y,this.defaultZ):null}}function d(e,t){if("2d"===e.type)return new y(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const n=t.length>2?new l.Z({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new l.Z({x:t[0],y:t[1],spatialReference:e.spatialReference});return new g(e,n)}return null}}}]);