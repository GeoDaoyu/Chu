"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[11407],{12816:function(e,r,t){t.d(r,{ME:function(){return p},Su:function(){return f},tz:function(){return y}});var i=t(88194),n=t(50702),a=t(93568),s=t(74765);const l={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function o(e){if(function(e){return e in l}(e)){const r=l[e];return!0===r?e:r}return null}const c=[],u=new Map;function d(e){for(const r of u.keys())b(e.pattern,r)&&u.delete(r)}function y(e){return c.includes(e)||(d(e),c.unshift(e)),(0,n.kB)((()=>{const r=c.indexOf(e);r>-1&&(c.splice(r,1),d(e))}))}async function p(e){const r=(0,s.Kd)();u.has(e)||u.set(e,async function(e,r){const t=[];for(const i of c)if(b(i.pattern,e))try{return await i.fetchMessageBundle(e,r)}catch(e){t.push(e)}if(t.length)throw new i.Z("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:t});throw new i.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,r));const t=u.get(e);return t&&await m.add(t),t}function f(e){const r=(0,s.v2)(e);return r?o(e)??o(r.language):null}function b(e,r){return"string"==typeof e?r.startsWith(e):e.test(r)}(0,s.Ze)((()=>{u.clear()}));const m=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,a.hh)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},40030:function(e,r,t){t.d(r,{p3:function(){return u},sh:function(){return o},uf:function(){return c}});var i=t(74765);const n={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let a=new WeakMap,s={};function l(e){const r=e||s;if(!a.has(r)){const t=(0,i.Kd)(),s=(0,i.v2)(t)?.language,l=s&&n[s]||t;a.set(r,new Intl.NumberFormat(l,e))}return a.get(r)}function o(e={}){const r={};return null!=e.digitSeparator&&(r.useGrouping=e.digitSeparator),null!=e.places&&(r.minimumFractionDigits=r.maximumFractionDigits=e.places),r}function c(e,r){return Object.is(e,-0)&&(e=0),l(r).format(e)}function u(e,r=(0,i.Kd)()){if(!e)return null;let t=d.get(r);if(!t){const e=l().formatToParts(12345.6),i=[...l({useGrouping:!1}).format(9876543210)].reverse(),n=new Map(i.map(((e,r)=>[e,r]))),a=new RegExp(`[${e.find((e=>"group"===e.type))?.value}]`,"g"),s=new RegExp(`[${e.find((e=>"decimal"===e.type))?.value}]`),o=new RegExp(`[${i.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,u=/[-\u2212\u2013\u2014\u2015]/g;t=e=>{if(""===(e=e.trim().replaceAll(a,"").replace(s,".").replace(o,(e=>String(n.get(e)))).replaceAll(c,"").replaceAll(u,"-")))return null;const r=Number(e);return isNaN(r)?null:r},d.set(r,t)}return t(e)}(0,i.Ze)((()=>{a=new WeakMap,s={}}));const d=new Map},15364:function(e,r,t){t.d(r,{$8:function(){return S},Vo:function(){return h},YZ:function(){return o},a8:function(){return y},aV:function(){return p},ln:function(){return m},wP:function(){return v}});var i=t(60646),n=t(76554),a=(t(18177),t(3411)),s=t(41801),l=t(88097);const o=",",c={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},u=new Set(["integer","small-integer"]);let d=null;function y(e){return(0,n.y2)(e)||(0,n.UQ)(e)||(0,n.ig)(e)}async function p(e){const{field:r,field2:t,field3:i,normalizationField:n,valueExpression:s}=e;let l=[];if(s){if(!d){const{arcadeUtils:e}=await(0,a.L)();d=e}l=d.extractFieldNames(s)}return r&&l.push(r),t&&l.push(t),i&&l.push(i),n&&l.push(n),l}function f(e){return String(e).padStart(2,"0")}function b(e,r,t){let i;return"date"===r||"number"===r?("number"===r&&(e=new Date(e)),i=`TIMESTAMP'${t?e.getFullYear():e.getUTCFullYear()}-${f((t?e.getMonth():e.getUTCMonth())+1)}-${f(t?e.getDate():e.getUTCDate())} ${f(t?e.getHours():e.getUTCHours())}:${f(t?e.getMinutes():e.getUTCMinutes())}:${f(t?e.getSeconds():e.getUTCSeconds())}'`):i=e,i}function m(e,r,t,i){const{hasQueryEngine:n}=e,a=`(${b(t,g(e,t),n)} - ${b(r,g(e,r),n)})`;let s=c[i],l="/";return s<1&&(s=1/s,l="*"),{sqlExpression:1===s?a:`(${a} ${l} ${s})`,sqlWhere:null}}function g(e,r){if(r instanceof Date)return"date";if("number"==typeof r)return"number";if("string"==typeof r){const t=e.getField(r);if("<now>"===r.toLowerCase())return;if((0,n.y2)(t))return"field"}}function h(e,r){const t=r&&e.getField(r);return!!t&&u.has(t.type)}function v(e){return`cast(${e} as float)`}function S(e,r){const{format:t,timeZoneOptions:n,fieldType:a}=r??{};let o,c;if(n&&({timeZone:o,timeZoneName:c}=(0,l.Np)(n.layerTimeZone,n.datesInUnknownTimezone,n.viewTimeZone,(0,i.Ze)(t||"short-date-short-time"),a)),"string"==typeof e&&isNaN(Date.parse("time-only"===a?`1970-01-01T${e}Z`:e)))return e;switch(a){case"date-only":{const r=(0,i.Ze)(t||"short-date");return"string"==typeof e?(0,i.o8)(e,{...r}):(0,i.p6)(e,{...r,timeZone:s.pt})}case"time-only":{const r=(0,i.Ze)(t||"short-time");return"string"==typeof e?(0,i.LJ)(e,r):(0,i.p6)(e,{...r,timeZone:s.pt})}case"timestamp-offset":{if(!o&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const r=t||n?(0,i.Ze)(t||"short-date-short-time"):void 0,a=r?{...r,timeZone:o,timeZoneName:c}:void 0;return"string"==typeof e?(0,i.i$)(e,a):(0,i.p6)(e,a)}default:{const r=t||n?(0,i.Ze)(t||"short-date-short-time"):void 0;return(0,i.p6)("string"==typeof e?new Date(e):e,r?{...r,timeZone:o,timeZoneName:c}:void 0)}}}},26334:function(e,r,t){t.d(r,{g:function(){return a},s:function(){return s}});var i=t(1800),n=t(12816);async function a(e){if(!e)return;const r=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,t=await(0,n.ME)("esri/t9n/basemaps");return t[e]||t[r]}const s={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return(0,i.V)("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}}},18177:function(e,r,t){t.d(r,{RH:function(){return d},wZ:function(){return a},zb:function(){return s},zw:function(){return u}});t(43254);var i=t(95490),n=t(8971);t(26334);function a(e,r){return e.allLayerViews.find((e=>e.uid===r))?.layer.parent===e.map?.basemap}function s(e){return!!e?.baseLayers.concat(e.referenceLayers).some(l)}function l(e){if(c(e.url))return!0;if("vector-tile"===e.type)for(const r in e.sourceNameToSource){if(c(e.sourceNameToSource[r]?.sourceUrl))return!0}return!1}const o=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function c(e){if(!e)return!1;const r=new i.R9((0,i.hF)(e));return!!r.authority&&o.test(r.authority)}function u(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:y("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers?void 0:e.sublayers?.map((e=>({id:e.id,visible:e.visible}))),activeLayerId:"wmts"===e.type?e.activeLayer?.id:void 0}}function d(e,r){if(e.type!==r.type||e.url!==r.url||e.minScale!==r.minScale||e.maxScale!==r.maxScale||e.visible!==r.visible||e.opacity!==r.opacity)return!1;if(!(0,n.yQ)(e.effect,r.effect))return!1;if(null!=e.activeLayerId||null!=r.activeLayerId)return e.activeLayerId===r.activeLayerId;if(null!=e.sublayers||null!=r.sublayers){if(null==e.sublayers||null==r.sublayers||e.sublayers.length!==r.sublayers.length)return!1;for(let t=0;t<e.sublayers.length;t++){const i=e.sublayers.at(t),n=r.sublayers.at(t);if(i?.id!==n?.id||i?.visible!==n?.visible)return!1}}return!0}function y(e){return e?(0,i.Fv)(e).replace(/^\s*https?:/i,"").toLowerCase():""}},11407:function(e,r,t){t.r(r),t.d(r,{applyTextFormattingHTML:function(){return K},createFieldInfoMap:function(){return P},findRelatedLayer:function(){return le},findUtilityNetwork:function(){return oe},fixTokens:function(){return x},formatAttributes:function(){return J},formatEditInfo:function(){return z},formatValueToFieldInfo:function(){return B},getAllFieldInfos:function(){return H},getFieldInfo:function(){return q},getFieldInfoLabel:function(){return U},getFixedFieldName:function(){return k},getFixedFieldNames:function(){return A},getSourceLayer:function(){return w},graphicCallback:function(){return M},htmlEntities:function(){return Q},isAssociatedFeatureSupportedLayer:function(){return C},isExpressionField:function(){return F},isFeatureSupportedLayer:function(){return R},isGraphicForRelatableFeatureSupportedLayer:function(){return $},isRelatableFeatureSupportedLayer:function(){return V},isRelatableLayer:function(){return E},isRelatedField:function(){return re},preLayerQueryCallback:function(){return ae},preRequestCallback:function(){return se},querySourceLayer:function(){return X},queryUpdatedFeature:function(){return ee},shouldOpenInNewTab:function(){return _},substituteAttributes:function(){return Z},substituteFieldsInLinksAndAttributes:function(){return D}});var i=t(61432),n=t(96711),a=t(29138),s=t(60646),l=t(40030),o=t(76554),c=t(75428),u=t(15364),d=t(3411),y=t(88097);const p=()=>n.Z.getLogger("esri.widgets.Feature.support.featureUtils"),f=/href=(""|'')/gi,b=/(\{([^{\r\n]+)\})/g,m=/'/g,g=/^\s*expression\//i,h=/(\n)/gi,v=/[\u00A0-\u9999<>&]/gim,S=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,L=/^(?:mailto:|tel:)/,T="relationships/",I=(0,s.Ze)("short-date-short-time");function w(e){if(null!=e)return(e.sourceLayer||e.layer)??void 0}async function M({type:e,value:r,event:t}){try{return"function"==typeof r?r(t):await r}catch(i){return void p().error("error",`An error occurred when calling the "${e}" function`,{error:i,graphic:t.graphic,value:r})}}function _(e=""){if(e)return!L.test(e.trim().toLowerCase())}function F(e){return!!e&&g.test(e)}function U(e,r){const t=function(e,r){if(!r||!F(r)||!e)return;const t=r.replace(g,"").toLowerCase();return e.find((({name:e})=>e.toLowerCase()===t))}(r,e?.fieldName);return t?t.title||null:e?e.label||e.fieldName:null}function k(e,r){const t=N(r,e);return t?t.name:e}function A(e,r){return e&&e.map((e=>k(e,r)))}function N(e,r){return e&&"function"==typeof e.getField&&r?e.getField(r)??null:null}function j(e){return`${e}`.trim()}function D({attributes:e,globalAttributes:r,layer:t,text:i,expressionAttributes:n,fieldInfoMap:a}){return i?Z({formattedAttributes:r,template:G(i,{...r,...n,...e},t),fieldInfoMap:a}):""}function Z({formattedAttributes:e,template:r,fieldInfoMap:t}){return j(function(e){return e.replaceAll(f,"")}((0,a.gx)((0,a.gx)(r,(e=>function(e,r){return`{${r.get(e.toLowerCase())?.fieldName||e}}`}(e,t))),e)))}function O(e,r=!1){const t={...e};return Object.keys(t).forEach((e=>function(e,r,t=!1){const i=r[e];if("string"==typeof i){const n="%27",a=(t?encodeURIComponent(i):i).replaceAll(m,n);r[e]=a}}(e,t,r))),t}function x(e,r){return e.replaceAll(b,((e,t,i)=>{const n=N(r,i);return n?`{${n.name}}`:t}))}function G(e,r,t){const i=x(e,t);return i?i.replaceAll(S,((e,t,i)=>function(e,r,t){const i=(r=j(r))&&"{"!==r[0];return(0,a.gx)(e,O(t,i||!1))}(e,t||i,r))):i}function R(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&("feature"===e.type||"scene"===e.type||"subtype-group"===e.type||"subtype-sublayer"===e.type||"sublayer"===e.type)&&"when"in e}function E(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function V(e){return R(e)&&E(e)}function C(e){return!(!(e&&"object"==typeof e&&"createQuery"in e&&"getField"in e&&"queryFeatureCount"in e&&"queryFeatures"in e&&"queryObjectIds"in e&&"capabilities"in e&&"fields"in e&&"fieldsIndex"in e&&"type"in e)||"feature"!==e.type&&"subtype-group"!==e.type&&"subtype-sublayer"!==e.type&&"sublayer"!==e.type||!("when"in e))&&("subtype-sublayer"===e.type&&"parent"in e&&e.parent&&"object"==typeof e.parent?"globalIdField"in e.parent:"globalIdField"in e)}function $(e){return!!e&&"object"==typeof e&&"sourceLayer"in e&&V(e.sourceLayer)}function B(e,r){const{fieldInfos:t,fieldName:i,preventPlacesFormatting:n,layer:a,timeZone:s}=r,c=q(t,i),d=N(a,i);if(c&&!(0,o.Ec)(i)){const r=d?.type,t=c.format?.dateFormat;if("date"===r||"date-only"===r||"time-only"===r||"timestamp-offset"===r||t)return(0,u.$8)(e,{format:t,fieldType:r,timeZoneOptions:{layerTimeZone:a&&"preferredTimeZone"in a?a.preferredTimeZone:null,viewTimeZone:s,datesInUnknownTimezone:!(!a||!("datesInUnknownTimezone"in a)||!a.datesInUnknownTimezone)}})}const y=c?.format;return"string"==typeof e&&(0,o.Ec)(i)&&y?function(e,r){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?W(e,",",", ",r):e.includes(";")?W(e,";","; ",r):e.includes(" ")?W(e," "," ",r):(0,l.uf)(Number(e),(0,l.sh)(r))}(e,y):"string"==typeof(e=function(e,r){if("string"==typeof e&&r&&null==r.dateFormat&&(null!=r.places||null!=r.digitSeparator)){const r=Number(e);if(!isNaN(r))return r}return e}(e,y))||null==e||null==y?K(e):(0,l.uf)(e,n?{...(0,l.sh)(y),minimumFractionDigits:0,maximumFractionDigits:20}:(0,l.sh)(y))}function W(e,r,t,i){return e.trim().split(r).map((e=>(0,l.uf)(Number(e),(0,l.sh)(i)))).join(t)}function q(e,r){if(e?.length&&r)return e.find((e=>e.fieldName?.toLowerCase()===r.toLowerCase()))}function z(e,r,t,i){const{creatorField:n,creationDateField:a,editorField:l,editDateField:o}=e;if(!r)return;const c=(0,y.Np)(i&&"preferredTimeZone"in i?i.preferredTimeZone:null,!(!i||!("datesInUnknownTimezone"in i)||!i.datesInUnknownTimezone),t,I,"date"),u={...I,...c},d=r[o];if("number"==typeof d){const e=r[l];return{type:"edit",date:(0,s.p6)(d,u),user:e}}const p=r[a];if("number"==typeof p){const e=r[n];return{type:"create",date:(0,s.p6)(p,u),user:e}}return null}function P(e,r){const t=new Map;if(!e)return t;for(const i of e){if(!i.fieldName)continue;const e=k(i.fieldName,r);i.fieldName=e,t.set(e.toLowerCase(),i)}return t}function H(e){const r=[];if(!e)return r;const{fieldInfos:t,content:i}=e;return t&&r.push(...t),i&&Array.isArray(i)?(i.forEach((e=>{if("fields"===e.type){const t=e?.fieldInfos;t&&r.push(...t)}})),r):r}function Q(e){return e.replaceAll(v,(e=>`&#${e.charCodeAt(0)};`))}function K(e){return"string"==typeof e?e.replaceAll(h,'<br class="esri-text-new-line" />'):e}function Y(e){const{value:r,fieldName:t,fieldInfos:n,fieldInfoMap:a,layer:s,graphic:l,timeZone:c}=e;if(null==r)return"";const d=function({fieldName:e,value:r,graphic:t,layer:n}){if(re(e))return null;if(!n||"function"!=typeof n.getFieldDomain)return null;const a=t&&n.getFieldDomain(e,{feature:t,excludeImpliedDomains:(0,i.Z)("esri-widget-legacy-field-domain-calculation")});return a&&"coded-value"===a.type?a.getName(r):null}({fieldName:t,value:r,graphic:l,layer:s});if(d)return d;const y=function({fieldName:e,graphic:r,layer:t}){if(re(e))return null;if(!t||"function"!=typeof t.getFeatureType)return null;const{typeIdField:i}=t;if(!i||e!==i)return null;const n=t.getFeatureType(r);return n?n.name:null}({fieldName:t,graphic:l,layer:s});if(y)return y;if(a.get(t.toLowerCase()))return B(r,{fieldInfos:n||Array.from(a.values()),fieldName:t,layer:s,timeZone:c});const p=s?.fieldsIndex?.get(t);return p&&((0,u.a8)(p)||(0,o.sX)(p))?(0,u.$8)(r,{fieldType:p.type,timeZoneOptions:{layerTimeZone:s&&"preferredTimeZone"in s?s.preferredTimeZone:null,viewTimeZone:c,datesInUnknownTimezone:!(!s||!("datesInUnknownTimezone"in s)||!s.datesInUnknownTimezone)}}):K(r)}function J({fieldInfos:e,attributes:r,layer:t,graphic:i,fieldInfoMap:n,relatedInfos:a,timeZone:s}){const l={};return a?.forEach((r=>function({attributes:e,relatedInfo:r,fieldInfoMap:t,fieldInfos:i,layer:n,timeZone:a}){e&&r&&(r.relatedFeatures?.forEach((s=>te({attributes:e,graphic:s,relatedInfo:r,fieldInfoMap:t,fieldInfos:i,layer:n,timeZone:a}))),r.relatedStatsFeatures?.forEach((s=>te({attributes:e,graphic:s,relatedInfo:r,fieldInfoMap:t,fieldInfos:i,layer:n,timeZone:a}))))}({attributes:l,relatedInfo:r,fieldInfoMap:n,fieldInfos:e,layer:t,timeZone:s}))),r&&Object.keys(r).forEach((a=>{const o=r[a];l[a]=Y({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:t,value:o,graphic:i,timeZone:s})})),l}async function X(e,r){const{layer:t,graphic:i,outFields:n,objectIds:a,returnGeometry:s,spatialReference:l}=e,o=a[0];if("number"!=typeof o&&"string"!=typeof o){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",r={layer:t,graphic:i,objectId:o,requiredFields:n};return p().warn(e,r),null}if(!(0,c.S1)(t)?.operations?.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",r={layer:t,graphic:i,requiredFields:n,returnGeometry:s};return p().warn(e,r),null}const u=t.createQuery();return u.objectIds=a,u.outFields=n?.length?n:[t.objectIdField],u.returnGeometry=!!s,u.returnZ=!!s,u.returnM=!!s,u.outSpatialReference=l,(await t.queryFeatures(u,r)).features[0]}async function ee({graphic:e,popupTemplate:r,layer:t,spatialReference:i},n){if(!t||!r)return;if("function"==typeof t.load&&await t.load(n),!e.attributes)return;const a=t.objectIdField,s=e.attributes[a];if(null==s)return;const l=[s],c=await r.getRequiredFields(t.fieldsIndex),u=(0,o.R9)(e,c),y=u?[]:c.includes(a)?c:[...c,a],p=r.returnGeometry||await async function(e){if(!e.expressionInfos?.length)return!1;const r=await(0,d.L)(),{arcadeUtils:{hasGeometryFunctions:t}}=r;return t(e)}(r);if(u&&!p)return;const f=await X({layer:t,graphic:e,outFields:y,objectIds:l,returnGeometry:p,spatialReference:i},n);f&&(f.geometry&&(e.geometry=f.geometry),f.attributes&&(e.attributes={...e.attributes,...f.attributes}))}function re(e=""){return!!e&&e.includes(T)}function te({attributes:e,graphic:r,relatedInfo:t,fieldInfos:i,fieldInfoMap:n,layer:a,timeZone:s}){e&&r&&t&&Object.keys(r.attributes).forEach((l=>{const o=function(e){return e?`${T}${e.layerId}/${e.fieldName}`:""}({layerId:t.relation.id.toString(),fieldName:l}),c=r.attributes[l];e[o]=Y({fieldName:o,fieldInfos:i,fieldInfoMap:n,layer:a,value:c,graphic:r,timeZone:s})}))}const ie=e=>{if(!e)return!1;const r=e.toUpperCase();return r.includes("CURRENT_TIMESTAMP")||r.includes("CURRENT_DATE")||r.includes("CURRENT_TIME")},ne=({layer:e,method:r,query:t,definitionExpression:i})=>{if(!e.capabilities?.query?.supportsCacheHint||"attachments"===r)return;const n=null!=t.where?t.where:null,a=null!=t.geometry?t.geometry:null;ie(i)||ie(n)||"extent"===a?.type||"tile"===t.resultType||(t.cacheHint=!0)},ae=({query:e,layer:r,method:t})=>{ne({layer:r,method:t,query:e,definitionExpression:`${r.definitionExpression} ${r.serviceDefinitionExpression??""}`})},se=({queryPayload:e,layer:r,method:t})=>{ne({layer:r,method:t,query:e,definitionExpression:`${r.definitionExpression} ${r.serviceDefinitionExpression??""}`})};function le(e,r,t){return e&&r&&t?"sublayer"===r.type?ue({layers:r.layer?.allSublayers,map:e,relatedLayer:r,relationship:t})||ue({layers:r.layer?.subtables,map:e,relatedLayer:r,relationship:t}):ue({layers:e.allLayers,map:e,relatedLayer:r,relationship:t})||ue({layers:e.allTables,map:e,relatedLayer:r,relationship:t}):null}function oe(e,r){return e&&"utilityNetworks"in e&&r?e.utilityNetworks?.find((e=>e.isUtilityLayer(r))):null}function ce(e,r){return e?.allTables.find((e=>"feature"===e.type&&e.layerId===r.id&&e.url===r.layer?.url))}function ue({map:e,relationship:r,relationship:{relatedTableId:t},relatedLayer:i,layers:n}){if(!n)return null;for(const a of n){if("map-image"===a.type){const t=ue({layers:a.sublayers,map:e,relatedLayer:i,relationship:r})||ue({layers:a.subtables,map:e,relatedLayer:i,relationship:r});if(t)return t;continue}if(!V(a))continue;if("sublayer"===i.type){if(a!==i&&a.id===t)return a.isTable?ce(e,a):a;continue}const n="scene"===i.type&&i.associatedLayer?i.associatedLayer.url:i.url;if(!n)return null;if("sublayer"!==a.type){if(a!==i&&a.url===n&&a.layerId===t)return a}else if(a!==i&&a.layer?.url===n&&a.id===t)return a.isTable?ce(e,a):a}return null}}}]);