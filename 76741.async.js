"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[76741],{12853:function(e,t,r){r.d(t,{z:function(){return o}});var n=r(69071);class o{constructor(e,t){this.removeFunc=t,this._storage=new n.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},58426:function(e,t,r){r.d(t,{$c:function(){return d},Hg:function(){return y},jW:function(){return f},xb:function(){return m}});var n=r(70880),o=r(43254),i=r(22018);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof n.Z}function l(e){return e instanceof o.Z?Object.keys(e.items):a(e)?(0,i.vw)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof o.Z?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function p(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const n=l(e),o=l(t);if(0===n.length&&0===o.length)return;if(!n.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const i=o.filter((e=>!n.includes(e))),f=n.filter((e=>!o.includes(e))),d=n.filter((r=>o.includes(r)&&u(e,r)!==u(t,r))).concat(i,f).sort(),y=c(e);if(y&&s.has(y)&&d.length)return{type:"complete",oldValue:e,newValue:t};let m;const h=a(e)&&a(t);for(const n of d){const o=u(e,n),i=u(t,n);let s;if((h||"function"!=typeof o&&"function"!=typeof i)&&o!==i&&(null!=o||null!=i)){if(r&&r[n]&&"function"==typeof r[n])s=r[n]?.(o,i);else if(o instanceof Date&&i instanceof Date){if(o.getTime()===i.getTime())continue;s={type:"complete",oldValue:o,newValue:i}}else s="object"==typeof o&&"object"==typeof i&&c(o)===c(i)?p(o,i):{type:"complete",oldValue:o,newValue:i};null!=s&&(null!=m?m.diff[n]=s:m={type:"partial",diff:{[n]:s}})}}return m}function f(e,t){return function(e,t){if(null==e)return!1;const r=t.split(".");let n=e;for(const e of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const t=n.diff[e];if(!t)return!1;n=t}}return!0}(e,t)}function d(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},70243:function(e,t,r){function n(e){return null!=a(e)||null!=s(e)}function o(e){return l.test(e)}function i(e){return a(e)??s(e)}function s(e){const t=new Date(e);return function(e,t){if(Number.isNaN(e.getTime()))return!1;let r=!0;if(c&&/\d+\W*$/.test(t)){const e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,n=0;for(;!t&&n<=e.length;)t=!u.test(e[n]),n++;r=!t}}return r}(t,e)?Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset():null}function a(e){const t=l.exec(e);if(!t?.groups)return null;const r=t.groups,n=+r.year,o=+r.month-1,i=+r.day,s=+(r.hours??"0"),a=+(r.minutes??"0"),u=+(r.seconds??"0");if(s>23)return null;if(a>59)return null;if(u>59)return null;const c=r.ms??"0",p=c?+c.padEnd(3,"0").slice(0,3):0;let f;if(r.isUTC||!r.offsetSign)f=Date.UTC(n,o,i,s,a,u,p);else{const e=+r.offsetHours,t=+r.offsetMinutes;f=6e4*("+"===r.offsetSign?-1:1)*(60*e+t)+Date.UTC(n,o,i,s,a,u,p)}return Number.isNaN(f)?null:f}r.d(t,{mu:function(){return o},of:function(){return n},sG:function(){return i}});const l=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;const u=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,c=!Number.isNaN(new Date("technology 10").getTime())},478:function(e,t,r){r.r(t),r.d(t,{default:function(){return ee}});var n=r(73440),o=r(997),i=r(84060),s=r(60123),a=r(95490),l=r(17155),u=r(95226),c=r(61432),p=(r(83850),r(48023)),f=r(29884),d=r(71354),y=r(45213),m=r(98842),h=r(38209),g=r(88194),b=r(97006),w=r(96711),v=r(93568),C=r(82592),S=r(73967),x=r(72866),I=r(25262),F=r(13878),T=r(41801);let _=class extends b.Z{constructor(){super(...arguments),this._connection=null,this._workerHandler=null,this.capabilities=(0,S.MS)(!1,!1),this.type="wfs",this.refresh=(0,v.Ds)((async()=>{await this.load();const e={customParameters:this.layer.customParameters,maxRecordCount:this.layer.maxRecordCount,maxTotalRecordCount:this.layer.maxTotalRecordCount,maxPageCount:this.layer.maxPageCount},{extent:t}=await this._workerHandler.refresh(e);return t&&(this.sourceJSON.extent=t),{dataChanged:!0,updates:{extent:this.sourceJSON.extent}}}))}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this._startWorker({signal:t})),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null,this._workerHandler=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(e,t={}){const r=await this.queryFeaturesJSON(e,t);return F.Z.fromJSON(r)}async queryFeaturesJSON(e,t={}){return await this.load(t),this._workerHandler.queryFeatures(e?e.toJSON():void 0,t)}async queryFeatureCount(e,t={}){return await this.load(t),this._workerHandler.queryFeatureCount(e?e.toJSON():void 0,t)}async queryObjectIds(e,t={}){return await this.load(t),this._workerHandler.queryObjectIds(e?e.toJSON():void 0,t)}async queryExtent(e,t={}){await this.load(t);const r=await this._workerHandler.queryExtent(e?e.toJSON():void 0,t);return{count:r.count,extent:d.Z.fromJSON(r.extent)}}async querySnapping(e,t={}){return await this.load(t),this._workerHandler.querySnapping(e,t)}async queryAttributeBins(e,t={}){await this.load(t);const r=await this._workerHandler.queryAttributeBins(e?.toJSON(),t);return I.Z.fromJSON(r)}async _createLoadOptions(e){const{url:t,customParameters:r,name:n,namespaceUri:o,fields:i,geometryType:s,maxRecordCount:a,maxPageCount:l,maxTotalRecordCount:u,swapXY:c}=this.layer,p="defaults"===this.layer.originOf("spatialReference")?void 0:this.layer.spatialReference;if(!t)throw new g.Z("wfs-layer:missing-url","WFSLayer must be created with a url");this.wfsCapabilities||(this.wfsCapabilities=await(0,x.FU)(t,{customParameters:r,...e}));const f=["fields","geometryType","name","namespaceUri","swapXY"].some((e=>null==this.layer[e])),d=f?await(0,x.be)(this.wfsCapabilities,n,o,{spatialReference:p,customParameters:r,signal:e?.signal}):{...(0,x.eB)(i??[]),geometryType:s,name:n,namespaceUri:o,spatialReference:p,swapXY:c},y=(0,x.ft)(this.wfsCapabilities.readFeatureTypes(),d.name,d.namespaceUri),h=m.Mk.toJSON(d.geometryType),{operations:b}=this.wfsCapabilities,w=b.GetFeature.url,v=b.GetFeature.outputFormat;return{customParameters:r,featureType:y,fields:d.fields?.map((e=>e.toJSON()))??[],geometryField:d.geometryField,geometryType:h,getFeatureUrl:w,getFeatureOutputFormat:v,maxRecordCount:a,maxPageCount:l,maxTotalRecordCount:u,objectIdField:d.objectIdField,spatialReference:d.spatialReference?.toJSON(),swapXY:!!d.swapXY}}async _startWorker(e){const[t,r]=await(0,v.as)([this._createLoadOptions(e),(0,C.bA)("WFSSourceWorker",{...e,strategy:(0,c.Z)("feature-layers-workers")?"dedicated":"local",registryTarget:this})]),n=t.error||r.error||null,o=r.value||null;if(n)throw o&&o.close(),n;const i=t.value;this._connection=r.value,this._workerHandler=this._connection.createInvokeProxy();const s=await this._workerHandler.load(i,e);for(const e of s.warnings)w.Z.getLogger(this.layer).warn("#load()",`${e.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:e});this.sourceJSON={dateFieldsTimeReference:{timeZoneIANA:T.pt},extent:s.extent,fields:i.fields,geometryType:i.geometryType,objectIdField:i.objectIdField,geometryField:i.geometryField,drawingInfo:(0,S.bU)(i.geometryType),name:i.featureType.title,wfsInfo:{name:i.featureType.name,featureUrl:i.getFeatureUrl,maxFeatures:i.maxRecordCount,swapXY:i.swapXY,supportedSpatialReferences:i.featureType.supportedSpatialReferences,version:"2.0.0",wfsNamespace:i.featureType.namespaceUri}}}};(0,n._)([(0,l.Cb)()],_.prototype,"capabilities",void 0),(0,n._)([(0,l.Cb)({constructOnly:!0})],_.prototype,"layer",void 0),(0,n._)([(0,l.Cb)()],_.prototype,"sourceJSON",void 0),(0,n._)([(0,l.Cb)()],_.prototype,"type",void 0),(0,n._)([(0,l.Cb)()],_.prototype,"wfsCapabilities",void 0),_=(0,n._)([(0,p.j)("esri.layers.graphics.sources.WFSSource")],_);var M,P=r(83263),E=r(55591),R=r(7150),j=r(15303),k=r(88920),O=r(85330),A=r(90833),N=r(27202),Z=r(19306),L=r(3752),G=r(99671),D=r(30472),U=r(93295),z=r(88792),q=r(49651),$=r(13545),B=r(76554),J=r(89428),H=r(80862),V=r(60541),W=r(29191),Q=r(99382),Y=r(88097);const X=(0,$.v)();let K=M=class extends((0,A.c_)((0,R.tM)((0,E.N)((0,k.M)((0,j.b)((0,P.h7)((0,G.n)((0,D._)((0,Z.Q)((0,L.M)((0,O.q)((0,N.I)((0,i.R)(h.Z)))))))))))))){static fromWFSLayerInfo(e){const{customParameters:t,fields:r,geometryField:n,geometryType:o,name:i,namespaceUri:s,objectIdField:a,spatialReference:l,swapXY:u,url:c,wfsCapabilities:p}=e;return new M({customParameters:t,fields:r,geometryField:n,geometryType:o,name:i,namespaceUri:s,objectIdField:a,spatialReference:l,swapXY:u,url:c,wfsCapabilities:p})}constructor(e){super(e),this.copyright=null,this.customParameters=null,this.dateFieldsTimeZone=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureUrl=void 0,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="WFS",this.maxRecordCount=3e3,this.maxPageCount=10,this.maxTotalRecordCount=2e5,this.mode=0,this.name=null,this.namespaceUri=null,this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new _({layer:this}),this.spatialReference=y.Z.WGS84,this.spatialReferences=[4326],this.swapXY=void 0,this.title="WFS",this.type="wfs",this.url=null,this.version=void 0}destroy(){this.source?.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WFS"]},e).then((()=>this.source.load(e))).then((()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo","spatialReference","name","namespaceUri"],"service"),(0,B.YN)(this.renderer,this.fieldsIndex),(0,B.UF)(this.timeInfo,this.fieldsIndex)}))),Promise.resolve(this)}get capabilities(){return this.source?.capabilities}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}writeFields(e,t,r){const n=e.filter((e=>e.name!==x.u2));this.geometryField&&n.unshift(new q.Z({name:this.geometryField,alias:this.geometryField,type:"geometry"})),(0,s.RB)(r,n.map((e=>e.toJSON())),t)}get parsedUrl(){return(0,a.mN)(this.url)}set renderer(e){(0,B.YN)(e,this.fieldsIndex),this._set("renderer",e)}get wfsCapabilities(){return this.source?.wfsCapabilities}set wfsCapabilities(e){this.source&&(this.source.wfsCapabilities=e)}createPopupTemplate(e){return(0,Q.eZ)(this,e)}createQuery(){const e=new W.Z({returnGeometry:!0,outFields:["*"],where:this.definitionExpression||"1=1"}),{timeOffset:t,timeExtent:r}=this;return e.timeExtent=null!=t&&null!=r?r.offset(-t.value,t.unit):r||null,e}getFieldDomain(e,t){return this.getField(e)?.domain}getField(e){return this.fieldsIndex?.get(e)}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(W.Z.from(e)||this.createQuery(),t))).then((e=>{if(e?.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this.load().then((()=>this.source.queryObjectIds(W.Z.from(e)||this.createQuery(),t)))}queryFeatureCount(e,t){return this.load().then((()=>this.source.queryFeatureCount(W.Z.from(e)||this.createQuery(),t)))}queryExtent(e,t){return this.load().then((()=>this.source.queryExtent(W.Z.from(e)||this.createQuery(),t)))}async queryAttributeBins(e,t){const{source:n,capabilities:o}=await this.load();(0,z.O2)(e,o,"WFSLayer");const i=await Promise.all([r.e(37608),r.e(34042)]).then(r.bind(r,37608)),s=await n.queryAttributeBins(i.default.from(e),t);if(s.features)for(const e of s.features)e.layer=e.sourceLayer=this;return s}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh();return null!=t&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}};(0,n._)([(0,l.Cb)({readOnly:!0})],K.prototype,"capabilities",null),(0,n._)([(0,l.Cb)({type:String})],K.prototype,"copyright",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],K.prototype,"createQueryVersion",null),(0,n._)([(0,l.Cb)({json:{name:"wfsInfo.customParameters",write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0),ignoreOrigin:!0})}}})],K.prototype,"customParameters",void 0),(0,n._)([(0,l.Cb)((0,Y.mi)("dateFieldsTimeReference"))],K.prototype,"dateFieldsTimeZone",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],K.prototype,"defaultPopupTemplate",null),(0,n._)([(0,l.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],K.prototype,"definitionExpression",void 0),(0,n._)([(0,l.Cb)({type:String})],K.prototype,"displayField",void 0),(0,n._)([(0,l.Cb)(U.PV)],K.prototype,"elevationInfo",void 0),(0,n._)([(0,l.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.featureUrl",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"featureUrl",void 0),(0,n._)([(0,l.Cb)({type:[q.Z],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],K.prototype,"fields",void 0),(0,n._)([(0,f.c)("fields")],K.prototype,"writeFields",null),(0,n._)([(0,l.Cb)(X.fieldsIndex)],K.prototype,"fieldsIndex",void 0),(0,n._)([(0,l.Cb)({type:d.Z,json:{name:"extent"}})],K.prototype,"fullExtent",void 0),(0,n._)([(0,l.Cb)()],K.prototype,"geometryField",void 0),(0,n._)([(0,l.Cb)({type:String,json:{read:{source:"layerDefinition.geometryType",reader:m.Mk.read},write:{target:"layerDefinition.geometryType",writer:m.Mk.write,ignoreOrigin:!0},origins:{service:{read:m.Mk.read}}}})],K.prototype,"geometryType",void 0),(0,n._)([(0,l.Cb)({type:String})],K.prototype,"id",void 0),(0,n._)([(0,l.Cb)(U.iR)],K.prototype,"labelsVisible",void 0),(0,n._)([(0,l.Cb)({type:[J.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:H.r},write:!0}})],K.prototype,"labelingInfo",void 0),(0,n._)([(0,l.Cb)(U.rn)],K.prototype,"legendEnabled",void 0),(0,n._)([(0,l.Cb)({type:["show","hide"]})],K.prototype,"listMode",void 0),(0,n._)([(0,l.Cb)({type:String})],K.prototype,"objectIdField",void 0),(0,n._)([(0,l.Cb)({type:["WFS"]})],K.prototype,"operationalLayerType",void 0),(0,n._)([(0,l.Cb)({type:u.z8,json:{name:"wfsInfo.maxFeatures",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"maxRecordCount",void 0),(0,n._)([(0,l.Cb)({type:u.z8})],K.prototype,"maxPageCount",void 0),(0,n._)([(0,l.Cb)({type:u.z8})],K.prototype,"maxTotalRecordCount",void 0),(0,n._)([(0,l.Cb)({type:[0],readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],K.prototype,"mode",void 0),(0,n._)([(0,l.Cb)({type:String,json:{name:"wfsInfo.name",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"name",void 0),(0,n._)([(0,l.Cb)({type:String,json:{name:"wfsInfo.wfsNamespace",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"namespaceUri",void 0),(0,n._)([(0,l.Cb)(U.bT)],K.prototype,"opacity",void 0),(0,n._)([(0,l.Cb)(X.outFields)],K.prototype,"outFields",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],K.prototype,"parsedUrl",null),(0,n._)([(0,l.Cb)(U.C_)],K.prototype,"popupEnabled",void 0),(0,n._)([(0,l.Cb)({type:o.Z,json:{name:"popupInfo",write:!0}})],K.prototype,"popupTemplate",void 0),(0,n._)([(0,l.Cb)({types:V.Av,json:{origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:V.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:{ignoreOrigin:!0}}})],K.prototype,"renderer",null),(0,n._)([(0,l.Cb)(U.YI)],K.prototype,"screenSizePerspectiveEnabled",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],K.prototype,"source",void 0),(0,n._)([(0,l.Cb)({type:y.Z,json:{name:"layerDefinition.spatialReference",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"extent.spatialReference"}}}})],K.prototype,"spatialReference",void 0),(0,n._)([(0,l.Cb)({readOnly:!0,type:[u.z8],json:{name:"wfsInfo.supportedSpatialReferences",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"spatialReferences",void 0),(0,n._)([(0,l.Cb)({type:Boolean,value:!1,json:{name:"wfsInfo.swapXY",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"swapXY",void 0),(0,n._)([(0,l.Cb)({json:{write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"name"}}}})],K.prototype,"title",void 0),(0,n._)([(0,l.Cb)({json:{read:!1},readOnly:!0})],K.prototype,"type",void 0),(0,n._)([(0,l.Cb)(U.HQ)],K.prototype,"url",void 0),(0,n._)([(0,l.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.version",write:{ignoreOrigin:!0,isRequired:!0}}})],K.prototype,"version",void 0),(0,n._)([(0,l.Cb)()],K.prototype,"wfsCapabilities",null),K=M=(0,n._)([(0,p.j)("esri.layers.WFSLayer")],K);const ee=K},615:function(e,t,r){r.d(t,{cW:function(){return l},ij:function(){return a},rM:function(){return u}});var n=r(88194),o=r(60123),i=r(13928),s=r(8971);function a(e,t,r){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:u(r.value)});return t}return u(e)}(e)}catch(e){r?.messages?.push(e)}return null}function l(e,t,r,n){try{const n=function(e){const t=(0,i.Q)(e);return t?(0,s.Cb)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}(e);(0,o.RB)(r,n,t)}catch(e){n.messages&&n.messages.push(e)}}function u(e){if(!e?.length)return"";const t=[];for(const r of e){let e=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(r,"amount")];break;case"blur":e=[c(r,"radius","pt")];break;case"hue-rotate":e=[c(r,"angle","deg")];break;case"drop-shadow":e=[c(r,"xoffset","pt"),c(r,"yoffset","pt"),c(r,"blurRadius","pt"),p(r,"color")];break;case"bloom":e=[c(r,"strength"),c(r,"radius","pt"),c(r,"threshold")]}const n=`${r.type}(${e.filter(Boolean).join(" ")})`;(0,i.Q)(n),t.push(n)}return t.join(" ")}function c(e,t,r){if(null==e[t])throw new n.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function p(e,t){if(null==e[t])throw new n.Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}},13928:function(e,t,r){r.d(t,{Q:function(){return u}});var n=r(38461),o=r(88194),i=r(71480),s=r(8971);class a extends SyntaxError{constructor(e,t,r,n){super(e),this.expected=t,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let r=null;const n=e.find((e=>e.source===this.location.source));n&&(r=n.text.split(/\r\n|\n|\r/g));const o=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(o):o,s=this.location.source+":"+i.line+":"+i.column;if(r){const e=this.location.end,n="".padEnd(i.line.toString().length," "),a=r[o.line-1],l=(o.line===e.line?e.column:a.length+1)-o.column||1;t+="\n --\x3e "+s+"\n"+n+" |\n"+i.line+" | "+a+"\n"+n+" | "+"".padEnd(o.column-1," ")+"".padEnd(l,"^")}else t+="\n at "+s}return t}static buildMessage(e,t){function r(e){return e.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function o(e){return n?e.replace(n,(e=>"\\u{"+r(e)+"}")):e}function i(e){return o(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+r(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+r(e))))}function s(e){return o(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(e=>"\\x0"+r(e))).replace(/[\x10-\x1F\x7F-\x9F]/g,(e=>"\\x"+r(e))))}const a={literal:e=>'"'+i(e.text)+'"',class(e){const t=e.parts.map((e=>Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function l(e){return a[e.type](e)}return"Expected "+function(e){const t=e.map(l);if(t.sort(),t.length>0){let e=1;for(let r=1;r<t.length;r++)t[r-1]!==t[r]&&(t[e]=t[r],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."}}function l(e,t){const r={},n=(t=void 0!==t?t:{}).grammarSource,o={start:le};let i=le;const s="none",l=",",u="grad",c="turn",p=/^[ \t\n\r]/,f=/^[a-z\-]/,d=/^[0-9a-fA-F]/,y=/^[+\-]/,m=/^[0-9]/,h=oe("none"),g=re("none",!1),b=re(")",!1),w=re(",",!1),v=ne([" ","\t","\n","\r"],!1,!1,!1),C=oe("function"),S=re("(",!1),x=oe("identifier"),I=ne([["a","z"],"-"],!1,!1,!1),F=oe("percentage"),T=re("%",!1),_=oe("length"),M=re("px",!1),P=re("cm",!1),E=re("mm",!1),R=re("in",!1),j=re("pt",!1),k=re("pc",!1),O=oe("angle"),A=re("deg",!1),N=re("rad",!1),Z=re("grad",!1),L=re("turn",!1),G=oe("number"),D=oe("color"),U=re("#",!1),z=ne([["0","9"],["a","f"],["A","F"]],!1,!1,!1),q=ne(["+","-"],!1,!1,!1),$=ne([["0","9"]],!1,!1,!1),B=re(".",!1),J=re("e",!1);function H(e,t){return t.length>0?function(e,t,r){return[e].concat(function(e,t){return e.map((function(e){return e[t]}))}(t,r))}(e,t,3):[e]}let V=0|t.peg$currPos,W=V;const Q=[{line:1,column:1}];let Y,X=V,K=t.peg$maxFailExpected||[],ee=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=o[t.startRule]}function te(){return e.substring(W,V)}function re(e,t){return{type:"literal",text:e,ignoreCase:t}}function ne(e,t,r,n){return{type:"class",parts:e,inverted:t,ignoreCase:r,unicode:n}}function oe(e){return{type:"other",description:e}}function ie(t){let r,n=Q[t];if(n)return n;if(t>=Q.length)r=Q.length-1;else for(r=t;!Q[--r];);for(n=Q[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Q[t]=n,n}function se(e,t,r){const o=ie(e),i=ie(t);return{source:n,start:{offset:e,line:o.line,column:o.column},end:{offset:t,line:i.line,column:i.column}}}function ae(e){V<X||(V>X&&(X=V,K=[]),K.push(e))}function le(){let e;return e=ue(),e===r&&(e=function(){let e,t;if(e=[],t=ce(),t!==r)for(;t!==r;)e.push(t),t=ce();else e=r;return e}()),e}function ue(){let t,n;return ee++,t=V,fe(),e.substr(V,4)===s?(n=s,V+=4):(n=r,0===ee&&ae(g)),n!==r?(fe(),W=t,t=[]):(V=t,t=r),ee--,t===r&&0===ee&&ae(h),t}function ce(){let t,n,o,i;return t=V,fe(),n=function(){let t,n,o;return ee++,t=V,n=de(),n!==r?(40===e.charCodeAt(V)?(o="(",V++):(o=r,0===ee&&ae(S)),o!==r?(W=t,t=n):(V=t,t=r)):(V=t,t=r),ee--,t===r&&(n=r,0===ee&&ae(C)),t}(),n!==r?(fe(),o=function(){let t,n,o,i,s,a,u,c;if(t=V,n=pe(),n!==r){for(o=[],i=V,s=fe(),44===e.charCodeAt(V)?(a=l,V++):(a=r,0===ee&&ae(w)),a===r&&(a=null),u=fe(),c=pe(),c!==r?(s=[s,a,u,c],i=s):(V=i,i=r);i!==r;)o.push(i),i=V,s=fe(),44===e.charCodeAt(V)?(a=l,V++):(a=r,0===ee&&ae(w)),a===r&&(a=null),u=fe(),c=pe(),c!==r?(s=[s,a,u,c],i=s):(V=i,i=r);W=t,t=H(n,o)}else V=t,t=r;return t}(),o===r&&(o=null),fe(),41===e.charCodeAt(V)?(i=")",V++):(i=r,0===ee&&ae(b)),i!==r?(fe(),W=t,t=function(e,t){return{type:"function",name:e,parameters:t||[]}}(n,o)):(V=t,t=r)):(V=t,t=r),t}function pe(){let e,t;return e=V,t=ye(),t===r&&(t=me(),t===r&&(t=he(),t===r&&(t=function(){let e,t;return ee++,e=V,fe(),t=be(),t!==r?(W=e,e=function(e){return{value:e,unit:null}}(t)):(V=e,e=r),ee--,e===r&&0===ee&&ae(G),e}()))),t!==r&&(W=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),e=t,e===r&&(e=V,t=ge(),t!==r&&(W=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function fe(){let t,n;for(ee++,t=[],n=e.charAt(V),p.test(n)?V++:(n=r,0===ee&&ae(v));n!==r;)t.push(n),n=e.charAt(V),p.test(n)?V++:(n=r,0===ee&&ae(v));return ee--,t}function de(){let t,n,o;if(ee++,t=V,n=[],o=e.charAt(V),f.test(o)?V++:(o=r,0===ee&&ae(I)),o!==r)for(;o!==r;)n.push(o),o=e.charAt(V),f.test(o)?V++:(o=r,0===ee&&ae(I));else n=r;return n!==r&&(W=t,n=te()),t=n,ee--,t===r&&(n=r,0===ee&&ae(x)),t}function ye(){let t,n,o;return ee++,t=V,fe(),n=be(),n!==r?(37===e.charCodeAt(V)?(o="%",V++):(o=r,0===ee&&ae(T)),o!==r?(W=t,t=function(e){return{value:e,unit:"%"}}(n)):(V=t,t=r)):(V=t,t=r),ee--,t===r&&0===ee&&ae(F),t}function me(){let t,n,o;return ee++,t=V,fe(),n=be(),n!==r?("px"===e.substr(V,2)?(o="px",V+=2):(o=r,0===ee&&ae(M)),o!==r?(W=t,t=function(e){return{value:e,unit:"px"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,fe(),n=be(),n!==r?("cm"===e.substr(V,2)?(o="cm",V+=2):(o=r,0===ee&&ae(P)),o!==r?(W=t,t=function(e){return{value:e,unit:"cm"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,fe(),n=be(),n!==r?("mm"===e.substr(V,2)?(o="mm",V+=2):(o=r,0===ee&&ae(E)),o!==r?(W=t,t=function(e){return{value:e,unit:"mm"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,fe(),n=be(),n!==r?("in"===e.substr(V,2)?(o="in",V+=2):(o=r,0===ee&&ae(R)),o!==r?(W=t,t=function(e){return{value:e,unit:"in"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,fe(),n=be(),n!==r?("pt"===e.substr(V,2)?(o="pt",V+=2):(o=r,0===ee&&ae(j)),o!==r?(W=t,t=function(e){return{value:e,unit:"pt"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,fe(),n=be(),n!==r?("pc"===e.substr(V,2)?(o="pc",V+=2):(o=r,0===ee&&ae(k)),o!==r?(W=t,t=function(e){return{value:e,unit:"pc"}}(n)):(V=t,t=r)):(V=t,t=r)))))),ee--,t===r&&0===ee&&ae(_),t}function he(){let t,n,o;return ee++,t=V,n=be(),n!==r?("deg"===e.substr(V,3)?(o="deg",V+=3):(o=r,0===ee&&ae(A)),o!==r?(W=t,t=function(e){return{value:e,unit:"deg"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,n=be(),n!==r?("rad"===e.substr(V,3)?(o="rad",V+=3):(o=r,0===ee&&ae(N)),o!==r?(W=t,t=function(e){return{value:e,unit:"rad"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,n=be(),n!==r?(e.substr(V,4)===u?(o=u,V+=4):(o=r,0===ee&&ae(Z)),o!==r?(W=t,t=function(e){return{value:e,unit:"grad"}}(n)):(V=t,t=r)):(V=t,t=r),t===r&&(t=V,n=be(),n!==r?(e.substr(V,4)===c?(o=c,V+=4):(o=r,0===ee&&ae(L)),o!==r?(W=t,t=function(e){return{value:e,unit:"turn"}}(n)):(V=t,t=r)):(V=t,t=r)))),ee--,t===r&&(n=r,0===ee&&ae(O)),t}function ge(){let t,n,o,i;if(ee++,t=V,35===e.charCodeAt(V)?(n="#",V++):(n=r,0===ee&&ae(U)),n!==r){if(o=[],i=e.charAt(V),d.test(i)?V++:(i=r,0===ee&&ae(z)),i!==r)for(;i!==r;)o.push(i),i=e.charAt(V),d.test(i)?V++:(i=r,0===ee&&ae(z));else o=r;o!==r?(W=t,t={type:"hex",value:te()}):(V=t,t=r)}else V=t,t=r;return t===r&&(t=V,n=ce(),n!==r&&(W=t,n=function(e){return{type:"function",value:e}}(n)),t=n,t===r&&(t=V,n=de(),n!==r&&(W=t,n={type:"named",value:te()}),t=n)),ee--,t===r&&(n=r,0===ee&&ae(D)),t}function be(){let t,n,o,i,s,a,l,u;for(t=V,n=e.charAt(V),y.test(n)?V++:(n=r,0===ee&&ae(q)),n===r&&(n=null),o=V,i=[],s=e.charAt(V),m.test(s)?V++:(s=r,0===ee&&ae($));s!==r;)i.push(s),s=e.charAt(V),m.test(s)?V++:(s=r,0===ee&&ae($));if(46===e.charCodeAt(V)?(s=".",V++):(s=r,0===ee&&ae(B)),s!==r){if(a=[],l=e.charAt(V),m.test(l)?V++:(l=r,0===ee&&ae($)),l!==r)for(;l!==r;)a.push(l),l=e.charAt(V),m.test(l)?V++:(l=r,0===ee&&ae($));else a=r;a!==r?(i=[i,s,a],o=i):(V=o,o=r)}else V=o,o=r;if(o===r)if(o=[],i=e.charAt(V),m.test(i)?V++:(i=r,0===ee&&ae($)),i!==r)for(;i!==r;)o.push(i),i=e.charAt(V),m.test(i)?V++:(i=r,0===ee&&ae($));else o=r;if(o!==r){if(i=V,101===e.charCodeAt(V)?(s="e",V++):(s=r,0===ee&&ae(J)),s!==r){if(a=e.charAt(V),y.test(a)?V++:(a=r,0===ee&&ae(q)),a===r&&(a=null),l=[],u=e.charAt(V),m.test(u)?V++:(u=r,0===ee&&ae($)),u!==r)for(;u!==r;)l.push(u),u=e.charAt(V),m.test(u)?V++:(u=r,0===ee&&ae($));else l=r;l!==r?(s=[s,a,l],i=s):(V=i,i=r)}else V=i,i=r;i===r&&(i=null),W=t,t=parseFloat(te())}else V=t,t=r;return t}Y=i();const we=Y!==r&&V===e.length;function ve(){throw Y!==r&&V<e.length&&ae({type:"end"}),function(e,t,r){return new a(a.buildMessage(e,t),e,t,r)}(K,X<e.length?function(t=V){const r=e.codePointAt(t);return void 0===r?"":String.fromCodePoint(r)}(X):null,X<e.length?se(X,X+1):se(X,X))}return t.peg$library?{peg$result:Y,peg$currPos:V,peg$FAILED:r,peg$maxFailExpected:K,peg$maxFailPos:X,peg$success:we,peg$throw:we?void 0:ve}:we?Y:void ve()}function u(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=c(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new o.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:c(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let e=0;e<t.length-1;e++){if(!(0,s.AS)(t[e].effects,t[e+1].effects))throw new o.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,s.uF)(t[e].effects,t[e+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function c(e){let t;if(!e)return[];try{t=l(e)}catch(t){throw new o.Z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map((e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return p(e.parameters,1),1===e.parameters.length&&(t=h(e.parameters[0])),new i.GI(e.name,t)}(e);case"opacity":return function(e){let t=1;return p(e.parameters,1),1===e.parameters.length&&(t=h(e.parameters[0])),new i.Zx(t)}(e);case"hue-rotate":return function(e){let t=0;return p(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=y[e.unit]))throw new o.Z("effect:type-error",`Expected <angle>, Actual: ${f(e)}`,{term:e})}(e),e.value*y[e.unit]||0}(e.parameters[0])),new i.Tq(t)}(e);case"blur":return function(e){let t=0;return p(e.parameters,1),1===e.parameters.length&&(t=b(e.parameters[0]),d(t,e.parameters[0])),new i.Tj(t)}(e);case"drop-shadow":return function(e){const t=[];let r=null;for(const n of e.parameters)if("color"===n.type){if(t.length&&Object.freeze(t),r)throw new o.Z("effect:type-error","Accepts only one color",{});r=w(n)}else{const e=b(n);if(Object.isFrozen(t))throw new o.Z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&d(e,n)}if(t.length<2||t.length>3)throw new o.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new i.CE(t[0],t[1],t[2]||0,r||v("black"))}(e);case"bloom":return function(e){let t=1,r=0,n=0;return p(e.parameters,3),e.parameters[0]&&(t=h(e.parameters[0])),e.parameters[1]&&(r=b(e.parameters[1]),d(r,e.parameters[1])),e.parameters[2]&&(n=h(e.parameters[2])),new i.rk(t,r,n)}(e)}}catch(t){throw t.details.filter=e,t}throw new o.Z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e)))}function p(e,t){if(e.length>t)throw new o.Z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function f(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in m)return"<length>";if(e.unit in y)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function d(e,t){if(e<0)throw new o.Z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const y={deg:1,grad:.9,rad:180/Math.PI,turn:360};const m={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function h(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new o.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${f(e)}`,{term:e})}(e);const t=e.value;return d(t,e),"%"===e.unit?.01*t:t}function g(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new o.Z("effect:type-error",`Expected <double>, Actual: ${f(e)}`,{term:e})}(e),d(e.value,e),e.value}function b(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=m[e.unit]))throw new o.Z("effect:type-error",`Expected <length>, Actual: ${f(e)}`,{term:e})}(e),e.value*m[e.unit]||0}function w(e){switch(e.colorType){case"hex":return(0,n.a7)(e.value);case"named":return v(e.value);case"function":return function(e){if(p(e.parameters,4),C.test(e.name))return[h(e.parameters[0]),h(e.parameters[1]),h(e.parameters[2]),e.parameters[3]?h(e.parameters[3]):1];if(S.test(e.name))return(0,n.Y6)(g(e.parameters[0]),h(e.parameters[1]),h(e.parameters[2]),e.parameters[3]?h(e.parameters[3]):1);throw new o.Z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function v(e){if(!(0,n.St)(e))throw new o.Z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,n.VL)(e)}const C=/^rgba?/i,S=/^hsla?/i},17749:function(e,t,r){r.d(t,{e:function(){return o},g:function(){return n}});const n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},o={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},18763:function(e,t,r){r.d(t,{O3:function(){return x},lG:function(){return F},my:function(){return I},q9:function(){return c}});var n=r(70243),o=r(88194),i=r(8554),s=r(24564),a=r(20722),l=r(76554);const u={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function c(e){return u[e]}function*p(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*f(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function d(e){for(const t of e)if(t.length>2)return!0;return!1}function y(e){let t=0;for(let r=0;r<e.length;r++){const n=e[r],o=e[(r+1)%e.length];t+=n[0]*o[1]-o[0]*n[1]}return t<=0}function m(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function h(e,t,r){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,r){return w(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){for(const n of t.coordinates)w(e,n,r);return e}(e,t,r);case"MultiPolygon":return function(e,t,r){for(const n of t.coordinates){g(e,n[0],r);for(let t=1;t<n.length;t++)b(e,n[t],r)}return e}(e,t,r);case"Point":return function(e,t,r){return C(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){const n=t.coordinates;g(e,n[0],r);for(let t=1;t<n.length;t++)b(e,n[t],r);return e}(e,t,r)}}function g(e,t,r){const n=m(t);!function(e){return!y(e)}(n)?w(e,n,r):v(e,n,r)}function b(e,t,r){const n=m(t);!function(e){return y(e)}(n)?w(e,n,r):v(e,n,r)}function w(e,t,r){for(const n of t)C(e,n,r);e.lengths.push(t.length)}function v(e,t,r){for(let n=t.length-1;n>=0;n--)C(e,t[n],r);e.lengths.push(t.length)}function C(e,t,r){const[n,o,i]=t;e.coords.push(n,o),r.hasZ&&e.coords.push(i||0)}function S(e){switch(typeof e){case"string":return(0,n.mu)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function x(e,t=4326){if(!e)throw new o.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new o.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:r}=e;if(!r)return;const n="string"==typeof r?r:"name"===r.type?r.properties.name:"EPSG"===r.type?r.properties.code:null,s=(0,i.oR)({wkid:t})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${t})$`,"i");if(!n||!s.test(n))throw new o.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:r})}function I(e,t={}){const r=[],n=new Set,o=new Set;let i,s=!1,a=null,u=!1,{geometryType:y=null}=t;for(const t of p(e)){const{geometry:e,properties:p,id:m}=t;if((!e||(y||(y=c(e.type)),c(e.type)===y))&&(s||(s=d(f(e))),u||(u=null!=m,u&&(i=typeof m,p&&(a=Object.keys(p).filter((e=>p[e]===m))))),p&&a&&u&&null!=m&&(a.length>1?a=a.filter((e=>p[e]===m)):1===a.length&&(a=p[a[0]]===m?a:[])),p))for(const e in p){if(n.has(e))continue;const t=S(p[e]);if("unknown"===t){o.add(e);continue}o.delete(e),n.add(e);const i=(0,l.q6)(e);i&&r.push({name:i,alias:e,type:t})}}const m=(0,l.q6)(1===a?.length&&a[0]||null)??void 0;if(m)for(const e of r)if(e.name===m&&(0,l.H7)(e)){e.type="esriFieldTypeOID";break}return{fields:r,geometryType:y,hasZ:s,objectIdFieldName:m,objectIdFieldType:i,unknownFields:Array.from(o)}}function F(e,t){return Array.from(function*(e,t={}){const{geometryType:r,objectIdField:n}=t;for(const o of e){const{geometry:e,properties:i,id:l}=o;if(e&&c(e.type)!==r)continue;const u=i||{};let p;n&&(p=u[n],null==l||p||(u[n]=p=l));const f=new s.u_(e?h(new a.Z,e,t):null,u,null,p);yield f}}(p(e),t))}},73967:function(e,t,r){r.d(t,{Dm:function(){return c},Hq:function(){return f},MS:function(){return d},bU:function(){return a}});var n=r(61432),o=r(28947),i=r(17749),s=r(54914);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let u=1;function c(e,t){if((0,n.Z)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${p(t)} = null;`;for(const t in e)r+=`this${p(t)} = ${JSON.stringify(e[t])};`;const n=new Function(`\n      return class AttributesClass$${u++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `)();return()=>new n}catch(r){return()=>({[t]:null,...e})}}function p(e){return l.test(e)?`.${e}`:`["${e}"]`}function f(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,o.d9)(e)}}]}function d(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:i.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:i.e,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},83263:function(e,t,r){r.d(t,{h7:function(){return p},nE:function(){return l},qu:function(){return c}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023)),s=r(71840),a=r(615);const l={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:s.C}},"portal-item":{read:!0,write:{layerContainerTypes:s.C}}}}},u={read:{reader:a.ij},write:{allowNull:!0,writer:a.cW,layerContainerTypes:s.C}},c={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},p=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,n._)([(0,o.Cb)(l)],t.prototype,"blendMode",void 0),(0,n._)([(0,o.Cb)(c)],t.prototype,"effect",void 0),t=(0,n._)([(0,i.j)("esri.layers.mixins.BlendLayer")],t),t}},55591:function(e,t,r){r.d(t,{N:function(){return s}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023));const s=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,n._)([(0,o.Cb)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,n._)([(0,i.j)("esri.layers.mixins.CustomParametersMixin")],t),t}},7150:function(e,t,r){r.d(t,{tM:function(){return b},jp:function(){return w},ey:function(){return v}});var n=r(73440),o=r(60123),i=r(17155),s=(r(61432),r(96711),r(83850),r(48023)),a=r(71840),l=r(89314),u=r(43254),c=r(63255),p=r(29884),f=r(4469),d=r(18764);const y={write:{overridePolicy:(e,t,r)=>({enabled:!r||"scale"===r.filterMode})}};let m=class extends(l.Z.ClonableMixin(c.Z)){constructor(e){super(e),this.id=(0,d.DO)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,n._)([(0,i.Cb)({type:String,json:{write:!0}})],m.prototype,"id",void 0),(0,n._)([(0,i.Cb)({type:Number,json:y})],m.prototype,"maxScale",void 0),(0,n._)([(0,i.Cb)({type:Number,json:y})],m.prototype,"minScale",void 0),(0,n._)([(0,i.Cb)({type:String,json:{write:!0}})],m.prototype,"title",void 0),(0,n._)([(0,i.Cb)({type:String,json:{write:!0}})],m.prototype,"where",void 0),m=(0,n._)([(0,s.j)("esri.layers.support.DisplayFilter")],m);var h=r(78279);let g=class extends(l.Z.ClonableMixin(c.Z)){constructor(e){super(e),this.activeFilterId=null,this.filters=new(u.Z.ofType(m)),this.mode="manual"}writeFilters(e,t,r,n){const o=e.toArray();"scale"===this.mode&&o.sort(((e,t)=>{const r=(0,f.Nf)(t.minScale,e.minScale),n=e.maxScale-t.maxScale;return 0===r?n:r})),t[r]=o.map((e=>e.toJSON(n)))}write(e,t){return super.write(e,(0,h.Ee)(this,t))}};(0,n._)([(0,i.Cb)({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:"manual"===r.filterMode,isRequired:!0})}}})],g.prototype,"activeFilterId",void 0),(0,n._)([(0,i.Cb)({type:u.Z.ofType(m),nonNullable:!0,json:{write:!0}})],g.prototype,"filters",void 0),(0,n._)([(0,p.c)("filters")],g.prototype,"writeFilters",null),(0,n._)([(0,i.Cb)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],g.prototype,"mode",void 0),g=(0,n._)([(0,s.j)("esri.layers.support.DisplayFilterInfo")],g);const b=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,n._)([(0,i.Cb)(w)],t.prototype,"displayFilterEnabled",void 0),(0,n._)([(0,i.Cb)(v)],t.prototype,"displayFilterInfo",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.DisplayFilteredLayer")],t),t},w={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:a.C,writer(e,t,r){(0,o.RB)(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},v={type:g,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:a.C},origins:{"web-scene":{write:!1,read:!1}}}}},90833:function(e,t,r){r.d(t,{Ax:function(){return l},c_:function(){return c},lD:function(){return u}});var n=r(73440),o=r(60123),i=r(17155),s=(r(61432),r(96711),r(83850),r(48023)),a=r(72917);function l(e,t,r){if(!e)return null;const n=e.find((e=>!!e.field));if(!n)return null;const o=new a.Z;return o.read(n,r),[o]}const u={type:[a.Z],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:l},write:{writer:function(e,t,r,n){const i=e.find((e=>!!e.field));i&&(0,o.RB)(r,[i.toJSON()],t)}}}},c=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,n._)([(0,i.Cb)(u)],t.prototype,"orderBy",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.OrderedLayer")],t),t}},27202:function(e,t,r){r.d(t,{I:function(){return S}});var n=r(73440),o=r(81001),i=r(10218),s=r(78619),a=r(29292),l=r(88194),u=r(96711),c=r(61100),p=r(93568),f=r(95490),d=r(17155),y=(r(61432),r(83850),r(1194)),m=r(48023),h=r(29884),g=r(75428),b=r(77601),w=r(96193),v=r(91525),C=r(47626);const S=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new w.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:n}=await r.e(64975).then(r.bind(r,64975));return(0,p.k_)(t),await n({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(e){throw(0,p.D_)(e)||u.Z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,p.r9)(e),!0))))}async setUserPrivileges(e,t){if(!o.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(e){(0,p.r9)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const n=!i.id?.findCredential(this.url),o=e===r.id;if(o&&r.portal.user)return this._getUserPrivileges(r,n);let s,a;if(o)s=r.portal.url;else try{s=await(0,g.oP)(this.url,t)}catch(e){(0,p.r9)(e)}if(!s||!(0,f.Zo)(s,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;a=await(i.id?.getCredential(`${s}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,p.r9)(e)}if(!a)return{features:{edit:true,fullEdit:false},content:{updateItem:false}};try{if(o?await r.reload():(r=new w.default({id:e,portal:{url:s}}),await r.load(t)),r.portal.user)return this._getUserPrivileges(r,n)}catch(e){(0,p.r9)(e)}return{features:{edit:true,fullEdit:false},content:{updateItem:false}}}_getUserPrivileges(e,t){const r=(0,C.Ss)(e);return t&&(r.features.edit=!0),r}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,p.r9)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?i.id?.findCredential(this.url):null;if(!t)return!0;const r=x.credential===t?x.user:await this._fetchEditingUser(e);return x.credential=t,x.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=i.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const n=`${r.owningSystemUrl}/sharing/rest`,o=b.Z.getDefault();if(o&&o.loaded&&(0,f.Fv)(o.restUrl)===(0,f.Fv)(n))return o.user;const l=`${n}/community/self`,u=null!=e?e.signal:null,c=await(0,a.q6)((0,s.Z)(l,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?v.Z.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,n=this.portalItem?.id&&(this.portalItem.portal||b.Z.getDefault());return r&&n&&!(0,f.tm)(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new l.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,n._)([(0,d.Cb)({type:w.default})],t.prototype,"portalItem",null),(0,n._)([(0,y.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,n._)([(0,h.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,n._)([(0,d.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,n._)([(0,d.Cb)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,n._)([(0,m.j)("esri.layers.mixins.PortalLayer")],t),t},x={credential:null,user:null}},19306:function(e,t,r){r.d(t,{Q:function(){return C},d:function(){return v}});var n=r(73440),o=(r(61432),r(96711)),i=r(93568),s=r(17155),a=r(90775),l=(r(83850),r(48023)),u=r(71840),c=r(43254),p=r(90403),f=r(21260);const d=new c.Z,y=new WeakMap;function m(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function h(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:h(t,e%t):0}let g=0,b=0;function w(){const e=Date.now();let t=!1;for(const r of d){const n=r.deref();n?n.refreshInterval&&e-(y.get(n)??0)+5>=6e4*n.refreshInterval&&(y.set(n,e),n.refresh(e)):t=!0}if(t)for(let e=d.length-1;e>=0;e--)d.at(e).deref()||d.removeAt(e)}(0,f.EH)((()=>{const e=Date.now();let t=0;for(const r of d){const n=r.deref();n&&(t=h(Math.round(6e4*n.refreshInterval),t),n.refreshInterval?y.get(n)||y.set(n,e):y.delete(n))}if(t!==b){if(b=t,clearInterval(g),0===b)return void(g=0);g=setInterval(w,b)}}),p.Z_);function v(e){return null!=e&&"object"==typeof e&&"refreshTimestamp"in e&&"refresh"in e}const C=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,i.Ds)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){m(e)&&d.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=d.find((t=>t.deref()===e));t&&d.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,i.R8)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{o.Z.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,n._)([(0,s.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.C}}}}})],t.prototype,"refreshInterval",void 0),(0,n._)([(0,a.p)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,n._)([(0,s.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,n._)([(0,s.Cb)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,n._)([(0,l.j)("esri.layers.mixins.RefreshableLayer")],t),t}},99671:function(e,t,r){r.d(t,{I:function(){return d},n:function(){return y}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(1194)),s=r(48023),a=r(71840),l=r(76554),u=r(83918),c=r(24009),p=r(85913),f=r(62920);const d={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.C}}},y=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const n=r.timeOffset,o=c.v.fromJSON(r.timeOffsetUnits);return n&&o?new f.T({value:n,unit:o}):null}set timeInfo(e){(0,l.UF)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,n._)([(0,o.Cb)({type:p.T,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,n._)([(0,o.Cb)({type:f.T})],t.prototype,"timeOffset",void 0),(0,n._)([(0,i.r)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,n._)([(0,o.Cb)({value:null,type:u.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,n._)([(0,o.Cb)(d)],t.prototype,"useViewTime",void 0),t=(0,n._)([(0,s.j)("esri.layers.mixins.TemporalLayer")],t),t}},30472:function(e,t,r){r.d(t,{_:function(){return v}});var n=r(73440),o=r(17155),i=(r(61432),r(96711),r(83850),r(48023)),s=r(997),a=r(89314),l=r(63255),u=r(60123),c=r(29884),p=r(76401),f=r(93295),d=r(89428),y=r(60541);let m=class extends(a.Z.ClonableMixin(l.Z)){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,n._)([(0,o.Cb)({type:[d.Z],json:{write:!0}})],m.prototype,"labelingInfo",void 0),(0,n._)([(0,o.Cb)(f.iR)],m.prototype,"labelsVisible",void 0),(0,n._)([(0,o.Cb)({types:y.Av,json:{write:!0}})],m.prototype,"renderer",void 0),(0,n._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"visible",void 0),m=(0,n._)([(0,i.j)("esri.layers.support.TrackPartInfo")],m);var h=r(43957),g=r(9350),b=r(62920);let w=class extends(a.Z.ClonableMixin(l.Z)){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new m({renderer:new h.Z({symbol:g.xA.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new m({renderer:new h.Z({symbol:g.xA.clone()})}),this.trackLines=new m({renderer:new h.Z({symbol:g.CJ.clone()})}),this.timeField="startTimeField"}writeFields(e,t,r){const n=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,u.RB)(r,n,t)}};(0,n._)([(0,o.Cb)({type:Boolean,json:{write:!0}})],w.prototype,"enabled",void 0),(0,n._)([(0,o.Cb)({type:[p.Z],json:{write:!0}})],w.prototype,"fields",void 0),(0,n._)([(0,c.c)("fields")],w.prototype,"writeFields",null),(0,n._)([(0,o.Cb)({type:m,json:{write:!0}})],w.prototype,"latestObservations",void 0),(0,n._)([(0,o.Cb)({type:b.T,json:{write:!0}})],w.prototype,"maxDisplayDuration",void 0),(0,n._)([(0,o.Cb)({type:Number,json:{write:!0}})],w.prototype,"maxDisplayObservationsPerTrack",void 0),(0,n._)([(0,o.Cb)(f.C_)],w.prototype,"popupEnabled",void 0),(0,n._)([(0,o.Cb)({type:s.Z,json:{name:"popupInfo",write:!0}})],w.prototype,"popupTemplate",void 0),(0,n._)([(0,o.Cb)({type:m,json:{write:!0}})],w.prototype,"previousObservations",void 0),(0,n._)([(0,o.Cb)({type:m,json:{write:!0}})],w.prototype,"trackLines",void 0),(0,n._)([(0,o.Cb)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],w.prototype,"timeField",void 0),w=(0,n._)([(0,i.j)("esri.layers.support.TrackInfo")],w);const v=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return(0,n._)([(0,o.Cb)({type:w})],t.prototype,"trackInfo",void 0),t=(0,n._)([(0,i.j)("esri.layers.mixins.TrackableLayer")],t),t}},72866:function(e,t,r){r.d(t,{Bm:function(){return L},FU:function(){return _},be:function(){return k},bx:function(){return D},eB:function(){return O},fU:function(){return $},ft:function(){return j},u2:function(){return w}});var n=r(78619),o=r(88194),i=r(96302),s=r(95490),a=r(71354),l=r(13132),u=r(45213),c=r(8554),p=r(98842),f=r(18763),d=r(66261),y=r(66619),m=r(49651),h=r(76554);const g="xlink:href",b="2.0.0",w="__esri_wfs_id__",v="wfs-layer:getWFSLayerTypeInfo-error",C="wfs-layer:empty-service",S="wfs-layer:feature-type-not-found",x="wfs-layer:unknown-geometry-type",I="wfs-layer:unknown-field-type",F="wfs-layer:unsupported-spatial-reference",T="wfs-layer:unsupported-wfs-version";async function _(e,t){const r=function(e){const t=U(e);(function(e){const t=e.firstElementChild?.getAttribute("version");if(t&&t!==b)throw new o.Z(T,`Unsupported WFS version ${t}. Supported version: ${b}`)})(t),q(t);const r=t.firstElementChild,n=(0,i.Fs)(function(e){return(0,d.H)(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",defaultSpatialReference:4326,supportedSpatialReferences:[]},r=new Set;return(0,d.h)(e,{Name:e=>{const{name:r,prefix:n}=z(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=a.Z.fromJSON(function(e){let t,r,n,o;for(const i of e.children)switch(i.localName){case"LowerCorner":[t,r]=i.textContent.split(" ").map((e=>Number.parseFloat(e)));break;case"UpperCorner":[n,o]=i.textContent.split(" ").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:o,spatialReference:c.YU}}(e))},DefaultCRS:e=>{const n=R(e);n&&(t.defaultSpatialReference=n,r.add(n))},OtherCRS:e=>{const t=R(e);t&&r.add(t)}}),t.title||(t.title=t.name),r.add(4326),t.supportedSpatialReferences.push(...r),t}}})}(r));return{operations:E(r),get featureTypes(){return Array.from(n())},readFeatureTypes:n}}((await(0,n.Z)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:b,...t?.customParameters},signal:t?.signal})).data);return function(e,t){(0,s.$U)(e)&&((0,s.D6)(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=(0,s.hO)(t.operations.DescribeFeatureType.url)),(0,s.D6)(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=(0,s.hO)(t.operations.GetFeature.url)))}(e,r),r}const M=["json","application/json; subtype=geojson; charset=utf-8","application/json; subtype=geojson","application/json","geojson","application/geo+json"];function P(e){for(const t of M){const r=e.findIndex((e=>e.toLowerCase()===t));if(r>=0)return e[r]}return null}function E(e){let t=!0;const r={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}},n=[],i=[];if((0,d.h)(e,{OperationsMetadata:{Parameter:e=>{if("outputformat"===e.getAttribute("name")?.toLowerCase())return{AllowedValues:{Value:({textContent:e})=>{e&&n.push(e)}}}},Operation:e=>{switch(e.getAttribute("name")){case"GetCapabilities":return{DCP:{HTTP:{Get:e=>{r.GetCapabilities.url=e.getAttribute(g)}}}};case"DescribeFeatureType":return{DCP:{HTTP:{Get:e=>{r.DescribeFeatureType.url=e.getAttribute(g)}}}};case"GetFeature":return{DCP:{HTTP:{Get:e=>{r.GetFeature.url=e.getAttribute(g)}}},Parameter:e=>{if("outputformat"===e.getAttribute("name")?.toLowerCase())return{AllowedValues:{Value:({textContent:e})=>{e&&i.push(e)}}}}}}},Constraint:e=>{switch(e.getAttribute("name")){case"KVPEncoding":return{DefaultValue:e=>{t="true"===e.textContent.toLowerCase()}};case"ImplementsResultPaging":return{DefaultValue:e=>{r.GetFeature.supportsPagination="true"===e.textContent.toLowerCase()}}}}}}),r.GetFeature.outputFormat=P(i)??P(n),!t)throw new o.Z("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(null==r.GetFeature.outputFormat)throw new o.Z("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return r}function R(e){const t=parseInt(e.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);if(!Number.isNaN(t))return t}function j(e,t,r){return(0,i.sE)(e,(e=>r?e.name===t&&e.namespaceUri===r:e.typeName===t||e.name===t))}async function k(e,t,r,n={}){const{featureType:i,extent:s}=await async function(e,t,r,n={}){const i=e.readFeatureTypes(),s=t?j(i,t,r):i.next().value,{spatialReference:a=new u.Z({wkid:s?.defaultSpatialReference})}=n;if(null==s)throw t?new o.Z(S,`The type '${t}' could not be found in the service`):new o.Z(C,"The service is empty");let p=s.extent;if(p&&!(0,c.fS)(p.spatialReference,a))try{await(0,l.initializeProjection)(p.spatialReference,a,void 0,n),p=(0,l.project)(p,a)}catch{throw new o.Z(F,"Projection not supported")}return{extent:p,spatialReference:a,featureType:s}}(e,t,r,n),{spatialReference:a}=$(e.operations.GetFeature.url,i,n.spatialReference),{fields:p,geometryType:f,swapXY:d,objectIdField:y,geometryField:m}=await async function(e,t,r,n={}){const{typeName:i}=t,[s,a]=await Promise.allSettled([N(e.operations.DescribeFeatureType.url,i,n),A(e,i,r,n)]),l=e=>new o.Z(v,`An error occurred while getting info about the feature type '${i}'`,{error:e});if("rejected"===s.status)throw l(s.reason);if("rejected"===a.status)throw l(a.reason);const{fields:u,errors:c}=s.value??{},p=s.value?.geometryType||a.value?.geometryType,f=a.value?.swapXY??!1;if(null==p)throw new o.Z(x,`The geometry type could not be determined for type '${i}`,{typeName:i,geometryType:p,fields:u,errors:c});return{...O(u??[]),geometryType:p,swapXY:f}}(e,i,a,n);return{url:e.operations.GetCapabilities.url,name:i.name,namespaceUri:i.namespaceUri,fields:p,geometryField:m,geometryType:f,objectIdField:y,spatialReference:n.spatialReference??new u.Z({wkid:i.defaultSpatialReference}),extent:s,swapXY:d,wfsCapabilities:e,customParameters:n.customParameters}}function O(e){const t=e.find((e=>"geometry"===e.type));let r=e.find((e=>"oid"===e.type));return e=e.filter((e=>"geometry"!==e.type)),r||(r=new m.Z({name:w,type:"oid",alias:w}),e.unshift(r)),{geometryField:t?.name??null,objectIdField:r.name,fields:e}}async function A(e,t,r,o={}){let i,s=!1;const[a,l]=await Promise.all([L(e.operations.GetFeature.url,t,r,e.operations.GetFeature.outputFormat,{...o,count:1}),(0,n.Z)(e.operations.GetFeature.url,{responseType:"text",query:G(t,r,void 0,{...o,count:1}),signal:o?.signal})]),u="FeatureCollection"===a.type&&a.features[0]?.geometry;if(u){let e;switch(i=p.Mk.fromJSON((0,f.q9)(u.type)),u.type){case"Point":e=u.coordinates;break;case"LineString":case"MultiPoint":e=u.coordinates[0];break;case"MultiLineString":case"Polygon":e=u.coordinates[0][0];break;case"MultiPolygon":e=u.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(l.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),o=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===o&&(s=!0)}}return{geometryType:i,swapXY:s}}async function N(e,t,r){return function(e,t){const{name:r}=z(e),n=U(t);q(n);const s=(0,i.sE)((0,d.H)(n.firstElementChild,{element:e=>e}),(e=>e.getAttribute("name")===r));if(null!=s){const e=s.getAttribute("type"),t=e?(0,i.sE)((0,d.H)(n.firstElementChild,{complexType:e=>e}),(t=>t.getAttribute("name")===z(e).name)):(0,i.sE)((0,d.H)(s,{complexType:e=>e}),(()=>!0));if(t)return function(e){const t=[],r=[];let n;const i=(0,d.H)(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const s of i){const i=s.getAttribute("name");if(!i)continue;let a,l;if(s.hasAttribute("type")?a=z(s.getAttribute("type")).name:(0,d.h)(s,{simpleType:{restriction:e=>(a=z(e.getAttribute("base")).name,{maxLength:e=>{l=+e.getAttribute("value")}})}}),!a)continue;const u="true"===s.getAttribute("nillable");let c=!1;switch(a.toLowerCase()){case"integer":case"nonpositiveinteger":case"negativeinteger":case"long":case"int":case"short":case"byte":case"nonnegativeinteger":case"unsignedlong":case"unsignedint":case"unsignedshort":case"unsignedbyte":case"positiveinteger":r.push(new m.Z({name:i,alias:i,type:"integer",nullable:u,length:(0,h.ZR)("integer")}));break;case"float":case"double":case"decimal":r.push(new m.Z({name:i,alias:i,type:"double",nullable:u,length:(0,h.ZR)("double")}));break;case"boolean":case"string":case"gyearmonth":case"gyear":case"gmonthday":case"gday":case"gmonth":case"anyuri":case"qname":case"notation":case"normalizedstring":case"token":case"language":case"idrefs":case"entities":case"nmtoken":case"nmtokens":case"name":case"ncname":case"id":case"idref":case"entity":case"duration":case"time":r.push(new m.Z({name:i,alias:i,type:"string",nullable:u,length:l??(0,h.ZR)("string")}));break;case"datetime":case"date":r.push(new m.Z({name:i,alias:i,type:"date",nullable:u,length:l??(0,h.ZR)("date")}));break;case"pointpropertytype":n="point",c=!0;break;case"multipointpropertytype":n="multipoint",c=!0;break;case"curvepropertytype":case"multicurvepropertytype":case"multilinestringpropertytype":n="polyline",c=!0;break;case"surfacepropertytype":case"multisurfacepropertytype":case"multipolygonpropertytype":n="polygon",c=!0;break;case"geometrypropertytype":case"multigeometrypropertytype":c=!0,t.push(new o.Z(x,`geometry type '${a}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:t.push(new o.Z(I,`Unknown field type '${a}'`,{type:(new XMLSerializer).serializeToString(e)}))}c&&r.push(new m.Z({name:i,alias:i,type:"geometry",nullable:u}))}for(const e of r)if("integer"===e.type&&!e.nullable&&Z.has(e.name.toLowerCase())){e.type="oid";break}return{geometryType:n,fields:r,errors:t}}(t)}throw new o.Z(S,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(n)})}(t,(await(0,n.Z)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:b,TYPENAME:t,TYPENAMES:t,...r?.customParameters},signal:r?.signal})).data)}const Z=new Set(["objectid","fid"]);async function L(e,t,r,i,s){let{data:a}=await(0,n.Z)(e,{responseType:"text",query:G(t,r,i,s),signal:s?.signal});a=a.replaceAll(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{return JSON.parse(a)}catch(e){throw new o.Z("wfs-layer:malformed-json","Error while parsing the response",{response:a,error:e})}}function G(e,t,r,n){const o="number"==typeof t?t:t.wkid;return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:b,TYPENAMES:e,OUTPUTFORMAT:r,SRSNAME:"EPSG:"+o,STARTINDEX:n?.startIndex,COUNT:n?.count,...n?.customParameters}}async function D(e,t,r){const o=await(0,n.Z)(e,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:b,TYPENAMES:t,RESULTTYPE:"hits",...r?.customParameters},signal:r?.signal}),i=/numberMatched=["'](?<numberMatched>\d+)["']/gi.exec(o.data);if(i?.groups)return+i.groups.numberMatched}function U(e){return(new DOMParser).parseFromString(e.trim(),"text/xml")}function z(e){const[t,r]=e.split(":");return{prefix:r?t:"",name:r??t}}function q(e){let t="",r="";if((0,d.h)(e.firstElementChild,{Exception:e=>(t=e.getAttribute("exceptionCode"),{ExceptionText:e=>{r=e.textContent}})}),t)throw new o.Z(`wfs-layer:${t}`,r)}function $(e,t,r){const n={wkid:t.defaultSpatialReference},o=null!=r?.wkid?{wkid:r.wkid}:n;return{spatialReference:o,getFeatureSpatialReference:(0,y.B5)(e)||o.wkid&&t.supportedSpatialReferences.includes(o.wkid)?{wkid:o.wkid}:{wkid:t.defaultSpatialReference}}}},66261:function(e,t,r){function n(e,t){if(e&&t)for(const r of e.children)if(r.localName in t){const e=t[r.localName];if("function"==typeof e){const t=e(r);t&&n(r,t)}else n(r,e)}}function*o(e,t){for(const r of e.children)if(r.localName in t){const e=t[r.localName];"function"==typeof e?yield e(r):yield*o(r,e)}}r.d(t,{H:function(){return o},h:function(){return n}})},72917:function(e,t,r){r.d(t,{Z:function(){return c}});var n,o=r(73440),i=r(41773),s=r(63255),a=r(17155),l=(r(61432),r(96711),r(83850),r(48023));const u=new i.X({asc:"ascending",desc:"descending"});let c=class extends s.Z{static{n=this}constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new n({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,o._)([(0,a.Cb)({type:String,json:{write:!0}})],c.prototype,"field",void 0),(0,o._)([(0,a.Cb)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"valueExpression",void 0),(0,o._)([(0,a.Cb)({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],c.prototype,"order",void 0),c=n=(0,o._)([(0,l.j)("esri.layers.support.OrderByInfo")],c)},83918:function(e,t,r){r.d(t,{Z:function(){return y}});var n=r(73440),o=r(89314),i=r(63255),s=r(17155),a=(r(61432),r(96711),r(83850),r(1194)),l=r(48023),u=r(29884),c=r(85913),p=r(62920),f=r(88097);function d(e,t){return p.T.fromJSON({value:e,unit:t})}let y=class extends(o.Z.ClonableMixin(i.Z)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?c.T.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?d(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?d(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,n._)([(0,s.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],y.prototype,"cumulative",void 0),(0,n._)([(0,s.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"endField",void 0),(0,n._)([(0,s.Cb)({type:c.T,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"fullTimeExtent",void 0),(0,n._)([(0,a.r)("fullTimeExtent",["timeExtent"])],y.prototype,"readFullTimeExtent",null),(0,n._)([(0,u.c)("fullTimeExtent")],y.prototype,"writeFullTimeExtent",null),(0,n._)([(0,s.Cb)({type:Boolean,json:{write:!0}})],y.prototype,"hasLiveData",void 0),(0,n._)([(0,s.Cb)({type:p.T,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"interval",void 0),(0,n._)([(0,a.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],y.prototype,"readInterval",null),(0,n._)([(0,u.c)("interval")],y.prototype,"writeInterval",null),(0,n._)([(0,s.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],y.prototype,"startField",void 0),(0,n._)([(0,s.Cb)((0,f.mi)("timeReference",!0))],y.prototype,"timeZone",void 0),(0,n._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],y.prototype,"trackIdField",void 0),(0,n._)([(0,s.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],y.prototype,"useTime",void 0),(0,n._)([(0,s.Cb)({type:[Date],json:{read:!1}})],y.prototype,"stops",void 0),y=(0,n._)([(0,l.j)("esri.layers.support.TimeInfo")],y)},78279:function(e,t,r){r.d(t,{Ee:function(){return i},Gr:function(){return a},UO:function(){return s}});var n=r(99574),o=r(48797);function i(e,t){return{...t,filterMode:e.mode}}function s(e,t){return l(e,t).next().value??null}function a(e,t,r){const i=function(e){if("manual"===c(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:n}of e.filters)t[0]=Math.max(t[0],p(r)),t[1]=Math.min(t[1],f(n));return t}(e);if(i&&((0,n.nB)(t,i[0])||(0,n.pt)(r,i[1])))return"";const s=Array.from(l(e,t,r)),a=function(e,t,r){if(0===e.length)return!0;const o=p(e.at(0)?.minScale),i=f(e.at(-1)?.maxScale);if((0,n.pt)(o,t)||(0,n.nB)(i,r))return!0;for(let t=0;t<e.length-1;t++){const r=e[t],o=e[t+1];if((0,n.pt)(p(o.minScale),f(r.maxScale)))return!0}return!1}(s,t,r)?"1=1":s.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,o.D3)(e,t)),"");return a&&"1=1"!==a?a:""}function*l(e,t,r){if("manual"===c(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const n of e.filters)u(n.minScale,n.maxScale,t,r)&&(yield n)}}function u(e,t,r,o){return e=p(e),r=p(r),t=f(t),!(!(0,n.W8)(r,e)&&(o??r)>e||(0,n.aR)(t,r)||void 0!==o&&(0,n.W8)(o,e))}function c(e){return"mode"in e?e.mode:e.filterMode}function p(e){return e||Number.POSITIVE_INFINITY}function f(e){return e||0}},13545:function(e,t,r){r.d(t,{v:function(){return l}});var n=r(61432),o=r(96711),i=r(49651),s=r(299),a=r(76554);function l(){return{fields:{type:[i.Z],value:null,set:function(e){if(e&&(0,n.Z)("big-integer-warning-enabled")){const t=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const e=t.map((e=>`'${e.name}'`)).join(", ");o.Z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return s.Z.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e){const r=this.fieldsIndex?.has(t);r||o.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e})}return(0,a.Q0)(this.fieldsIndex,e)}}}}},86462:function(e,t,r){r.d(t,{AJ:function(){return u},If:function(){return f},k0:function(){return l},uI:function(){return p},ul:function(){return a},wx:function(){return d}});var n=r(99574),o=r(96094),i=r(73749),s=r(27583);const a=2.4;function l(e){return(0,o.Wz)(e*a)}function u(e){return(0,o.F2)(e)/a}function c(e,t,r,o){let{color:s,ratio:a}=t,{color:l,ratio:u}=r;if(u===a){const e=1e-6;1===u?a-=e:u+=e}const c=(0,n.uZ)((o-a)/(u-a),0,1);(0,i.l)(e,s.toArray(),l.toArray(),c)}function p(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))),e.length<1)return t;let r=e[0],n=e[0],o=1;const i=(0,s.Ue)();for(let s=0;s<512;s++){const a=(s+.5)/512;for(;a>n.ratio&&o<e.length;)r=n,n=e[o++];c(i,r,n,a),t.set(i,4*s)}return t}function f(e,t,r){const n=Math.sqrt(e**2+t**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2}function d(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},25262:function(e,t,r){r.d(t,{Z:function(){return d}});var n,o=r(73440),i=r(46451),s=r(89314),a=r(28947),l=r(17155),u=(r(61432),r(96711),r(48023));let c=class extends(s.Z.ClonableMixin(i.Z)){static{n=this}constructor(e){super(e),this.stackedAttributes=null}cloneShallow(){return new n({...super.cloneShallow(),stackedAttributes:this.stackedAttributes})}toJSON(){return{...super.toJSON(),stackedAttributes:(0,a.d9)(this.stackedAttributes)}}};(0,o._)([(0,l.Cb)()],c.prototype,"stackedAttributes",void 0),c=n=(0,o._)([(0,u.j)("esri.AttributeBinsGraphic")],c);r(83850);var p=r(1194),f=r(13878);let d=class extends(s.Z.ClonableMixin(f.Z)){constructor(){super(...arguments),this.features=[]}readFeatures(e,t){return this.readFeaturesWithClass(e,t,c)}};(0,o._)([(0,l.Cb)({type:[c],json:{write:!0}})],d.prototype,"features",void 0),(0,o._)([(0,p.r)("features")],d.prototype,"readFeatures",null),d=(0,o._)([(0,u.j)("esri.rest.support.AttributeBinsFeatureSet")],d)},13878:function(e,t,r){r.d(t,{Z:function(){return b}});var n,o=r(73440),i=r(46451),s=r(41773),a=r(63255),l=r(28947),u=r(17155),c=(r(61432),r(96711),r(1194)),p=r(48023),f=r(29884),d=r(45213),y=r(90756),m=r(98842),h=r(49651);const g=new s.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let b=n=class extends a.Z{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,i.Z)}writeGeometryType(e,t,r,n){if(e)return void g.write(e,t,r,n);const{features:o}=this;if(o)for(const e of o)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,n)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=(0,y.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=d.Z.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new n(this.cloneProperties())}cloneProperties(){return(0,l.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const t=e?.[r];n.geometry=t?.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,o]}=e,i=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-n)/t)),(e=>Math.round((o-e)/r)));for(let e=0,t=i.length;e<t;e++)s?.(i[e].geometry)||(i.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,o],scale:[i,s]}=r;let a=null,l=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;a=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;l=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*i+n),(e=>o-e*s),a,l);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}readFeaturesWithClass(e,t,r){const n=d.Z.fromJSON(t.spatialReference),o=[];for(let t=0;t<e.length;t++){const i=e[t],s=r.fromJSON(i),a=i.geometry?.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=n);const l=i.aggregateGeometries,u=s.aggregateGeometries;if(l&&null!=u)for(const e in u){const t=u[e],r=l[e]?.spatialReference;null==t||r||(t.spatialReference=n)}o.push(s)}return o}_quantizePoints(e,t,r){let n,o;const i=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=r(a[1]);e===n&&s===o||(i.push([e-n,s-o]),n=e,o=s)}else n=t(a[0]),o=r(a[1]),i.push([n,o])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const n=(0,y.oU)(e)?e.rings:e.paths,o=[];for(let e=0,i=n.length;e<i;e++){const i=n[e],s=this._quantizePoints(i,t,r);s&&o.push(s)}return o.length>0?((0,y.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?e=>{const n=this._quantizePoints(e.points,t,r);return n&&n.length>0?(e.points=n,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,n,o){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?e=>{const i=(0,y.oU)(e)?e.rings:e.paths;let s,a;for(let e=0,n=i.length;e<n;e++){const n=i[e];for(let e=0,o=n.length;e<o;e++){const o=n[e];e>0?(s+=o[0],a+=o[1]):(s=o[0],a=o[1]),o[0]=t(s),o[1]=r(a)}}if(n&&o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2]),r[3]=o(r[3])}}else if(n)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2])}}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=o(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),o&&null!=e.mmax&&null!=e.mmin&&(e.mmax=o(e.mmax),e.mmin=o(e.mmin))}:"multipoint"===e?e=>{const i=e.points;let s,a;for(let e=0,n=i.length;e<n;e++){const n=i[e];e>0?(s+=n[0],a+=n[1]):(s=n[0],a=n[1]),n[0]=t(s),n[1]=r(a)}if(n&&o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=n(t[2]),t[3]=o(t[3])}else if(n)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=n(t[2])}else if(o)for(let e=0,t=i.length;e<t;e++){const t=i[e];t[2]=o(t[2])}}:null}};(0,o._)([(0,u.Cb)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,o._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"exceededTransferLimit",void 0),(0,o._)([(0,u.Cb)({type:[i.Z],json:{write:!0}})],b.prototype,"features",void 0),(0,o._)([(0,c.r)("features")],b.prototype,"readFeatures",null),(0,o._)([(0,u.Cb)({type:[h.Z],json:{write:!0}})],b.prototype,"fields",void 0),(0,o._)([(0,u.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],b.prototype,"geometryType",void 0),(0,o._)([(0,f.c)("geometryType")],b.prototype,"writeGeometryType",null),(0,o._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasM",void 0),(0,o._)([(0,u.Cb)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],b.prototype,"hasZ",void 0),(0,o._)([(0,u.Cb)({types:m.qM,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,o._)([(0,c.r)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,o._)([(0,u.Cb)({type:d.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,o._)([(0,f.c)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,o._)([(0,u.Cb)({json:{write:!0}})],b.prototype,"transform",void 0),b=n=(0,o._)([(0,p.j)("esri.rest.support.FeatureSet")],b),b.prototype.toJSON.isDefaultToJSON=!0},599:function(e,t,r){r.d(t,{P:function(){return u},d:function(){return f}});var n=r(73440),o=r(41773),i=r(96711),s=r(17155),a=(r(61432),r(83850),r(79775)),l=r(48023);const u=(0,o.w)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),c="percent-of-total",p="field",f=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&p||r&&c||null,t&&r&&i.Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==p&&e!==c||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,n._)([(0,s.Cb)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,n._)([(0,s.Cb)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,n._)([(0,a.J)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,n._)([(0,l.j)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},6298:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(44252);const o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:n.IH.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:n.of.Loop,repeatdelay:0,easing:n.IB.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}}},61421:function(e,t,r){r.d(t,{$Z:function(){return x},BX:function(){return C},Cc:function(){return h},E_:function(){return a},F:function(){return I},FG:function(){return T},H1:function(){return i},J0:function(){return m},JW:function(){return P},Lb:function(){return U},Le:function(){return E},Ml:function(){return Z},On:function(){return w},Qf:function(){return _},RI:function(){return g},TB:function(){return M},Ul:function(){return N},W7:function(){return S},X_:function(){return F},be:function(){return c},e0:function(){return O},gJ:function(){return y},hU:function(){return k},hf:function(){return n},k5:function(){return d},oY:function(){return u},pJ:function(){return b},qQ:function(){return s},wi:function(){return v},yL:function(){return f},yl:function(){return R},zL:function(){return p}});r(6298);function n(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function o(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.slice(n,i);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.slice(n,i)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length){const t=e.slice(n);r.push([t,null,o(t)])}return r}function s(e,t,r){let n="",o=null;for(const r of t){const[t,i,s]=r;if(null!=t&&""!==t)s?o=t:(null!=o&&(n+=o,o=null),n+=t);else{const t=e.readAttribute(i);null!=t&&""!==t&&(null!==o&&(n+=o,o=null),n+=t)}}return l(n,r)}function a(e,t,r,n){let o="",i=null;for(const n of t){const[t,s,a]=n;if(null!=t&&""!==t)a?i=t:(null!=i&&(o+=i,i=null),o+=t);else{let t=s;null!=r&&(t=A(s,r));const n=e.attributes[t];null!=n&&""!==n&&(null!=i&&(o+=i,i=null),o+=n)}}return l(o,n)}function l(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function u(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function c(e){return e.data?.symbol??null}function p(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function d(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const m=(e,t=0)=>null==e||isNaN(e)?t:e,h=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1};function g(){return Promise.all([r.e(27093),r.e(13323)]).then(r.bind(r,69339))}function b(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function v(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function C(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function S(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=S(t);if(null!=e)return e}break;case"CIMTextSymbol":return S(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=x(e);if(null!=t)return t}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function I(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=I(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return I(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function F(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function T(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function _(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const M=e=>e.includes("data:image/svg+xml");function P(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function E(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function R(e,t,r,n,o,i,s=!0){const{infos:a}=i;let l=1,u=0,c=0,p=0,f=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:n,size:o,frameHeight:i,rotateClockWise:d,scaleSymbolsProportionally:y}of a)f=e?1:l,c=G(t,r,u,f,c),p=L(t,r,u,f,p),i&&(y||s)&&(l*=o/i),u=D(n,d,u);const d=G(n,o,u,f,c),y=L(n,o,u,f,p);return{size:e*l,rotation:D(t,r,u),offsetX:d,offsetY:y}}function j(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function k(e){return e?.dashTemplate&&(e.dashTemplate=j(e.dashTemplate)),e}function O(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return O(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return O(e.symbol)}}return"Normal"}function A(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function N(e){return e.map((e=>({...e,propertyName:E(e.propertyName)})))}function Z(e){const t={};for(const r in e){const n=e[r];t[E(r)]=n}return t}function L(e,t,r,n,o){const i=r*Math.PI/180;if(i){const r=Math.cos(i);return(Math.sin(i)*e+r*t)*n+o}return t*n+o}function G(e,t,r,n,o){const i=r*Math.PI/180;return i?(Math.cos(i)*e-Math.sin(i)*t)*n+o:e*n+o}function D(e,t,r){return t?r-e:r+e}function U(e,t){return Math.max(Math.min((e??t)/100,1),0)}},9350:function(e,t,r){r.d(t,{CJ:function(){return u},Rz:function(){return p},js:function(){return f},xA:function(){return l},z3:function(){return c}});r(61432);var n=r(89636),o=r(38096),i=r(19886),s=r(45433),a=r(54914);const l=i.Z.fromJSON(a.I4),u=o.Z.fromJSON(a.ET),c=n.Z.fromJSON(a.lF),p=s.Z.fromJSON(a.qP);function f(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return c}return null}i.Z.fromJSON(a.eG),o.Z.fromJSON(a.wW),n.Z.fromJSON(a.lj)},54914:function(e,t,r){r.d(t,{ET:function(){return s},I4:function(){return i},SQ:function(){return n},X1:function(){return o},eG:function(){return u},lF:function(){return a},lj:function(){return p},qP:function(){return l},wW:function(){return c}});const n=[252,146,31,255],o=[153,153,153,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);