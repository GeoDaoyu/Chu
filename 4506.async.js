"use strict";(self.webpackChunkscene_pro=self.webpackChunkscene_pro||[]).push([[4506],{54229:function(t,e,n){n.d(e,{Z:function(){return g}});var r,o=n(73440),s=n(63255),a=n(17155),i=(n(61432),n(96711),n(83850),n(48023)),l=n(31865),u=n(10934),c=n(18156),p=n(21117),f=n(82846),h=n(86456);let g=class extends s.Z{static{r=this}constructor(t){super(t),this.translation=(0,f.Ue)(),this.rotationAxis=(0,f.nI)(h.up),this.rotationAngle=0,this.scale=(0,f.al)(1,1,1)}get rotation(){return(0,h.uT)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,f.d9)((0,h.ZZ)(t)),this.rotationAngle=(0,h.EU)(t)}get localMatrix(){const t=(0,u.Ue)();return(0,c.yY)(m,(0,h.ZZ)(this.rotation),(0,h.WH)(this.rotation)),(0,l.Iw)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.U_)((0,u.Ue)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,l.I6)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,f.d9)(this.translation),rotationAxis:(0,f.d9)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,f.d9)(this.scale)};return new r(t)}};(0,o._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"translation",void 0),(0,o._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"rotationAxis",void 0),(0,o._)([(0,a.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"rotationAngle",void 0),(0,o._)([(0,a.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],g.prototype,"scale",void 0),(0,o._)([(0,a.Cb)()],g.prototype,"rotation",null),(0,o._)([(0,a.Cb)()],g.prototype,"localMatrix",null),(0,o._)([(0,a.Cb)()],g.prototype,"localMatrixInverse",null),g=r=(0,o._)([(0,i.j)("esri.geometry.support.MeshTransform")],g);const m=(0,p.Ue)()},57513:function(t,e,n){n.d(e,{A:function(){return s},E:function(){return a}});var r=n(60508),o=n(54229);function s(t,e,n=i){return new r.Z({x:t[n.originX],y:t[n.originY],z:t[n.originZ],spatialReference:e})}function a(t,e=i){return new o.Z({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}const i={originX:"originX",originY:"originY",originZ:"originZ",translationX:"translationX",translationY:"translationY",translationZ:"translationZ",scaleX:"scaleX",scaleY:"scaleY",scaleZ:"scaleZ",rotationX:"rotationX",rotationY:"rotationY",rotationZ:"rotationZ",rotationDeg:"rotationDeg"}},81638:function(t,e,n){n.r(e),n.d(e,{assetMapFromAssetMapsJSON:function(){return y},extractMesh:function(){return g},meshFeatureSetFromJSON:function(){return h}});var r=n(46451),o=n(96711),s=n(79577),a=n(71354),i=n(29097),l=n(45213),u=n(27299),c=n(60419),p=n(13878),f=n(57513);function h(t,e,n){const o=n.features;n.features=[],delete n.geometryType;const s=p.Z.fromJSON(n);if(s.geometryType="mesh",!n.assetMaps)return s;const a=y(e,n.assetMaps),i=t.sourceSpatialReference??l.Z.WGS84,u=n.globalIdFieldName,{outFields:c}=t,f=null!=c&&c.length>0?(h=c.includes("*")?null:new Set(c),({attributes:t})=>{if(!t)return{};if(!h)return t;for(const e in t)h.has(e)||delete t[e];return t}):()=>({});var h;for(const t of o){const n=g(t,u,i,e,a);s.features.push(new r.Z({geometry:n,attributes:f(t)}))}return s}function g(t,e,n,r,o){const s=t.attributes[e],l=o.get(s);if(null==l||!t.geometry)return null;const c=(0,f.A)(t.attributes,n,r.transformFieldRoles),p=a.Z.fromJSON(t.geometry);p.spatialReference=n;const h=(0,f.E)(t.attributes,r.transformFieldRoles),g=n.isGeographic?"local":"georeferenced",d=function(t){const e=Array.from(t.files.values()),n=new Array;for(const t of e){if(t.status!==m.COMPLETED)return null;const e=new Array;for(const n of t.parts){if(!n)return null;e.push(new u.LL(n.url,n.hash))}n.push(new u.CP(t.name,t.mimeType,e))}return{type:"service",assets:n}}(l);return d?i.default.createWithExternalSource(c,d,{extent:p,transform:h,vertexSpace:g,unitConversionDisabled:!0}):i.default.createIncomplete(c,{extent:p,transform:h,vertexSpace:g})}var m,d;function y(t,e){const n=new Map;for(const r of e){const e=r.parentGlobalId;if(null==e)continue;const a=r.assetName,i=r.assetType,l=r.assetHash,u=r.assetURL,p=r.conversionStatus,f=r.seqNo,h=(0,c.d1)(i,t.supportedFormats);if(!h){o.Z.getLogger("esri.rest.support.meshFeatureSet").error("mesh-feature-set:unknown-format",`Service returned an asset of type ${i}, but it does not list it as a supported type`);continue}const g=(0,s.s1)(n,e,(()=>({files:new Map})));(0,s.s1)(g.files,a,(()=>({name:a,type:i,mimeType:h,status:b(p),parts:[]}))).parts[f]={hash:l,url:u}}return n}function b(t){switch(t){case"COMPLETED":case"SUBMITTED":return m.COMPLETED;case"INPROGRESS":return m.PENDING;default:return m.FAILED}}(d=m||(m={}))[d.FAILED=0]="FAILED",d[d.PENDING=1]="PENDING",d[d.COMPLETED=2]="COMPLETED"}}]);